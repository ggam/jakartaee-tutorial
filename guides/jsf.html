<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.2">
<title>Jakarta Server Faces</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement when using as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Jakarta Server Faces</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_jakarta_server_faces_technology">1. Jakarta Server Faces Technology</a>
<ul class="sectlevel2">
<li><a href="#_introduction_to_jakarta_server_faces_technology">1.1. Introduction to Jakarta Server Faces Technology</a></li>
<li><a href="#_what_is_a_jakarta_server_faces_application">1.2. What Is a Jakarta Server Faces Application?</a></li>
<li><a href="#_jakarta_server_faces_technology_benefits">1.3. Jakarta Server Faces Technology Benefits</a></li>
<li><a href="#_a_simple_jakarta_server_faces_application">1.4. A Simple Jakarta Server Faces Application</a></li>
<li><a href="#_user_interface_component_model">1.5. User Interface Component Model</a></li>
<li><a href="#_navigation_model">1.6. Navigation Model</a></li>
<li><a href="#_the_lifecycle_of_a_jakarta_server_faces_application">1.7. The Lifecycle of a Jakarta Server Faces Application</a></li>
<li><a href="#_partial_processing_and_partial_rendering">1.8. Partial Processing and Partial Rendering</a></li>
<li><a href="#_further_information_about_jakarta_server_faces_technology">1.9. Further Information about Jakarta Server Faces Technology</a></li>
</ul>
</li>
<li><a href="#_introduction_to_facelets">2. Introduction to Facelets</a>
<ul class="sectlevel2">
<li><a href="#_what_is_facelets">2.1. What Is Facelets?</a></li>
<li><a href="#_the_lifecycle_of_a_facelets_application">2.2. The Lifecycle of a Facelets Application</a></li>
<li><a href="#_developing_a_simple_facelets_application_the_guessnumber_jsf_example_application">2.3. Developing a Simple Facelets Application: The guessnumber-jsf Example Application</a></li>
<li><a href="#_using_facelets_templates">2.4. Using Facelets Templates</a></li>
<li><a href="#_composite_components">2.5. Composite Components</a></li>
<li><a href="#_web_resources">2.6. Web Resources</a></li>
<li><a href="#_relocatable_resources">2.7. Relocatable Resources</a></li>
<li><a href="#_resource_library_contracts">2.8. Resource Library Contracts</a></li>
<li><a href="#_html5_friendly_markup">2.9. HTML5-Friendly Markup</a></li>
</ul>
</li>
<li><a href="#_expression_language">3. Expression Language</a>
<ul class="sectlevel2">
<li><a href="#_overview_of_the_el">3.1. Overview of the EL</a></li>
<li><a href="#_immediate_and_deferred_evaluation_syntax">3.2. Immediate and Deferred Evaluation Syntax</a></li>
<li><a href="#_value_and_method_expressions">3.3. Value and Method Expressions</a></li>
<li><a href="#_operations_on_collection_objects">3.4. Operations on Collection Objects</a></li>
<li><a href="#_operators">3.5. Operators</a></li>
<li><a href="#_reserved_words">3.6. Reserved Words</a></li>
<li><a href="#_examples_of_el_expressions">3.7. Examples of EL Expressions</a></li>
<li><a href="#_further_information_about_the_expression_language">3.8. Further Information about the Expression Language</a></li>
</ul>
</li>
<li><a href="#_using_jakarta_server_faces_technology_in_web_pages">4. Using Jakarta Server Faces Technology in Web Pages</a>
<ul class="sectlevel2">
<li><a href="#_setting_up_a_page">4.1. Setting Up a Page</a></li>
<li><a href="#_adding_components_to_a_page_using_html_tag_library_tags">4.2. Adding Components to a Page Using HTML Tag Library Tags</a></li>
<li><a href="#_using_core_tags">4.3. Using Core Tags</a></li>
</ul>
</li>
<li><a href="#_using_converters_listeners_and_validators">5. Using Converters, Listeners, and Validators</a>
<ul class="sectlevel2">
<li><a href="#_using_the_standard_converters">5.1. Using the Standard Converters</a></li>
<li><a href="#_registering_listeners_on_components">5.2. Registering Listeners on Components</a></li>
<li><a href="#_using_the_standard_validators">5.3. Using the Standard Validators</a></li>
<li><a href="#_referencing_a_managed_bean_method">5.4. Referencing a Managed Bean Method</a></li>
</ul>
</li>
<li><a href="#_developing_with_jakarta_server_faces_technology">6. Developing with Jakarta Server Faces Technology</a>
<ul class="sectlevel2">
<li><a href="#_managed_beans_in_jakarta_server_faces_technology">6.1. Managed Beans in Jakarta Server Faces Technology</a></li>
<li><a href="#_writing_bean_properties">6.2. Writing Bean Properties</a></li>
<li><a href="#_writing_managed_bean_methods">6.3. Writing Managed Bean Methods</a></li>
</ul>
</li>
<li><a href="#_using_ajax_with_jakarta_server_faces_technology">7. Using Ajax with Jakarta Server Faces Technology</a>
<ul class="sectlevel2">
<li><a href="#_overview_of_ajax">7.1. Overview of Ajax</a></li>
<li><a href="#_using_ajax_functionality_with_jakarta_server_faces_technology">7.2. Using Ajax Functionality with Jakarta Server Faces Technology</a></li>
<li><a href="#_using_ajax_with_facelets">7.3. Using Ajax with Facelets</a></li>
<li><a href="#_sending_an_ajax_request">7.4. Sending an Ajax Request</a></li>
<li><a href="#_monitoring_events_on_the_client">7.5. Monitoring Events on the Client</a></li>
<li><a href="#_handling_errors">7.6. Handling Errors</a></li>
<li><a href="#_receiving_an_ajax_response">7.7. Receiving an Ajax Response</a></li>
<li><a href="#_ajax_request_lifecycle">7.8. Ajax Request Lifecycle</a></li>
<li><a href="#_grouping_of_components">7.9. Grouping of Components</a></li>
<li><a href="#_loading_javascript_as_a_resource">7.10. Loading JavaScript as a Resource</a></li>
<li><a href="#_the_ajaxguessnumber_example_application">7.11. The ajaxguessnumber Example Application</a></li>
<li><a href="#_further_information_about_ajax_in_jakarta_server_faces_technology">7.12. Further Information about Ajax in Jakarta Server Faces Technology</a></li>
</ul>
</li>
<li><a href="#_composite_components_advanced_topics_and_an_example">8. Composite Components: Advanced Topics and an Example</a>
<ul class="sectlevel2">
<li><a href="#_attributes_of_a_composite_component">8.1. Attributes of a Composite Component</a></li>
<li><a href="#_invoking_a_managed_bean">8.2. Invoking a Managed Bean</a></li>
<li><a href="#_validating_composite_component_values">8.3. Validating Composite Component Values</a></li>
<li><a href="#_the_compositecomponentexample_example_application">8.4. The compositecomponentexample Example Application</a></li>
</ul>
</li>
<li><a href="#_creating_custom_ui_components_and_other_custom_objects">9. Creating Custom UI Components and Other Custom Objects</a>
<ul class="sectlevel2">
<li><a href="#_introduction_to_creating_custom_components">9.1. Introduction to Creating Custom Components</a></li>
<li><a href="#_determining_whether_you_need_a_custom_component_or_renderer">9.2. Determining Whether You Need a Custom Component or Renderer</a></li>
<li><a href="#_understanding_the_image_map_example">9.3. Understanding the Image Map Example</a></li>
<li><a href="#_steps_for_creating_a_custom_component">9.4. Steps for Creating a Custom Component</a></li>
<li><a href="#_creating_custom_component_classes">9.5. Creating Custom Component Classes</a></li>
<li><a href="#_delegating_rendering_to_a_renderer">9.6. Delegating Rendering to a Renderer</a></li>
<li><a href="#_implementing_an_event_listener">9.7. Implementing an Event Listener</a></li>
<li><a href="#_handling_events_for_custom_components">9.8. Handling Events for Custom Components</a></li>
<li><a href="#_defining_the_custom_component_tag_in_a_tag_library_descriptor">9.9. Defining the Custom Component Tag in a Tag Library Descriptor</a></li>
<li><a href="#_using_a_custom_component">9.10. Using a Custom Component</a></li>
<li><a href="#_creating_and_using_a_custom_converter">9.11. Creating and Using a Custom Converter</a></li>
<li><a href="#_creating_and_using_a_custom_validator">9.12. Creating and Using a Custom Validator</a></li>
<li><a href="#_binding_component_values_and_instances_to_managed_bean_properties">9.13. Binding Component Values and Instances to Managed Bean Properties</a></li>
<li><a href="#_binding_converters_listeners_and_validators_to_managed_bean_properties">9.14. Binding Converters, Listeners, and Validators to Managed Bean Properties</a></li>
</ul>
</li>
<li><a href="#_configuring_jakarta_server_faces_applications">10. Configuring Jakarta Server Faces Applications</a>
<ul class="sectlevel2">
<li><a href="#_introduction_to_configuring_jakarta_server_faces_applications">10.1. Introduction to Configuring Jakarta Server Faces Applications</a></li>
<li><a href="#_using_annotations_to_configure_managed_beans">10.2. Using Annotations to Configure Managed Beans</a></li>
<li><a href="#_application_configuration_resource_file">10.3. Application Configuration Resource File</a></li>
<li><a href="#_using_faces_flows">10.4. Using Faces Flows</a></li>
<li><a href="#_configuring_managed_beans">10.5. Configuring Managed Beans</a></li>
<li><a href="#_registering_application_messages">10.6. Registering Application Messages</a></li>
<li><a href="#_using_default_validators">10.7. Using Default Validators</a></li>
<li><a href="#_registering_a_custom_validator">10.8. Registering a Custom Validator</a></li>
<li><a href="#_registering_a_custom_converter">10.9. Registering a Custom Converter</a></li>
<li><a href="#_configuring_navigation_rules">10.10. Configuring Navigation Rules</a></li>
<li><a href="#_registering_a_custom_renderer_with_a_render_kit">10.11. Registering a Custom Renderer with a Render Kit</a></li>
<li><a href="#_registering_a_custom_component">10.12. Registering a Custom Component</a></li>
<li><a href="#_basic_requirements_of_a_jakarta_server_faces_application">10.13. Basic Requirements of a Jakarta Server Faces Application</a></li>
</ul>
</li>
<li><a href="#_using_websockets_with_jakarta_server_faces_technology">11. Using WebSockets with Jakarta Server Faces Technology</a>
<ul class="sectlevel2">
<li><a href="#about-websockets-in-jsf">11.1. About WebSockets in JSF</a></li>
<li><a href="#configuring-websockets">11.2. Configuring WebSockets</a></li>
<li><a href="#using-the-fwebsocket-tag">11.3. Using the f:websocket Tag</a></li>
<li><a href="#websocket-scopes-and-users">11.4. WebSocket Scopes and Users</a></li>
<li><a href="#conditionally-connecting-websockets">11.5. Conditionally Connecting WebSockets</a></li>
<li><a href="#websocket-security-considerations">11.6. WebSocket Security Considerations</a></li>
<li><a href="#using-ajax-with-websockets">11.7. Using Ajax With WebSockets</a></li>
</ul>
</li>
<li><a href="#_internationalizing_and_localizing_web_applications">12. Internationalizing and Localizing Web Applications</a>
<ul class="sectlevel2">
<li><a href="#_java_platform_localization_classes">12.1. Java Platform Localization Classes</a></li>
<li><a href="#_providing_localized_messages_and_labels">12.2. Providing Localized Messages and Labels</a></li>
<li><a href="#_date_and_number_formatting">12.3. Date and Number Formatting</a></li>
<li><a href="#_character_sets_and_encodings">12.4. Character Sets and Encodings</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_jakarta_server_faces_technology">1. Jakarta Server Faces Technology</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="BNAPH"></a><a id="javaserver-faces-technology"></a></p>
</div>
<div class="paragraph">
<p>Jakarta Server Faces technology is a server-side component framework for
building Java technology–based web applications.</p>
</div>
<div class="paragraph">
<p><a id="A1073698"></a><a id="introduction-to-javaserver-faces-technology"></a></p>
</div>
<div class="sect2">
<h3 id="_introduction_to_jakarta_server_faces_technology">1.1. Introduction to Jakarta Server Faces Technology</h3>
<div class="paragraph">
<p>Jakarta Server Faces technology consists of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An API for representing components and managing their state; handling
events, server-side validation, and data conversion; defining page
navigation; supporting internationalization and accessibility; and
providing extensibility for all these features</p>
</li>
<li>
<p>Tag libraries for adding components to web pages and for connecting
components to server-side objects</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Jakarta Server Faces technology provides a well-defined programming model
and various tag libraries. The tag libraries contain tag handlers that
implement the component tags. These features significantly ease the
burden of building and maintaining web applications with server-side
user interfaces (UIs). With minimal effort, you can complete the
following tasks.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a web page.</p>
</li>
<li>
<p>Drop components onto a web page by adding component tags.</p>
</li>
<li>
<p>Bind components on a page to server-side data.</p>
</li>
<li>
<p>Wire component-generated events to server-side application code.</p>
</li>
<li>
<p>Save and restore application state beyond the life of server requests.</p>
</li>
<li>
<p>Reuse and extend components through customization.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This chapter provides an overview of Jakarta Server Faces technology. After
explaining what a Jakarta Server Faces application is and reviewing some of
the primary benefits of using Jakarta Server Faces technology, this chapter
describes the process of creating a simple Jakarta Server Faces application.
This chapter also introduces the Jakarta Server Faces lifecycle by
describing the example Jakarta Server Faces application and its progression
through the lifecycle stages.</p>
</div>
<div class="paragraph">
<p><a id="BNAPK"></a><a id="what-is-a-javaserver-faces-application"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_what_is_a_jakarta_server_faces_application">1.2. What Is a Jakarta Server Faces Application?</h3>
<div class="paragraph">
<p>The functionality provided by a Jakarta Server Faces application is similar
to that of any other Java web application. A typical Jakarta Server Faces
application includes the following parts.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A set of web pages in which components are laid out.</p>
</li>
<li>
<p>A set of tags to add components to the web page.</p>
</li>
<li>
<p>A set of managed beans, which are lightweight, container-managed
objects (POJOs). In a Jakarta Server Faces application, managed beans serve
as backing beans, which define properties and functions for UI
components on a page.</p>
</li>
<li>
<p>A web deployment descriptor (<code>web.xml</code> file).</p>
</li>
<li>
<p>Optionally, one or more application configuration resource files, such
as a <code>faces-config.xml</code> file, which can be used to define page
navigation rules and configure beans and other custom objects, such as
custom components.</p>
</li>
<li>
<p>Optionally, a set of custom objects, which can include custom
components, validators, converters, or listeners, created by the
application developer.</p>
</li>
<li>
<p>Optionally, a set of custom tags for representing custom objects on
the page.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#BNAPI">Figure 7-1</a> shows the interaction between client and server
in a typical Jakarta Server Faces application. In response to a client
request, a web page is rendered by the web container that implements
Jakarta Server Faces technology.</p>
</div>
<div id="BNAPI" class="paragraph">
<div class="title"><strong>Figure 7-1 Responding to a Client Request for a Jakarta Server Faces Page</strong></div>
<p><span class="image"><img src="../images/jakartaeett_dt_014.png" alt="Diagram that shows a browser accessing the myfacelet.xhtml page using an HTTP Request and the server sending the rendered HTML page using an HTTP Response."></span></p>
</div>
<div class="paragraph">
<p>The web page, <code>myfacelet.xhtml</code>, is built using Jakarta Server Faces
component tags. Component tags are used to add components to the <code>view</code>
(represented by <code>myView</code> in the diagram), which is the server-side
representation of the page. In addition to components, the web page can
also reference objects, such as the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Any event listeners, validators, and converters that are registered on
the components</p>
</li>
<li>
<p>The JavaBeans components that capture the data and process the
application-specific functionality of the components</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On request from the client, the view is rendered as a response.
Rendering is the process whereby, based on the server-side view, the web
container generates output, such as HTML or XHTML, that can be read by
the client, such as a browser.</p>
</div>
<div class="paragraph">
<p><a id="BNAPJ"></a><a id="javaserver-faces-technology-benefits"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_jakarta_server_faces_technology_benefits">1.3. Jakarta Server Faces Technology Benefits</h3>
<div class="paragraph">
<p>One of the greatest advantages of Jakarta Server Faces technology is that it
offers a clean separation between behavior and presentation for web
applications. A Jakarta Server Faces application can map HTTP requests to
component-specific event handling and manage components as stateful
objects on the server. Jakarta Server Faces technology allows you to build
web applications that implement the finer-grained separation of behavior
and presentation that is traditionally offered by client-side UI
architectures.</p>
</div>
<div class="paragraph">
<p>The separation of logic from presentation also allows each member of a
web application development team to focus on a single piece of the
development process and provides a simple programming model to link the
pieces. For example, page authors with no programming expertise can use
Jakarta Server Faces technology tags in a web page to link to server-side
objects without writing any scripts.</p>
</div>
<div class="paragraph">
<p>Another important goal of Jakarta Server Faces technology is to leverage
familiar component and web-tier concepts without limiting you to a
particular scripting technology or markup language. Jakarta Server Faces
technology APIs are layered directly on top of the Servlet API, as shown
in <a href="#GJEPW">Figure 7-2</a>.</p>
</div>
<div id="GJEPW" class="paragraph">
<div class="title"><strong>Figure 7-2 Java Web Application Technologies</strong></div>
<p><span class="image"><img src="../images/jakartaeett_dt_015.png" alt="Diagram of web application technologies. Jakarta Server Pages, the server pages Standard Tag Library, and Jakarta Server Faces rest on Java Servlet technology."></span></p>
</div>
<div class="paragraph">
<p>This layering of APIs enables several important application use cases,
such as using different presentation technologies, creating your own
custom components directly from the component classes, and generating
output for various client devices.</p>
</div>
<div class="paragraph">
<p>Facelets technology, available as part of Jakarta Server Faces technology,
is the preferred presentation technology for building Jakarta Server Faces
technology–based web applications. For more information on Facelets
technology features, see <a href="#GIEPX">Chapter 8,
"Introduction to Facelets"</a>.</p>
</div>
<div class="paragraph">
<p>Facelets technology offers several advantages.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Code can be reused and extended for components through the templating
and composite component features.</p>
</li>
<li>
<p>You can use annotations to automatically register the managed bean as
a resource available for Jakarta Server Faces applications. In addition,
implicit navigation rules allow developers to quickly configure page
navigation (see <a href="#BNAQL">Navigation Model</a> for
details). These features reduce the manual configuration process for
applications.</p>
</li>
<li>
<p>Most important, Jakarta Server Faces technology provides a rich
architecture for managing component state, processing component data,
validating user input, and handling events.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GJAAM"></a><a id="a-simple-javaserver-faces-application"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_a_simple_jakarta_server_faces_application">1.4. A Simple Jakarta Server Faces Application</h3>
<div class="paragraph">
<p>Jakarta Server Faces technology provides an easy and user-friendly process
for creating web applications. Developing a simple Jakarta Server Faces
application typically requires the following tasks, which have already
been described in <a href="#BNADX">A Web Module That Uses
Jakarta Server Faces Technology: The hello1 Example</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creating web pages using component tags</p>
</li>
<li>
<p>Developing managed beans</p>
</li>
<li>
<p>Mapping the <code>FacesServlet</code> instance</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>hello1</code> example includes a managed bean and two Facelets web pages.
When accessed by a client, the first web page asks the user for his or
her name, and the second page responds by providing a greeting.</p>
</div>
<div class="paragraph">
<p>For details on Facelets technology, see
<a href="#GIEPX">Chapter 8, "Introduction to Facelets"</a>. For
details on using EL expressions, see <a href="#GJDDD">Chapter 9,
"Expression Language"</a>. For details on the Jakarta Server Faces programming
model and building web pages using Jakarta Server Faces technology, see
<a href="#BNAQZ">Chapter 10, "Using Jakarta Server Faces Technology
in Web Pages"</a>.</p>
</div>
<div class="paragraph">
<p>Every web application has a lifecycle. Common tasks, such as handling
incoming requests, decoding parameters, modifying and saving state, and
rendering web pages to the browser, are all performed during a web
application lifecycle. Some web application frameworks hide the details
of the lifecycle from you, whereas others require you to manage them
manually.</p>
</div>
<div class="paragraph">
<p>By default, Jakarta Server Faces automatically handles most of the lifecycle
actions for you. However, it also exposes the various stages of the
request lifecycle so that you can modify or perform different actions if
your application requirements warrant it.</p>
</div>
<div class="paragraph">
<p>The lifecycle of a Jakarta Server Faces application starts and ends with the
following activity: The client makes a request for the web page, and the
server responds with the page. The lifecycle consists of two main
phases: Execute and Render.</p>
</div>
<div class="paragraph">
<p>During the Execute phase, several actions can take place.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The application view is built or restored.</p>
</li>
<li>
<p>The request parameter values are applied.</p>
</li>
<li>
<p>Conversions and validations are performed for component values.</p>
</li>
<li>
<p>Managed beans are updated with component values.</p>
</li>
<li>
<p>Application logic is invoked.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For a first (initial) request, only the view is built. For subsequent
(postback) requests, some or all of the other actions can take place.</p>
</div>
<div class="paragraph">
<p>In the Render phase, the requested view is rendered as a response to the
client. Rendering is typically the process of generating output, such as
HTML or XHTML, that can be read by the client, usually a browser.</p>
</div>
<div class="paragraph">
<p>The following short description of the example Jakarta Server Faces
application passing through its lifecycle summarizes the activity that
takes place behind the scenes.</p>
</div>
<div class="paragraph">
<p>The <code>hello1</code> example application goes through the following stages when
it is deployed on GlassFish Server.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>When the <code>hello1</code> application is built and deployed on GlassFish
Server, the application is in an uninitiated state.</p>
</li>
<li>
<p>When a client makes an initial request for the <code>index.xhtml</code> web
page, the <code>hello1</code> Facelets application is compiled.</p>
</li>
<li>
<p>The compiled Facelets application is executed, and a new component
tree is constructed for the <code>hello1</code> application and placed in a
<code>FacesContext</code>.</p>
</li>
<li>
<p>The component tree is populated with the component and the managed
bean property associated with it, represented by the EL expression
<code>hello.name</code>.</p>
</li>
<li>
<p>A new view is built, based on the component tree.</p>
</li>
<li>
<p>The view is rendered to the requesting client as a response.</p>
</li>
<li>
<p>The component tree is destroyed automatically.</p>
</li>
<li>
<p>On subsequent (postback) requests, the component tree is rebuilt,
and the saved state is applied.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For full details on the lifecycle, see <a href="#BNAQQ">The
Lifecycle of a Jakarta Server Faces Application</a>.</p>
</div>
<div class="paragraph">
<p><a id="BNAQD"></a><a id="user-interface-component-model"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_user_interface_component_model">1.5. User Interface Component Model</h3>
<div class="paragraph">
<p>In addition to the lifecycle description, an overview of Jakarta Server
Faces architecture provides better understanding of the technology.</p>
</div>
<div class="paragraph">
<p>Jakarta Server Faces components are the building blocks of a Jakarta Server
Faces view. A component can be a user interface (UI) component or a
non-UI component.</p>
</div>
<div class="paragraph">
<p>Jakarta Server Faces UI components are configurable, reusable elements that
compose the user interfaces of Jakarta Server Faces applications. A
component can be simple, such as a button, or can be compound, such as a
table composed of multiple components.</p>
</div>
<div class="paragraph">
<p>Jakarta Server Faces technology provides a rich, flexible component
architecture that includes the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A set of <code>javax.faces.component.UIComponent</code> classes for specifying
the state and behavior of UI components</p>
</li>
<li>
<p>A rendering model that defines how to render the components in various
ways</p>
</li>
<li>
<p>A conversion model that defines how to register data converters onto a
component</p>
</li>
<li>
<p>An event and listener model that defines how to handle component
events</p>
</li>
<li>
<p>A validation model that defines how to register validators onto a
component</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This section briefly describes each of these pieces of the component
architecture.</p>
</div>
<div class="paragraph">
<p><a id="BNAQE"></a><a id="user-interface-component-classes"></a></p>
</div>
<div class="sect3">
<h4 id="_user_interface_component_classes">1.5.1. User Interface Component Classes</h4>
<div class="paragraph">
<p>Jakarta Server Faces technology provides a set of UI component classes and
associated behavioral interfaces that specify all the UI component
functionality, such as holding component state, maintaining a reference
to objects, and driving event handling and rendering for a set of
standard components.</p>
</div>
<div class="paragraph">
<p>The component classes are completely extensible, allowing component
writers to create their own custom components. See
<a href="#BNAVG">Chapter 15, "Creating Custom UI Components and
Other Custom Objects"</a> for more information.</p>
</div>
<div class="paragraph">
<p>The abstract base class for all components is
<code>javax.faces.component.UIComponent</code>. Jakarta Server Faces UI component
classes extend the <code>UIComponentBase</code> class (a subclass of
<code>UIComponent</code>), which defines the default state and behavior of a
component. The following set of component classes is included with
Jakarta Server Faces technology.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>UIColumn</code>: Represents a single column of data in a <code>UIData</code>
component.</p>
</li>
<li>
<p><code>UICommand</code>: Represents a control that fires actions when activated.</p>
</li>
<li>
<p><code>UIData</code>: Represents a data binding to a collection of data
represented by a <code>javax.faces.model.DataModel</code> instance.</p>
</li>
<li>
<p><code>UIForm</code>: Represents an input form to be presented to the user. Its
child components represent (among other things) the input fields to be
included when the form is submitted. This component is analogous to the
<code>form</code> tag in HTML.</p>
</li>
<li>
<p><code>UIGraphic</code>: Displays an image.</p>
</li>
<li>
<p><code>UIInput</code>: Takes data input from a user. This class is a subclass of
<code>UIOutput</code>.</p>
</li>
<li>
<p><code>UIMessage</code>: Displays a localized error message.</p>
</li>
<li>
<p><code>UIMessages</code>: Displays a set of localized error messages.</p>
</li>
<li>
<p><code>UIOutcomeTarget</code>: Displays a link in the form of a link or a button.</p>
</li>
<li>
<p><code>UIOutput</code>: Displays data output on a page.</p>
</li>
<li>
<p><code>UIPanel</code>: Manages the layout of its child components.</p>
</li>
<li>
<p><code>UIParameter</code>: Represents substitution parameters.</p>
</li>
<li>
<p><code>UISelectBoolean</code>: Allows a user to set a <code>boolean</code> value on a control
by selecting or deselecting it. This class is a subclass of the
<code>UIInput</code> class.</p>
</li>
<li>
<p><code>UISelectItem</code>: Represents a single item in a set of items.</p>
</li>
<li>
<p><code>UISelectItems</code>: Represents an entire set of items.</p>
</li>
<li>
<p><code>UISelectMany</code>: Allows a user to select multiple items from a group of
items. This class is a subclass of the <code>UIInput</code> class.</p>
</li>
<li>
<p><code>UISelectOne</code>: Allows a user to select one item from a group of items.
This class is a subclass of the <code>UIInput</code> class.</p>
</li>
<li>
<p><code>UIViewParameter</code>: Represents the query parameters in a request. This
class is a subclass of the <code>UIInput</code> class.</p>
</li>
<li>
<p><code>UIViewRoot</code>: Represents the root of the component tree.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition to extending <code>UIComponentBase</code>, the component classes also
implement one or more behavioral interfaces, each of which defines
certain behavior for a set of components whose classes implement the
interface.</p>
</div>
<div class="paragraph">
<p>These behavioral interfaces, all defined in the <code>javax.faces.component</code>
package unless otherwise stated, are as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ActionSource</code>: Indicates that the component can fire an action event.
This interface is intended for use with components based on Jakarta Server
Faces technology 1.1_01 and earlier versions. This interface is
deprecated in Jakarta Server Faces 2.</p>
</li>
<li>
<p><code>ActionSource2</code>: Extends <code>ActionSource</code> and therefore provides the
same functionality. However, it allows components to use the Expression
Language (EL) when they are referencing methods that handle action
events.</p>
</li>
<li>
<p><code>EditableValueHolder</code>: Extends <code>ValueHolder</code> and specifies additional
features for editable components, such as validation and emitting
value-change events.</p>
</li>
<li>
<p><code>NamingContainer</code>: Mandates that each component rooted at this
component have a unique ID.</p>
</li>
<li>
<p><code>StateHolder</code>: Denotes that a component has state that must be saved
between requests.</p>
</li>
<li>
<p><code>ValueHolder</code>: Indicates that the component maintains a local value as
well as the option of accessing data in the model tier.</p>
</li>
<li>
<p><code>javax.faces.event.SystemEventListenerHolder</code>: Maintains a list of
<code>javax.faces.event.SystemEventListener</code> instances for each type of
<code>javax.faces.event.SystemEvent</code> defined by that class.</p>
</li>
<li>
<p><code>javax.faces.component.behavior.ClientBehaviorHolder</code>: Adds the
ability to attach <code>javax.faces.component.behavior.ClientBehavior</code>
instances, such as a reusable script.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>UICommand</code> implements <code>ActionSource2</code> and <code>StateHolder</code>. <code>UIOutput</code> and
component classes that extend <code>UIOutput</code> implement <code>StateHolder</code> and
<code>ValueHolder</code>. <code>UIInput</code> and component classes that extend <code>UIInput</code>
implement <code>EditableValueHolder</code>, <code>StateHolder</code>, and <code>ValueHolder</code>.
<code>UIComponentBase</code> implements <code>StateHolder</code>.</p>
</div>
<div class="paragraph">
<p>Only component writers will need to use the component classes and
behavioral interfaces directly. Page authors and application developers
will use a standard component by including a tag that represents it on a
page. Most of the components can be rendered in different ways on a
page. For example, a <code>UICommand</code> component can be rendered as a button
or a link.</p>
</div>
<div class="paragraph">
<p>The next section explains how the rendering model works and how page
authors can choose to render the components by selecting the appropriate
tags.</p>
</div>
<div class="paragraph">
<p><a id="BNAQF"></a><a id="component-rendering-model"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_component_rendering_model">1.5.2. Component Rendering Model</h4>
<div class="paragraph">
<p>The Jakarta Server Faces component architecture is designed such that the
functionality of the components is defined by the component classes,
whereas the component rendering can be defined by a separate renderer
class. This design has several benefits, including the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Component writers can define the behavior of a component once but
create multiple renderers, each of which defines a different way to
render the component to the same client or to different clients.</p>
</li>
<li>
<p>Page authors and application developers can change the appearance of a
component on the page by selecting the tag that represents the
appropriate combination of component and renderer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A render kit defines how component classes map to component tags that
are appropriate for a particular client. The Jakarta Server Faces
implementation includes a standard HTML render kit for rendering to an
HTML client.</p>
</div>
<div class="paragraph">
<p>The render kit defines a set of <code>javax.faces.render.Renderer</code> classes
for each component that it supports. Each <code>Renderer</code> class defines a
different way to render the particular component to the output defined
by the render kit. For example, a <code>UISelectOne</code> component has three
different renderers. One of them renders the component as a group of
options. Another renders the component as a combo box. The third one
renders the component as a list box. Similarly, a <code>UICommand</code> component
can be rendered as a button or a link, using the <code>h:commandButton</code> or
<code>h:commandLink</code> tag. The <code>command</code> part of each tag corresponds to the
<code>UICommand</code> class, specifying the functionality, which is to fire an
action. The <code>Button</code> or <code>Link</code> part of each tag corresponds to a
separate <code>Renderer</code> class that defines how the component appears on the
page.</p>
</div>
<div class="paragraph">
<p>Each custom tag defined in the standard HTML render kit is composed of
the component functionality (defined in the <code>UIComponent</code> class) and the
rendering attributes (defined by the <code>Renderer</code> class).</p>
</div>
<div class="paragraph">
<p>The section <a href="#BNARF">Adding Components to a Page Using
HTML Tag Library Tags</a> lists all supported component tags and
illustrates how to use the tags in an example.</p>
</div>
<div class="paragraph">
<p>The Jakarta Server Faces implementation provides a custom tag library for
rendering components in HTML.</p>
</div>
<div class="paragraph">
<p><a id="BNAQI"></a><a id="conversion-model"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_conversion_model">1.5.3. Conversion Model</h4>
<div class="paragraph">
<p>A Jakarta Server Faces application can optionally associate a component with
server-side object data. This object is a JavaBeans component, such as a
managed bean. An application gets and sets the object data for a
component by calling the appropriate object properties for that
component.</p>
</div>
<div class="paragraph">
<p>When a component is bound to an object, the application has two views of
the component&#8217;s data.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The model view, in which data is represented as data types, such as
<code>int</code> or <code>long</code>.</p>
</li>
<li>
<p>The presentation view, in which data is represented in a manner that
can be read or modified by the user. For example, a <code>java.util.Date</code>
might be represented as a text string in the format <code>mm/dd/yy</code> or as a
set of three text strings.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Jakarta Server Faces implementation automatically converts component
data between these two views when the bean property associated with the
component is of one of the types supported by the component&#8217;s data. For
example, if a <code>UISelectBoolean</code> component is associated with a bean
property of type <code>java.lang.Boolean</code>, the Jakarta Server Faces
implementation will automatically convert the component&#8217;s data from
<code>String</code> to <code>Boolean</code>. In addition, some component data must be bound to
properties of a particular type. For example, a <code>UISelectBoolean</code>
component must be bound to a property of type <code>boolean</code> or
<code>java.lang.Boolean</code>.</p>
</div>
<div class="paragraph">
<p>Sometimes you might want to convert a component&#8217;s data to a type other
than a standard type, or you might want to convert the format of the
data. To facilitate this, Jakarta Server Faces technology allows you to
register a <code>javax.faces.convert.Converter</code> implementation on <code>UIOutput</code>
components and components whose classes subclass <code>UIOutput</code>. If you
register the <code>Converter</code> implementation on a component, the <code>Converter</code>
implementation converts the component&#8217;s data between the two views.</p>
</div>
<div class="paragraph">
<p>You can either use the standard converters supplied with the Jakarta Server
Faces implementation or create your own custom converter. Custom
converter creation is covered in <a href="#BNAVG">Chapter 15,
"Creating Custom UI Components and Other Custom Objects"</a>.</p>
</div>
<div class="paragraph">
<p><a id="GIREH"></a><a id="event-and-listener-model"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_event_and_listener_model">1.5.4. Event and Listener Model</h4>
<div class="paragraph">
<p>The Jakarta Server Faces event and listener model is similar to the
JavaBeans event model in that it has strongly typed event classes and
listener interfaces that an application can use to handle events
generated by components.</p>
</div>
<div class="paragraph">
<p>The Jakarta Server Faces specification defines three types of events:
application events, system events, and data-model events.</p>
</div>
<div class="paragraph">
<p>Application events are tied to a particular application and are
generated by a <code>UIComponent</code>. They represent the standard events
available in previous versions of Jakarta Server Faces technology.</p>
</div>
<div class="paragraph">
<p>An event object identifies the component that generated the event and
stores information about the event. To be notified of an event, an
application must provide an implementation of the listener class and
must register it on the component that generates the event. When the
user activates a component, such as by clicking a button, an event is
fired. This causes the Jakarta Server Faces implementation to invoke the
listener method that processes the event.</p>
</div>
<div class="paragraph">
<p>Jakarta Server Faces supports two kinds of application events: action events
and value-change events.</p>
</div>
<div class="paragraph">
<p>An action event (class <code>javax.faces.event.ActionEvent</code>) occurs when the
user activates a component that implements <code>ActionSource</code>. These
components include buttons and links.</p>
</div>
<div class="paragraph">
<p>A value-change event (class <code>javax.faces.event.ValueChangeEvent</code>) occurs
when the user changes the value of a component represented by <code>UIInput</code>
or one of its subclasses. An example is selecting a check box, an action
that results in the component&#8217;s value changing to <code>true</code>. The component
types that can generate these types of events are the <code>UIInput</code>,
<code>UISelectOne</code>, <code>UISelectMany</code>, and <code>UISelectBoolean</code> components.
Value-change events are fired only if no validation errors are detected.</p>
</div>
<div class="paragraph">
<p>Depending on the value of the <code>immediate</code> property (see
<a href="#BNARI">The immediate Attribute</a>) of the component
emitting the event, action events can be processed during the Invoke
Application phase or the Apply Request Values phase, and value-change
events can be processed during the Process Validations phase or the
Apply Request Values phase.</p>
</div>
<div class="paragraph">
<p>System events are generated by an <code>Object</code> rather than a <code>UIComponent</code>.
They are generated during the execution of an application at predefined
times. They are applicable to the entire application rather than to a
specific component.</p>
</div>
<div class="paragraph">
<p>A data-model event occurs when a new row of a <code>UIData</code> component is
selected.</p>
</div>
<div class="paragraph">
<p>There are two ways to cause your application to react to action events
or value-change events that are emitted by a standard component:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Implement an event listener class to handle the event, and register
the listener on the component by nesting either an
<code>f:valueChangeListener</code> tag or an <code>f:actionListener</code> tag inside the
component tag.</p>
</li>
<li>
<p>Implement a method of a managed bean to handle the event, and refer to
the method with a method expression from the appropriate attribute of
the component&#8217;s tag.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="#BNAUT">Implementing an Event Listener</a> for
information on how to implement an event listener. See
<a href="#BNASZ">Registering Listeners on Components</a> for
information on how to register the listener on a component.</p>
</div>
<div class="paragraph">
<p>See <a href="#BNAVD">Writing a Method to Handle an Action
Event</a> and <a href="#BNAVF">Writing a Method to Handle a
Value-Change Event</a> for information on how to implement managed bean
methods that handle these events.</p>
</div>
<div class="paragraph">
<p>See <a href="#BNATN">Referencing a Managed Bean Method</a>
for information on how to refer to the managed bean method from the
component tag.</p>
</div>
<div class="paragraph">
<p>When emitting events from custom components, you must implement the
appropriate event class and manually queue the event on the component in
addition to implementing an event listener class or a managed bean
method that handles the event. <a href="#BNAWD">Handling
Events for Custom Components</a> explains how to do this.</p>
</div>
<div class="paragraph">
<p><a id="BNAQK"></a><a id="validation-model"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_validation_model">1.5.5. Validation Model</h4>
<div class="paragraph">
<p>Jakarta Server Faces technology supports a mechanism for validating the
local data of editable components (such as text fields). This validation
occurs before the corresponding model data is updated to match the local
value.</p>
</div>
<div class="paragraph">
<p>Like the conversion model, the validation model defines a set of
standard classes for performing common data validation checks. The
Jakarta Server Faces core tag library also defines a set of tags that
correspond to the standard <code>javax.faces.validator.Validator</code>
implementations. See <a href="#BNATC">Using the Standard
Validators</a> for a list of all the standard validation classes and
corresponding tags.</p>
</div>
<div class="paragraph">
<p>Most of the tags have a set of attributes for configuring the
validator&#8217;s properties, such as the minimum and maximum allowable values
for the component&#8217;s data. The page author registers the validator on a
component by nesting the validator&#8217;s tag within the component&#8217;s tag.</p>
</div>
<div class="paragraph">
<p>In addition to validators that are registered on the component, you can
declare a default validator that is registered on all <code>UIInput</code>
components in the application. For more information on default
validators, see <a href="#GIREB">Using Default
Validators</a>.</p>
</div>
<div class="paragraph">
<p>The validation model also allows you to create your own custom validator
and corresponding tag to perform custom validation. The validation model
provides two ways to implement custom validation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Implement a <code>Validator</code> interface that performs the validation.</p>
</li>
<li>
<p>Implement a managed bean method that performs the validation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you are implementing a <code>Validator</code> interface, you must also do the
following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Register the <code>Validator</code> implementation with the application.</p>
</li>
<li>
<p>Create a custom tag or use an <code>f:validator</code> tag to register the
validator on the component.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the previously described standard validation model, the validator is
defined for each input component on a page. The Bean Validation model
allows the validator to be applied to all fields in a page. See
<a href="#CHDGJIIA">Chapter 23, "Introduction to Bean
Validation"</a> and <a href="#GKAHP">Chapter 24,
"Bean Validation: Advanced Topics"</a> for more information on Bean
Validation.</p>
</div>
<div class="paragraph">
<p><a id="BNAQL"></a><a id="navigation-model"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_navigation_model">1.6. Navigation Model</h3>
<div class="paragraph">
<p>The Jakarta Server Faces navigation model makes it easy to define page
navigation and to handle any additional processing that is needed to
choose the sequence in which pages are loaded.</p>
</div>
<div class="paragraph">
<p>In Jakarta Server Faces technology, navigation is a set of rules for
choosing the next page or view to be displayed after an application
action, such as when a button or link is clicked.</p>
</div>
<div class="paragraph">
<p>Navigation can be implicit or user-defined. Implicit navigation comes
into play when user-defined navigation rules are not configured in the
application configuration resource files.</p>
</div>
<div class="paragraph">
<p>When you add a component such as a <code>commandButton</code> to a Facelets page,
and assign another page as the value for its <code>action</code> property, the
default navigation handler will try to match a suitable page within the
application implicitly. In the following example, the default navigation
handler will try to locate a page named <code>response.xhtml</code> within the
application and navigate to it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">response</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>User-defined navigation rules are declared in zero or more application
configuration resource files, such as <code>faces-config.xml</code>, by using a set
of XML elements. The default structure of a navigation rule is as
follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;navigation-rule&gt;</span>
    <span class="tag">&lt;description&gt;</span><span class="tag">&lt;/description</span>
    <span class="tag">&lt;from-view-id&gt;</span><span class="tag">&lt;/from-view-id&gt;</span>
    <span class="tag">&lt;navigation-case&gt;</span>
        <span class="tag">&lt;from-action&gt;</span><span class="tag">&lt;/from-action&gt;</span>
        <span class="tag">&lt;from-outcome&gt;</span><span class="tag">&lt;/from-outcome&gt;</span>
        <span class="tag">&lt;if&gt;</span><span class="tag">&lt;/if&gt;</span>
        <span class="tag">&lt;to-view-id&gt;</span><span class="tag">&lt;/to-view-id&gt;</span>
    <span class="tag">&lt;/navigation-case&gt;</span>
<span class="tag">&lt;/navigation-rule&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>User-defined navigation is handled as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Define the rules in the application configuration resource file.</p>
</li>
<li>
<p>Refer to an outcome <code>String</code> from the button or link component&#8217;s
<code>action</code> attribute. This outcome <code>String</code> is used by the Jakarta Server
Faces implementation to select the navigation rule.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is an example navigation rule:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;navigation-rule&gt;</span>
    <span class="tag">&lt;from-view-id&gt;</span>/greeting.xhtml<span class="tag">&lt;/from-view-id&gt;</span>
    <span class="tag">&lt;navigation-case&gt;</span>
        <span class="tag">&lt;from-outcome&gt;</span>success<span class="tag">&lt;/from-outcome&gt;</span>
        <span class="tag">&lt;to-view-id&gt;</span>/response.xhtml<span class="tag">&lt;/to-view-id&gt;</span>
    <span class="tag">&lt;/navigation-case&gt;</span>
<span class="tag">&lt;/navigation-rule&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This rule states that when a command component (such as an
<code>h:commandButton</code> or an <code>h:commandLink</code>) on <code>greeting.xhtml</code> is
activated, the application will navigate from the <code>greeting.xhtml</code> page
to the <code>response.xhtml</code> page if the outcome referenced by the button
component&#8217;s tag is <code>success</code>. Here is an <code>h:commandButton</code> tag from
<code>greeting.xhtml</code> that would specify a logical outcome of <code>success</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">success</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As the example demonstrates, each <code>navigation-rule</code> element defines how
to get from one page (specified in the <code>from-view-id</code> element) to the
other pages of the application. The <code>navigation-rule</code> elements can
contain any number of <code>navigation-case</code> elements, each of which defines
the page to open next (defined by <code>to-view-id</code>) based on a logical
outcome (defined by <code>from-outcome</code>).</p>
</div>
<div class="paragraph">
<p>In more complicated applications, the logical outcome can also come from
the return value of an action method in a managed bean. This method
performs some processing to determine the outcome. For example, the
method can check whether the password the user entered on the page
matches the one on file. If it does, the method might return <code>success</code>;
otherwise, it might return <code>failure</code>. An outcome of <code>failure</code> might
result in the logon page being reloaded. An outcome of <code>success</code> might
cause the page displaying the user&#8217;s credit card activity to open. If
you want the outcome to be returned by a method on a bean, you must
refer to the method using a method expression with the <code>action</code>
attribute, as shown by this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Submit</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.submit}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When the user clicks the button represented by this tag, the
corresponding component generates an action event. This event is handled
by the default <code>javax.faces.event.ActionListener</code> instance, which calls
the action method referenced by the component that triggered the event.
The action method returns a logical outcome to the action listener.</p>
</div>
<div class="paragraph">
<p>The listener passes the logical outcome and a reference to the action
method that produced the outcome to the default
<code>javax.faces.application.NavigationHandler</code>. The <code>NavigationHandler</code>
selects the page to display next by matching the outcome or the action
method reference against the navigation rules in the application
configuration resource file by the following process.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <code>NavigationHandler</code> selects the navigation rule that matches the
page currently displayed.</p>
</li>
<li>
<p>It matches the outcome or the action method reference that it
received from the default <code>javax.faces.event.ActionListener</code> with those
defined by the navigation cases.</p>
</li>
<li>
<p>It tries to match both the method reference and the outcome against
the same navigation case.</p>
</li>
<li>
<p>If the previous step fails, the navigation handler attempts to match
the outcome.</p>
</li>
<li>
<p>Finally, the navigation handler attempts to match the action method
reference if the previous two attempts failed.</p>
</li>
<li>
<p>If no navigation case is matched, it displays the same view again.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When the <code>NavigationHandler</code> achieves a match, the Render Response phase
begins. During this phase, the page selected by the <code>NavigationHandler</code>
will be rendered.</p>
</div>
<div class="paragraph">
<p>The Duke&#8217;s Tutoring case study example application uses navigation rules
in the business methods that handle creating, editing, and deleting the
users of the application. For example, the form for creating a student
has the following <code>h:commandButton</code> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{adminBean.createStudent(studentManager.newStudent)}</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle['action.submit']}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The action event calls the <code>dukestutoring.ejb.AdminBean.createStudent</code>
method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">String</span> createStudent(Student student) {
    em.persist(student);
    <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">createdStudent</span><span class="delimiter">&quot;</span></span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The return value of <code>createdStudent</code> has a corresponding navigation case
in the <code>faces-config.xml</code> configuration file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;navigation-rule&gt;</span>
    <span class="tag">&lt;from-view-id&gt;</span>/admin/student/createStudent.xhtml<span class="tag">&lt;/from-view-id&gt;</span>
    <span class="tag">&lt;navigation-case&gt;</span>
        <span class="tag">&lt;from-outcome&gt;</span>createdStudent<span class="tag">&lt;/from-outcome&gt;</span>
        <span class="tag">&lt;to-view-id&gt;</span>/admin/index.xhtml<span class="tag">&lt;/to-view-id&gt;</span>
    <span class="tag">&lt;/navigation-case&gt;</span>
<span class="tag">&lt;/navigation-rule&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After the student is created, the user is returned to the Administration
index page.</p>
</div>
<div class="paragraph">
<p>For more information on how to define navigation rules, see
<a href="#BNAXF">Configuring Navigation Rules</a>.</p>
</div>
<div class="paragraph">
<p>For more information on how to implement action methods to handle
navigation, see <a href="#BNAVD">Writing a Method to Handle
an Action Event</a>.</p>
</div>
<div class="paragraph">
<p>For more information on how to reference outcomes or action methods from
component tags, see <a href="#BNATP">Referencing a Method
That Performs Navigation</a>.</p>
</div>
<div class="paragraph">
<p><a id="BNAQQ"></a><a id="the-lifecycle-of-a-javaserver-faces-application"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_the_lifecycle_of_a_jakarta_server_faces_application">1.7. The Lifecycle of a Jakarta Server Faces Application</h3>
<div class="paragraph">
<p>The lifecycle of an application refers to the various stages of
processing of that application, from its initiation to its conclusion.
All applications have lifecycles. During a web application lifecycle,
common tasks are performed, including the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Handling incoming requests</p>
</li>
<li>
<p>Decoding parameters</p>
</li>
<li>
<p>Modifying and saving state</p>
</li>
<li>
<p>Rendering web pages to the browser</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Jakarta Server Faces web application framework manages lifecycle phases
automatically for simple applications or allows you to manage them
manually for more complex applications as required.</p>
</div>
<div class="paragraph">
<p>Jakarta Server Faces applications that use advanced features may require
interaction with the lifecycle at certain phases. For example, Ajax
applications use partial processing features of the lifecycle (see
<a href="#GKNOJ">Partial Processing and Partial Rendering</a>).
A clearer understanding of the lifecycle phases is key to creating
well-designed components.</p>
</div>
<div class="paragraph">
<p>A simplified view of the Jakarta Server faces lifecycle, consisting of the
two main phases of a Jakarta Server Faces web application, is introduced in
<a href="#GJAAM">A Simple Jakarta Server Faces Application</a>. This
section examines the Jakarta Server Faces lifecycle in more detail.</p>
</div>
<div class="paragraph">
<p><a id="GLPRC"></a><a id="overview-of-the-javaserver-faces-lifecycle"></a></p>
</div>
<div class="sect3">
<h4 id="_overview_of_the_jakarta_server_faces_lifecycle">1.7.1. Overview of the Jakarta Server Faces Lifecycle</h4>
<div class="paragraph">
<p>The lifecycle of a Jakarta Server Faces application begins when the client
makes an HTTP request for a page and ends when the server responds with
the page, translated to HTML.</p>
</div>
<div class="paragraph">
<p>The lifecycle can be divided into two main phases: Execute and Render.
The Execute phase is further divided into subphases to support the
sophisticated component tree. This structure requires that component
data be converted and validated, component events be handled, and
component data be propagated to beans in an orderly fashion.</p>
</div>
<div class="paragraph">
<p>A Jakarta Server Faces page is represented by a tree of components, called a
view. During the lifecycle, the Jakarta Server Faces implementation must
build the view while considering the state saved from a previous
submission of the page. When the client requests a page, the Jakarta Server
Faces implementation performs several tasks, such as validating the data
input of components in the view and converting input data to types
specified on the server side.</p>
</div>
<div class="paragraph">
<p>The Jakarta Server Faces implementation performs all these tasks as a series
of steps in the Jakarta Server Faces request-response lifecycle.
<a href="#BNAQR">Figure 7-3</a> illustrates these steps.</p>
</div>
<div id="BNAQR" class="paragraph">
<div class="title"><strong>Figure 7-3 Jakarta Server Faces Standard Request-Response Lifecycle</strong></div>
<p><span class="image"><img src="../images/jakartaeett_dt_016.png" alt="Flow diagram of Faces request and Faces response, including event and validation processing, error handling, model updating, application invocation."></span></p>
</div>
<div class="paragraph">
<p>The request-response lifecycle handles two kinds of requests: initial
requests and postbacks. An initial request occurs when a user makes a
request for a page for the first time. A postback request occurs when a
user submits the form contained on a page that was previously loaded
into the browser as a result of executing an initial request.</p>
</div>
<div class="paragraph">
<p>When the lifecycle handles an initial request, it executes only the
Restore View and Render Response phases, because there is no user input
or action to process. Conversely, when the lifecycle handles a postback,
it executes all of the phases.</p>
</div>
<div class="paragraph">
<p>Usually, the first request for a Jakarta Server Faces page comes in from a
client, as a result of clicking a link or button component on a
Jakarta Server Faces page. To render a response that is another Jakarta Server
Faces page, the application creates a new view and stores it in the
<code>javax.faces.context.FacesContext</code> instance, which represents all of the
information associated with processing an incoming request and creating
a response. The application then acquires object references needed by
the view and calls the <code>FacesContext.renderResponse</code> method, which
forces immediate rendering of the view by skipping to the
<a href="#BNAQX">Render Response Phase</a> of the lifecycle, as is shown by the
arrows labelled Render Response in <a href="#BNAQR">Figure 7-3</a>.</p>
</div>
<div class="paragraph">
<p>Sometimes, an application might need to redirect to a different web
application resource, such as a web service, or generate a response that
does not contain Jakarta Server Faces components. In these situations, the
developer must skip the Render Response phase by calling the
<code>FacesContext.responseComplete</code> method. This situation is also shown in
, with the arrows labelled Response Complete.</p>
</div>
<div class="paragraph">
<p>The most common situation is that a Jakarta Server Faces component submits a
request for another Jakarta Server Faces page. In this case, the Jakarta Server
Faces implementation handles the request and automatically goes through
the phases in the lifecycle to perform any necessary conversions,
validations, and model updates and to generate the response.</p>
</div>
<div class="paragraph">
<p>There is one exception to the lifecycle described in this section. When
a component&#8217;s <code>immediate</code> attribute is set to <code>true</code>, the validation,
conversion, and events associated with these components are processed
during the <a href="#BNAQT">Apply Request Values Phase</a> rather than in a
later phase.</p>
</div>
<div class="paragraph">
<p>The details of the lifecycle explained in the following sections are
primarily intended for developers who need to know information such as
when validations, conversions, and events are usually handled and ways
to change how and when they are handled. For more information on each of
the lifecycle phases, download the latest Jakarta Server Faces Specification
documentation from <code><a href="https://jakarta.ee/specifications/faces/" class="bare">https://jakarta.ee/specifications/faces/</a></code>.</p>
</div>
<div class="paragraph">
<p>The Jakarta Server Faces application lifecycle Execute phase contains the
following subphases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#BNAQS">Restore View Phase</a></p>
</li>
<li>
<p><a href="#BNAQT">Apply Request Values Phase</a></p>
</li>
<li>
<p><a href="#GJSBP">Process Validations Phase</a></p>
</li>
<li>
<p><a href="#BNAQV">Update Model Values Phase</a></p>
</li>
<li>
<p><a href="#BNAQW">Invoke Application Phase</a></p>
</li>
<li>
<p><a href="#BNAQX">Render Response Phase</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="BNAQS"></a><a id="restore-view-phase"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_restore_view_phase">1.7.2. Restore View Phase</h4>
<div class="paragraph">
<p>When a request for a Jakarta Server Faces page is made, usually by an
action, such as when a link or a button component is clicked, the
Jakarta Server Faces implementation begins the Restore View phase.</p>
</div>
<div class="paragraph">
<p>During this phase, the Jakarta Server Faces implementation builds the view
of the page, wires event handlers and validators to components in the
view, and saves the view in the <code>FacesContext</code> instance, which contains
all the information needed to process a single request. All the
application&#8217;s components, event handlers, converters, and validators
have access to the <code>FacesContext</code> instance.</p>
</div>
<div class="paragraph">
<p>If the request for the page is an initial request, the Jakarta Server Faces
implementation creates an empty view during this phase and the lifecycle
advances to the Render Response phase, during which the empty view is
populated with the components referenced by the tags in the page.</p>
</div>
<div class="paragraph">
<p>If the request for the page is a postback, a view corresponding to this
page already exists in the <code>FacesContext</code> instance. During this phase,
the Jakarta Server Faces implementation restores the view by using the state
information saved on the client or the server.</p>
</div>
<div class="paragraph">
<p><a id="BNAQT"></a><a id="apply-request-values-phase"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_apply_request_values_phase">1.7.3. Apply Request Values Phase</h4>
<div class="paragraph">
<p>After the component tree is restored during a postback request, each
component in the tree extracts its new value from the request parameters
by using its <code>decode</code> (<code>processDecodes()</code>) method. The value is then
stored locally on each component.</p>
</div>
<div class="paragraph">
<p>If any <code>decode</code> methods or event listeners have called the
<code>renderResponse</code> method on the current <code>FacesContext</code> instance, the
Jakarta Server Faces implementation skips to the Render Response phase.</p>
</div>
<div class="paragraph">
<p>If any events have been queued during this phase, the Jakarta Server Faces
implementation broadcasts the events to interested listeners.</p>
</div>
<div class="paragraph">
<p>If some components on the page have their <code>immediate</code> attributes (see
<a href="#BNARI">The immediate Attribute</a>) set to <code>true</code>, then
the validations, conversions, and events associated with these
components will be processed during this phase. If any conversion fails,
an error message associated with the component is generated and queued
on <code>FacesContext</code>. This message will be displayed during the Render
Response phase, along with any validation errors resulting from the
Process Validations phase.</p>
</div>
<div class="paragraph">
<p>At this point, if the application needs to redirect to a different web
application resource or generate a response that does not contain any
Jakarta Server Faces components, it can call the
<code>FacesContext.responseComplete</code> method.</p>
</div>
<div class="paragraph">
<p>At the end of this phase, the components are set to their new values,
and messages and events have been queued.</p>
</div>
<div class="paragraph">
<p>If the current request is identified as a partial request, the partial
context is retrieved from the <code>FacesContext</code>, and the partial processing
method is applied.</p>
</div>
<div class="paragraph">
<p><a id="GJSBP"></a><a id="process-validations-phase"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_process_validations_phase">1.7.4. Process Validations Phase</h4>
<div class="paragraph">
<p>During this phase, the Jakarta Server Faces implementation processes all
validators registered on the components in the tree by using its
<code>validate</code> (<code>processValidators</code>) method. It examines the component
attributes that specify the rules for the validation and compares these
rules to the local value stored for the component. The Jakarta Server Faces
implementation also completes conversions for input components that do
not have the <code>immediate</code> attribute set to true.</p>
</div>
<div class="paragraph">
<p>If the local value is invalid, or if any conversion fails, the
Jakarta Server Faces implementation adds an error message to the
<code>FacesContext</code> instance, and the lifecycle advances directly to the
Render Response phase so that the page is rendered again with the error
messages displayed. If there were conversion errors from the Apply
Request Values phase, the messages for these errors are also displayed.</p>
</div>
<div class="paragraph">
<p>If any <code>validate</code> methods or event listeners have called the
<code>renderResponse</code> method on the current <code>FacesContext</code>, the Jakarta Server
Faces implementation skips to the Render Response phase.</p>
</div>
<div class="paragraph">
<p>At this point, if the application needs to redirect to a different web
application resource or generate a response that does not contain any
Jakarta Server Faces components, it can call the
<code>FacesContext.responseComplete</code> method.</p>
</div>
<div class="paragraph">
<p>If events have been queued during this phase, the Jakarta Server Faces
implementation broadcasts them to interested listeners.</p>
</div>
<div class="paragraph">
<p>If the current request is identified as a partial request, the partial
context is retrieved from the <code>FacesContext</code>, and the partial processing
method is applied.</p>
</div>
<div class="paragraph">
<p><a id="BNAQV"></a><a id="update-model-values-phase"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_update_model_values_phase">1.7.5. Update Model Values Phase</h4>
<div class="paragraph">
<p>After the Jakarta Server Faces implementation determines that the data is
valid, it traverses the component tree and sets the corresponding
server-side object properties to the components' local values. The
Jakarta Server Faces implementation updates only the bean properties pointed
at by an input component&#8217;s <code>value</code> attribute. If the local data cannot
be converted to the types specified by the bean properties, the
lifecycle advances directly to the Render Response phase so that the
page is re-rendered with errors displayed. This is similar to what
happens with validation errors.</p>
</div>
<div class="paragraph">
<p>If any <code>updateModels</code> methods or any listeners have called the
<code>renderResponse</code> method on the current <code>FacesContext</code> instance, the
Jakarta Server Faces implementation skips to the Render Response phase.</p>
</div>
<div class="paragraph">
<p>At this point, if the application needs to redirect to a different web
application resource or generate a response that does not contain any
Jakarta Server Faces components, it can call the
<code>FacesContext.responseComplete</code> method.</p>
</div>
<div class="paragraph">
<p>If any events have been queued during this phase, the Jakarta Server Faces
implementation broadcasts them to interested listeners.</p>
</div>
<div class="paragraph">
<p>If the current request is identified as a partial request, the partial
context is retrieved from the <code>FacesContext</code>, and the partial processing
method is applied.</p>
</div>
<div class="paragraph">
<p><a id="BNAQW"></a><a id="invoke-application-phase"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_invoke_application_phase">1.7.6. Invoke Application Phase</h4>
<div class="paragraph">
<p>During this phase, the Jakarta Server Faces implementation handles any
application-level events, such as submitting a form or linking to
another page.</p>
</div>
<div class="paragraph">
<p>At this point, if the application needs to redirect to a different web
application resource or generate a response that does not contain any
Jakarta Server Faces components, it can call the
<code>FacesContext.responseComplete</code> method.</p>
</div>
<div class="paragraph">
<p>If the view being processed was reconstructed from state information
from a previous request and if a component has fired an event, these
events are broadcast to interested listeners.</p>
</div>
<div class="paragraph">
<p>Finally, the Jakarta Server Faces implementation transfers control to the
Render Response phase.</p>
</div>
<div class="paragraph">
<p><a id="BNAQX"></a><a id="render-response-phase"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_render_response_phase">1.7.7. Render Response Phase</h4>
<div class="paragraph">
<p>During this phase, Jakarta Server Faces builds the view and delegates
authority to the appropriate resource for rendering the pages.</p>
</div>
<div class="paragraph">
<p>If this is an initial request, the components that are represented on
the page will be added to the component tree. If this is not an initial
request, the components are already added to the tree and need not be
added again.</p>
</div>
<div class="paragraph">
<p>If the request is a postback and errors were encountered during the
Apply Request Values phase, Process Validations phase, or Update Model
Values phase, the original page is rendered again during this phase. If
the pages contain <code>h:message</code> or <code>h:messages</code> tags, any queued error
messages are displayed on the page.</p>
</div>
<div class="paragraph">
<p>After the content of the view is rendered, the state of the response is
saved so that subsequent requests can access it. The saved state is
available to the Restore View phase.</p>
</div>
<div class="paragraph">
<p><a id="GKNOJ"></a><a id="partial-processing-and-partial-rendering"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_partial_processing_and_partial_rendering">1.8. Partial Processing and Partial Rendering</h3>
<div class="paragraph">
<p>The Jakarta Server Faces lifecycle spans all of the execute and render
processes of an application. It is also possible to process and render
only parts of an application, such as a single component. For example,
the Jakarta Server Faces Ajax framework can generate requests containing
information on which particular component may be processed and which
particular component may be rendered back to the client.</p>
</div>
<div class="paragraph">
<p>Once such a partial request enters the Jakarta Server Faces lifecycle, the
information is identified and processed by a
<code>javax.faces.context.PartialViewContext</code> object. The Jakarta Server Faces
lifecycle is still aware of such Ajax requests and modifies the
component tree accordingly.</p>
</div>
<div class="paragraph">
<p>The <code>execute</code> and <code>render</code> attributes of the <code>f:ajax</code> tag are used to
identify which components may be executed and rendered. For more
information on these attributes, see <a href="#GKIOW">Chapter 13,
"Using Ajax with Jakarta Server Faces Technology"</a>.</p>
</div>
<div class="paragraph">
<p><a id="BNAQY"></a><a id="further-information-about-javaserver-faces-technology"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_further_information_about_jakarta_server_faces_technology">1.9. Further Information about Jakarta Server Faces Technology</h3>
<div class="paragraph">
<p>For more information on Jakarta Server Faces technology, see</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Jakarta Server Faces 2.3 specification:</p>
<div class="paragraph">
<p><code><a href="https://jakarta.ee/specifications/faces/2.3/" class="bare">https://jakarta.ee/specifications/faces/2.3/</a></code></p>
</div>
</li>
<li>
<p>Mojarra website:</p>
<div class="paragraph">
<p><code><a href="https://eclipse-ee4j.github.io/mojarra/" class="bare">https://eclipse-ee4j.github.io/mojarra/</a></code></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For additional samples, see the (Java EE 8) GlassFish samples at
<a href="https://github.com/javaee/glassfish-samples/tree/master/ws/javaee8" class="bare">https://github.com/javaee/glassfish-samples/tree/master/ws/javaee8</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction_to_facelets">2. Introduction to Facelets</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="GIEPX"></a><a id="introduction-to-facelets"></a></p>
</div>
<div class="paragraph">
<p>The term Facelets refers to the view declaration language for Jakarta Server
Faces technology. Facelets is a part of the Jakarta Server Faces
specification and also the preferred presentation technology for
building Jakarta Server Faces technology–based applications. Jakarta Server
Pages technology, previously used as the presentation technology
for Jakarta Server Faces, does not support all the new features available in
Jakarta Server Faces in the Jakarta EE platform. Jakarta Server Pages technology is considered
to be a deprecated presentation technology for Jakarta Server Faces.</p>
</div>
<div class="paragraph">
<p><a id="GIJTU"></a><a id="what-is-facelets"></a></p>
</div>
<div class="sect2">
<h3 id="_what_is_facelets">2.1. What Is Facelets?</h3>
<div class="paragraph">
<p>Facelets is a powerful but lightweight page declaration language that is
used to build Jakarta Server Faces views using HTML style templates and to
build component trees. Facelets features include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use of XHTML for creating web pages</p>
</li>
<li>
<p>Support for Facelets tag libraries in addition to Jakarta Server Faces and
JSTL tag libraries</p>
</li>
<li>
<p>Support for the Expression Language (EL)</p>
</li>
<li>
<p>Templating for components and pages</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The advantages of Facelets for large-scale development projects include
the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Support for code reuse through templating and composite components</p>
</li>
<li>
<p>Functional extensibility of components and other server-side objects
through customization</p>
</li>
<li>
<p>Faster compilation time</p>
</li>
<li>
<p>Compile-time EL validation</p>
</li>
<li>
<p>High-performance rendering</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In short, the use of Facelets reduces the time and effort that needs to
be spent on development and deployment.</p>
</div>
<div class="paragraph">
<p>Facelets views are usually created as XHTML pages. Jakarta Server Faces
implementations support XHTML pages created in conformance with the
XHTML Transitional Document Type Definition (DTD), as listed at
<code><a href="http://www.w3.org/TR/xhtml1/#a_dtd_XHTML-1.0-Transitional" class="bare">http://www.w3.org/TR/xhtml1/#a_dtd_XHTML-1.0-Transitional</a></code>. By
convention, web pages built with XHTML have an <code>.xhtml</code> extension.</p>
</div>
<div class="paragraph">
<p>Jakarta Server Faces technology supports various tag libraries to add
components to a web page. To support the Jakarta Server Faces tag library
mechanism, Facelets uses XML namespace declarations. <a href="#GJBOX">Table
8-1</a> lists the tag libraries supported by Facelets.</p>
</div>
<div class="paragraph">
<p><a id="sthref29"></a><a id="GJBOX"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 8-1 Tag Libraries Supported by Facelets</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 26.3157%;">
<col style="width: 26.3157%;">
<col style="width: 10.5263%;">
<col style="width: 15.7894%;">
<col style="width: 21.0529%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag Library</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>URI</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Prefix</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Example</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Contents</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jakarta Server Faces Facelets Tag Library</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://xmlns.jcp.org/jsf/facelets" class="bare">http://xmlns.jcp.org/jsf/facelets</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui:</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>ui:component</code></p>
</div>
<div class="paragraph">
<p><code>ui:insert</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tags for templating</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jakarta Server Faces HTML Tag Library</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://xmlns.jcp.org/jsf/html" class="bare">http://xmlns.jcp.org/jsf/html</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>h:head</code></p>
</div>
<div class="paragraph">
<p><code>h:body</code></p>
</div>
<div class="paragraph">
<p><code>h:outputText</code></p>
</div>
<div class="paragraph">
<p><code>h:inputText</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jakarta Server Faces component tags for all <code>UIComponent</code> objects</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jakarta Server Faces Core Tag Library</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://xmlns.jcp.org/jsf/core" class="bare">http://xmlns.jcp.org/jsf/core</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>f:actionListener</code></p>
</div>
<div class="paragraph">
<p><code>f:attribute</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tags for Jakarta Server Faces custom actions that are independent of any
particular render kit</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pass-through Elements Tag Library</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://xmlns.jcp.org/jsf" class="bare">http://xmlns.jcp.org/jsf</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsf:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsf:id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tags to support HTML5-friendly markup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pass-through Attributes Tag Library</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://xmlns.jcp.org/jsf/passthrough" class="bare">http://xmlns.jcp.org/jsf/passthrough</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>p:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>p:type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tags to support
HTML5-friendly markup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Composite Component Tag Library</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://xmlns.jcp.org/jsf/composite" class="bare">http://xmlns.jcp.org/jsf/composite</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cc:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cc:interface</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tags to support composite components</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSTL Core Tag Library</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://xmlns.jcp.org/jsp/jstl/core" class="bare">http://xmlns.jcp.org/jsp/jstl/core</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>c:</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>c:forEach</code></p>
</div>
<div class="paragraph">
<p><code>c:catch</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSTL 1.2 Core Tags</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSTL Functions Tag Library</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://xmlns.jcp.org/jsp/jstl/functions" class="bare">http://xmlns.jcp.org/jsp/jstl/functions</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fn:</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>fn:toUpperCase</code></p>
</div>
<div class="paragraph">
<p><code>fn:toLowerCase</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSTL 1.2 Functions Tags</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Facelets provides two namespaces to support HTML5-friendly markup. For
details, see <a href="#BABGECCJ">HTML5-Friendly Markup</a>.</p>
</div>
<div class="paragraph">
<p>Facelets supports tags for composite components, for which you can
declare custom prefixes. For more information on composite components,
see <a href="#GIQZR">Composite Components</a>.</p>
</div>
<div class="paragraph">
<p>The namespace prefixes shown in the table are conventional, not
mandatory. As is always the case when you declare an XML namespace, you
can specify any prefix in your Facelets page. For example, you can
declare the prefix for the composite component tag library as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">xmlns:composite=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.sun.com/jsf/composite</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>instead of as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">xmlns:cc=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.sun.com/jsf/composite</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Based on the Jakarta Server Faces support for Expression Language (EL)
syntax, Facelets uses EL expressions to reference properties and methods
of managed beans. EL expressions can be used to bind component objects
or values to methods or properties of managed beans that are used as
backing beans. For more information on using EL expressions, see
<a href="#BNAQP">Using the EL to Reference Managed Beans</a>.</p>
</div>
<div class="paragraph">
<p><a id="GIPRR"></a><a id="the-lifecycle-of-a-facelets-application"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_the_lifecycle_of_a_facelets_application">2.2. The Lifecycle of a Facelets Application</h3>
<div class="paragraph">
<p>The Jakarta Server Faces specification defines the lifecycle of a Jakarta Server
Faces application. For more information on this lifecycle, see
<a href="#BNAQQ">The Lifecycle of a Jakarta Server Faces
Application</a>. The following steps describe that process as applied to a
Facelets-based application.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>When a client, such as a browser, makes a new request to a page that
is created using Facelets, a new component tree or
<code>javax.faces.component.UIViewRoot</code> is created and placed in the
<code>FacesContext</code>.</p>
</li>
<li>
<p><a id="BABGCBAJ"></a></p>
<div class="paragraph">
<p>The <code>UIViewRoot</code> is applied to the Facelets, and the view is populated
with components for rendering.</p>
</div>
</li>
<li>
<p>The newly built view is rendered back as a response to the client.</p>
</li>
<li>
<p>On rendering, the state of this view is stored for the next request.
The state of input components and form data is stored.</p>
</li>
<li>
<p>The client may interact with the view and request another view or
change from the Jakarta Server Faces application. At this time, the saved
view is restored from the stored state.</p>
</li>
<li>
<p>The restored view is once again passed through the Jakarta Server Faces
lifecycle, which eventually will either generate a new view or re-render
the current view if there were no validation problems and no action was
triggered.</p>
</li>
<li>
<p>If the same view is requested, the stored view is rendered once
again.</p>
</li>
<li>
<p>If a new view is requested, then the process described in Step
<a href="#BABGCBAJ">2</a> is continued.</p>
</li>
<li>
<p>The new view is then rendered back as a response to the client.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GIPOB"></a><a id="developing-a-simple-facelets-application-the-guessnumber-jsf-example-application"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_developing_a_simple_facelets_application_the_guessnumber_jsf_example_application">2.3. Developing a Simple Facelets Application: The guessnumber-jsf Example Application</h3>
<div class="paragraph">
<p>This section describes the general steps involved in developing a
Jakarta Server Faces application. The following tasks are usually required:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Developing the managed beans</p>
</li>
<li>
<p>Creating the pages using the component tags</p>
</li>
<li>
<p>Defining page navigation</p>
</li>
<li>
<p>Mapping the <code>FacesServlet</code> instance</p>
</li>
<li>
<p>Adding managed bean declarations</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#creating-a-facelets-application">Creating a Facelets Application</a></p>
</li>
<li>
<p><a href="#configuring-the-application">Configuring the Application</a></p>
</li>
<li>
<p>link:#running-the-guessnumber-jsf-facelets Example[Running the guessnumber-jsf Facelets Example]</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GIQTE"></a><a id="creating-a-facelets-application"></a></p>
</div>
<div class="sect3">
<h4 id="_creating_a_facelets_application">2.3.1. Creating a Facelets Application</h4>
<div class="paragraph">
<p>The example used in this tutorial is the <code>guessnumber-jsf</code> application.
The application presents you with a page that asks you to guess a number
from 0 to 10, validates your input against a random number, and responds
with another page that informs you whether you guessed the number
correctly or incorrectly.</p>
</div>
<div class="paragraph">
<p>The source code for this application is in the
tut-install`/examples/web/jsf/guessnumber-jsf/` directory.</p>
</div>
<div class="paragraph">
<p><a id="GIQQZ"></a><a id="developing-a-managed-bean"></a></p>
</div>
<div class="sect4">
<h5 id="_developing_a_managed_bean">Developing a Managed Bean</h5>
<div class="paragraph">
<p>In a typical Jakarta Server Faces application, each page of the application
connects to a managed bean that serves as a backing bean. The backing
bean defines the methods and properties that are associated with the
components. In this example, both pages use the same backing bean.</p>
</div>
<div class="paragraph">
<p>The following managed bean class, <code>UserNumberBean.java</code>, generates a
random number from 0 to 10 inclusive:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">jakarta.tutorial.guessnumber</span>;

<span class="keyword">import</span> <span class="include">java.io.Serializable</span>;
<span class="keyword">import</span> <span class="include">java.util.Random</span>;
<span class="keyword">import</span> <span class="include">javax.enterprise.context.SessionScoped</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Named</span>;

<span class="annotation">@Named</span>
<span class="annotation">@SessionScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">UserNumberBean</span> <span class="directive">implements</span> <span class="predefined-type">Serializable</span> {

    <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="type">long</span> serialVersionUID = <span class="integer">5443351151396868724L</span>;
    <span class="predefined-type">Integer</span> randomInt = <span class="predefined-constant">null</span>;
    <span class="predefined-type">Integer</span> userNumber = <span class="predefined-constant">null</span>;
    <span class="predefined-type">String</span> response = <span class="predefined-constant">null</span>;
    <span class="directive">private</span> <span class="type">int</span> maximum = <span class="integer">10</span>;
    <span class="directive">private</span> <span class="type">int</span> minimum = <span class="integer">0</span>;

    <span class="directive">public</span> UserNumberBean() {
        <span class="predefined-type">Random</span> randomGR = <span class="keyword">new</span> <span class="predefined-type">Random</span>();
        randomInt = <span class="keyword">new</span> <span class="predefined-type">Integer</span>(randomGR.nextInt(maximum + <span class="integer">1</span>));
        <span class="comment">// Print number to server log</span>
        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Duke's number: </span><span class="delimiter">&quot;</span></span> + randomInt);
    }

    <span class="directive">public</span> <span class="type">void</span> setUserNumber(<span class="predefined-type">Integer</span> user_number) {
        userNumber = user_number;
    }

    <span class="directive">public</span> <span class="predefined-type">Integer</span> getUserNumber() {
        <span class="keyword">return</span> userNumber;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getResponse() {
        <span class="keyword">if</span> ((userNumber == <span class="predefined-constant">null</span>) || (userNumber.compareTo(randomInt) != <span class="integer">0</span>)) {
            <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Sorry, </span><span class="delimiter">&quot;</span></span> + userNumber + <span class="string"><span class="delimiter">&quot;</span><span class="content"> is incorrect.</span><span class="delimiter">&quot;</span></span>;
        } <span class="keyword">else</span> {
            <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Yay! You got it!</span><span class="delimiter">&quot;</span></span>;
        }
    }

    <span class="directive">public</span> <span class="type">int</span> getMaximum() {
        <span class="keyword">return</span> (<span class="local-variable">this</span>.maximum);
    }

    <span class="directive">public</span> <span class="type">void</span> setMaximum(<span class="type">int</span> maximum) {
        <span class="local-variable">this</span>.maximum = maximum;
    }

    <span class="directive">public</span> <span class="type">int</span> getMinimum() {
        <span class="keyword">return</span> (<span class="local-variable">this</span>.minimum);
    }

    <span class="directive">public</span> <span class="type">void</span> setMinimum(<span class="type">int</span> minimum) {
        <span class="local-variable">this</span>.minimum = minimum;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the use of the <code>@Named</code> annotation, which makes the managed bean
accessible through the EL. The <code>@SessionScoped</code> annotation registers the
bean scope as <code>session</code> to enable you to make multiple guesses as you
run the application.</p>
</div>
<div class="paragraph">
<p><a id="GJZPV"></a><a id="creating-facelets-views"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_creating_facelets_views">Creating Facelets Views</h5>
<div class="paragraph">
<p>To create a page or view, you add components to the pages, wire the
components to backing bean values and properties, and register
converters, validators, or listeners on the components.</p>
</div>
<div class="paragraph">
<p>For the example application, XHTML web pages serve as the front end. The
first page of the example application is a page called <code>greeting.xhtml</code>.
A closer look at various sections of this web page provides more
information.</p>
</div>
<div class="paragraph">
<p>The first section of the web page declares the content type for the
page, which is XHTML:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="doctype">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The next section specifies the language of the XHTML page and then
declares the XML namespace for the tag libraries that are used in the
web page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:h</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/html</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:f</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/core</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The next section uses various tags to insert components into the web
page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    <span class="tag">&lt;h:head&gt;</span>
        <span class="tag">&lt;h:outputStylesheet</span> <span class="attribute-name">library</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">css</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">default.css</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;title&gt;</span>Guess Number Facelets Application<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;/h:head&gt;</span>
    <span class="tag">&lt;h:body&gt;</span>
        <span class="tag">&lt;h:form&gt;</span>
            <span class="tag">&lt;h:graphicImage</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{resource['images:wave.med.gif']}</span><span class="delimiter">&quot;</span></span>
                            <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Duke waving his hand</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;h2&gt;</span>
                Hi, my name is Duke. I am thinking of a number from
                #{userNumberBean.minimum} to #{userNumberBean.maximum}.
                Can you guess it?
            <span class="tag">&lt;/h2&gt;</span>
            <span class="tag">&lt;p&gt;</span><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userNo</span><span class="delimiter">&quot;</span></span>
                            <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Enter a number from 0 to 10:</span><span class="delimiter">&quot;</span></span>
                            <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.userNumber}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                   <span class="tag">&lt;f:validateLongRange</span> <span class="attribute-name">minimum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.minimum}</span><span class="delimiter">&quot;</span></span>
                                        <span class="attribute-name">maximum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.maximum}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                <span class="tag">&lt;/h:inputText&gt;</span>
                <span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Submit</span><span class="delimiter">&quot;</span></span>
                                 <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">response</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/p&gt;</span>
            <span class="tag">&lt;h:message</span> <span class="attribute-name">showSummary</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">showDetail</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>
                       <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">color</span>: <span class="color">#d20005</span>;
                       <span class="key">font-family</span>: <span class="string"><span class="delimiter">'</span><span class="content">New Century Schoolbook</span><span class="delimiter">'</span></span>, <span class="value">serif</span>;
                       <span class="key">font-style</span>: <span class="value">oblique</span>;
                       <span class="key">text-decoration</span>: <span class="value">overline</span><span class="delimiter">&quot;</span></span>
                       <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">errors1</span><span class="delimiter">&quot;</span></span>
                       <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userNo</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/h:form&gt;</span>
    <span class="tag">&lt;/h:body&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the use of the following tags:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Facelets HTML tags (those beginning with <code>h:</code>) to add components</p>
</li>
<li>
<p>The Facelets core tag <code>f:validateLongRange</code> to validate the user input</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An <code>h:inputText</code> tag accepts user input and sets the value of the
managed bean property <code>userNumber</code> through the EL expression
<code>#{userNumberBean.userNumber}</code>. The input value is validated for value
range by the Jakarta Server Faces standard validator tag
<code>f:validateLongRange</code>.</p>
</div>
<div class="paragraph">
<p>The image file, <code>wave.med.gif</code>, is added to the page as a resource, as
is the style sheet. For more details about the resources facility, see
<a href="#GIRGM">Web Resources</a>.</p>
</div>
<div class="paragraph">
<p>An <code>h:commandButton</code> tag with the ID <code>submit</code> starts validation of the
input data when a user clicks the button. Using implicit navigation, the
tag redirects the client to another page, <code>response.xhtml</code>, which shows
the response to your input. The page specifies only <code>response</code>, which by
default causes the server to look for <code>response.xhtml</code>.</p>
</div>
<div class="paragraph">
<p>You can now create the second page, <code>response.xhtml</code>, with the following
content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="doctype">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
    &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span>

<span class="tag">&lt;html</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:h</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/html</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

    <span class="tag">&lt;h:head&gt;</span>
        <span class="tag">&lt;h:outputStylesheet</span> <span class="attribute-name">library</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">css</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">default.css</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;title&gt;</span>Guess Number Facelets Application<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;/h:head&gt;</span>
    <span class="tag">&lt;h:body&gt;</span>
        <span class="tag">&lt;h:form&gt;</span>
            <span class="tag">&lt;h:graphicImage</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{resource['images:wave.med.gif']}</span><span class="delimiter">&quot;</span></span>
                            <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Duke waving his hand</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;h2&gt;</span>
                <span class="tag">&lt;h:outputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">result</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.response}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/h2&gt;</span>
            <span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">back</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Back</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/h:form&gt;</span>
    <span class="tag">&lt;/h:body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This page also uses implicit navigation, setting the <code>action</code> attribute
for the Back button to send the user to the <code>greeting.xhtml</code> page.</p>
</div>
<div class="paragraph">
<p><a id="GJJKC"></a><a id="configuring-the-application"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_the_application">2.3.2. Configuring the Application</h4>
<div class="paragraph">
<p>Configuring a Jakarta Server Faces application involves mapping the Faces
Servlet in the web deployment descriptor file, such as a <code>web.xml</code> file,
and possibly adding managed bean declarations, navigation rules, and
resource bundle declarations to the application configuration resource
file, <code>faces-config.xml</code>.</p>
</div>
<div class="paragraph">
<p>If you are using NetBeans IDE, a web deployment descriptor file is
automatically created for you. In such an IDE-created <code>web.xml</code> file,
change the default greeting page, which is <code>index.xhtml</code>, to
<code>greeting.xhtml</code>. Here is an example <code>web.xml</code> file, showing this change
in bold.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;web-app</span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3.1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/xml/ns/javaee</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/xml/ns/javaee</span>
  <span class="content">http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;context-param&gt;</span>
        <span class="tag">&lt;param-name&gt;</span>javax.faces.PROJECT_STAGE<span class="tag">&lt;/param-name&gt;</span>
        <span class="tag">&lt;param-value&gt;</span>Development<span class="tag">&lt;/param-value&gt;</span>
    <span class="tag">&lt;/context-param&gt;</span>
    <span class="tag">&lt;servlet&gt;</span>
        <span class="tag">&lt;servlet-name&gt;</span>Faces Servlet<span class="tag">&lt;/servlet-name&gt;</span>
        <span class="tag">&lt;servlet-class&gt;</span>javax.faces.webapp.FacesServlet<span class="tag">&lt;/servlet-class&gt;</span>
        <span class="tag">&lt;load-on-startup&gt;</span>1<span class="tag">&lt;/load-on-startup&gt;</span>
    <span class="tag">&lt;/servlet&gt;</span>
    <span class="tag">&lt;servlet-mapping&gt;</span>
        <span class="tag">&lt;servlet-name&gt;</span>Faces Servlet<span class="tag">&lt;/servlet-name&gt;</span>
        <span class="tag">&lt;url-pattern&gt;</span>*.xhtml<span class="tag">&lt;/url-pattern&gt;</span>
    <span class="tag">&lt;/servlet-mapping&gt;</span>
    <span class="tag">&lt;session-config&gt;</span>
        <span class="tag">&lt;session-timeout&gt;</span>
            30
        <span class="tag">&lt;/session-timeout&gt;</span>
    <span class="tag">&lt;/session-config&gt;</span>
    <span class="tag">&lt;welcome-file-list&gt;</span>
        <span class="tag">&lt;welcome-file&gt;</span>greeting.xhtml<span class="tag">&lt;/welcome-file&gt;</span>
    <span class="tag">&lt;/welcome-file-list&gt;</span>
<span class="tag">&lt;/web-app&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the use of the context parameter <code>PROJECT_STAGE</code>. This parameter
identifies the status of a Jakarta Server Faces application in the software
lifecycle.</p>
</div>
<div class="paragraph">
<p>The stage of an application can affect the behavior of the application.
For example, if the project stage is defined as <code>Development</code>, debugging
information is automatically generated for the user. If not defined by
the user, the default project stage is <code>Production</code>.</p>
</div>
<div class="paragraph">
<p><a id="GIRGF"></a><a id="running-the-guessnumber-jsf-facelets-example"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_running_the_guessnumber_jsf_facelets_example">2.3.3. Running the guessnumber-jsf Facelets Example</h4>
<div class="paragraph">
<p>You can use either NetBeans IDE or Maven to build, package, deploy, and
run the <code>guessnumber-jsf</code> example.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GJQZL">To Build, Package, and Deploy the guessnumber-jsf Example
Using NetBeans IDE</a></p>
</li>
<li>
<p><a href="#GJQYU">To Build, Package, and Deploy the guessnumber-jsf Example
Using Maven</a></p>
</li>
<li>
<p><a href="#GJQYX">To Run the guessnumber-jsf Example</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GJQZL"></a><a id="to-build-package-and-deploy-the-guessnumber-jsf-example-using-netbeans-ide"></a></p>
</div>
<div class="sect4">
<h5 id="_to_build_package_and_deploy_the_guessnumber_jsf_example_using_netbeans_ide">To Build, Package, and Deploy the guessnumber-jsf Example Using NetBeans IDE</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>From the File menu, choose Open Project.</p>
</li>
<li>
<p>In the Open Project dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/web/jsf</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>guessnumber-jsf</code> folder.</p>
</li>
<li>
<p>Click Open Project.</p>
</li>
<li>
<p>In the Projects tab, right-click the <code>guessnumber-jsf</code> project and
select Build.</p>
<div class="paragraph">
<p>This option builds the example application and deploys it to your
GlassFish Server instance.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GJQYU"></a><a id="to-build-package-and-deploy-the-guessnumber-jsf-example-using-maven"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_build_package_and_deploy_the_guessnumber_jsf_example_using_maven">To Build, Package, and Deploy the guessnumber-jsf Example Using Maven</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/web/jsf/guessnumber-jsf/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file,
<code>guessnumber-jsf.war</code>, that is located in the <code>target</code> directory. It
then deploys it to the server.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GJQYX"></a><a id="to-run-the-guessnumber-jsf-example"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_run_the_guessnumber_jsf_example">To Run the guessnumber-jsf Example</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a web browser.</p>
</li>
<li>
<p>Enter the following URL in your web browser:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/guessnumber-jsf</span></code></pre>
</div>
</div>
</li>
<li>
<p>In the field, enter a number from 0 to 10 and click Submit.</p>
<div class="paragraph">
<p>Another page appears, reporting whether your guess is correct or
incorrect.</p>
</div>
</li>
<li>
<p>If you guessed incorrectly, click Back to return to the main page.</p>
<div class="paragraph">
<p>You can continue to guess until you get the correct answer, or you can
look in the server log, where the <code>UserNumberBean</code> constructor displays
the correct answer.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GIQXP"></a><a id="using-facelets-templates"></a></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_facelets_templates">2.4. Using Facelets Templates</h3>
<div class="paragraph">
<p>Jakarta Server Faces technology provides the tools to implement user
interfaces that are easy to extend and reuse. Templating is a useful
Facelets feature that allows you to create a page that will act as the
base, or template, for the other pages in an application. By using
templates, you can reuse code and avoid recreating similarly constructed
pages. Templating also helps in maintaining a standard look and feel in
an application with a large number of pages.</p>
</div>
<div class="paragraph">
<p><a href="#GJBFP">Table 8-2</a> lists Facelets tags that are used for templating
and their respective functionality.</p>
</div>
<div class="paragraph">
<p><a id="sthref30"></a><a id="GJBFP"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 8-2 Facelets Templating Tags</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Function</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui:component</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines a component that is created and added to the
component tree.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui:composition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines a page composition that optionally uses a
template. Content outside of this tag is ignored.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui:debug</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines a debug component that is created and added to the
component tree.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui:decorate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Similar to the composition tag but does not disregard
content outside this tag.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui:define</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines content that is inserted into a page by a
template.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui:fragment</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Similar to the component tag but does not disregard
content outside this tag.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui:include</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encapsulates and reuses content for multiple pages.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui:insert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inserts content into a template.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui:param</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to pass parameters to an included file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui:repeat</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used as an alternative for loop tags, such as <code>c:forEach</code>
or <code>h:dataTable.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui:remove</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Removes content from a page.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information on Facelets templating tags, see the
Jakarta Server Faces Facelets Tag Library documentation.</p>
</div>
<div class="paragraph">
<p>The Facelets tag library includes the main templating tag <code>ui:insert</code>. A
template page that is created with this tag allows you to define a
default structure for a page. A template page is used as a template for
other pages, usually referred to as client pages.</p>
</div>
<div class="paragraph">
<p>Here is an example of a template saved as <code>template.xhtml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="doctype">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
      &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:ui</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/facelets</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:h</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/html</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

    <span class="tag">&lt;h:head&gt;</span>
        <span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Content-Type</span><span class="delimiter">&quot;</span></span>
              <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/html; charset=UTF-8</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;h:outputStylesheet</span> <span class="attribute-name">library</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">css</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">default.css</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;h:outputStylesheet</span> <span class="attribute-name">library</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">css</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cssLayout.css</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;title&gt;</span>Facelets Template<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;/h:head&gt;</span>

    <span class="tag">&lt;h:body&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;ui:insert</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Top Section<span class="tag">&lt;/ui:insert&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;div&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
             <span class="tag">&lt;ui:insert</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Left Section<span class="tag">&lt;/ui:insert&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">left_content</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
             <span class="tag">&lt;ui:insert</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Main Content<span class="tag">&lt;/ui:insert&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;/h:body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The example page defines an XHTML page that is divided into three
sections: a top section, a left section, and a main section. The
sections have style sheets associated with them. The same structure can
be reused for the other pages of the application.</p>
</div>
<div class="paragraph">
<p>The client page invokes the template by using the <code>ui:composition</code> tag.
In the following example, a client page named <code>templateclient.xhtml</code>
invokes the template page named <code>template.xhtml</code> from the preceding
example. A client page allows content to be inserted with the help of
the <code>ui:define</code> tag.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="doctype">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:ui</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/facelets</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:h</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/html</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

    <span class="tag">&lt;h:body&gt;</span>
        <span class="tag">&lt;ui:composition</span> <span class="attribute-name">template</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./template.xhtml</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;ui:define</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                Welcome to Template Client Page
            <span class="tag">&lt;/ui:define&gt;</span>

            <span class="tag">&lt;ui:define</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">You are in the Left Section</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/ui:define&gt;</span>

            <span class="tag">&lt;ui:define</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;h:graphicImage</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{resource['images:wave.med.gif']}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">You are in the Main Content Section</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/ui:define&gt;</span>
        <span class="tag">&lt;/ui:composition&gt;</span>
    <span class="tag">&lt;/h:body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use NetBeans IDE to create Facelets template and client pages.
For more information on creating these pages, see
<code><a href="https://netbeans.org/kb/docs/web/jsf20-intro.html" class="bare">https://netbeans.org/kb/docs/web/jsf20-intro.html</a></code>.</p>
</div>
<div class="paragraph">
<p><a id="GIQZR"></a><a id="composite-components"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_composite_components">2.5. Composite Components</h3>
<div class="paragraph">
<p>Jakarta Server Faces technology offers the concept of composite components
with Facelets. A composite component is a special type of template that
acts as a component.</p>
</div>
<div class="paragraph">
<p>Any component is essentially a piece of reusable code that behaves in a
particular way. For example, an input component accepts user input. A
component can also have validators, converters, and listeners attached
to it to perform certain defined actions.</p>
</div>
<div class="paragraph">
<p>A composite component consists of a collection of markup tags and other
existing components. This reusable, user-created component has a
customized, defined functionality and can have validators, converters,
and listeners attached to it like any other component.</p>
</div>
<div class="paragraph">
<p>With Facelets, any XHTML page that contains markup tags and other
components can be converted into a composite component. Using the
resources facility, the composite component can be stored in a library
that is available to the application from the defined resources
location.</p>
</div>
<div class="paragraph">
<p><a href="#GJCWC">Table 8-3</a> lists the most commonly used composite tags and
their functions.</p>
</div>
<div class="paragraph">
<p><a id="sthref31"></a><a id="GJCWC"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 8-3 Composite Component Tags</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Function</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>composite:interface</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Declares the usage contract for a composite
component. The composite component can be used as a single component
whose feature set is the union of the features declared in the usage
contract.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>composite:implementation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the implementation of the composite
component. If a <code>composite:interface</code> element appears, there must be a
corresponding <code>composite:implementation</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>composite:attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Declares an attribute that may be given to an
instance of the composite component in which this tag is declared.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>composite:insertChildren</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any child components or template text
within the composite component tag in the using page will be reparented
into the composite component at the point indicated by this tag&#8217;s
placement within the <code>composite:implementation</code> section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>composite:valueHolder</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Declares that the composite component whose
contract is declared by the <code>composite:interface</code> in which this element
is nested exposes an implementation of <code>ValueHolder</code> suitable for use as
the target of attached objects in the using page.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>composite:editableValueHolder</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Declares that the composite component
whose contract is declared by the <code>composite:interface</code> in which this
element is nested exposes an implementation of <code>EditableValueHolder</code>
suitable for use as the target of attached objects in the using page.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>composite:actionSource</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Declares that the composite component whose
contract is declared by the <code>composite:interface</code> in which this element
is nested exposes an implementation of <code>ActionSource2</code> suitable for use
as the target of attached objects in the using page.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information and a complete list of Facelets composite tags, see
the Jakarta Server Faces Facelets Tag Library documentation.</p>
</div>
<div class="paragraph">
<p>The following example shows a composite component that accepts an email
address as input:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="doctype">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:composite</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/composite</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:h</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/html</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

    <span class="tag">&lt;h:head&gt;</span>
        <span class="tag">&lt;title&gt;</span>This content will not be displayed<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;/h:head&gt;</span>
    <span class="tag">&lt;h:body&gt;</span>
        <span class="tag">&lt;composite:interface&gt;</span>
            <span class="tag">&lt;composite:attribute</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/composite:interface&gt;</span>

        <span class="tag">&lt;composite:implementation&gt;</span>
            <span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Email id: </span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/h:outputLabel&gt;</span>
            <span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cc.attrs.value}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/h:inputText&gt;</span>
        <span class="tag">&lt;/composite:implementation&gt;</span>
    <span class="tag">&lt;/h:body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the use of <code>cc.attrs.value</code> when defining the value of the
<code>inputText</code> component. The word <code>cc</code> in Jakarta Server Faces is a reserved
word for composite components. The <code>#{cc.attrs.`attribute-name</code>}`
expression is used to access the attributes defined for the composite
component&#8217;s interface, which in this case happens to be <code>value</code>.</p>
</div>
<div class="paragraph">
<p>The preceding example content is stored as a file named <code>email.xhtml</code> in
a folder named <code>resources/emcomp</code>, under the application web root
directory. This directory is considered a library by Jakarta Server Faces,
and a component can be accessed from such a library. For more
information on resources, see <a href="#GIRGM">Web
Resources</a>.</p>
</div>
<div class="paragraph">
<p>The web page that uses this composite component is generally called a
using page. The using page includes a reference to the composite
component, in the <code>xml</code> namespace declarations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="doctype">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:h</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/html</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:em</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/composite/emcomp</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

    <span class="tag">&lt;h:head&gt;</span>
        <span class="tag">&lt;title&gt;</span>Using a sample composite component<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;/h:head&gt;</span>

    <span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;h:form&gt;</span>
            <span class="tag">&lt;em:email</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Enter your email id</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;/h:form&gt;</span>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The local composite component library is defined in the <code>xmlns</code>
namespace with the declaration
<code>xmlns:em="http://xmlns.jcp.org/jsf/composite/emcomp"</code>. The component
itself is accessed through the <code>em:email</code> tag. The preceding example
content can be stored as a web page named <code>emuserpage.xhtml</code> under the
web root directory. When compiled and deployed on a server, it can be
accessed with the following URL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">http://localhost:8080/application-name/emuserpage.xhtml</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#GKHXA">Chapter 14, "Composite Components:
Advanced Topics and an Example,"</a> for more information and an example.</p>
</div>
<div class="paragraph">
<p><a id="GIRGM"></a><a id="web-resources"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_web_resources">2.6. Web Resources</h3>
<div class="paragraph">
<p>Web resources are any software artifacts that the web application
requires for proper rendering, including images, script files, and any
user-created component libraries. Resources must be collected in a
standard location, which can be one of the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A resource packaged in the web application root must be in a
subdirectory of a <code>resources</code> directory at the web application root:
`resources/`resource-identifier.</p>
</li>
<li>
<p>A resource packaged in the web application&#8217;s classpath must be in a
subdirectory of the <code>META-INF/resources</code> directory within a web
application: `META-INF/resources/`resource-identifier. You can use this
file structure to package resources in a JAR file bundled in the web
application.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Jakarta Server Faces runtime will look for the resources in the
preceding listed locations, in that order.</p>
</div>
<div class="paragraph">
<p>Resource identifiers are unique strings that conform to the following
format (all on one line):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">[locale-prefix/][library-name/][library-version/]resource-name[/resource-version]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Elements of the resource identifier in brackets (<code>[]</code>) are optional,
indicating that only a resource-name, which is usually a file name, is a
required element. For example, the most common way to specify a style
sheet, image, or script is to use the <code>library</code> and <code>name</code> attributes,
as in the following tag from the <code>guessnumber-jsf</code> example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputStylesheet</span> <span class="attribute-name">library</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">css</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">default.css</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This tag specifies that the <code>default.css</code> style sheet is in the
directory <code>web/resources/css</code>.</p>
</div>
<div class="paragraph">
<p>You can also specify the location of an image using the following
syntax, also from the <code>guessnumber-jsf</code> example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:graphicImage</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{resource['images:wave.med.gif']}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This tag specifies that the image named <code>wave.med.gif</code> is in the
directory <code>web/resources/images</code>.</p>
</div>
<div class="paragraph">
<p>Resources can be considered as a library location. Any artifact, such as
a composite component or a template that is stored in the <code>resources</code>
directory, becomes accessible to the other application components, which
can use it to create a resource instance.</p>
</div>
<div class="paragraph">
<p><a id="BABHGBJI"></a><a id="relocatable-resources"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_relocatable_resources">2.7. Relocatable Resources</h3>
<div class="paragraph">
<p>You can place a resource tag in one part of a page and specify that it
be rendered in another part of the page. To do this, you use the
<code>target</code> attribute of a tag that specifies a resource. Acceptable values
for this attribute are as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"head"</code> renders the resource in the <code>head</code> element.</p>
</li>
<li>
<p><code>"body"</code> renders the resource in the <code>body</code> element.</p>
</li>
<li>
<p><code>"form"</code> renders the resource in the <code>form</code> element.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, the following <code>h:outputScript</code> tag is placed within an
<code>h:form</code> element, but it renders the JavaScript in the <code>head</code> element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:form&gt;</span>
    <span class="tag">&lt;h:outputScript</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myscript.js</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">library</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mylibrary</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">target</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">head</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>h:outputStylesheet</code> tag also supports resource relocation, in a
similar way.</p>
</div>
<div class="paragraph">
<p>Relocatable resources are essential for composite components that use
stylesheets and can also be useful for composite components that use
JavaScript. See <a href="#GKHVN">The
compositecomponentexample Example Application</a> for an example.</p>
</div>
<div class="paragraph">
<p><a id="BABHAHDF"></a><a id="resource-library-contracts"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_resource_library_contracts">2.8. Resource Library Contracts</h3>
<div class="paragraph">
<p>Resource library contracts allow you to define a different look and feel
for different parts of one or more applications, instead of either
having to use the same look and feel for all or having to specify a
different look on a page-by-page basis.</p>
</div>
<div class="paragraph">
<p>To do this, you create a <code>contracts</code> section of your web application.
Within the <code>contracts</code> section, you can specify any number of named
areas, each of which is called a contract. Within each contract you can
specify resources such as template files, stylesheets, JavaScript files,
and images.</p>
</div>
<div class="paragraph">
<p>For example, you could specify two contracts named <code>c1</code> and <code>c2</code>, each
of which uses a template and other files:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">src/main/webapp
    WEB-INF/
    contracts
        c1
            template.xhtml
            style.css
            myImg.gif
            myJS.js
        c2
            template.xhtml
            style2.css
            img2.gif
            JS2.js
    index.xhtml
    ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>One part of the application can use <code>c1</code>, while another can use <code>c2</code>.</p>
</div>
<div class="paragraph">
<p>Another way to use contracts is to specify a single contract that
contains multiple templates:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">src/main/webapp
    contracts
        myContract
            template1.xhtml
            template2.xhtml
            style.css
            img.png
            img2.png</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can package a resource library contract in a JAR file for reuse in
different applications. If you do so, the contracts must be located
under <code>META-INF/contracts</code>. You can then place the JAR file in the
<code>WEB-INF/lib</code> directory of an application. This means that the
application would be organized as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">src/main/webapp/
    WEB-INF/lib/myContract.jar
    ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can specify the contract usage within an application&#8217;s
<code>faces-config.xml</code> file, under the <code>resource-library-contracts</code> element.
You need to use this element only if your application uses more than one
contract, however.</p>
</div>
<div class="paragraph">
<p><a id="sthref32"></a><a id="the-hello1-rlc-example-application"></a></p>
</div>
<div class="sect3">
<h4 id="_the_hello1_rlc_example_application">2.8.1. The hello1-rlc Example Application</h4>
<div class="paragraph">
<p>The <code>hello1-rlc</code> example modifies the simple <code>hello1</code> example from
<a href="#BNADX">A Web Module That Uses Jakarta Server Faces
Technology: The hello1 Example</a> to use two resource library contracts.
Each of the two pages in the application uses a different contract.</p>
</div>
<div class="paragraph">
<p>The managed bean for <code>hello1-rlc</code>, <code>Hello.java</code>, is identical to the one
for <code>hello1</code> (except that it replaces the <code>@Named</code> and <code>@RequestScoped</code>
annotations with <code>@Model</code>).</p>
</div>
<div class="paragraph">
<p>The source code for this application is in the
tut-install`/examples/web/jsf/hello1-rlc/` directory.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#BABGEDEB">Configuring the hello1-rlc Example</a></p>
</li>
<li>
<p><a href="#BABDHCFG">The Facelets Pages for the hello1-rlc Example</a></p>
</li>
<li>
<p><a href="#BABBGFFF">To Build, Package, and Deploy the hello1-rlc Example
Using NetBeans IDE</a></p>
</li>
<li>
<p><a href="#BABJAGFB">To Build, Package, and Deploy the hello1-rlc Example
Using Maven</a></p>
</li>
<li>
<p><a href="#BABFCHEB">To Run the hello1-rlc Example</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="BABGEDEB"></a><a id="configuring-the-hello1-rlc-example"></a></p>
</div>
<div class="sect4">
<h5 id="_configuring_the_hello1_rlc_example">Configuring the hello1-rlc Example</h5>
<div class="paragraph">
<p>The <code>faces-config.xml</code> file for the <code>hello1-rlc</code> example contains the
following elements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;resource-library-contracts&gt;</span>
    <span class="tag">&lt;contract-mapping&gt;</span>
        <span class="tag">&lt;url-pattern&gt;</span>/reply/*<span class="tag">&lt;/url-pattern&gt;</span>
        <span class="tag">&lt;contracts&gt;</span>reply<span class="tag">&lt;/contracts&gt;</span>
    <span class="tag">&lt;/contract-mapping&gt;</span>
    <span class="tag">&lt;contract-mapping&gt;</span>
        <span class="tag">&lt;url-pattern&gt;</span>*<span class="tag">&lt;/url-pattern&gt;</span>
        <span class="tag">&lt;contracts&gt;</span>hello<span class="tag">&lt;/contracts&gt;</span>
    <span class="tag">&lt;/contract-mapping&gt;</span>
<span class="tag">&lt;/resource-library-contracts&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>contract-mapping</code> elements within the <code>resource-library-contracts</code>
element map each contract to a different set of pages within the
application. One contract, named <code>reply</code>, is used for all pages under
the <code>reply</code> area of the application (<code>/reply/<strong></code>). The other contract,
<code>hello</code>, is used for all other pages in the application (<code></strong></code>).</p>
</div>
<div class="paragraph">
<p>The application is organized as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">hello1-rlc
    pom.xml
    src/main/java/jakarta/tutorial/hello1rlc/Hello.java
    src/main/webapp
        WEB-INF
            faces-config.xml
            web.xml
        contracts
            hello
                <span class="keyword">default</span>.css
                duke.handsOnHips.gif
                template.xhtml
            reply
                <span class="keyword">default</span>.css
                duke.thumbsup.gif
                template.xhtml
        reply
            response.xhtml
        greeting.xhtml</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>web.xml</code> file specifies the <code>welcome-file</code> as <code>greeting.xhtml</code>.
Because it is not located under <code>src/main/webapp/reply</code>, this Facelets
page uses the <code>hello</code> contract, whereas
<code>src/main/webapp/reply/response.xhtml</code> uses the <code>reply</code> contract.</p>
</div>
<div class="paragraph">
<p><a id="BABDHCFG"></a><a id="the-facelets-pages-for-the-hello1-rlc-example"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_the_facelets_pages_for_the_hello1_rlc_example">The Facelets Pages for the hello1-rlc Example</h5>
<div class="paragraph">
<p>The <code>greeting.xhtml</code> and <code>response.xhtml</code> pages have identical code
calling in their templates:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;ui:composition template=<span class="string"><span class="delimiter">&quot;</span><span class="content">/template.xhtml</span><span class="delimiter">&quot;</span></span>&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>template.xhtml</code> files in the <code>hello</code> and <code>reply</code> contracts differ
only in two respects: the placeholder text for the <code>title</code> element
("Hello Template" and "Reply Template") and the graphic that each
specifies.</p>
</div>
<div class="paragraph">
<p>The <code>default.css</code> stylesheets in the two contracts differ in only one
respect: the background color specified for the <code>body</code> element.</p>
</div>
<div class="paragraph">
<p><a id="BABBGFFF"></a><a id="to-build-package-and-deploy-the-hello1-rlc-example-using-netbeans-ide"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_build_package_and_deploy_the_hello1_rlc_example_using_netbeans_ide">To Build, Package, and Deploy the hello1-rlc Example Using NetBeans IDE</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>From the File menu, choose Open Project.</p>
</li>
<li>
<p>In the Open Project dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/web/jsf</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>hello1-rlc</code> folder.</p>
</li>
<li>
<p>Click Open Project.</p>
</li>
<li>
<p>In the Projects tab, right-click the <code>hello1-rlc</code> project and select
Build.</p>
<div class="paragraph">
<p>This option builds the example application and deploys it to your
GlassFish Server instance.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="BABJAGFB"></a><a id="to-build-package-and-deploy-the-hello1-rlc-example-using-maven"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_build_package_and_deploy_the_hello1_rlc_example_using_maven">To Build, Package, and Deploy the hello1-rlc Example Using Maven</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/web/jsf/hello1-rlc/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file,
<code>hello1-rlc.war</code>, that is located in the <code>target</code> directory. It then
deploys it to your GlassFish Server instance.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="BABFCHEB"></a><a id="to-run-the-hello1-rlc-example"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_run_the_hello1_rlc_example">To Run the hello1-rlc Example</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enter the following URL in your web browser:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/hello1-rlc</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <code>greeting.xhtml</code> page looks just like the one from <code>hello1</code>
except for its background color and graphic.</p>
</li>
<li>
<p>In the text field, enter your name and click Submit.</p>
</li>
<li>
<p>The response page also looks just like the one from <code>hello1</code> except
for its background color and graphic.</p>
<div class="paragraph">
<p>The page displays the name you submitted. Click Back to return to the
<code>greeting.xhtml</code> page.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="BABGECCJ"></a><a id="html5-friendly-markup"></a></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_html5_friendly_markup">2.9. HTML5-Friendly Markup</h3>
<div class="paragraph">
<p>When you want to produce user interface features for which HTML does not
have its own elements, you can create a custom Jakarta Server Faces
component and insert it in your Facelets page. This mechanism can cause
a simple element to create complex web code. However, creating such a
component is a significant task (see <a href="#BNAVG">Chapter
15, "Creating Custom UI Components and Other Custom Objects"</a>).</p>
</div>
<div class="paragraph">
<p>HTML5 offers new elements and attributes that can make it unnecessary to
write your own components. It also provides many new capabilities for
existing components. Jakarta Server Faces technology supports HTML5 not by
introducing new UI components that imitate HTML5 ones but by allowing
you to use HTML5 markup directly. It also allows you to use Jakarta Server
Faces attributes within HTML5 elements. Jakarta Server Faces technology
support for HTML5 falls into two categories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Pass-through elements</p>
</li>
<li>
<p>Pass-through attributes</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The effect of the HTML5-friendly markup feature is to offer the Facelets
page author almost complete control over the rendered page output,
rather than having to pass this control off to component authors. You
can mix and match Jakarta Server Faces and HTML5 components and elements as
you see fit.</p>
</div>
<div class="paragraph">
<p><a id="sthref33"></a><a id="using-pass-through-elements"></a></p>
</div>
<div class="sect3">
<h4 id="_using_pass_through_elements">2.9.1. Using Pass-Through Elements</h4>
<div class="paragraph">
<p>Pass-through elements allow you to use HTML5 tags and attributes but to
treat them as equivalent to Jakarta Server Faces components associated with
a server-side <code>UIComponent</code> instance.</p>
</div>
<div class="paragraph">
<p>To make an element that is not a Jakarta Server Faces element a pass-through
element, specify at least one of its attributes using the
<code><a href="http://xmlns.jcp.org/jsf" class="bare">http://xmlns.jcp.org/jsf</a></code> namespace. For example, the following code
declares the namespace with the short name <code>jsf</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html</span> <span class="attribute-name">...</span> <span class="attribute-name">xmlns:jsf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf</span><span class="delimiter">&quot;</span></span>
<span class="attribute-name">...</span>
    <span class="error">&lt;</span><span class="attribute-name">input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">email</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">jsf:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">email</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">email</span><span class="delimiter">&quot;</span></span>
           <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{reservationBean.email}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, the <code>jsf</code> prefix is placed on the <code>id</code> attribute so that the HTML5
input tag&#8217;s attributes are treated as part of the Facelets page. This
means that, for example, you can use EL expressions to retrieve managed
bean properties.</p>
</div>
<div class="paragraph">
<p><a href="#BABJADGH">Table 8-4</a> shows how pass-through elements are rendered
as Facelets tags. The server faces implementation uses the element name and the
identifying attribute to determine the corresponding Facelets tag that
will be used in the server-side processing. The browser, however,
interprets the markup that the page author has written.</p>
</div>
<div class="paragraph">
<p><a id="sthref34"></a><a id="BABJADGH"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 8-4 How Facelets Renders HTML5 Elements</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 60%;">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>HTML5 Element Name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Identifying Attribute</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Facelets Tag</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsf:action</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:commandLink</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsf:actionListener</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:commandLink</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsf:value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:outputLink</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsf:outcome</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:link</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>body</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:body</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>button</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:commandButton</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>button</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsf:outcome</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:button</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>form</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:form</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>head</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:head</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>img</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:graphicImage</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="button"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:commandButton</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="checkbox"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:selectBooleanCheckbox</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="color"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputText</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="date"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputText</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="datetime"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputText</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="datetime-local"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputText</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="email"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputText</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="month"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputText</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="number"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputText</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="range"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputText</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="search"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputText</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="time"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputText</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="url"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputText</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="week"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputText</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="file"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputFile</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="hidden"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputHidden</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="password"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputSecret</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="reset"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:commandButton</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="submit"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:commandButton</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type="*"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputText</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>label</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:outputLabel</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>link</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:outputStylesheet</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>script</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:outputScript</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>select</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multiple="*"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:selectManyListbox</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>select</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:selectOneListbox</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>textarea</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputTextArea</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="sthref35"></a><a id="using-pass-through-attributes"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_pass_through_attributes">2.9.2. Using Pass-Through Attributes</h4>
<div class="paragraph">
<p>Pass-through attributes are the converse of pass-through elements. They
allow you to pass attributes that are not Jakarta Server Faces attributes
through to the browser without interpretation. If you specify a
pass-through attribute in a Jakarta Server Faces <code>UIComponent</code>, the
attribute name and value are passed straight through to the browser
without being interpreted by Jakarta Server Faces components or renderers.
There are several ways to specify pass-through attributes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Jakarta Server Faces namespace for pass-through attributes to
prefix the attribute names within a Jakarta Server Faces component. For
example, the following code declares the namespace with the short name
<code>p</code>, then passes the <code>type</code>, <code>min</code>, <code>max</code>, <code>required</code>, and <code>title</code>
attributes through to the HTML5 <code>input</code> component:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html</span> <span class="attribute-name">...</span> <span class="attribute-name">xmlns:p</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/passthrough</span><span class="delimiter">&quot;</span></span>
<span class="attribute-name">...</span>

<span class="error">&lt;</span><span class="attribute-name">h:form</span> <span class="attribute-name">prependId</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">nights</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">p:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bean.nights}</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">p:min</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">p:max</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">30</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">p:required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">p:title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Enter a number between 1 and 30 inclusive.</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will cause the following markup to be rendered (assuming that
<code>bean.nights</code> has a default value set to 1):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;input</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">nights</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">min</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">max</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">30</span><span class="delimiter">&quot;</span></span>
       <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>
       <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Enter a number between 1 and 30 inclusive.</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p>To pass a single attribute, nest the <code>f:passThroughAttribute</code> tag
within a component tag. For example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{user.email}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:passThroughAttribute</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">email</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This code would be rendered similarly to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;input</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">me@me.com</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">email</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p>To pass a group of attributes, nest the <code>f:passThroughAttributes</code> tag
within a component tag, specifying an EL value that must evaluate to a
<code>Map&lt;String, Object&gt;</code>. For example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bean.nights</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:passThroughAttributes</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bean.nameValuePairs}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If the bean used the following <code>Map</code> declaration and initialized the map
in the constructor as follows, the markup would be similar to the output
of the code that uses the pass-through attribute namespace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">private Map<span class="tag">&lt;String</span><span class="error">,</span> <span class="attribute-name">Object</span><span class="tag">&gt;</span> nameValuePairs;
...
public Bean() {
    this.nameValuePairs = new HashMap<span class="error">&lt;</span><span class="error">&gt;</span>();
    this.nameValuePairs.put(&quot;type&quot;, &quot;number&quot;);
    this.nameValuePairs.put(&quot;min&quot;, &quot;1&quot;);
    this.nameValuePairs.put(&quot;max&quot;, &quot;30&quot;);
    this.nameValuePairs.put(&quot;required&quot;, &quot;required&quot;);
    this.nameValuePairs.put(&quot;title&quot;,
            &quot;Enter a number between 1 and 4 inclusive.&quot;);
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="BABGGIAA"></a><a id="the-reservation-example-application"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_the_reservation_example_application">2.9.3. The reservation Example Application</h4>
<div class="paragraph">
<p>The <code>reservation</code> example application provides a set of HTML5 <code>input</code>
elements of various types to simulate purchasing tickets for a
theatrical event. It consists of two Facelets pages, <code>reservation.xhtml</code>
and <code>confirmation.xhtml</code>, and a backing bean, <code>ReservationBean.java</code>.
The pages use both pass-through attributes and pass-through elements.</p>
</div>
<div class="paragraph">
<p>The source code for this application is in the
tut-install`/examples/web/jsf/reservation/` directory.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#BABGCAHH">The Facelets Pages for the reservation Application</a></p>
</li>
<li>
<p><a href="#BABHFCCG">The Managed Bean for the reservation Application</a></p>
</li>
<li>
<p><a href="#BABIHHGC">To Build, Package, and Deploy the reservation Example
Using NetBeans IDE</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="BABGCAHH"></a><a id="the-facelets-pages-for-the-reservation-application"></a></p>
</div>
<div class="sect4">
<h5 id="_the_facelets_pages_for_the_reservation_application">The Facelets Pages for the reservation Application</h5>
<div class="paragraph">
<p>The first important feature of the Facelets pages for the <code>reservation</code>
application is the <code>DOCTYPE</code> header. Most Facelets pages in Jakarta Server
Faces applications refer to the XHTML DTD. The facelets pages for this
application begin simply with the following <code>DOCTYPE</code> header, which
indicates an HTML5 page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="doctype">&lt;!DOCTYPE html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The namespace declarations in the <code>html</code> element of the
<code>reservation.xhtml</code> page specify both the <code>jsf</code> and the <code>passthrough</code>
namespaces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:f</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/core</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:h</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/html</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:p</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/passthrough</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:jsf</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, an empty <code>h:head</code> tag followed by an <code>h:outputStylesheet</code> tag
within the <code>h:body</code> tag illustrates the use of a relocatable resource
(as described in <a href="#BABHGBJI">Relocatable
Resources</a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:head&gt;</span>
<span class="tag">&lt;/h:head&gt;</span>
<span class="tag">&lt;h:body&gt;</span>
    <span class="tag">&lt;h:outputStylesheet</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">css/stylesheet.css</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">target</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">head</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>reservation.xhtml</code> page uses pass-through elements for most of the
form fields on the page. This allows it to use some HTML5-specific
<code>input</code> element types, such as <code>date</code> and <code>email</code>. For example, the
following element renders both a date format and a calendar from which
you can choose a date. The <code>jsf</code> prefix on the <code>id</code> attribute makes the
element a pass-through one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">jsf:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>
           <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{reservationBean.date}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>
           <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Enter or choose a date.</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The field for the number of tickets, however, uses the
<code>h:passThroughAttributes</code> tag to pass a <code>Map</code> defined in the managed
bean. It also recalculates the total in response to a change in the
field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    <span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tickets</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{reservationBean.tickets}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;f:passThroughAttributes</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{reservationBean.ticketAttrs}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;f:ajax</span> <span class="attribute-name">event</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">change</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">render</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">total</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">listener</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{reservationBean.calculateTotal}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The field for the price specifies the <code>number</code> type as a pass-through
attribute of the <code>h:inputText</code> element, offering a range of four ticket
prices. Here, the <code>p</code> prefix on the HTML5 attributes passes them through
to the browser uninterpreted by the Jakarta Server Faces input component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    <span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">p:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{reservationBean.price}</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">p:min</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">80</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">p:max</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">120</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">p:step</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">20</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">p:required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">p:title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Enter a price: 80, 100, 120, or 140.</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;f:ajax</span> <span class="attribute-name">event</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">change</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">render</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">total</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">listener</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{reservationBean.calculateTotal}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The output of the <code>calculateTotal</code> method that is specified as the
listener for the Ajax event is rendered in the output element whose <code>id</code>
and <code>name</code> value is <code>total</code>. See <a href="#GKIOW">Chapter 13,
"Using Ajax with Jakarta Server Faces Technology"</a>, for more information.</p>
</div>
<div class="paragraph">
<p>The second Facelets page, <code>confirmation.xhtml</code>, uses a pass-through
<code>output</code> element to display the values entered by the user and provides
a Facelets <code>h:commandButton</code> tag to allow the user to return to the
<code>reservation.xhtml</code> page.</p>
</div>
<div class="paragraph">
<p><a id="BABHFCCG"></a><a id="the-managed-bean-for-the-reservation-application"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_the_managed_bean_for_the_reservation_application">The Managed Bean for the reservation Application</h5>
<div class="paragraph">
<p>The session-scoped managed bean for the reservation application,
<code>ReservationBean.java</code>, contains properties for all the elements on the
Facelets pages. It also contains two methods, <code>calculateTotal</code> and
<code>clear</code>, that act as listeners for Ajax events on the
<code>reservation.xhtml</code> page.</p>
</div>
<div class="paragraph">
<p><a id="BABIHHGC"></a><a id="to-build-package-and-deploy-the-reservation-example-using-netbeans-ide"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_build_package_and_deploy_the_reservation_example_using_netbeans_ide">To Build, Package, and Deploy the reservation Example Using NetBeans IDE</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>From the File menu, choose Open Project.</p>
</li>
<li>
<p>In the Open Project dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/web/jsf</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>reservation</code> folder.</p>
</li>
<li>
<p>Click Open Project.</p>
</li>
<li>
<p>In the Projects tab, right-click the <code>reservation</code> project and
select Build.</p>
<div class="paragraph">
<p>This option builds the example application and deploys it to your
GlassFish Server instance.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="sthref36"></a><a id="to-build-package-and-deploy-the-reservation-example-using-maven"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_build_package_and_deploy_the_reservation_example_using_maven">To Build, Package, and Deploy the reservation Example Using Maven</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/web/jsf/reservation/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file,
<code>reservation.war</code>, that is located in the <code>target</code> directory. It then
deploys the WAR file to your GlassFish Server instance.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="sthref37"></a><a id="to-run-the-reservation-example"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_run_the_reservation_example">To Run the reservation Example</h5>
<div class="paragraph">
<p>At the time of the publication of this tutorial, the browser that most
fully implements HTML5 is Google Chrome, and it is recommended that you
use it to run this example. Other browsers are catching up, however, and
may work equally well by the time you read this.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enter the following URL in your web browser:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">http://localhost:8080/reservation</code></pre>
</div>
</div>
</li>
<li>
<p>Enter information in the fields of the <code>reservation.xhtml</code> page.</p>
<div class="paragraph">
<p>The Performance Date field has a date field with up and down arrows that
allow you to increment and decrement the month, day, and year as well as
a larger down arrow that brings up a date editor in calendar form.</p>
</div>
<div class="paragraph">
<p>The Number of Tickets and Ticket Price fields also have up and down
arrows that allow you to increment and decrement the values within the
allowed range and steps. The Estimated Total changes when you change
either of these two fields.</p>
</div>
<div class="paragraph">
<p>Email addresses and dates are checked for format, but not for validity
(you can make a reservation for a past date, for instance).</p>
</div>
</li>
<li>
<p>Click Make Reservation to complete the reservation or Clear to
restore the fields to their default values.</p>
</li>
<li>
<p>If you click Make Reservation, the <code>confirmation.xhtml</code> page
appears, displaying the submitted values.</p>
<div class="paragraph">
<p>Click Back to return to the <code>reservation.xhtml</code> page.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_expression_language">3. Expression Language</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="GJDDD"></a><a id="expression-language"></a></p>
</div>
<div class="paragraph">
<p>This chapter introduces the Expression Language (also referred to as the
EL), which provides an important mechanism for enabling the presentation
layer (web pages) to communicate with the application logic (managed
beans). The EL is used by several Jakarta EE technologies, such as
Jakarta Server Faces technology, Jakarta Server Pages technology, and
Dependency Injection for Jakarta EE (CDI). The EL can also be
used in stand-alone environments. This chapter only covers the use of
the EL in Jakarta EE containers.</p>
</div>
<div class="paragraph">
<p><a id="BNAHQ"></a><a id="overview-of-the-el"></a></p>
</div>
<div class="sect2">
<h3 id="_overview_of_the_el">3.1. Overview of the EL</h3>
<div class="paragraph">
<p>The EL allows page authors to use simple expressions to dynamically
access data from JavaBeans components. For example, the <code>test</code> attribute
of the following conditional tag is supplied with an EL expression that
compares 0 with the number of items in the session-scoped bean named
<code>cart</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;c:if</span> <span class="attribute-name">test</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${sessionScope.cart.numberOfItems </span></span><span class="error">&gt;</span> 0}&quot;<span class="error">&gt;</span>
  ...
<span class="tag">&lt;/c:if&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#BNAQP">Using the EL to Reference Managed
Beans</a> for more information on how to use the EL in Jakarta Server Faces
applications.</p>
</div>
<div class="paragraph">
<p>To summarize, the EL provides a way to use simple expressions to perform
the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Dynamically read application data stored in JavaBeans components,
various data structures, and implicit objects</p>
</li>
<li>
<p>Dynamically write data, such as user input into forms, to JavaBeans
components</p>
</li>
<li>
<p>Invoke arbitrary static and public methods</p>
</li>
<li>
<p>Dynamically perform arithmetic, boolean, and string operations</p>
</li>
<li>
<p>Dynamically construct collection objects and perform operations on
collections</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In a Jakarta Server Faces page, an EL expression can be used either in
static text or in the attribute of a custom tag or standard action.</p>
</div>
<div class="paragraph">
<p>Finally, the EL provides a pluggable API for resolving expressions so
that custom resolvers that can handle expressions not already supported
by the EL can be implemented.</p>
</div>
<div class="paragraph">
<p><a id="BNAHR"></a><a id="immediate-and-deferred-evaluation-syntax"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_immediate_and_deferred_evaluation_syntax">3.2. Immediate and Deferred Evaluation Syntax</h3>
<div class="paragraph">
<p>The EL supports both immediate and deferred evaluation of expressions.
Immediate evaluation means that the expression is evaluated and the
result returned as soon as the page is first rendered. Deferred
evaluation means that the technology using the expression language can
use its own machinery to evaluate the expression sometime later during
the page&#8217;s lifecycle, whenever it is appropriate to do so.</p>
</div>
<div class="paragraph">
<p>Those expressions that are evaluated immediately use the <code>${}</code> syntax.
Expressions whose evaluation is deferred use the <code>#{}</code> syntax.</p>
</div>
<div class="paragraph">
<p>Because of its multiphase lifecycle, Jakarta Server Faces technology uses
mostly deferred evaluation expressions. During the lifecycle, component
events are handled, data is validated, and other tasks are performed in
a particular order. Therefore, a Jakarta Server Faces implementation must
defer evaluation of expressions until the appropriate point in the
lifecycle.</p>
</div>
<div class="paragraph">
<p>Other technologies using the EL might have different reasons for using
deferred expressions.</p>
</div>
<div class="paragraph">
<p><a id="BNAHS"></a><a id="immediate-evaluation"></a></p>
</div>
<div class="sect3">
<h4 id="_immediate_evaluation">3.2.1. Immediate Evaluation</h4>
<div class="paragraph">
<p>All expressions using the <code>${}</code> syntax are evaluated immediately. These
expressions can appear as part of a template (static) text or as the
value of a tag attribute that can accept runtime expressions.</p>
</div>
<div class="paragraph">
<p>The following example shows a tag whose <code>value</code> attribute references an
immediate evaluation expression that updates the quantity of books
retrieved from the backing bean named <code>catalog</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;h:outputText value=<span class="string"><span class="delimiter">&quot;</span><span class="content">${catalog.bookQuantity}</span><span class="delimiter">&quot;</span></span> /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Jakarta Server Faces implementation evaluates the expression
<code>${catalog.bookQuantity}</code>, converts it, and passes the returned value to
the tag handler. The value is updated on the page.</p>
</div>
<div class="paragraph">
<p><a id="BNAHT"></a><a id="deferred-evaluation"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_deferred_evaluation">3.2.2. Deferred Evaluation</h4>
<div class="paragraph">
<p>Deferred evaluation expressions take the form <code>#{expr}</code> and can be
evaluated at other phases of a page lifecycle as defined by whatever
technology is using the expression. In the case of Jakarta Server Faces
technology, its controller can evaluate the expression at different
phases of the lifecycle, depending on how the expression is being used
in the page.</p>
</div>
<div class="paragraph">
<p>The following example shows a Jakarta Server Faces <code>h:inputText</code> tag, which
represents a field component into which a user enters a value. The
<code>h:inputText</code> tag&#8217;s <code>value</code> attribute references a deferred evaluation
expression that points to the <code>name</code> property of the <code>customer</code> bean:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{customer.name}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For an initial request of the page containing this tag, the Jakarta Server
Faces implementation evaluates the <code>#{customer.name}</code> expression during
the render-response phase of the lifecycle. During this phase, the
expression merely accesses the value of <code>name</code> from the <code>customer</code> bean,
as is done in immediate evaluation.</p>
</div>
<div class="paragraph">
<p>For a postback request, the Jakarta Server Faces implementation evaluates
the expression at different phases of the lifecycle, during which the
value is retrieved from the request, validated, and propagated to the
<code>customer</code> bean.</p>
</div>
<div class="paragraph">
<p>As shown in this example, deferred evaluation expressions can be</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Value expressions that can be used to both read and write data</p>
</li>
<li>
<p>Method expressions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Value expressions (both immediate and deferred) and method expressions
are explained in the next section.</p>
</div>
<div class="paragraph">
<p><a id="BNAHU"></a><a id="value-and-method-expressions"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_value_and_method_expressions">3.3. Value and Method Expressions</h3>
<div class="paragraph">
<p>The EL defines two kinds of expressions: value expressions and method
expressions. Value expressions can be evaluated to yield a value, and
method expressions are used to reference a method.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#value-expressions">Value Expressions</a></p>
</li>
<li>
<p><a href="#method-expressions">Method Expressions</a></p>
</li>
<li>
<p><a href="#lambda-expressions">Lambda Expressions</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="BNAHV"></a><a id="value-expressions"></a></p>
</div>
<div class="sect3">
<h4 id="_value_expressions">3.3.1. Value Expressions</h4>
<div class="paragraph">
<p>Value expressions can be further categorized into rvalue and lvalue
expressions. An lvalue expression can specify a target, such as an
object, a bean property, or elements of a collection, that can be
assigned a value. An rvalue expression cannot specify such a target.</p>
</div>
<div class="paragraph">
<p>All expressions that are evaluated immediately use the <code>${}</code> delimiters,
and although the expression can be an lvalue expression, no assignments
will ever happen. Expressions whose evaluation can be deferred use the
<code>#{}</code> delimiters and can act as both rvalue and lvalue expressions; if
the expression is an lvalue expression, it can be assigned a new value.
Consider the following two value expressions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">${customer.name}

#{customer.name}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The former uses immediate evaluation syntax, whereas the latter uses
deferred evaluation syntax. The first expression accesses the <code>name</code>
property, gets its value, and passes the value to the tag handler. With
the second expression, the tag handler can defer the expression
evaluation to a later time in the page lifecycle if the technology using
this tag allows.</p>
</div>
<div class="paragraph">
<p>In the case of Jakarta Server Faces technology, the latter tag&#8217;s expression
is evaluated immediately during an initial request for the page. During
a postback request, this expression can be used to set the value of the
<code>name</code> property with user input.</p>
</div>
<div class="paragraph">
<p><a id="BNAHW"></a><a id="referencing-objects"></a></p>
</div>
<div class="sect4">
<h5 id="_referencing_objects">Referencing Objects</h5>
<div class="paragraph">
<p>A top-level identifier (such as <code>customer</code> in the expression
<code>customer.name</code>) can refer to the following objects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Lambda parameters</p>
</li>
<li>
<p>EL variables</p>
</li>
<li>
<p>Managed beans</p>
</li>
<li>
<p>Implicit objects</p>
</li>
<li>
<p>Classes of static fields and methods</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To refer to these objects, you write an expression using a variable that
is the name of the object. The following expression references a managed
bean called <code>customer</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">${customer}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use a custom EL resolver to alter the way variables are
resolved. For instance, you can provide an EL resolver that intercepts
objects with the name <code>customer</code>, so that <code>${customer}</code> returns a value
in the EL resolver instead. (Jakarta Server Faces technology uses an EL
resolver to handle managed beans.)</p>
</div>
<div class="paragraph">
<p>An <code>enum</code> constant is a special case of a static field, and you can
reference such a constant directly. For example, consider this <code>enum</code>
class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">public enum Suit {hearts, spades, diamonds, clubs}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the following expression, in which <code>mySuit</code> is an instance of <code>Suit</code>,
you can compare <code>suit.hearts</code> to the instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">${mySuit == suit.hearts}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BNAHX"></a><a id="referencing-object-properties-or-collection-elements"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_referencing_object_properties_or_collection_elements">Referencing Object Properties or Collection Elements</h5>
<div class="paragraph">
<p>To refer to properties of a bean, static fields or methods of a class,
or items of a collection, you use the <code>.</code> or <code>[]</code> notation. The same
syntax can be used for attributes of an implicit object, because
attributes are placed in a map.</p>
</div>
<div class="paragraph">
<p>To reference the <code>name</code> property of the <code>customer</code> bean, use either the
expression <code>${customer.name}</code> or the expression <code>${customer["name"]}</code>.
Here, the part inside the brackets is a <code>String</code> literal that is the
name of the property to reference. The <code>[]</code> syntax is more general than
the <code>.</code> syntax, because the part inside the brackets can be any <code>String</code>
expression, not just literals.</p>
</div>
<div class="paragraph">
<p>You can use double or single quotes for the <code>String</code> literal. You can
also combine the <code>[]</code> and <code>.</code> notations, as shown here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">${customer.address[&quot;street&quot;]}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can reference a static field or method using the syntax
classname.field, as in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">Boolean.FALSE</code></pre>
</div>
</div>
<div class="paragraph">
<p>The classname is the name of the class without the package name. By
default, all the <code>java.lang</code> packages are imported. You can import other
packages, classes, and static fields as needed.</p>
</div>
<div class="paragraph">
<p>If you are accessing an item in an array or list, you must use the <code>[]</code>
notation and specify an index in the array or list. The index is an
expression that can be converted to <code>int</code>. The following example
references the first of the customer orders, assuming that
<code>customer.orders</code> is a <code>List</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">${customer.orders[1]}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are accessing an item in a <code>Map</code>, you must specify the key for
the <code>Map</code>. If the key is a <code>String</code> literal, the dot (<code>.)</code> notation can
be used. Assuming that <code>customer.orders</code> is a <code>Map</code> with a <code>String</code> key,
the following examples reference the item with the key <code>"socks"</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">${customer.orders[&quot;socks&quot;]}

${customer.orders.socks}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="sthref38"></a><a id="referencing-literals"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_referencing_literals">Referencing Literals</h5>
<div class="paragraph">
<p>The EL defines the following literals:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Boolean: <code>true</code> and <code>false</code></p>
</li>
<li>
<p>Integer: As in Java</p>
</li>
<li>
<p>Floating-point: As in Java</p>
</li>
<li>
<p>String: With single and double quotes; <code>"</code> is escaped as <code>\"</code>, <code>'</code> is
escaped as <code>\'</code>, and <code>\</code> is escaped as <code>\\</code></p>
</li>
<li>
<p>Null: <code>null</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here are some examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>${"literal"}</code></p>
</li>
<li>
<p><code>${true}</code></p>
</li>
<li>
<p><code>${57}</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GJHBZ"></a><a id="parameterized-method-calls"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_parameterized_method_calls">Parameterized Method Calls</h5>
<div class="paragraph">
<p>The EL offers support for parameterized method calls.</p>
</div>
<div class="paragraph">
<p>Both the <code>.</code> and <code>[]</code> operators can be used for invoking method calls
with parameters, as shown in the following expression syntax:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>expr-a`[<code>expr-b</code>](<code>parameters</code>)`</p>
</li>
<li>
<p>expr-a`.<code>identifier-b</code>(<code>parameters</code>)`</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the first expression syntax, expr-a is evaluated to represent a bean
object. The expression expr-b is evaluated and cast to a string that
represents a method in the bean represented by expr-a. In the second
expression syntax, expr-a is evaluated to represent a bean object, and
identifier-b is a string that represents a method in the bean object.
The parameters in parentheses are the arguments for the method
invocation. Parameters can be zero or more values of expressions,
separated by commas.</p>
</div>
<div class="paragraph">
<p>Parameters are supported for both value expressions and method
expressions. In the following example, which is a modified tag from the
<code>guessnumber</code> application, a random number is provided as an argument
rather than from user input to the method call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.userNumber('5')}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding example uses a value expression.</p>
</div>
<div class="paragraph">
<p>Consider the following example of a Jakarta Server Faces component tag that
uses a method expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{trader.buy}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">buy</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The EL expression <code>trader.buy</code> calls the <code>trader</code> bean&#8217;s <code>buy</code> method.
You can modify the tag to pass on a parameter. Here is the revised tag
in which a parameter is passed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{trader.buy('SOMESTOCK')}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">buy</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, you are passing the string <code>'SOMESTOCK'</code> (a
stock symbol) as a parameter to the <code>buy</code> method.</p>
</div>
<div class="paragraph">
<p><a id="BNAHY"></a><a id="where-value-expressions-can-be-used"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_where_value_expressions_can_be_used">Where Value Expressions Can Be Used</h5>
<div class="paragraph">
<p>Value expressions using the <code>${}</code> delimiters can be used</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In static text</p>
</li>
<li>
<p>In any standard or custom tag attribute that can accept an expression</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The value of an expression in static text is computed and inserted into
the current output. Here is an example of an expression embedded in
static text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;some:tag&gt;</span>
    some text ${expr} some text
<span class="tag">&lt;/some:tag&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A tag attribute can be set in the following ways.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>With a single expression construct:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;some:tag</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${expr}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

<span class="tag">&lt;another:tag</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{expr}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>These expressions are evaluated, and the result is converted to the
attribute&#8217;s expected type.</p>
</div>
</li>
<li>
<p>With one or more expressions separated or surrounded by text:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;some:tag</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">some${expr}${expr}text${expr}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

<span class="tag">&lt;another:tag</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">some#{expr}#{expr}text#{expr}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>These kinds of expression, called composite expressions, are evaluated
from left to right. Each expression embedded in the composite expression
is converted to a <code>String</code> and then concatenated with any intervening
text. The resulting <code>String</code> is then converted to the attribute&#8217;s
expected type.</p>
</div>
</li>
<li>
<p>With text only:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;some:tag</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sometext</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The attribute&#8217;s <code>String</code> value is converted to the attribute&#8217;s expected
type.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can use the string concatenation operator += to create a single
expression from what would otherwise be a composite expression. For
example, you could change the composite expression</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;some:tag</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sometext ${expr} moretext</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;some:tag</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${sometext += expr += moretext}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>All expressions used to set attribute values are evaluated in the
context of an expected type. If the result of the expression evaluation
does not match the expected type exactly, a type conversion will be
performed. For example, the expression <code>${1.2E4}</code> provided as the value
of an attribute of type <code>float</code> will result in the following conversion:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">Float.valueOf(&quot;1.2E4&quot;).floatValue()</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BNAHZ"></a><a id="method-expressions"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_method_expressions">3.3.2. Method Expressions</h4>
<div class="paragraph">
<p>Another feature of the EL is its support of deferred method expressions.
A method expression is used to refer to a public method of a bean and
has the same syntax as an lvalue expression.</p>
</div>
<div class="paragraph">
<p>In Jakarta Server Faces technology, a component tag represents a component
on a page. The component tag uses method expressions to specify methods
that can be invoked to perform some processing for the component. These
methods are necessary for handling events that the components generate
and for validating component data, as shown in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:form&gt;</span>
    <span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{customer.name}</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">validator</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{customer.validateName}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span>
                     <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{customer.submit}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>h:inputText</code> tag displays as a field. The <code>validator</code> attribute of
this <code>h:inputText</code> tag references a method, called <code>validateName</code>, in
the bean, called <code>customer</code>.</p>
</div>
<div class="paragraph">
<p>Because a method can be invoked during different phases of the
lifecycle, method expressions must always use the deferred evaluation
syntax.</p>
</div>
<div class="paragraph">
<p>Like lvalue expressions, method expressions can use the <code>.</code> and the <code>[]</code>
operators. For example, <code>#{object.method}</code> is equivalent to
#<code>{object["method"]}</code>. The literal inside the <code>[]</code> is converted to
<code>String</code> and is used to find the name of the method that matches it.</p>
</div>
<div class="paragraph">
<p>Method expressions can be used only in tag attributes and only in the
following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>With a single expression construct, where bean refers to a JavaBeans
component and method refers to a method of the JavaBeans component:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;some:tag</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bean.method}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The expression is evaluated to a method expression, which is passed to
the tag handler. The method represented by the method expression can
then be invoked later.</p>
</div>
</li>
<li>
<p>With text only:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;some:tag</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sometext</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Method expressions support literals primarily to support <code>action</code>
attributes in Jakarta Server Faces technology. When the method referenced by
this method expression is invoked, the method returns the <code>String</code>
literal, which is then converted to the expected return type, as defined
in the tag&#8217;s tag library descriptor.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="BEIHCBAH"></a><a id="lambda-expressions"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_lambda_expressions">3.3.3. Lambda Expressions</h4>
<div class="paragraph">
<p>A lambda expression is a value expression with parameters. The syntax is
similar to that of the lambda expression in the Java programming
language, except that in the EL, the body of the lambda expression is an
EL expression.</p>
</div>
<div class="paragraph">
<p>For basic information on lambda expressions, see
<code><a href="http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html" class="bare">http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html</a></code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Note</strong>:</p>
</div>
<div class="paragraph">
<p>Lambda expressions are part of Java SE 8, but you can use them in EL
expressions with Java SE 7, the Java version associated with the Jakarta EE
7 platform.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A lambda expression uses the arrow token (<code>&#8594;)</code> operator. The
identifiers to the left of the operator are called lambda parameters.
The body, to the right of the operator, must be an EL expression. The
lambda parameters are enclosed in parentheses; the parentheses can be
omitted if there is only one parameter. Here are some examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">x -<span class="error">&gt;</span> x+1
(x, y) -<span class="error">&gt;</span> x + y
() -<span class="error">&gt;</span> 64</code></pre>
</div>
</div>
<div class="paragraph">
<p>A lambda expression behaves like a function. It can be invoked
immediately. For example, the following invocation evaluates to 7:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">((x, y) -<span class="error">&gt;</span> x + y)(3, 4)</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use a lambda expression in conjunction with the assignment and
semicolon operators. For example, the following code assigns the
previous lambda expression to a variable and then invokes it. The result
is again 7:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">v = (x, y) -<span class="error">&gt;</span> x + y; v(3, 4)</code></pre>
</div>
</div>
<div class="paragraph">
<p>A lambda expression can also be passed as an argument to a method and be
invoked in the method. It can also be nested in another lambda
expression.</p>
</div>
<div class="paragraph">
<p><a id="CIHGABHD"></a><a id="operations-on-collection-objects"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_operations_on_collection_objects">3.4. Operations on Collection Objects</h3>
<div class="paragraph">
<p>The EL supports operations on collection objects: sets, lists, and maps.
It allows the dynamic creation of collection objects, which can then be
operated on using streams and pipelines.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Note:</p>
</div>
<div class="paragraph">
<p>Like lambda expressions, operations on collection objects are part of
Java SE 8.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For example, you can construct a set as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">{<span class="integer">1</span>,<span class="integer">2</span>,<span class="integer">3</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can construct a list as follows; a list can contain various types of
items:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">[<span class="integer">1</span>,<span class="integer">2</span>,<span class="integer">3</span>]
[<span class="integer">1</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">two</span><span class="delimiter">&quot;</span></span>, [three,four]]</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can construct a map by using a colon to define the entries, as
follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">{<span class="string"><span class="delimiter">&quot;</span><span class="content">one</span><span class="delimiter">&quot;</span></span>:<span class="integer">1</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">two</span><span class="delimiter">&quot;</span></span>:<span class="integer">2</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">three</span><span class="delimiter">&quot;</span></span>:<span class="integer">3</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You operate on collection objects using method calls to the stream of
elements derived from the collection. Some operations return another
stream, which allows additional operations. Therefore, you can chain
these operations together in a pipeline.</p>
</div>
<div class="paragraph">
<p>A stream pipeline consists of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A source (the <code>Stream</code> object)</p>
</li>
<li>
<p>Any number of intermediate operations that return a stream (for
example, <code>filter</code> and <code>map</code>)</p>
</li>
<li>
<p>A terminal operation that does not return a stream (for example,
<code>toList()</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>stream</code> method obtains a <code>Stream</code> from a <code>java.util.Collection</code> or
a Java array. The stream operations do not modify the original
collection object.</p>
</div>
<div class="paragraph">
<p>For example, you might generate a list of titles of history books as
follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">books.stream().filter(b-&gt;b.category == <span class="string"><span class="delimiter">'</span><span class="content">history</span><span class="delimiter">'</span></span>)
              .map(b-&gt;b.title)
              .toList()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following simpler example returns a sorted version of the original
list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">[<span class="integer">1</span>,<span class="integer">3</span>,<span class="integer">5</span>,<span class="integer">2</span>].stream().sorted().toList()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Streams and stream operations are documented in the Java SE 8 API
documentation, available at <code><a href="http://docs.oracle.com/javase/8/docs/api/" class="bare">http://docs.oracle.com/javase/8/docs/api/</a></code>.
The following subset of operations is supported by the EL:</p>
</div>
<div class="paragraph">
<p><code>allMatch</code><br>
<code>anyMatch</code><br>
<code>average</code><br>
<code>count</code><br>
<code>distinct</code><br>
<code>filter</code><br>
<code>findFirst</code><br>
<code>flatMap</code><br>
<code>forEach</code><br>
<code>iterator</code><br>
<code>limit</code><br>
<code>map</code><br>
<code>max</code><br>
<code>min</code><br>
<code>noneMatch</code><br>
<code>peek</code><br>
<code>reduce</code><br>
<code>sorted</code><br>
<code>substream</code><br>
<code>sum</code><br>
<code>toArray</code><br>
<code>toList</code><br></p>
</div>
<div class="paragraph">
<p>See the EL specification at <code><a href="http://www.jcp.org/en/jsr/detail?id=341" class="bare">http://www.jcp.org/en/jsr/detail?id=341</a></code>
for details on these operations.</p>
</div>
<div class="paragraph">
<p><a id="BNAIK"></a><a id="operators"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_operators">3.5. Operators</h3>
<div class="paragraph">
<p>In addition to the <code>.</code> and <code>[]</code> operators discussed in
<a href="#BNAHU">Value and Method Expressions</a>, the EL provides
the following operators, which can be used in rvalue expressions only.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Arithmetic: <code>+</code>, <code>-</code> (binary), <code>*</code>, <code>/</code> and <code>div</code>, <code>%</code> and <code>mod</code>, <code>-</code>
(unary).</p>
</li>
<li>
<p>String concatenation: <code>+=</code>.</p>
</li>
<li>
<p>Logical: <code>and</code>, <code>&amp;&amp;</code>, <code>or</code>, <code>||</code>, <code>not</code>, <code>!</code>.</p>
</li>
<li>
<p>Relational: <code>==</code>, <code>eq</code>, <code>!=</code>, <code>ne</code>, <code>&lt;</code>, <code>lt</code>, <code>&gt;</code>, <code>gt</code>, <code>&#8656;</code>, <code>ge</code>,
<code>&gt;=</code>, <code>le</code>. Comparisons can be made against other values or against
Boolean, string, integer, or floating-point literals.</p>
</li>
<li>
<p>Empty: The <code>empty</code> operator is a prefix operation that can be used to
determine whether a value is <code>null</code> or empty.</p>
</li>
<li>
<p>Conditional: <code>A ? B : C</code>. Evaluate <code>B</code> or <code>C</code>, depending on the result
of the evaluation of <code>A</code>.</p>
</li>
<li>
<p>Lambda expression: <code>&#8594;</code>, the arrow token.</p>
</li>
<li>
<p>Assignment: <code>=</code>.</p>
</li>
<li>
<p>Semicolon: <code>;</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The precedence of operators, highest to lowest, left to right, is as
follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>[] .</code></p>
</li>
<li>
<p><code>()</code> (used to change the precedence of operators)</p>
</li>
<li>
<p><code>-</code> (unary) <code>not ! empty</code></p>
</li>
<li>
<p><code>* / div % mod</code></p>
</li>
<li>
<p><code>+ -</code> (binary)</p>
</li>
<li>
<p><code>+=</code></p>
</li>
<li>
<p><code>&lt;&gt; &#8656; &gt;= lt gt le ge</code></p>
</li>
<li>
<p><code>== != eq ne</code></p>
</li>
<li>
<p><code>&amp;&amp; and</code></p>
</li>
<li>
<p><code>|| or</code></p>
</li>
<li>
<p><code>? :</code></p>
</li>
<li>
<p><code>&#8594;</code></p>
</li>
<li>
<p><code>=</code></p>
</li>
<li>
<p><code>;</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="BNAIL"></a><a id="reserved-words"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_reserved_words">3.6. Reserved Words</h3>
<div class="paragraph">
<p>The following words are reserved for the EL and should not be used as
identifiers:</p>
</div>
<div class="paragraph">
<p><code>and</code><br>
<code>or</code><br>
<code>not</code><br>
<code>eq</code><br>
<code>ne</code><br>
<code>lt</code><br>
<code>gt</code><br>
<code>le</code><br>
<code>ge</code><br>
<code>true</code><br>
<code>false</code><br>
<code>null</code><br>
<code>instanceof</code><br>
<code>empty</code><br>
<code>div</code><br>
<code>mod</code></p>
</div>
<div class="paragraph">
<p><a id="BNAIM"></a><a id="examples-of-el-expressions"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_of_el_expressions">3.7. Examples of EL Expressions</h3>
<div class="paragraph">
<p><a href="#BNAIN">Table 9-1</a> contains example EL expressions and the result of
evaluating them.</p>
</div>
<div class="paragraph">
<p><a id="sthref39"></a><a id="BNAIN"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 9-1 Example Expressions</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EL Expression</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Result</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${1&gt; (4/2)}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${4.0&gt;= 3}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${100.0 == 100}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${(10*10) ne 100}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${'a' &gt; 'b'}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${'hip' lt 'hit'}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${4&gt; 3}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${1.2E4 + 1.4}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>12001.4</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${3 div 4}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.75</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${10 mod 4}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${((x, y) &#8594; x + y)(3, 5.5)}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>8.5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[1,2,3,4].stream().sum()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[1,3,5,2].stream().sorted().toList()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[1, 2, 3, 5]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${!empty param.Add}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>False</code> if the request parameter named <code>Add</code> is
<code>null</code> or an empty string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${pageContext.request.contextPath}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The context path</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${sessionScope.cart.numberOfItems}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value of the <code>numberOfItems</code>
property of the session-scoped attribute named <code>cart</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${param['mycom.productId']}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value of the request parameter named
<code>mycom.productId</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${header["host"]}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The host</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${departments[deptName]}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value of the entry named <code>deptName</code> in
the <code>departments</code> map</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="error">$</span>{requestScope[<span class="string"><span class="delimiter">'</span><span class="content">javax.servlet.forward.servlet_path</span><span class="delimiter">'</span></span>]}</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value of the request-scoped attribute named
<code>javax.servlet.forward.servlet_path</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>#{customer.lName}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gets the value of the property <code>lName</code> from the
<code>customer</code> bean during an initial request; sets the value of <code>lName</code>
during a postback</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>#{customer.calcTotal}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The return value of the method <code>calcTotal</code> of
the <code>customer</code> bean</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="CIHGBBHA"></a><a id="further-information-about-the-expression-language"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_further_information_about_the_expression_language">3.8. Further Information about the Expression Language</h3>
<div class="paragraph">
<p>For more information about the EL, see</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Expression Language 3.0 specification:</p>
<div class="paragraph">
<p><code><a href="http://www.jcp.org/en/jsr/detail?id=341" class="bare">http://www.jcp.org/en/jsr/detail?id=341</a></code></p>
</div>
</li>
<li>
<p>The EL specification website:</p>
<div class="paragraph">
<p><code><a href="https://github.com/javaee/el-spec" class="bare">https://github.com/javaee/el-spec</a></code></p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_jakarta_server_faces_technology_in_web_pages">4. Using Jakarta Server Faces Technology in Web Pages</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="BNAQZ"></a><a id="using-javaserver-faces-technology-in-web-pages"></a></p>
</div>
<div class="paragraph">
<p>Web pages (Facelets pages, in most cases) represent the presentation
layer for web applications. The process of creating web pages for a
Jakarta Server Faces application includes using component tags to add
components to the page and wire them to backing beans, validators,
listeners, converters, and other server-side objects that are associated
with the page.</p>
</div>
<div class="paragraph">
<p>This chapter explains how to create web pages using various types of
component and core tags. In the next chapter, you will learn about
adding converters, validators, and listeners to component tags to
provide additional functionality to components.</p>
</div>
<div class="paragraph">
<p>Many of the examples in this chapter are taken from
<a href="#GLNVI">Chapter 60, "Duke&#8217;s Bookstore Case Study
Example."</a></p>
</div>
<div class="paragraph">
<p><a id="BNARB"></a><a id="setting-up-a-page"></a></p>
</div>
<div class="sect2">
<h3 id="_setting_up_a_page">4.1. Setting Up a Page</h3>
<div class="paragraph">
<p>A typical Jakarta Server Faces web page includes the following elements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A set of namespace declarations that declare the Jakarta Server Faces tag
libraries</p>
</li>
<li>
<p>Optionally, the HTML head (<code>h:head</code>) and body (<code>h:body</code>) tags</p>
</li>
<li>
<p>A form tag (<code>h:form</code>) that represents the user input components</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To add the Jakarta Server Faces components to your web page, you need to
provide the page access to the two standard tag libraries: the
Jakarta Server Faces HTML render kit tag library and the Jakarta Server Faces
core tag library. The o<a href="JSFRK">Jakarta Server Faces standard HTML tag
library</a> defines tags that represent common HTML user interface
components. The Jakarta Server Faces core tag library defines tags that
perform core actions and are independent of a particular render kit.</p>
</div>
<div class="paragraph">
<p>For a complete list of Jakarta Server Faces Facelets tags and their
attributes, refer to the o<a href="JSFTL">Jakarta Server Faces Facelets Tag
Library documentation</a>.</p>
</div>
<div class="paragraph">
<p>To use any of the Jakarta Server Faces tags, you need to include appropriate
directives at the top of each page specifying the tag libraries.</p>
</div>
<div class="paragraph">
<p>For Facelets applications, the XML namespace directives uniquely
identify the tag library URI and the tag prefix.</p>
</div>
<div class="paragraph">
<p>For example, when you create a Facelets XHTML page, include namespace
directives as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:h</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/html</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:f</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/core</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The XML namespace URI identifies the tag library location, and the
prefix value is used to distinguish the tags belonging to that specific
tag library. You can also use other prefixes instead of the standard <code>h</code>
or <code>f</code>. However, when including the tag in the page you must use the
prefix that you have chosen for the tag library. For example, in the
following web page the <code>form</code> tag must be referenced using the <code>h</code>
prefix because the preceding tag library directive uses the <code>h</code> prefix
to distinguish the tags defined in the HTML tag library:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:form</span> <span class="attribute-name">...</span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The sections <a href="#BNARF">Adding Components to a Page
Using HTML Tag Library Tags</a> and <a href="#BNARC">Using Core
Tags</a> describe how to use the component tags from the Jakarta Server Faces
standard HTML tag library and the core tags from the Jakarta Server Faces
core tag library.</p>
</div>
<div class="paragraph">
<p><a id="BNARF"></a><a id="adding-components-to-a-page-using-html-tag-library-tags"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_adding_components_to_a_page_using_html_tag_library_tags">4.2. Adding Components to a Page Using HTML Tag Library Tags</h3>
<div class="paragraph">
<p>The tags defined by the Jakarta Server Faces standard HTML tag library
represent HTML form components and other basic HTML elements. These
components display data or accept data from the user. This data is
collected as part of a form and is submitted to the server, usually when
the user clicks a button. This section explains how to use each of the
component tags shown in <a href="#BNAQH">Table 10-1</a>.</p>
</div>
<div class="paragraph">
<p><a id="sthref40"></a><a id="BNAQH"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 10-1 The Component Tags</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 15%;">
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Functions</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rendered As</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Appearance</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:column</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents a column of data in a data component</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A column
of data in an HTML table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A column in a table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:commandButton</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Submits a form to the application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML
<code>&lt;input type=`value</code>&gt;` element for which the <code>type</code> value can be
<code>"submit"</code>, <code>"reset"</code>, or <code>"image"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A button</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:commandLink</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Links to another page or location on a page</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML
<code>&lt;a href&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A link</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:dataTable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents a data wrapper</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML <code>&lt;table&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A
table that can be updated dynamically</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:form</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents an input form (inner tags of the form receive the
data that will be submitted with the form)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML <code>&lt;form&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No
appearance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:graphicImage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays an image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML <code>&lt;img&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An image</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputFile</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user to upload a file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML
<code>&lt;input type="file"&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A field with a Browse&#8230;&#8203; button</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputHidden</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a page author to include a hidden variable in a
page</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML <code>&lt;input type="hidden"&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No appearance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputSecret</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user to input a string without the actual
string appearing in the field</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML <code>&lt;input type="password"&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A field that displays a row of characters instead of the actual string
entered</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputText</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user to input a string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML
<code>&lt;input type="text"&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A field</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputTextarea</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user to enter a multiline string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML
<code>&lt;textarea&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A multirow field</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:message</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays a localized message</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML <code>&lt;span&gt;</code> tag if
styles are used</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A text string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:messages</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays localized messages</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A set of HTML <code>&lt;span&gt;</code> tags
if styles are used</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A text string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:outputFormat</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays a formatted message</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:outputLabel</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays a nested component as a label for a specified
input field</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML <code>&lt;label&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:outputLink</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Links to another page or location on a page without
generating an action event</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML <code>&lt;a&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A link</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:outputText</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays a line of text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:panelGrid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays a table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML <code>&lt;table&gt;</code> element with <code>&lt;tr&gt;</code>
and <code>&lt;td&gt;</code> elements</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:panelGroup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Groups a set of components under one parent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A HTML
<code>&lt;div&gt;</code> or <code>&lt;span&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A row in a table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:selectBooleanCheckbox</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user to change the value of a
Boolean choice</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML <code>&lt;input type="checkbox"&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A check box</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:selectManyCheckbox</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays a set of check boxes from which the
user can select multiple values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A set of HTML <code>&lt;input&gt;</code> elements of
type <code>checkbox</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A group of check boxes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:selectManyListbox</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user to select multiple items from a
set of items all displayed at once</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML <code>&lt;select&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A box</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:selectManyMenu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user to select multiple items from a set
of items</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML <code>&lt;select&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A menu</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:selectOneListbox</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user to select one item from a set of
items all displayed at once</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML <code>&lt;select&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A box</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:selectOneMenu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user to select one item from a set of items</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML <code>&lt;select&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A menu</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:selectOneRadio</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user to select one item from a set of
items</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An HTML <code>&lt;input type="radio"&gt;</code> element</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A group of options</p>
</div>
<div class="paragraph">
<p>For a standalone radio button, use the <code>group</code> attribute.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The tags correspond to components in the <code>javax.faces.component</code>
package. The components are discussed in more detail in
<a href="#BNATX">Chapter 12, "Developing with Jakarta Server Faces
Technology."</a></p>
</div>
<div class="paragraph">
<p>The next section explains the important attributes that are common to
most component tags. For each of the components discussed in the
following sections, <a href="#BNATY">Writing Bean
Properties</a> explains how to write a bean property bound to that
particular component or its value.</p>
</div>
<div class="paragraph">
<p>For reference information about the tags and their attributes, see the
o<a href="JSFTL">Jakarta Server Faces Facelets Tag Library documentation</a>.</p>
</div>
<div class="paragraph">
<p><a id="BNARG"></a><a id="common-component-tag-attributes"></a></p>
</div>
<div class="sect3">
<h4 id="_common_component_tag_attributes">4.2.1. Common Component Tag Attributes</h4>
<div class="paragraph">
<p>Most of the component tags support the attributes shown in
<a href="#GKCKS">Table 10-2</a>.</p>
</div>
<div class="paragraph">
<p><a id="sthref41"></a><a id="GKCKS"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 10-2 Common Component Tag Attributes</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Attribute</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>binding</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifies a bean property and binds the component instance
to it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uniquely identifies the component.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>immediate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set to <code>true</code>, indicates that any events, validation,
and conversion associated with the component should happen when request
parameter values are applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rendered</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a condition under which the component should be
rendered. If the condition is not satisfied, the component is not
rendered.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>style</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a Cascading Style Sheet (CSS) style for the tag.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>styleClass</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a CSS class that contains definitions of the
styles.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the value of the component in the form of a value
expression.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>All the tag attributes except <code>id</code> can accept expressions, as defined by
the EL, described in <a href="#GJDDD">Expression Language</a>.</p>
</div>
<div class="paragraph">
<p>An attribute such as <code>rendered</code> or <code>value</code> can be set on the page and
then modified in the backing bean for the page.</p>
</div>
<div class="paragraph">
<p><a id="BNARH"></a><a id="the-id-attribute"></a></p>
</div>
<div class="sect4">
<h5 id="_the_id_attribute">The id Attribute</h5>
<div class="paragraph">
<p>The <code>id</code> attribute is not usually required for a component tag but is
used when another component or a server-side class must refer to the
component. If you don&#8217;t include an <code>id</code> attribute, the Jakarta Server Faces
implementation automatically generates a component ID. Unlike most other
Jakarta Server Faces tag attributes, the <code>id</code> attribute takes expressions
using only the evaluation syntax described in
<a href="#BNAHS">Immediate Evaluation</a>, which uses the <code>${}</code>
delimiters. For more information on expression syntax, see
<a href="#BNAHV">Value Expressions</a>.</p>
</div>
<div class="paragraph">
<p><a id="BNARI"></a><a id="the-immediate-attribute"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_the_immediate_attribute">The immediate Attribute</h5>
<div class="paragraph">
<p>Input components and command components (those that implement the
<code>ActionSource</code> interface, such as buttons and links) can set the
<code>immediate</code> attribute to <code>true</code> to force events, validations, and
conversions to be processed when request parameter values are applied.</p>
</div>
<div class="paragraph">
<p>You need to carefully consider how the combination of an input
component&#8217;s <code>immediate</code> value and a command component&#8217;s <code>immediate</code>
value determines what happens when the command component is activated.</p>
</div>
<div class="paragraph">
<p>Suppose that you have a page with a button and a field for entering the
quantity of a book in a shopping cart. If the <code>immediate</code> attributes of
both the button and the field are set to <code>true</code>, the new value entered
in the field will be available for any processing associated with the
event that is generated when the button is clicked. The event associated
with the button as well as the events, validation, and conversion
associated with the field are all handled when request parameter values
are applied.</p>
</div>
<div class="paragraph">
<p>If the button&#8217;s <code>immediate</code> attribute is set to <code>true</code> but the field&#8217;s
<code>immediate</code> attribute is set to <code>false</code>, the event associated with the
button is processed without updating the field&#8217;s local value to the
model layer. The reason is that any events, conversion, and validation
associated with the field occur after request parameter values are
applied.</p>
</div>
<div class="paragraph">
<p>The <code>bookshowcart.xhtml</code> page of the Duke&#8217;s Bookstore case study has
examples of components using the <code>immediate</code> attribute to control which
component&#8217;s data is updated when certain buttons are clicked. The
<code>quantity</code> field for each book does not set the <code>immediate</code> attribute,
so the value is <code>false</code> (the default).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">quantity</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">4</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{item.quantity}</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ItemQuantity}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:validateLongRange</span> <span class="attribute-name">minimum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">0</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    ...
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>immediate</code> attribute of the Continue Shopping hyperlink is set to
<code>true</code>, while the <code>immediate</code> attribute of the Update Quantities
hyperlink is set to <code>false</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandLink</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">continue</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookcatalog</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">immediate</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ContinueShopping}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:commandLink&gt;</span>
...
<span class="tag">&lt;h:commandLink</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">update</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{showcart.update}</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">immediate</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.UpdateQuantities}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:commandLink&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you click the Continue Shopping hyperlink, none of the changes
entered into the <code>quantity</code> input fields will be processed. If you click
the Update Quantities hyperlink, the values in the <code>quantity</code> fields
will be updated in the shopping cart.</p>
</div>
<div class="paragraph">
<p><a id="BNARJ"></a><a id="the-rendered-attribute"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_the_rendered_attribute">The rendered Attribute</h5>
<div class="paragraph">
<p>A component tag uses a Boolean EL expression along with the <code>rendered</code>
attribute to determine whether the component will be rendered. For
example, the <code>commandLink</code> component in the following section of a page
is not rendered if the cart contains no items:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandLink</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">check</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">...</span> <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cart.numberOfItems </span></span><span class="error">&gt;</span> 0}&quot;<span class="error">&gt;</span>
    <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.CartCheck}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:commandLink&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Unlike nearly every other Jakarta Server Faces tag attribute, the <code>rendered</code>
attribute is restricted to using rvalue expressions. As explained in
<a href="#BNAHU">Value and Method Expressions</a>, these rvalue
expressions can only read data; they cannot write the data back to the
data source. Therefore, expressions used with <code>rendered</code> attributes can
use the arithmetic operators and literals that rvalue expressions can
use but lvalue expressions cannot use. For example, the expression in
the preceding example uses the <code>&gt;</code> operator.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Note</strong>:</p>
</div>
<div class="paragraph">
<p>In this example and others, <code>bundle</code> refers to a
<code>java.util.ResourceBundle</code> file that contains locale-specific strings to
be displayed. Resource bundles are discussed in
<a href="#BNAXU">Chapter 22, "Internationalizing and Localizing
Web Applications"</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="BNARK"></a><a id="the-style-and-styleclass-attributes"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_the_style_and_styleclass_attributes">The style and styleClass Attributes</h5>
<div class="paragraph">
<p>The <code>style</code> and <code>styleClass</code> attributes allow you to specify CSS styles
for the rendered output of your tags. <a href="#BNASO">Displaying Error
Messages with the h:message and h:messages Tags</a> describes an example of
using the <code>style</code> attribute to specify styles directly in the attribute.
A component tag can instead refer to a CSS class.</p>
</div>
<div class="paragraph">
<p>The following example shows the use of a <code>dataTable</code> tag that references
the style class <code>list-background</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:dataTable</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">items</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">...</span>
             <span class="attribute-name">styleClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list-background</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cart.items}</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The style sheet that defines this class is <code>stylesheet.css</code>, which will
be included in the application. For more information on defining styles,
see the Cascading Style Sheets specifications and drafts at
<code><a href="http://www.w3.org/Style/CSS/" class="bare">http://www.w3.org/Style/CSS/</a></code>.</p>
</div>
<div class="paragraph">
<p><a id="BNARL"></a><a id="the-value-and-binding-attributes"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_the_value_and_binding_attributes">The value and binding Attributes</h5>
<div class="paragraph">
<p>A tag representing an output component uses the <code>value</code> and <code>binding</code>
attributes to bind its component&#8217;s value or instance, respectively, to a
data object. The <code>value</code> attribute is used more commonly than the
<code>binding</code> attribute, and examples appear throughout this chapter. For
more information on these attributes, see
<a href="#BNAQN">Creating a Managed Bean</a>,
<a href="#BNATZ">Writing Properties Bound to Component
Values</a>, and <a href="#BNAUK">Writing Properties Bound to
Component Instances</a>.</p>
</div>
<div class="paragraph">
<p><a id="GJDGQ"></a><a id="adding-html-head-and-body-tags"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adding_html_head_and_body_tags">4.2.2. Adding HTML Head and Body Tags</h4>
<div class="paragraph">
<p>The HTML head (<code>h:head</code>) and body (<code>h:body</code>) tags add HTML page
structure to Jakarta Server Faces web pages.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>h:head</code> tag represents the head element of an HTML page.</p>
</li>
<li>
<p>The <code>h:body</code> tag represents the body element of an HTML page.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following is an example of an XHTML page using the usual head and
body markup tags:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="doctype">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;title&gt;</span>Add a title<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        Add Content
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following is an example of an XHTML page using <code>h:head</code> and <code>h:body</code>
tags:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="doctype">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:h</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/html</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;h:head&gt;</span>
        Add a title
    <span class="tag">&lt;/h:head&gt;</span>
    <span class="tag">&lt;h:body&gt;</span>
        Add Content
    <span class="tag">&lt;/h:body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Both of the preceding example code segments render the same HTML
elements. The head and body tags are useful mainly for resource
relocation. For more information on resource relocation, see
<a href="#GJGEP">Resource Relocation Using h:outputScript and
h:outputStylesheet Tags</a>.</p>
</div>
<div class="paragraph">
<p><a id="BNARM"></a><a id="adding-a-form-component"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_adding_a_form_component">4.2.3. Adding a Form Component</h4>
<div class="paragraph">
<p>An <code>h:form</code> tag represents an input form, which includes child
components that can contain data that is either presented to the user or
submitted with the form.</p>
</div>
<div class="paragraph">
<p><a href="#BNARN">Figure 10-1</a> shows a typical login form in which a user
enters a user name and password, then submits the form by clicking the
Login button.</p>
</div>
<div id="BNARN" class="paragraph">
<div class="title"><strong>Figure 10-1 A Typical Form</strong></div>
<p><span class="image"><img src="../images/jakartaeett_dt_065_frmcmpnt.png" alt="Form with User Name and Password text fields and a Login button."></span></p>
</div>
<div class="paragraph">
<p>The <code>h:form</code> tag represents the form on the page and encloses all the
components that display or collect data from the user, as shown here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:form&gt;</span>
... other Jakarta Server Faces tags and other content...
<span class="tag">&lt;/h:form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>h:form</code> tag can also include HTML markup to lay out the components
on the page. Note that the <code>h:form</code> tag itself does not perform any
layout; its purpose is to collect data and to declare attributes that
can be used by other components in the form.</p>
</div>
<div class="paragraph">
<p>A page can include multiple <code>h:form</code> tags, but only the values from the
form submitted by the user will be included in the postback request.</p>
</div>
<div class="paragraph">
<p><a id="BNARO"></a><a id="using-text-components"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_text_components">4.2.4. Using Text Components</h4>
<div class="paragraph">
<p>Text components allow users to view and edit text in web applications.
The basic types of text components are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Label, which displays read-only text</p>
</li>
<li>
<p>Field, which allows users to enter text (on one or more lines), often
to be submitted as part of a form</p>
</li>
<li>
<p>Password field, which is a type of field that displays a set of
characters, such as asterisks, instead of the password text that the
user enters</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#BNARP">Figure 10-2</a> shows examples of these text components.</p>
</div>
<div id="BNARP" class="paragraph">
<div class="title"><strong>Figure 10-2 Example Text Components</strong></div>
<p><span class="image"><img src="../images/jakartaeett_dt_068_txtcmpnts.png" alt="A form. " width="User Name" labels a field. "Password" labels a password field. "Comments" labels a multi-line field.""></span></p>
</div>
<div class="paragraph">
<p>Text components can be categorized as either input or output. A
Jakarta Server Faces output component, such as a label, is rendered as
read-only text. A Jakarta Server Faces input component, such as a field, is
rendered as editable text.</p>
</div>
<div class="paragraph">
<p>The input and output components can each be rendered in various ways to
display more specialized text.</p>
</div>
<div class="paragraph">
<p><a href="#BNARQ">Table 10-3</a> lists the tags that represent the input
components.</p>
</div>
<div class="paragraph">
<p><a id="sthref44"></a><a id="BNARQ"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 10-3 Input Tags</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Function</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputHidden</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a page author to include a hidden variable in a
page</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputSecret</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The standard password field: accepts one line of text
with no spaces and displays it as a set of asterisks as it is entered</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputText</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The standard field: accepts a one-line text string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:inputTextarea</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The standard multiline field: accepts multiple lines
of text</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The input tags support the tag attributes shown in <a href="#GKCNH">Table
10-4</a> in addition to those described in <a href="#BNARG">Common Component Tag
Attributes</a>. Note that this table does not include all the attributes
supported by the input tags but just those that are used most often. For
the complete list of attributes, refer to the o<a href="JSFTL">Jakarta Server
Faces Facelets Tag Library documentation</a>.</p>
</div>
<div class="paragraph">
<p><a id="sthref45"></a><a id="GKCNH"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 10-4 Input Tag Attributes</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Attribute</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>converter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifies a converter that will be used to convert the
component&#8217;s local data. See <a href="#BNAST">Using the
Standard Converters</a> for more information on how to use this attribute.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>converterMessage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies an error message to display when the
converter registered on the component fails.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dir</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the direction of the text displayed by this component.
Acceptable values are <code>ltr</code>, meaning left to right, and <code>rtl</code>, meaning
right to left.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>label</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a name that can be used to identify this component
in error messages.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lang</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the code for the language used in the rendered
markup, such as <code>en</code> or <code>pt-BR</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>required</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Takes a <code>boolean</code> value that indicates whether the user
must enter a value in this component.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requiredMessage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies an error message to display when the user
does not enter a value into the component.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>validator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifies a method expression pointing to a managed bean
method that performs validation on the component&#8217;s data. See
<a href="#BNATR">Referencing a Method That Performs
Validation</a> for an example of using the <code>f:validator</code> tag.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>validatorMessage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies an error message to display when the
validator registered on the component fails to validate the component&#8217;s
local value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>valueChangeListener</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifies a method expression that points to a
managed bean method that handles the event of entering a value in this
component. See <a href="#BNATS">Referencing a Method That
Handles a Value-Change Event</a> for an example of using
<code>valueChangeListener</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="#GJFWE">Table 10-5</a> lists the tags that represent the output
components.</p>
</div>
<div class="paragraph">
<p><a id="sthref46"></a><a id="GJFWE"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 10-5 Output Tags</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Function</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:outputFormat</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays a formatted message</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:outputLabel</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The standard read-only label: displays a component as
a label for a specified input field</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:outputLink</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays an <code>&lt;a href&gt;</code> tag that links to another page
without generating an action event</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:outputText</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays a one-line text string</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The output tags support the <code>converter</code> tag attribute in addition to
those listed in <a href="#BNARG">Common Component Tag Attributes</a>.</p>
</div>
<div class="paragraph">
<p>The rest of this section explains how to use some of the tags listed in
<a href="#GJFWE">Output Tags</a>. The other tags are
written in a similar way.</p>
</div>
<div class="paragraph">
<p><a id="BNARR"></a><a id="rendering-a-field-with-the-hinputtext-tag"></a></p>
</div>
<div class="sect4">
<h5 id="_rendering_a_field_with_the_hinputtext_tag">Rendering a Field with the h:inputText Tag</h5>
<div class="paragraph">
<p>The <code>h:inputText</code> tag is used to display a field. A similar tag, the
<code>h:outputText</code> tag, displays a read-only, single-line string. This
section shows you how to use the <code>h:inputText</code> tag. The <code>h:outputText</code>
tag is written in a similar way.</p>
</div>
<div class="paragraph">
<p>Here is an example of an <code>h:inputText</code> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">label</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Customer Name</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">30</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.name}</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">requiredMessage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ReqCustomerName}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:valueChangeListener</span>
        <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jakarta.tutorial.dukesbookstore.listeners.NameChanged</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
 <span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>label</code> attribute specifies a user-friendly name that will be used
in the substitution parameters of error messages displayed for this
component.</p>
</div>
<div class="paragraph">
<p>The <code>value</code> attribute refers to the <code>name</code> property of a managed bean
named <code>CashierBean</code>. This property holds the data for the <code>name</code>
component. After the user submits the form, the value of the <code>name</code>
property in <code>CashierBean</code> will be set to the text entered in the field
corresponding to this tag.</p>
</div>
<div class="paragraph">
<p>The <code>required</code> attribute causes the page to reload, displaying errors,
if the user does not enter a value in the <code>name</code> field. The Jakarta Server
Faces implementation checks whether the value of the component is null
or is an empty string.</p>
</div>
<div class="paragraph">
<p>If your component must have a non-null value or a <code>String</code> value at
least one character in length, you should add a <code>required</code> attribute to
your tag and set its value to <code>true</code>. If your tag has a <code>required</code>
attribute that is set to <code>true</code> and the value is null or a zero-length
string, no other validators that are registered on the tag are called.
If your tag does not have a <code>required</code> attribute set to <code>true</code>, other
validators that are registered on the tag are called, but those
validators must handle the possibility of a null or zero-length string.
See <a href="#GKCRG">Validating Null and Empty Strings</a>
for more information.</p>
</div>
<div class="paragraph">
<p><a id="BNARV"></a><a id="rendering-a-password-field-with-the-hinputsecret-tag"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_rendering_a_password_field_with_the_hinputsecret_tag">Rendering a Password Field with the h:inputSecret Tag</h5>
<div class="paragraph">
<p>The <code>h:inputSecret</code> tag renders an <code>&lt;input type="password"&gt;</code> HTML tag.
When the user types a string into this field, a row of asterisks is
displayed instead of the text entered by the user. Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputSecret</span> <span class="attribute-name">redisplay</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{loginBean.password}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>redisplay</code> attribute is set to <code>false</code>. This will
prevent the password from being displayed in a query string or in the
source file of the resulting HTML page.</p>
</div>
<div class="paragraph">
<p><a id="BNARS"></a><a id="rendering-a-label-with-the-houtputlabel-tag"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_rendering_a_label_with_the_houtputlabel_tag">Rendering a Label with the h:outputLabel Tag</h5>
<div class="paragraph">
<p>The <code>h:outputLabel</code> tag is used to attach a label to a specified input
field for the purpose of making it accessible. The following page uses
an <code>h:outputLabel</code> tag to render the label of a check box:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:selectBooleanCheckbox</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fanClub</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">binding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.specialOffer}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fanClub</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span>
               <span class="content">binding=</span><span class="delimiter">&quot;</span></span><span class="error">#</span><span class="error">{</span><span class="attribute-name">cashierBean.specialOfferText</span><span class="error">}</span><span class="error">&quot;</span><span class="tag">&gt;</span>
    <span class="tag">&lt;h:outputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fanClubLabel</span><span class="delimiter">&quot;</span></span>
                  <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.DukeFanClub}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputLabel&gt;</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>h:selectBooleanCheckbox</code> tag and the <code>h:outputLabel</code> tag have
<code>rendered</code> attributes that are set to <code>false</code> on the page but are set to
true in the <code>CashierBean</code> under certain circumstances. The <code>for</code>
attribute of the <code>h:outputLabel</code> tag maps to the <code>id</code> of the input field
to which the label is attached. The <code>h:outputText</code> tag nested inside the
<code>h:outputLabel</code> tag represents the label component. The <code>value</code>
attribute on the <code>h:outputText</code> tag indicates the text that is displayed
next to the input field.</p>
</div>
<div class="paragraph">
<p>Instead of using an <code>h:outputText</code> tag for the text displayed as a
label, you can simply use the <code>h:outputLabel</code> tag&#8217;s <code>value</code> attribute.
The following code snippet shows what the previous code snippet would
look like if it used the <code>value</code> attribute of the <code>h:outputLabel</code> tag to
specify the text of the label:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:selectBooleanCheckbox</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fanClub</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">binding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.specialOffer}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fanClub</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">binding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.specialOfferText}</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.DukeFanClub}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputLabel&gt;</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BNART"></a><a id="rendering-a-link-with-the-houtputlink-tag"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_rendering_a_link_with_the_houtputlink_tag">Rendering a Link with the h:outputLink Tag</h5>
<div class="paragraph">
<p>The <code>h:outputLink</code> tag is used to render a link that, when clicked,
loads another page but does not generate an action event. You should use
this tag instead of the <code>h:commandLink</code> tag if you always want the URL
specified by the <code>h:outputLink</code> tag&#8217;s <code>value</code> attribute to open and do
not want any processing to be performed when the user clicks the link.
Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputLink</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">javadocs</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    Documentation for this demo
<span class="tag">&lt;/h:outputLink&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The text in the body of the <code>h:outputLink</code> tag identifies the text that
the user clicks to get to the next page.</p>
</div>
<div class="paragraph">
<p><a id="BNARU"></a><a id="displaying-a-formatted-message-with-the-houtputformat-tag"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_displaying_a_formatted_message_with_the_houtputformat_tag">Displaying a Formatted Message with the h:outputFormat Tag</h5>
<div class="paragraph">
<p>The <code>h:outputFormat</code> tag allows display of concatenated messages as a
<code>MessageFormat</code> pattern, as described in the API documentation for
<code>java.text.MessageFormat</code>. Here is an example of an <code>h:outputFormat</code>
tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputFormat</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, {0}!</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:param</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{hello.name}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputFormat&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>value</code> attribute specifies the <code>MessageFormat</code> pattern. The
<code>f:param</code> tag specifies the substitution parameters for the message. The
value of the parameter replaces the <code>{0}</code> in the sentence. If the value
of <code>"#{hello.name}"</code> is "Bill", the message displayed in the page is as
follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">Hello, Bill!</code></pre>
</div>
</div>
<div class="paragraph">
<p>An <code>h:outputFormat</code> tag can include more than one <code>f:param</code> tag for
those messages that have more than one parameter that must be
concatenated into the message. If you have more than one parameter for
one message, make sure that you put the <code>f:param</code> tags in the proper
order so that the data is inserted in the correct place in the message.
Here is the preceding example modified with an additional parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputFormat</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, {0}! You are visitor number {1} to the page.</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:param</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{hello.name}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;f:param</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bean.numVisitor}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputFormat&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of <code>{1}</code> is replaced by the second parameter. The parameter is
an EL expression, <code>bean.numVisitor</code>, in which the property <code>numVisitor</code>
of the managed bean <code>bean</code> keeps track of visitors to the page. This is
an example of a value-expression-enabled tag attribute accepting an EL
expression. The message displayed in the page is now as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">Hello, Bill! You are visitor number 10 to the page.</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BNARW"></a><a id="using-command-component-tags-for-performing-actions-and-navigation"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_command_component_tags_for_performing_actions_and_navigation">4.2.5. Using Command Component Tags for Performing Actions and Navigation</h4>
<div class="paragraph">
<p>In Jakarta Server Faces applications, the button and link component tags are
used to perform actions, such as submitting a form, and for navigating
to another page. These tags are called command component tags because
they perform an action when activated.</p>
</div>
<div class="paragraph">
<p>The <code>h:commandButton</code> tag is rendered as a button. The <code>h:commandLink</code>
tag is rendered as a link.</p>
</div>
<div class="paragraph">
<p>In addition to the tag attributes listed in <a href="#BNARG">Common Component
Tag Attributes</a>, the <code>h:commandButton</code> and <code>h:commandLink</code> tags can use
the following attributes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>action</code>, which is either a logical outcome <code>String</code> or a method
expression pointing to a bean method that returns a logical outcome
<code>String</code>. In either case, the logical outcome <code>String</code> is used to
determine what page to access when the command component tag is
activated.</p>
</li>
<li>
<p><code>actionListener</code>, which is a method expression pointing to a bean
method that processes an action event fired by the command component
tag.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="#BNATP">Referencing a Method That Performs
Navigation</a> for more information on using the <code>action</code> attribute. See
<a href="#BNATQ">Referencing a Method That Handles an
Action Event</a> for details on using the <code>actionListener</code> attribute.</p>
</div>
<div class="paragraph">
<p><a id="BNARX"></a><a id="rendering-a-button-with-the-hcommandbutton-tag"></a></p>
</div>
<div class="sect4">
<h5 id="_rendering_a_button_with_the_hcommandbutton_tag">Rendering a Button with the h:commandButton Tag</h5>
<div class="paragraph">
<p>If you are using an <code>h:commandButton</code> component tag, the data from the
current page is processed when a user clicks the button, and the next
page is opened. Here is an example of the <code>h:commandButton</code> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Submit</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.submit}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Clicking the button will cause the <code>submit</code> method of <code>CashierBean</code> to
be invoked because the <code>action</code> attribute references this method. The
<code>submit</code> method performs some processing and returns a logical outcome.</p>
</div>
<div class="paragraph">
<p>The <code>value</code> attribute of the example <code>h:commandButton</code> tag references
the button&#8217;s label. For information on how to use the <code>action</code>
attribute, see <a href="#BNATP">Referencing a Method That
Performs Navigation</a>.</p>
</div>
<div class="paragraph">
<p><a id="GKBUJ"></a><a id="rendering-a-link-with-the-hcommandlink-tag"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_rendering_a_link_with_the_hcommandlink_tag">Rendering a Link with the h:commandLink Tag</h5>
<div class="paragraph">
<p>The <code>h:commandLink</code> tag represents an HTML link and is rendered as an
HTML <code>&lt;a&gt;</code> element.</p>
</div>
<div class="paragraph">
<p>An <code>h:commandLink</code> tag must include a nested <code>h:outputText</code> tag, which
represents the text that the user clicks to generate the event. Here is
an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandLink</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Duke</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookstore</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:actionListener</span>
        <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jakarta.tutorial.dukesbookstore.listeners.LinkBookChangeListener</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.Book201}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
/h:commandLink<span class="error">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This tag will render HTML that looks something like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;a</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">_idt16:Duke</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span>
     <span class="attribute-name">onclick</span>=<span class="string"><span class="delimiter">&quot;</span>mojarra.jsfcljs(document.getElementById(<span class="string"><span class="delimiter">'</span><span class="content">j_idt16</span><span class="delimiter">'</span></span>),
     {<span class="key"><span class="delimiter">'</span><span class="content">j_idt16:Duke</span><span class="delimiter">'</span></span>:<span class="string"><span class="delimiter">'</span><span class="content">j_idt16:Duke</span><span class="delimiter">'</span></span>},<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>);
     <span class="keyword">return</span> <span class="predefined-constant">false</span>;<span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>My Early Years: Growing Up on Star7, by Duke<span class="tag">&lt;/a&gt;</span></code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Note</strong>:</p>
</div>
<div class="paragraph">
<p>The <code>h:commandLink</code> tag will render JavaScript scripting language. If
you use this tag, make sure that your browser is enabled for JavaScript
technology.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="BNASB"></a><a id="adding-graphics-and-images-with-the-hgraphicimage-tag"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adding_graphics_and_images_with_the_hgraphicimage_tag">4.2.6. Adding Graphics and Images with the h:graphicImage Tag</h4>
<div class="paragraph">
<p>In a Jakarta Server Faces application, use the <code>h:graphicImage</code> tag to
render an image on a page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;h:graphicImage id=<span class="string"><span class="delimiter">&quot;</span><span class="content">mapImage</span><span class="delimiter">&quot;</span></span> url=<span class="string"><span class="delimiter">&quot;</span><span class="content">/resources/images/book_all.jpg</span><span class="delimiter">&quot;</span></span>/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>url</code> attribute specifies the path to the image.
The URL of the example tag begins with a slash (<code>/</code>), which adds the
relative context path of the web application to the beginning of the
path to the image.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can use the facility described in
<a href="#GIRGM">Web Resources</a> to point to the image
location. Here are two examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:graphicImage</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mapImage</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">book_all.jpg</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">library</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">images</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ChooseBook}</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">usemap</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#bookMap</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>

<span class="tag">&lt;h:graphicImage</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{resource['images:wave.med.gif']}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use similar syntax to refer to an image in a style sheet. The
following syntax in a style sheet specifies that the image is to be
found at <code>resources/img/top-background.jpg</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="tag">header</span> {
    <span class="key">position</span>: <span class="value">relative</span>;
    <span class="key">height</span>: <span class="float">150px</span>;
    <span class="key">background</span>: <span class="color">#fff</span> <span class="function"><span class="delimiter">url(</span><span class="content">#{resource['img:top-background.jpg']}</span><span class="delimiter">)</span></span> <span class="value">repeat-x</span>;
    ...</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BNASC"></a><a id="laying-out-components-with-the-hpanelgrid-and-hpanelgroup-tags"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_laying_out_components_with_the_hpanelgrid_and_hpanelgroup_tags">4.2.7. Laying Out Components with the h:panelGrid and h:panelGroup Tags</h4>
<div class="paragraph">
<p>In a Jakarta Server Faces application, you use a panel as a layout container
for a set of other components. A panel is rendered as an HTML table.
<a href="#BNASD">Table 10-6</a> lists the tags used to create panels.</p>
</div>
<div class="paragraph">
<p><a id="sthref47"></a><a id="BNASD"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 10-6 Panel Component Tags</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 55.5555%;">
<col style="width: 22.2223%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Function</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:panelGrid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>columns</code>, <code>columnClasses</code>, <code>footerClass</code>,
<code>headerClass</code>, <code>panelClass</code>, <code>rowClasses</code>, <code>role</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays a table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>h:panelGroup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>layout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Groups a set of components under one parent</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>h:panelGrid</code> tag is used to represent an entire table. The
<code>h:panelGroup</code> tag is used to represent rows in a table. Other tags are
used to represent individual cells in the rows.</p>
</div>
<div class="paragraph">
<p>The <code>columns</code> attribute defines how to group the data in the table and
therefore is required if you want your table to have more than one
column. The <code>h:panelGrid</code> tag also has a set of optional attributes that
specify CSS classes: <code>columnClasses</code>, <code>footerClass</code>, <code>headerClass</code>,
<code>panelClass</code>, and <code>rowClasses</code>. The <code>role</code> attribute can have the value
<code>"presentation"</code> to indicate that the purpose of the table is to format
the display rather than to show data.</p>
</div>
<div class="paragraph">
<p>If the <code>headerClass</code> attribute value is specified, the <code>h:panelGrid</code> tag
must have a header as its first child. Similarly, if a <code>footerClass</code>
attribute value is specified, the <code>h:panelGrid</code> tag must have a footer
as its last child.</p>
</div>
<div class="paragraph">
<p>Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:panelGrid</span> <span class="attribute-name">columns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">headerClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list-header</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">styleClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list-background</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">rowClasses</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list-row-even, list-row-odd</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">summary</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.CustomerInfo}</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.Checkout}</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">role</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">presentation</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:facet</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">header</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.Checkout}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/f:facet&gt;</span>

    <span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.Name}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">30</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.name}</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">requiredMessage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ReqCustomerName}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
         <span class="tag">&lt;f:valueChangeListener</span>
             <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jakarta.tutorial.dukesbookstore.listeners.NameChanged</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/h:inputText&gt;</span>
    <span class="tag">&lt;h:message</span> <span class="attribute-name">styleClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">error-message</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

    <span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ccno</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.CCNumber}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ccno</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">19</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">converterMessage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.CreditMessage}</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">requiredMessage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ReqCreditCard}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:converter</span> <span class="attribute-name">converterId</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ccno</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;f:validateRegex</span>
        <span class="attribute-name">pattern</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">\d{16}|\d{4} \d{4} \d{4} \d{4}|\d{4}-\d{4}-\d{4}-\d{4}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/h:inputText&gt;</span>
    <span class="tag">&lt;h:message</span> <span class="attribute-name">styleClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">error-message</span><span class="delimiter">&quot;</span></span>  <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ccno</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    ...
<span class="tag">&lt;/h:panelGrid&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding <code>h:panelGrid</code> tag is rendered as a table that contains
components in which a customer inputs personal information. This
<code>h:panelGrid</code> tag uses style sheet classes to format the table. The
following code shows the <code>list-header</code> definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="class">.list-header</span> {
    <span class="key">background-color</span>: <span class="color">#ffffff</span>;
    <span class="key">color</span>: <span class="color">#000000</span>;
    <span class="key">text-align</span>: <span class="value">center</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Because the <code>h:panelGrid</code> tag specifies a <code>headerClass</code>, the
<code>h:panelGrid</code> tag must contain a header. The example <code>h:panelGrid</code> tag
uses an <code>f:facet</code> tag for the header. Facets can have only one child, so
an <code>h:panelGroup</code> tag is needed if you want to group more than one
component within an <code>f:facet</code>. The example <code>h:panelGrid</code> tag has only
one cell of data, so an <code>h:panelGroup</code> tag is not needed. (For more
information about facets, see <a href="#BNARZ">Using Data-Bound Table
Components</a>.</p>
</div>
<div class="paragraph">
<p>The <code>h:panelGroup</code> tag has an attribute, <code>layout</code>, in addition to those
listed in <a href="#BNARG">Common Component Tag Attributes</a>. If the <code>layout</code>
attribute has the value <code>block</code>, an HTML <code>div</code> element is rendered to
enclose the row; otherwise, an HTML <code>span</code> element is rendered to
enclose the row. If you are specifying styles for the <code>h:panelGroup</code>
tag, you should set the <code>layout</code> attribute to <code>block</code> in order for the
styles to be applied to the components within the <code>h:panelGroup</code> tag.
You should do this because styles, such as those that set width and
height, are not applied to inline elements, which is how content
enclosed by the <code>span</code> element is defined.</p>
</div>
<div class="paragraph">
<p>An <code>h:panelGroup</code> tag can also be used to encapsulate a nested tree of
components so that the tree of components appears as a single component
to the parent component.</p>
</div>
<div class="paragraph">
<p>Data, represented by the nested tags, is grouped into rows according to
the value of the <code>columns</code> attribute of the <code>h:panelGrid</code> tag. The
<code>columns</code> attribute in the example is set to <code>2</code>, and therefore the
table will have two columns. The column in which each component is
displayed is determined by the order in which the component is listed on
the page modulo 2. So, if a component is the fifth one in the list of
components, that component will be in the 5 modulo 2 column, or column
1.</p>
</div>
<div class="paragraph">
<p><a id="BNASE"></a><a id="displaying-components-for-selecting-one-value"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_displaying_components_for_selecting_one_value">4.2.8. Displaying Components for Selecting One Value</h4>
<div class="paragraph">
<p>Another commonly used component is one that allows a user to select one
value, whether it is the only value available or one of a set of
choices. The most common tags for this kind of component are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An <code>h:selectBooleanCheckbox</code> tag, displayed as a check box, which
represents a Boolean state</p>
</li>
<li>
<p>An <code>h:selectOneRadio</code> tag, displayed as a set of options</p>
</li>
<li>
<p>An <code>h:selectOneMenu</code> tag, displayed as a scrollable list</p>
</li>
<li>
<p>An <code>h:selectOneListbox</code> tag, displayed as an unscrollable list</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#BNASF">Figure 10-3</a> shows examples of these components.</p>
</div>
<div id="BNASF" class="paragraph">
<div class="title"><strong>Figure 10-3 Example Components for Selecting One Item</strong></div>
<p><span class="image"><img src="../images/jakartaeett_dt_067_slctn.png" alt="Options, check box, and lists."></span></p>
</div>
<div class="paragraph">
<p><a id="BNASG"></a><a id="displaying-a-check-box-using-the-hselectbooleancheckbox-tag"></a></p>
</div>
<div class="sect4">
<h5 id="_displaying_a_check_box_using_the_hselectbooleancheckbox_tag">Displaying a Check Box Using the h:selectBooleanCheckbox Tag</h5>
<div class="paragraph">
<p>The <code>h:selectBooleanCheckbox</code> tag is the only tag that Jakarta Server Faces
technology provides for representing a Boolean state.</p>
</div>
<div class="paragraph">
<p>Here is an example that shows how to use the <code>h:selectBooleanCheckbox</code>
tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:selectBooleanCheckbox</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fanClub</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">binding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.specialOffer}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fanClub</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">binding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.specialOfferText}</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.DukeFanClub}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>h:selectBooleanCheckbox</code> tag and the <code>h:outputLabel</code> tag have
<code>rendered</code> attributes that are set to <code>false</code> on the page but are set to
true in the <code>CashierBean</code> under certain circumstances. When the
<code>h:selectBooleanCheckbox</code> tag is rendered, it displays a check box to
allow users to indicate whether they want to join the Duke Fan Club.
When the <code>h:outputLabel</code> tag is rendered, it displays the label for the
check box. The label text is represented by the <code>value</code> attribute.</p>
</div>
<div class="paragraph">
<p><a id="BNASH"></a><a id="displaying-a-menu-using-the-hselectonemenu-tag"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_displaying_a_menu_using_the_hselectonemenu_tag">Displaying a Menu Using the h:selectOneMenu Tag</h5>
<div class="paragraph">
<p>A component that allows the user to select one value from a set of
values can be rendered as a box or a set of options. This section
describes the <code>h:selectOneMenu</code> tag. The <code>h:selectOneRadio</code> and
<code>h:selectOneListbox</code> tags are used in a similar way. The
<code>h:selectOneListbox</code> tag is similar to the <code>h:selectOneMenu</code> tag except
that <code>h:selectOneListbox</code> defines a <code>size</code> attribute that determines how
many of the items are displayed at once.</p>
</div>
<div class="paragraph">
<p>The <code>h:selectOneMenu</code> tag represents a component that contains a list of
items from which a user can select one item. This menu component is
sometimes known as a drop-down list or a combo box. The following code
snippet shows how the <code>h:selectOneMenu</code> tag is used to allow the user to
select a shipping method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:selectOneMenu</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">shippingOption</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.shippingOption}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:selectItem</span> <span class="attribute-name">itemValue</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">itemLabel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.QuickShip}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;f:selectItem</span> <span class="attribute-name">itemValue</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">itemLabel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.NormalShip}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;f:selectItem</span> <span class="attribute-name">itemValue</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">7</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">itemLabel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.SaverShip}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
 <span class="tag">&lt;/h:selectOneMenu&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>value</code> attribute of the <code>h:selectOneMenu</code> tag maps to the property
that holds the currently selected item&#8217;s value. In this case, the value
is set by the backing bean. You are not required to provide a value for
the currently selected item. If you don&#8217;t provide a value, the browser
determines which one is selected.</p>
</div>
<div class="paragraph">
<p>Like the <code>h:selectOneRadio</code> tag, the <code>h:selectOneMenu</code> tag must contain
either an <code>f:selectItems</code> tag or a set of <code>f:selectItem</code> tags for
representing the items in the list. <a href="#BNASK">Using the f:selectItem
and f:selectItems Tags</a> describes these tags.</p>
</div>
<div class="paragraph">
<p><a id="BNASI"></a><a id="displaying-components-for-selecting-multiple-values"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_displaying_components_for_selecting_multiple_values">4.2.9. Displaying Components for Selecting Multiple Values</h4>
<div class="paragraph">
<p>In some cases, you need to allow your users to select multiple values
rather than just one value from a list of choices. You can do this using
one of the following component tags:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An <code>h:selectManyCheckbox</code> tag, displayed as a set of check boxes</p>
</li>
<li>
<p>An <code>h:selectManyMenu</code> tag, displayed as a menu</p>
</li>
<li>
<p>An <code>h:selectManyListbox</code> tag, displayed as a box</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#BNASJ">Figure 10-4</a> shows examples of these components.</p>
</div>
<div id="BNASJ" class="paragraph">
<div class="title"><strong>Figure 10-4 Example Components for Selecting Multiple Values</strong></div>
<p><span class="image"><img src="../images/jakartaeett_dt_066_slctmny.png" alt="Check box group, scrollable box, and unscrollable box."></span></p>
</div>
<div class="paragraph">
<p>These tags allow the user to select zero or more values from a set of
values. This section explains the <code>h:selectManyCheckbox</code> tag. The
<code>h:selectManyListbox</code> and <code>h:selectManyMenu</code> tags are used in a similar
way.</p>
</div>
<div class="paragraph">
<p>Unlike a menu, a list displays a subset of items in a box; a menu
displays only one item at a time when the user is not selecting the
menu. The <code>size</code> attribute of the <code>h:selectManyListbox</code> tag determines
the number of items displayed at one time. The box includes a scroll bar
for scrolling through any remaining items in the list.</p>
</div>
<div class="paragraph">
<p>The <code>h:selectManyCheckbox</code> tag renders a group of check boxes, with each
check box representing one value that can be selected:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:selectManyCheckbox</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">newslettercheckbox</span><span class="delimiter">&quot;</span></span>
                      <span class="attribute-name">layout</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">pageDirection</span><span class="delimiter">&quot;</span></span>
                      <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.newsletters}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:selectItems</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.newsletterItems}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:selectManyCheckbox&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>value</code> attribute of the <code>h:selectManyCheckbox</code> tag identifies the
<code>newsletters</code> property of the <code>CashierBean</code> managed bean. This property
holds the values of the currently selected items from the set of check
boxes. You are not required to provide a value for the currently
selected items. If you don&#8217;t provide a value, the first item in the list
is selected by default. In the <code>CashierBean</code> managed bean, this value is
instantiated to 0, so no items are selected by default.</p>
</div>
<div class="paragraph">
<p>The <code>layout</code> attribute indicates how the set of check boxes is arranged
on the page. Because layout is set to <code>pageDirection</code>, the check boxes
are arranged vertically. The default is <code>lineDirection</code>, which aligns
the check boxes horizontally.</p>
</div>
<div class="paragraph">
<p>The <code>h:selectManyCheckbox</code> tag must also contain a tag or set of tags
representing the set of check boxes. To represent a set of items, you
use the <code>f:selectItems</code> tag. To represent each item individually, you
use the <code>f:selectItem</code> tag. The following section explains these tags in
more detail.</p>
</div>
<div class="paragraph">
<p><a id="BNASK"></a><a id="using-the-fselectitem-and-fselectitems-tags"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_the_fselectitem_and_fselectitems_tags">4.2.10. Using the f:selectItem and f:selectItems Tags</h4>
<div class="paragraph">
<p>The <code>f:selectItem</code> and <code>f:selectItems</code> tags represent components that
can be nested inside a component that allows you to select one or
multiple items. An <code>f:selectItem</code> tag contains the value, label, and
description of a single item. An <code>f:selectItems</code> tag contains the
values, labels, and descriptions of the entire list of items.</p>
</div>
<div class="paragraph">
<p>You can use either a set of <code>f:selectItem</code> tags or a single
<code>f:selectItems</code> tag within your component tag.</p>
</div>
<div class="paragraph">
<p>The advantages of using the <code>f:selectItems</code> tag are as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Items can be represented by using different data structures, including
<code>Array</code>, <code>Map</code>, and <code>Collection</code>. The value of the <code>f:selectItems</code> tag
can represent even a generic collection of POJOs.</p>
</li>
<li>
<p>Different lists can be concatenated into a single component, and the
lists can be grouped within the component.</p>
</li>
<li>
<p>Values can be generated dynamically at runtime.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The advantages of using <code>f:selectItem</code> are as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Items in the list can be defined from the page.</p>
</li>
<li>
<p>Less code is needed in the backing bean for the <code>f:selectItem</code>
properties.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The rest of this section shows you how to use the <code>f:selectItems</code> and
<code>f:selectItem</code> tags.</p>
</div>
<div class="paragraph">
<p><a id="BNASM"></a><a id="using-the-fselectitems-tag"></a></p>
</div>
<div class="sect4">
<h5 id="_using_the_fselectitems_tag">Using the f:selectItems Tag</h5>
<div class="paragraph">
<p>The following example from <a href="#BNASI">Displaying Components for
Selecting Multiple Values</a> shows how to use the <code>h:selectManyCheckbox</code>
tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:selectManyCheckbox</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">newslettercheckbox</span><span class="delimiter">&quot;</span></span>
                      <span class="attribute-name">layout</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">pageDirection</span><span class="delimiter">&quot;</span></span>
                      <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.newsletters}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:selectItems</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.newsletterItems}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:selectManyCheckbox&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>value</code> attribute of the <code>f:selectItems</code> tag is bound to the managed
bean property <code>cashierBean.newsletterItems</code>. The individual <code>SelectItem</code>
objects are created programmatically in the managed bean.</p>
</div>
<div class="paragraph">
<p>See <a href="#BNAUH">UISelectItems Properties</a> for
information on how to write a managed bean property for one of these
tags.</p>
</div>
<div class="paragraph">
<p><a id="BNASN"></a><a id="using-the-fselectitem-tag"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_using_the_fselectitem_tag">Using the f:selectItem Tag</h5>
<div class="paragraph">
<p>The <code>f:selectItem</code> tag represents a single item in a list of items. Here
is the example from <a href="#BNASH">Displaying a Menu Using the
h:selectOneMenu Tag</a> once again:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:selectOneMenu</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">shippingOption</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.shippingOption}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:selectItem</span> <span class="attribute-name">itemValue</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span>
                  <span class="attribute-name">itemLabel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.QuickShip}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;f:selectItem</span> <span class="attribute-name">itemValue</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span>
                  <span class="attribute-name">itemLabel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.NormalShip}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;f:selectItem</span> <span class="attribute-name">itemValue</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">7</span><span class="delimiter">&quot;</span></span>
                  <span class="attribute-name">itemLabel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.SaverShip}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
 <span class="tag">&lt;/h:selectOneMenu&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>itemValue</code> attribute represents the value for the <code>f:selectItem</code>
tag. The <code>itemLabel</code> attribute represents the <code>String</code> that appears in
the list component on the page.</p>
</div>
<div class="paragraph">
<p>The <code>itemValue</code> and <code>itemLabel</code> attributes are value-binding enabled,
meaning that they can use value-binding expressions to refer to values
in external objects. These attributes can also define literal values, as
shown in the example <code>h:selectOneMenu</code> tag.</p>
</div>
<div class="paragraph">
<p><a id="sthref50"></a><a id="displaying-the-results-from-selection-components"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_displaying_the_results_from_selection_components">4.2.11. Displaying the Results from Selection Components</h4>
<div class="paragraph">
<p>If you display components that allow a user to select values, you may
also want to display the result of the selection.</p>
</div>
<div class="paragraph">
<p>For example, you might want to thank a user who selected the checkbox to
join the Duke Fan Club, as described in <a href="#BNASG">Displaying a Check
Box Using the h:selectBooleanCheckbox Tag</a>. Because the checkbox is
bound to the <code>specialOffer</code> property of <code>CashierBean</code>, a
<code>UISelectBoolean</code> value, you can call the <code>isSelected</code> method of the
property to determine whether to render a thank-you message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.DukeFanClubThanks}</span><span class="delimiter">&quot;</span></span>
              <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.specialOffer.isSelected()}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, you might want to acknowledge that a user subscribed to
newsletters using the <code>h:selectManyCheckbox</code> tag, as described in
<a href="#BNASI">Displaying Components for Selecting Multiple Values</a>. To do
so, you can retrieve the value of the <code>newsletters</code> property, the
<code>String</code> array that holds the selected items:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.NewsletterThanks}</span><span class="delimiter">&quot;</span></span>
              <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{!empty cashierBean.newsletters}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;ul&gt;</span>
    <span class="tag">&lt;ui:repeat</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.newsletters}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">nli</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;li&gt;</span><span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{nli}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span><span class="tag">&lt;/li&gt;</span>
    <span class="tag">&lt;/ui:repeat&gt;</span>
<span class="tag">&lt;/ul&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>An introductory thank-you message is displayed only if the <code>newsletters</code>
array is not empty. Then a <code>ui:repeat</code> tag, a simple way to show values
in a loop, displays the contents of the selected items in an itemized
list. (This tag is listed in <a href="#GJBFP">Table 8-2</a>.)</p>
</div>
<div class="paragraph">
<p><a id="BNARZ"></a><a id="using-data-bound-table-components"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_data_bound_table_components">4.2.12. Using Data-Bound Table Components</h4>
<div class="paragraph">
<p>Data-bound table components display relational data in a tabular format.
In a Jakarta Server Faces application, the <code>h:dataTable</code> component tag
supports binding to a collection of data objects and displays the data
as an HTML table. The <code>h:column</code> tag represents a column of data within
the table, iterating over each record in the data source, which is
displayed as a row. Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:dataTable</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">items</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">captionClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list-caption</span>
             <span class="content">columnClasses=</span><span class="delimiter">&quot;</span></span><span class="attribute-name">list-column-center</span><span class="error">,</span> <span class="attribute-name">list-column-left</span><span class="error">,</span>
             <span class="attribute-name">list-column-right</span><span class="error">,</span> <span class="attribute-name">list-column-center</span><span class="error">&quot;</span>
             <span class="attribute-name">footerClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list-footer</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">headerClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list-header</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">rowClasses</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list-row-even, list-row-odd</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">styleClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list-background</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">summary</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ShoppingCart}</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cart.items}</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">border</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">item</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;h:column&gt;</span>
        <span class="tag">&lt;f:facet</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">header</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ItemQuantity}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;/f:facet&gt;</span>
        <span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">quantity</span><span class="delimiter">&quot;</span></span>
                     <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">4</span><span class="delimiter">&quot;</span></span>
                     <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{item.quantity}</span><span class="delimiter">&quot;</span></span>
                     <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ItemQuantity}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;f:validateLongRange</span> <span class="attribute-name">minimum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;f:valueChangeListener</span>
                <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jakarta.tutorial.dukesbookstore.listeners.QuantityChanged</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/h:inputText&gt;</span>
    <span class="tag">&lt;/h:column&gt;</span>
    <span class="tag">&lt;h:column&gt;</span>
        <span class="tag">&lt;f:facet</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">header</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ItemTitle}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/f:facet&gt;</span>
        <span class="tag">&lt;h:commandLink</span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{showcart.details}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{item.item.title}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/h:commandLink&gt;</span>
    <span class="tag">&lt;/h:column&gt;</span>
    ...
    <span class="tag">&lt;f:facet</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">footer</span><span class="delimiter">&quot;</span></span>
        <span class="error">&lt;</span><span class="attribute-name">h:panelGroup</span><span class="tag">&gt;</span>
            <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.Subtotal}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cart.total}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
                <span class="tag">&lt;f:convertNumber</span> <span class="attribute-name">currencySymbol</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">$</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">currency</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;/h:outputText&gt;</span>
        <span class="tag">&lt;/h:panelGroup&gt;</span>
    <span class="tag">&lt;/f:facet&gt;</span>
    <span class="tag">&lt;f:facet</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">caption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.Caption}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/f:facet&gt;</span>
<span class="tag">&lt;/h:dataTable&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The example <code>h:dataTable</code> tag displays the books in the shopping cart as
well as the quantity of each book in the shopping cart, the prices, and
a set of buttons the user can click to remove books from the shopping
cart.</p>
</div>
<div class="paragraph">
<p>The <code>h:column</code> tags represent columns of data in a data component. While
the data component is iterating over the rows of data, it processes the
column component associated with each <code>h:column</code> tag for each row in the
table.</p>
</div>
<div class="paragraph">
<p>The <code>h:dataTable</code> tag shown in the preceding code example iterates
through the list of books (<code>cart.items</code>) in the shopping cart and
displays their titles, authors, and prices. Each time the <code>h:dataTable</code>
tag iterates through the list of books, it renders one cell in each
column.</p>
</div>
<div class="paragraph">
<p>The <code>h:dataTable</code> and <code>h:column</code> tags use facets to represent parts of
the table that are not repeated or updated. These parts include headers,
footers, and captions.</p>
</div>
<div class="paragraph">
<p>In the preceding example, <code>h:column</code> tags include <code>f:facet</code> tags for
representing column headers or footers. The <code>h:column</code> tag allows you to
control the styles of these headers and footers by supporting the
<code>headerClass</code> and <code>footerClass</code> attributes. These attributes accept
space-separated lists of CSS classes, which will be applied to the
header and footer cells of the corresponding column in the rendered
table.</p>
</div>
<div class="paragraph">
<p>Facets can have only one child, so an <code>h:panelGroup</code> tag is needed if
you want to group more than one component within an <code>f:facet</code>. Because
the facet tag representing the footer includes more than one tag, the
<code>h:panelGroup</code> tag is needed to group those tags. Finally, this
<code>h:dataTable</code> tag includes an <code>f:facet</code> tag with its <code>name</code> attribute
set to <code>caption</code>, causing a table caption to be rendered above the
table.</p>
</div>
<div class="paragraph">
<p>This table is a classic use case for a data component because the number
of books might not be known to the application developer or the page
author when that application is developed. The data component can
dynamically adjust the number of rows of the table to accommodate the
underlying data.</p>
</div>
<div class="paragraph">
<p>The <code>value</code> attribute of an <code>h:dataTable</code> tag references the data to be
included in the table. This data can take the form of any of the
following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A list of beans</p>
</li>
<li>
<p>An array of beans</p>
</li>
<li>
<p>A single bean</p>
</li>
<li>
<p>A <code>javax.faces.model.DataModel</code> object</p>
</li>
<li>
<p>A <code>java.sql.ResultSet</code> object</p>
</li>
<li>
<p>A <code>javax.servlet.jsp.jstl.sql.Result</code> object</p>
</li>
<li>
<p>A <code>javax.sql.RowSet</code> object</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All data sources for data components have a <code>DataModel</code> wrapper. Unless
you explicitly construct a <code>DataModel</code> wrapper, the Jakarta Server Faces
implementation will create one around data of any of the other
acceptable types. See <a href="#BNATY">Writing Bean
Properties</a> for more information on how to write properties for use with
a data component.</p>
</div>
<div class="paragraph">
<p>The <code>var</code> attribute specifies a name that is used by the components
within the <code>h:dataTable</code> tag as an alias to the data referenced in the
<code>value</code> attribute of <code>h:dataTable</code>.</p>
</div>
<div class="paragraph">
<p>In the example <code>h:dataTable</code> tag, the <code>value</code> attribute points to a list
of books. The <code>var</code> attribute points to a single book in that list. As
the <code>h:dataTable</code> tag iterates through the list, each reference to
<code>item</code> points to the current book in the list.</p>
</div>
<div class="paragraph">
<p>The <code>h:dataTable</code> tag also has the ability to display only a subset of
the underlying data. This feature is not shown in the preceding example.
To display a subset of the data, you use the optional <code>first</code> and <code>rows</code>
attributes.</p>
</div>
<div class="paragraph">
<p>The <code>first</code> attribute specifies the first row to be displayed. The
<code>rows</code> attribute specifies the number of rows, starting with the first
row, to be displayed. For example, if you wanted to display records 2
through 10 of the underlying data, you would set <code>first</code> to 2 and <code>rows</code>
to 9. When you display a subset of the data in your pages, you might
want to consider including a link or button that causes subsequent rows
to display when clicked. By default, both <code>first</code> and <code>rows</code> are set to
zero, and this causes all the rows of the underlying data to display.</p>
</div>
<div class="paragraph">
<p><a href="#GKBUK">Table 10-7</a> shows the optional attributes for the
<code>h:dataTable</code> tag.</p>
</div>
<div class="paragraph">
<p><a id="sthref51"></a><a id="GKBUK"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 10-7 Optional Attributes for the h:dataTable Tag</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 60%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Attribute</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Defines Styles For</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>captionClass</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table caption</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>columnClasses</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All the columns</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>footerClass</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Footer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>headerClass</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rowClasses</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rows</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>styleClass</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The entire table</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Each of the attributes in <a href="#GKBUK">Table 10-7</a> can specify more than
one style. If <code>columnClasses</code> or <code>rowClasses</code> specifies more than one
style, the styles are applied to the columns or rows in the order that
the styles are listed in the attribute. For example, if <code>columnClasses</code>
specifies styles <code>list-column-center</code> and <code>list-column-right</code>, and if
the table has two columns, the first column will have style
<code>list-column-center</code>, and the second column will have style
<code>list-column-right</code>.</p>
</div>
<div class="paragraph">
<p>If the style attribute specifies more styles than there are columns or
rows, the remaining styles will be assigned to columns or rows starting
from the first column or row. Similarly, if the style attribute
specifies fewer styles than there are columns or rows, the remaining
columns or rows will be assigned styles starting from the first style.</p>
</div>
<div class="paragraph">
<p><a id="BNASO"></a><a id="displaying-error-messages-with-the-hmessage-and-hmessages-tags"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_displaying_error_messages_with_the_hmessage_and_hmessages_tags">4.2.13. Displaying Error Messages with the h:message and h:messages Tags</h4>
<div class="paragraph">
<p>The <code>h:message</code> and <code>h:messages</code> tags are used to display error messages
when conversion or validation fails. The <code>h:message</code> tag displays error
messages related to a specific input component, whereas the <code>h:messages</code>
tag displays the error messages for the entire page.</p>
</div>
<div class="paragraph">
<p>Here is an example <code>h:message</code> tag from the <code>guessnumber-jsf</code>
application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;p&gt;</span>
    <span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userNo</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Type a number from 0 to 10:</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.userNumber}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;f:validateLongRange</span> <span class="attribute-name">minimum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.minimum}</span><span class="delimiter">&quot;</span></span>
                             <span class="attribute-name">maximum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.maximum}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
   <span class="tag">&lt;/h:inputText&gt;</span>
   <span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Submit</span><span class="delimiter">&quot;</span></span>
                    <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">response</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;h:message</span> <span class="attribute-name">showSummary</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">showDetail</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>
           <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">color</span>: <span class="color">#d20005</span>;
           <span class="key">font-family</span>: <span class="string"><span class="delimiter">'</span><span class="content">New Century Schoolbook</span><span class="delimiter">'</span></span>, <span class="value">serif</span>;
           <span class="key">font-style</span>: <span class="value">oblique</span>;
           <span class="key">text-decoration</span>: <span class="value">overline</span><span class="delimiter">&quot;</span></span>
           <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">errors1</span><span class="delimiter">&quot;</span></span>
           <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userNo</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>for</code> attribute refers to the ID of the component that generated the
error message. The error message is displayed at the same location that
the <code>h:message</code> tag appears in the page. In this case, the error message
will appear below the Submit button.</p>
</div>
<div class="paragraph">
<p>The <code>style</code> attribute allows you to specify the style of the text of the
message. In the example in this section, the text will be a shade of
red, New Century Schoolbook, serif font family, and oblique style, and a
line will appear over the text. The message and messages tags support
many other attributes for defining styles. For more information on these
attributes, refer to the o<a href="JSFTL">Jakarta Server Faces Facelets Tag
Library documentation</a>.</p>
</div>
<div class="paragraph">
<p>Another attribute supported by the <code>h:messages</code> tag is the <code>layout</code>
attribute. Its default value is <code>list</code>, which indicates that the
messages are displayed in a bullet list using the HTML <code>ul</code> and <code>li</code>
elements. If you set the attribute value to <code>table</code>, the messages will
be rendered in a table using the HTML <code>table</code> element.</p>
</div>
<div class="paragraph">
<p>The preceding example shows a standard validator that is registered on
the input component. The message tag displays the error message that is
associated with this validator when the validator cannot validate the
input component&#8217;s value. In general, when you register a converter or
validator on a component, you are queueing the error messages associated
with the converter or validator on the component. The <code>h:message</code> and
<code>h:messages</code> tags display the appropriate error messages that are queued
on the component when the validators or converters registered on that
component fail to convert or validate the component&#8217;s value.</p>
</div>
<div class="paragraph">
<p>Standard error messages are provided with standard converters and
standard validators. An application architect can override these
standard messages and supply error messages for custom converters and
validators by registering custom error messages with the application.</p>
</div>
<div class="paragraph">
<p><a id="GIQZD"></a><a id="creating-bookmarkable-urls-with-the-hbutton-and-hlink-tags"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_creating_bookmarkable_urls_with_the_hbutton_and_hlink_tags">4.2.14. Creating Bookmarkable URLs with the h:button and h:link Tags</h4>
<div class="paragraph">
<p>The ability to create bookmarkable URLs refers to the ability to
generate links based on a specified navigation outcome and on component
parameters.</p>
</div>
<div class="paragraph">
<p>In HTTP, most browsers by default send GET requests for URL retrieval
and POST requests for data processing. The GET requests can have query
parameters and can be cached, which is not advised for POST requests,
which send data to servers for processing. The other Jakarta Server Faces
tags capable of generating links use either simple GET requests, as in
the case of <code>h:outputLink</code>, or POST requests, as in the case of
<code>h:commandLink</code> or <code>h:commandButton</code> tags. GET requests with query
parameters provide finer granularity to URL strings. These URLs are
created with one or more <code>name=value</code> parameters appended to the simple
URL after a <code>?</code> character and separated by either <code>&amp;;</code> or <code>&amp;</code>
strings.</p>
</div>
<div class="paragraph">
<p>To create a bookmarkable URL, use an <code>h:link</code> or <code>h:button</code> tag. Both of
these tags can generate a link based on the <code>outcome</code> attribute of the
component. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:link</span> <span class="attribute-name">outcome</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">somepage</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Message</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>h:link</code> tag will generate a URL link that points to the
<code>somepage.xhtml</code> file on the same server. The following sample HTML is
generated from the preceding tag, assuming that the application name is
<code>simplebookmark</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/simplebookmark/somepage.xhtml</span></span><span class="error">&gt;</span>Message<span class="tag">&lt;/a&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a simple GET request that cannot pass any data from page to
page. To create more complex GET requests and utilize the complete
functionality of the <code>h:link</code> tag, use view parameters.</p>
</div>
<div class="paragraph">
<p><a id="GIQWQ"></a><a id="using-view-parameters-to-configure-bookmarkable-urls"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_view_parameters_to_configure_bookmarkable_urls">4.2.15. Using View Parameters to Configure Bookmarkable URLs</h4>
<div class="paragraph">
<p>To pass a parameter from one page to another, use the
<code>includeViewParams</code> attribute in your <code>h:link</code> tag and, in addition, use
an <code>f:param</code> tag to specify the name and value to be passed. Here the
<code>h:link</code> tag specifies the outcome page as <code>personal.xhtml</code> and provides
a parameter named <code>Result</code> whose value is a managed bean property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:body&gt;</span>
    <span class="tag">&lt;h:form&gt;</span>
        <span class="tag">&lt;h:graphicImage</span> <span class="attribute-name">url</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{resource['images:duke.waving.gif']}</span><span class="delimiter">&quot;</span></span>
                        <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Duke waving his hand</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;h2&gt;</span>Hello, #{hello.name}!<span class="tag">&lt;/h2&gt;</span>
        <span class="tag">&lt;p&gt;</span>I've made your
            <span class="tag">&lt;h:link</span> <span class="attribute-name">outcome</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">personal</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">personal greeting page!</span><span class="delimiter">&quot;</span></span>
                    <span class="attribute-name">includeViewParams</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;f:param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Result</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{hello.name}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/h:link&gt;</span>
        <span class="tag">&lt;/p&gt;</span>
        <span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">back</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Back</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">index</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/h:form&gt;</span>
<span class="tag">&lt;/h:body&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>includeViewParams</code> attribute is set on the component, the view
parameters are added to the hyperlink. Therefore, the resulting URL will
look something like this if the value of <code>hello.name</code> is <code>Timmy</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/bookmarks/personal.xhtml?Result=Timmy</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On the outcome page, specify the core tags <code>f:metadata</code> and
<code>f:viewparam</code> as the source of parameters for configuring the URLs. View
parameters are declared as part of <code>f:metadata</code> for a page, as shown in
the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;f:metadata&gt;</span>
    <span class="tag">&lt;f:viewParam</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Result</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{hello.name}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/f:metadata&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This allows you to specify the bean property value on the page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;h:outputText value=<span class="string"><span class="delimiter">&quot;</span><span class="content">Howdy, #{hello.name}!</span><span class="delimiter">&quot;</span></span> /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>As a view parameter, the name also appears in the page&#8217;s URL. If you
edit the URL, you change the output on the page.</p>
</div>
<div class="paragraph">
<p>Because the URL can be the result of various parameter values, the order
of the URL creation has been predefined. The order in which the various
parameter values are read is as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Component</p>
</li>
<li>
<p>Navigation-case parameters</p>
</li>
<li>
<p>View parameters</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="sthref52"></a><a id="the-bookmarks-example-application"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_the_bookmarks_example_application">4.2.16. The bookmarks Example Application</h4>
<div class="paragraph">
<p>The <code>bookmarks</code> example application modifies the <code>hello1</code> application
described in <a href="#BNADX">A Web Module That Uses Jakarta Server
Faces Technology: The hello1 Example</a> to use a bookmarkable URL that
uses view parameters.</p>
</div>
<div class="paragraph">
<p>Like <code>hello1</code>, the application includes the <code>Hello.java</code> managed bean,
an <code>index.xhtml</code> page, and a <code>response.xhtml</code> page. In addition, it
includes a <code>personal.xhtml page</code>, to which a bookmarkable URL and view
parameters are passed from the <code>response.xhtml</code> page, as described in
<a href="#GIQWQ">Using View Parameters to Configure Bookmarkable URLs</a>.</p>
</div>
<div class="paragraph">
<p>You can use either NetBeans IDE or Maven to build, package, deploy, and
run the <code>bookmarks</code> example. The source code for this example is in the
tut-install`/examples/web/jsf/bookmarks/` directory.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#CHDIEHEB">To Build, Package, and Deploy the bookmarks Example
Using NetBeans IDE</a></p>
</li>
<li>
<p><a href="#CHDEFJEF">To Build, Package, and Deploy the bookmarks Example
Using Maven</a></p>
</li>
<li>
<p><a href="#CHDGEBCB">To Run the bookmarks Example</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="CHDIEHEB"></a><a id="to-build-package-and-deploy-the-bookmarks-example-using-netbeans-ide"></a></p>
</div>
<div class="sect4">
<h5 id="_to_build_package_and_deploy_the_bookmarks_example_using_netbeans_ide">To Build, Package, and Deploy the bookmarks Example Using NetBeans IDE</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>From the File menu, choose Open Project.</p>
</li>
<li>
<p>In the Open Project dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/web/jsf</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>bookmarks</code> folder.</p>
</li>
<li>
<p>Click Open Project.</p>
</li>
<li>
<p>In the Projects tab, right-click the <code>bookmarks</code> project and select
Build.</p>
<div class="paragraph">
<p>This option builds the example application and deploys it to your
GlassFish Server instance.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="CHDEFJEF"></a><a id="to-build-package-and-deploy-the-bookmarks-example-using-maven"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_build_package_and_deploy_the_bookmarks_example_using_maven">To Build, Package, and Deploy the bookmarks Example Using Maven</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/web/jsf/bookmarks/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file,
<code>bookmarks.war</code>, that is located in the <code>target</code> directory. It then
deploys the WAR file to your GlassFish Server instance.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="CHDGEBCB"></a><a id="to-run-the-bookmarks-example"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_run_the_bookmarks_example">To Run the bookmarks Example</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enter the following URL in your web browser:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/bookmarks</span></code></pre>
</div>
</div>
</li>
<li>
<p>In the text field, enter a name and click Submit.</p>
</li>
<li>
<p>On the response page, move your mouse over the "personal greeting
page" link to view the URL with the view parameter, then click the link.</p>
<div class="paragraph">
<p>The <code>personal.xhtml</code> page opens, displaying a greeting to the name you
typed.</p>
</div>
</li>
<li>
<p>In the URL field, modify the Result parameter value and press
Return.</p>
<div class="paragraph">
<p>The name in the greeting changes to what you typed.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GJGEP"></a><a id="resource-relocation-using-houtputscript-and-houtputstylesheet-tags"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_resource_relocation_using_houtputscript_and_houtputstylesheet_tags">4.2.17. Resource Relocation Using h:outputScript and h:outputStylesheet Tags</h4>
<div class="paragraph">
<p>Resource relocation refers to the ability of a Jakarta Server Faces
application to specify the location where a resource can be rendered.
Resource relocation can be defined with the following HTML tags:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>h:outputScript</code></p>
</li>
<li>
<p><code>h:outputStylesheet</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These tags have <code>name</code> and <code>target</code> attributes, which can be used to
define the render location. For a complete list of attributes for these
tags, see theo<a href="JSFTL">Jakarta Server Faces Facelets Tag Library
documentation</a>.</p>
</div>
<div class="paragraph">
<p>For the <code>h:outputScript</code> tag, the <code>name</code> and <code>target</code> attributes define
where the output of a resource may appear. Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:h</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/html</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;h:head</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">head</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;title&gt;</span>Resource Relocation<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;/h:head&gt;</span>
    <span class="tag">&lt;h:body</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">body</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;h:form</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;h:outputScript</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">hello.js</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;h:outputStylesheet</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">hello.css</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/h:form&gt;</span>
    <span class="tag">&lt;/h:body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Because the <code>target</code> attribute is not defined in the tags, the style
sheet <code>hello.css</code> is rendered in the head element of the page, and the
<code>hello.js</code> script is rendered in the body of the page.</p>
</div>
<div class="paragraph">
<p>Here is the HTML generated by the preceding code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;title&gt;</span>Resource Relocation<span class="tag">&lt;/title&gt;</span>
        <span class="tag">&lt;link</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/css</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stylesheet</span><span class="delimiter">&quot;</span></span>
              <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/context-root/javax.faces.resource/hello.css</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;form</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">post</span><span class="delimiter">&quot;</span></span>
              <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">...</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">enctype</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">...</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/javascript</span><span class="delimiter">&quot;</span></span>
                    <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/context-root/javax.faces.resource/hello.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">            </span><span class="tag">&lt;/script&gt;</span>
        <span class="tag">&lt;/form&gt;</span>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you set the <code>target</code> attribute for the <code>h:outputScript</code> tag, the
incoming GET request provides the location parameter. Here is an
example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:h</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/html</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;h:head</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">head</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;title&gt;</span>Resource Relocation<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;/h:head&gt;</span>
    <span class="tag">&lt;h:body</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">body</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;h:form</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;h:outputScript</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">hello.js</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">target</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{param.location}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;h:outputStylesheet</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">hello.css</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/h:form&gt;</span>
    <span class="tag">&lt;/h:body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, if the incoming request does not provide a location
parameter, the default locations will still apply: The style sheet is
rendered in the head, and the script is rendered inline. However, if the
incoming request specifies the location parameter as the head, both the
style sheet and the script will be rendered in the <code>head</code> element.</p>
</div>
<div class="paragraph">
<p>The HTML generated by the preceding code is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;html</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;title&gt;</span>Resource Relocation<span class="tag">&lt;/title&gt;</span>
        <span class="tag">&lt;link</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/css</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stylesheet</span><span class="delimiter">&quot;</span></span>
              <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/context-root/javax.faces.resource/hello.css</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/javascript</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/context-root/javax.faces.resource/hello.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="inline">          </span><span class="tag">&lt;/script&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;form</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">post</span><span class="delimiter">&quot;</span></span>
              <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">...</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">enctype</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">...</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;/form&gt;</span>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, if the incoming request provides the location parameter as
the body, the script will be rendered in the body element.</p>
</div>
<div class="paragraph">
<p>The preceding section describes simple uses for resource relocation.
That feature can add even more functionality for the components and
pages. A page author does not have to know the location of a resource or
its placement.</p>
</div>
<div class="paragraph">
<p>By using a <code>@ResourceDependency</code> annotation for the components,
component authors can define the resources for the component, such as a
style sheet and script. This allows the page authors freedom from
defining resource locations.</p>
</div>
<div class="paragraph">
<p><a id="BNARC"></a><a id="using-core-tags"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_core_tags">4.3. Using Core Tags</h3>
<div class="paragraph">
<p>The tags included in the Jakarta Server Faces core tag library are used to
perform core actions that are not performed by HTML tags.</p>
</div>
<div class="paragraph">
<p><a href="#GKVYB">Table 10-8</a> lists the event-handling core tags.</p>
</div>
<div class="paragraph">
<p><a id="sthref53"></a><a id="GKVYB"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 10-8 Event-Handling Core Tags</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Function</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:actionListener</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds an action listener to a parent component</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:phaseListener</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds a <code>PhaseListener</code> to a page</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:setPropertyActionListener</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registers a special action listener
whose sole purpose is to push a value into a managed bean when a form is
submitted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:valueChangeListener</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds a value-change listener to a parent
component</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="#GKVYY">Table 10-9</a> lists the data-conversion core tags.</p>
</div>
<div class="paragraph">
<p><a id="sthref54"></a><a id="GKVYY"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 10-9 Data-Conversion Core Tags</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Function</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:converter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds an arbitrary converter to the parent component</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:convertDateTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds a <code>DateTimeConverter</code> instance to the parent
component</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:convertNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds a <code>NumberConverter</code> instance to the parent
component</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="#GKVZG">Table 10-10</a> lists the facet core tags.</p>
</div>
<div class="paragraph">
<p><a id="sthref55"></a><a id="GKVZG"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 10-10 Facet Core Tags</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Function</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:facet</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds a nested component that has a special relationship to
its enclosing tag</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:metadata</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registers a <code>facet</code> on a parent component</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="#GKVZA">Table 10-11</a> lists the core tags that represent items in a
list.</p>
</div>
<div class="paragraph">
<p><a id="sthref56"></a><a id="GKVZA"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 10-11 Core Tags That Represent Items in a List</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Function</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:selectItem</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents one item in a list of items</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:selectItems</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents a set of items</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="#GKVYV">Table 10-12</a> lists the validator core tags.</p>
</div>
<div class="paragraph">
<p><a id="sthref57"></a><a id="GKVYV"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 10-12 Validator Core Tags</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Function</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:validateDoubleRange</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds a <code>DoubleRangeValidator</code> to a component</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:validateLength</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds a <code>LengthValidator</code> to a component</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:validateLongRange</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds a <code>LongRangeValidator</code> to a component</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:validator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds a custom validator to a component</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:validateRegEx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds a <code>RegExValidator</code> to a component</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:validateBean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delegates the validation of a local value to a
<code>BeanValidator</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:validateRequired</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enforces the presence of a value in a component</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="#GKVYU">Table 10-13</a> lists the core tags that fall into other
categories.</p>
</div>
<div class="paragraph">
<p><a id="sthref58"></a><a id="GKVYU"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 10-13 Miscellaneous Core Tags</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 15%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag Category</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Function</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attribute configuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds configurable attributes to
a parent component</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Localization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:loadBundle</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a <code>ResourceBundle</code> that is
exposed as a <code>Map</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter substitution</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:param</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Substitutes parameters into a
<code>MessageFormat</code> instance and adds query string name-value pairs to a URL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ajax</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:ajax</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Associates an Ajax action with a single component or a
group of components based on placement</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:event</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows installing a <code>ComponentSystemEventListener</code> on
a component</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WebSocket</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:websocket</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows server-side communications to be
pushed to all instances of a socket containing the same channel name.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>These tags, which are used in conjunction with component tags, are
explained in other sections of this tutorial.</p>
</div>
<div class="paragraph">
<p><a href="#BNARE">Table 10-14</a> lists the sections that explain how to use
specific core tags.</p>
</div>
<div class="paragraph">
<p><a id="sthref59"></a><a id="BNARE"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 10-14 Where the Core Tags Are Explained</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tags</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Where Explained</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event-handling tags</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#BNASZ">Registering Listeners on Components</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data-conversion tags</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#BNAST">Using the Standard Converters</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:facet</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#BNARZ">Using Data-Bound Table
Components</a> and <a href="#BNASC">Laying Out Components with
the h:panelGrid and h:panelGroup Tags</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:loadBundle</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#BNAXY">Setting the Resource Bundle</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:metadata</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#GIQWQ">Using View Parameters to Configure
Bookmarkable URLs</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:param</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#BNARU">Displaying a Formatted Message with the
h:outputFormat Tag</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:selectItem</code> and <code>f:selectItems</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#BNASK">Using the f:selectItem and f:selectItems
Tags</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validator tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#BNATC">Using the Standard
Validators</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:ajax</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#GKIOW">Chapter 13, "Using Ajax with Jakarta Server Faces
Technology"</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:websocket</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="#using-websockets-with-javaserver-faces-technology">Chapter 17, "Using WebSockets with Jakarta Server Faces Technology"</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_converters_listeners_and_validators">5. Using Converters, Listeners, and Validators</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="GJCUT"></a><a id="using-converters-listeners-and-validators"></a></p>
</div>
<div class="paragraph">
<p>The previous chapter described components and explained how to add them
to a web page. This chapter provides information on adding more
functionality to the components through converters, listeners, and
validators.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Converters are used to convert data that is received from the input
components. Converters allow an application to bring the strongly typed
features of the Java programming language into the String-based world of
HTTP servlet programming.</p>
</li>
<li>
<p>Listeners are used to listen to the events happening in the page and
perform actions as defined.</p>
</li>
<li>
<p>Validators are used to validate the data that is received from the
input components. Validators allow an application to express constraints
on form input data to ensure that the necessary requirements are met
before the input data is processed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="BNAST"></a><a id="using-the-standard-converters"></a></p>
</div>
<div class="sect2">
<h3 id="_using_the_standard_converters">5.1. Using the Standard Converters</h3>
<div class="paragraph">
<p>The Jakarta Server Faces implementation provides a set of <code>Converter</code>
implementations that you can use to convert component data. The purpose
of conversion is to take the String-based data coming in from the
Servlet API and convert it to strongly typed Java objects suitable for
the business domain. For more information on the conceptual details of
the conversion model, see <a href="#BNAQI">Conversion Model</a>.</p>
</div>
<div class="paragraph">
<p>The standard <code>Converter</code> implementations are located in the
<code>javax.faces.convert</code> package. Normally, converters are implicitly
assigned based on the type of the EL expression pointed to by the value
of the component. However, these converters can also be accessed by a
converter ID. <a href="#CHDIHIIC">Table 11-1</a> shows the converter classes and
their associated converter IDs.</p>
</div>
<div class="paragraph">
<p><a id="sthref60"></a><a id="CHDIHIIC"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 11-1 Converter Classes and Converter IDs</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 60%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Class in the javax.faces.convert Package</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Converter ID</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BigDecimalConverter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.faces.BigDecimal</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BigIntegerConverter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.faces.BigInteger</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BooleanConverter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.faces.Boolean</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ByteConverter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.faces.Byte</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CharacterConverter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.faces.Character</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DateTimeConverter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.faces.DateTime</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DoubleConverter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.faces.Double</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EnumConverter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.faces.Enum</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FloatConverter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.faces.Float</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IntegerConverter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.faces.Integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LongConverter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.faces.Long</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NumberConverter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.faces.Number</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ShortConverter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.faces.Short</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A standard error message is associated with each of these converters. If
you have registered one of these converters onto a component on your
page and the converter is not able to convert the component&#8217;s value, the
converter&#8217;s error message will display on the page. For example, the
following error message appears if <code>BigIntegerConverter</code> fails to
convert a value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">{0} must be a number consisting of one or more digits</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the <code>{0}</code> substitution parameter will be replaced with the
name of the input component on which the converter is registered.</p>
</div>
<div class="paragraph">
<p>Two of the standard converters (<code>DateTimeConverter</code> and
<code>NumberConverter</code>) have their own tags, which allow you to configure the
format of the component data using the tag attributes. For more
information about using <code>DateTimeConverter</code>, see <a href="#BNASV">Using
DateTimeConverter</a>. For more information about using <code>NumberConverter</code>,
see <a href="#BNASX">Using NumberConverter</a>. The following section explains
how to convert a component&#8217;s value, including how to register other
standard converters with a component.</p>
</div>
<div class="paragraph">
<p><a id="BNASU"></a><a id="converting-a-components-value"></a></p>
</div>
<div class="sect3">
<h4 id="_converting_a_components_value">5.1.1. Converting a Component&#8217;s Value</h4>
<div class="paragraph">
<p>To use a particular converter to convert a component&#8217;s value, you need
to register the converter onto the component. You can register any of
the standard converters in one of the following ways.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Nest one of the standard converter tags inside the component&#8217;s tag.
These tags are <code>f:convertDateTime</code> and <code>f:convertNumber</code>, which are
described in <a href="#BNASX">Using
NumberConverter</a>, respectively.</p>
</li>
<li>
<p>Bind the value of the component to a managed bean property of the same
type as the converter. This is the most common technique.</p>
</li>
<li>
<p>Refer to the converter from the component tag&#8217;s <code>converter</code> attribute,
specifying the ID of the converter class.</p>
</li>
<li>
<p>Nest an <code>f:converter</code> tag inside of the component tag, and use either
the <code>f:converter</code> tag&#8217;s <code>converterId</code> attribute or its <code>binding</code>
attribute to refer to the converter.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As an example of the second technique, if you want a component&#8217;s data to
be converted to an <code>Integer</code>, you can simply bind the component&#8217;s value
to a managed bean property. Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">Integer age = 0;
public Integer getAge(){ return age;}
public void setAge(Integer age) {this.age = age;}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The data from the <code>h:inputText</code> tag in the this example will be
converted to a <code>java.lang.Integer</code> value. The <code>Integer</code> type is a
supported type of <code>NumberConverter</code>. If you don&#8217;t need to specify any
formatting instructions using the <code>f:convertNumber</code> tag attributes, and
if one of the standard converters will suffice, you can simply reference
that converter by using the component tag&#8217;s <code>converter</code> attribute.</p>
</div>
<div class="paragraph">
<p>You can also nest an <code>f:converter</code> tag within the component tag and use
either the converter tag&#8217;s <code>converterId</code> attribute or its <code>binding</code>
attribute to reference the converter.</p>
</div>
<div class="paragraph">
<p>The <code>converterId</code> attribute must reference the converter&#8217;s ID. Here is
an example that uses one of the converter IDs listed in
<a href="#CHDIHIIC">Table 11-1</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{loginBean.age}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:converter</span> <span class="attribute-name">converterId</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">javax.faces.Integer</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Instead of using the <code>converterId</code> attribute, the <code>f:converter</code> tag can
use the <code>binding</code> attribute. The <code>binding</code> attribute must resolve to a
bean property that accepts and returns an appropriate <code>Converter</code>
instance.</p>
</div>
<div class="paragraph">
<p>You can also create custom converters and register them on components
using the <code>f:converter</code> tag. For details, see
<a href="#BNAUS">Creating and Using a Custom Converter</a>.</p>
</div>
<div class="paragraph">
<p><a id="BNASV"></a><a id="using-datetimeconverter"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_datetimeconverter">5.1.2. Using DateTimeConverter</h4>
<div class="paragraph">
<p>You can convert a component&#8217;s data to a <code>java.util.Date</code> by nesting the
<code>convertDateTime</code> tag inside the component tag. The <code>convertDateTime</code>
tag has several attributes that allow you to specify the format and type
of the data. <a href="#BNASW">Table 11-2</a> lists the attributes.</p>
</div>
<div class="paragraph">
<p>Here is a simple example of a <code>convertDateTime</code> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.shipDate}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertDateTime</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">dateStyle</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">full</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When binding the <code>DateTimeConverter</code> to a component, ensure that the
managed bean property to which the component is bound is of type
<code>java.util.Date</code>. In the preceding example, <code>cashierBean.shipDate</code> must
be of type <code>java.util.Date</code>.</p>
</div>
<div class="paragraph">
<p>The example tag can display the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">Saturday, September 21, 2013</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also display the same date and time by using the following tag
in which the date format is specified:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.shipDate}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertDateTime</span> <span class="attribute-name">pattern</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">EEEEEEEE, MMM dd, yyyy</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to display the example date in Spanish, you can use the
<code>locale</code> attribute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.shipDate}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertDateTime</span> <span class="attribute-name">dateStyle</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">full</span><span class="delimiter">&quot;</span></span>
                       <span class="attribute-name">locale</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">es</span><span class="delimiter">&quot;</span></span>
                       <span class="attribute-name">timeStyle</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">long</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">both</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This tag would display the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">jueves 24 de octubre de 2013 15:07:04 GMT</code></pre>
</div>
</div>
<div class="paragraph">
<p>Refer to the "Customizing Formats" lesson of the Java Tutorial at
<code><a href="http://docs.oracle.com/javase/tutorial/i18n/format/simpleDateFormat.html" class="bare">http://docs.oracle.com/javase/tutorial/i18n/format/simpleDateFormat.html</a></code>
for more information on how to format the output using the <code>pattern</code>
attribute of the <code>convertDateTime</code> tag.</p>
</div>
<div class="paragraph">
<p><a id="sthref61"></a><a id="BNASW"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 11-2 Attributes for the f:convertDateTime Tag</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Attribute</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>binding</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DateTimeConverter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to bind a converter to a managed
bean property.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dateStyle</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the format, as specified by
<code>java.text.DateFormat</code>, of a date or the date part of a <code>date</code> string.
Applied only if <code>type</code> is <code>date</code> or <code>both</code> and if <code>pattern</code> is not
defined. Valid values: <code>default</code>, <code>short</code>, <code>medium</code>, <code>long</code>, and <code>full</code>.
If no value is specified, <code>default</code> is used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>for</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used with composite components. Refers to one of the
objects within the composite component inside which this tag is nested.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>locale</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code> or <code>Locale</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Locale</code> whose predefined styles for
dates and times are used during formatting or parsing. If not specified,
the <code>Locale</code> returned by <code>FacesContext.getLocale</code> will be used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pattern</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Custom formatting pattern that determines how the date/time string
should be formatted and parsed. If this attribute is specified,
<code>dateStyle</code> and <code>timeStyle</code> attributes are ignored.</p>
</div>
<div class="paragraph">
<p>See <a href="#CFHEABEI">Table 11-3</a> for the default values when <code>pattern</code> is
not specified.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeStyle</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the format, as specified by
<code>java.text.DateFormat</code>, of a <code>time</code> or the time part of a <code>date</code> string.
Applied only if <code>type</code> is time and <code>pattern</code> is not defined. Valid
values: <code>default</code>, <code>short</code>, <code>medium</code>, <code>long</code>, and <code>full</code>. If no value is
specified, <code>default</code> is used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeZone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code> or <code>TimeZone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time zone in which to interpret any
time information in the <code>date</code> string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies whether the string value will contain a date, a time, or both.
Valid values are: <code>date</code>, <code>time</code>, <code>both</code>, <code>LocalDate</code>, <code>LocalTime</code>,
<code>LocalDateTime</code>, <code>OffsetTime</code>, <code>OffsetDateTime</code>, or <code>ZonedDateTime</code>. If
no value is specified, <code>date</code> is used.</p>
</div>
<div class="paragraph">
<p>See <a href="#CFHEABEI">Table 11-3</a> for additional information.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="sthref62"></a><a id="CFHEABEI"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 11-3 Type Attribute and Default Pattern Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Type Attribute</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Default When Pattern Is Not Specified</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>both</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.util.Date</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DateFormat.getDateTimeInstance(dateStyle, timeStyle)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>date</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.util.Date</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DateFormat.getDateTimeInstance(dateStyle)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.util.Date</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DateFormat.getDateTimeInstance(timeStyle)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>localDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.time.LocalDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DateTimeFormatter.ofLocalizedDate(dateStyle)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>localTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.time.LocalTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DateTimeFormatter.ofLocalizedTime(dateStyle)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>localDateTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.time.LocalDateTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DateTimeFormatter.ofLocalizedDateTime(dateStyle)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>offsetTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.time.OffsetTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DateTimeFormatter.ISO_OFFSET_TIME</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>offsetDateTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.time.OffsetDateTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DateTimeFormatter.ISO_OFFSET_DATE_TIME</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zonedDateTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.time.ZonedDateTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DateTimeFormatter.ISO_ZONED_DATE_TIME</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="BNASX"></a><a id="using-numberconverter"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_numberconverter">5.1.3. Using NumberConverter</h4>
<div class="paragraph">
<p>You can convert a component&#8217;s data to a <code>java.lang.Number</code> by nesting
the <code>convertNumber</code> tag inside the component tag. The <code>convertNumber</code>
tag has several attributes that allow you to specify the format and type
of the data. <a href="#BNASY">Table 11-4</a> lists the attributes.</p>
</div>
<div class="paragraph">
<p>The following example uses a <code>convertNumber</code> tag to display the total
prices of the contents of a shopping cart:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cart.total}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertNumber</span> <span class="attribute-name">currencySymbol</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">$</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">currency</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When binding the <code>NumberConverter</code> to a component, ensure that the
managed bean property to which the component is bound is of a primitive
type or has a type of <code>java.lang.Number</code>. In the preceding example,
<code>cart.total</code> is of type <code>double</code>.</p>
</div>
<div class="paragraph">
<p>Here is an example of a number that this tag can display:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">$934</code></pre>
</div>
</div>
<div class="paragraph">
<p>This result can also be displayed by using the following tag in which
the currency pattern is specified:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cartTotal</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cart.total}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertNumber</span> <span class="attribute-name">pattern</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">$####</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>See the "Customizing Formats" lesson of the Java Tutorial at
<code><a href="http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html" class="bare">http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html</a></code>
for more information on how to format the output by using the <code>pattern</code>
attribute of the <code>convertNumber</code> tag.</p>
</div>
<div class="paragraph">
<p><a id="sthref63"></a><a id="BNASY"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 11-4 Attributes for the f:convertNumber Tag</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Attribute</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>binding</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NumberConverter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to bind a converter to a managed
bean property.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>currencyCode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO 4217 currency code, used only when
formatting currencies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>currencySymbol</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Currency symbol, applied only when
formatting currencies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>for</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used with composite components. Refers to one of the
objects within the composite component inside which this tag is nested.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groupingUsed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies whether formatted output contains
grouping separators.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>integerOnly</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies whether only the integer part of
the value will be parsed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>locale</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code> or <code>Locale</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Locale</code> whose number styles are used
to format or parse data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxFractionDigits</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of digits formatted in the
fractional part of the output.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxIntegerDigits</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of digits formatted in the
integer part of the output.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minFractionDigits</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum number of digits formatted in the
fractional part of the output.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minIntegerDigits</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum number of digits formatted in the
integer part of the output.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pattern</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom formatting pattern that determines how the
number string is formatted and parsed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies whether the string value is parsed and
formatted as a <code>number</code>, <code>currency</code>, or <code>percentage</code>. If not specified,
<code>number</code> is used.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="BNASZ"></a><a id="registering-listeners-on-components"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_registering_listeners_on_components">5.2. Registering Listeners on Components</h3>
<div class="paragraph">
<p>An application developer can implement listeners as classes or as
managed bean methods. If a listener is a managed bean method, the page
author references the method from either the component&#8217;s
<code>valueChangeListener</code> attribute or its <code>actionListener</code> attribute. If
the listener is a class, the page author can reference the listener from
either an <code>f:valueChangeListener</code> tag or an <code>f:actionListener</code> tag and
nest the tag inside the component tag to register the listener on the
component.</p>
</div>
<div class="paragraph">
<p><a href="#BNATQ">Referencing a Method That Handles an
Action Event</a> and <a href="#BNATS">Referencing a Method
That Handles a Value-Change Event</a> explain how a page author uses the
<code>valueChangeListener</code> and <code>actionListener</code> attributes to reference
managed bean methods that handle events.</p>
</div>
<div class="paragraph">
<p>This section explains how to register a <code>NameChanged</code> value-change
listener and a <code>BookChange</code> action listener implementation on
components. The Duke&#8217;s Bookstore case study includes both of these
listeners.</p>
</div>
<div class="paragraph">
<p><a id="BNATA"></a><a id="registering-a-value-change-listener-on-a-component"></a></p>
</div>
<div class="sect3">
<h4 id="_registering_a_value_change_listener_on_a_component">5.2.1. Registering a Value-Change Listener on a Component</h4>
<div class="paragraph">
<p>A page author can register a <code>ValueChangeListener</code> implementation on a
component that implements <code>EditableValueHolder</code> by nesting an
<code>f:valueChangeListener</code> tag within the component&#8217;s tag on the page. The
<code>f:valueChangeListener</code> tag supports the attributes shown in
<a href="#GKCLY">Table 11-5</a>, one of which must be used.</p>
</div>
<div class="paragraph">
<p><a id="sthref64"></a><a id="GKCLY"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 11-5 Attributes for the f:valueChangeListener Tag</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 60%;">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Attribute</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">References the fully qualified class name of a
<code>ValueChangeListener</code> implementation. Can accept a literal or a value
expression.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>binding</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">References an object that implements <code>ValueChangeListener</code>.
Can accept only a value expression, which must point to a managed bean
property that accepts and returns a <code>ValueChangeListener</code>
implementation.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following example shows a value-change listener registered on a
component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">30</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.name}</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">requiredMessage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ReqCustomerName}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:valueChangeListener</span>
        <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jakarta.tutorial.dukesbookstore.listeners.NameChanged</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example, the core tag <code>type</code> attribute specifies the custom
<code>NameChanged</code> listener as the <code>ValueChangeListener</code> implementation
registered on the <code>name</code> component.</p>
</div>
<div class="paragraph">
<p>After this component tag is processed and local values have been
validated, its corresponding component instance will queue the
<code>ValueChangeEvent</code> associated with the specified <code>ValueChangeListener</code>
to the component.</p>
</div>
<div class="paragraph">
<p>The <code>binding</code> attribute is used to bind a <code>ValueChangeListener</code>
implementation to a managed bean property. This attribute works in a
similar way to the <code>binding</code> attribute supported by the standard
converter tags. See <a href="#BNATG">Binding Component
Values and Instances to Managed Bean Properties</a> for more information.</p>
</div>
<div class="paragraph">
<p><a id="BNATB"></a><a id="registering-an-action-listener-on-a-component"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_registering_an_action_listener_on_a_component">5.2.2. Registering an Action Listener on a Component</h4>
<div class="paragraph">
<p>A page author can register an <code>ActionListener</code> implementation on a
command component by nesting an <code>f:actionListener</code> tag within the
component&#8217;s tag on the page. Similarly to the <code>f:valueChangeListener</code>
tag, the <code>f:actionListener</code> tag supports both the <code>type</code> and <code>binding</code>
attributes. One of these attributes must be used to reference the action
listener.</p>
</div>
<div class="paragraph">
<p>Here is an example of an <code>h:commandLink</code> tag that references an
<code>ActionListener</code> implementation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandLink</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Duke</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookstore</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:actionListener</span>
        <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jakarta.tutorial.dukesbookstore.listeners.LinkBookChangeListener</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.Book201}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:commandLink&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>type</code> attribute of the <code>f:actionListener</code> tag specifies the fully
qualified class name of the <code>ActionListener</code> implementation. Similarly
to the <code>f:valueChangeListener</code> tag, the <code>f:actionListener</code> tag also
supports the <code>binding</code> attribute. See
<a href="#BNATM">Binding Converters, Listeners, and
Validators to Managed Bean Properties</a> for more information about
binding listeners to managed bean properties.</p>
</div>
<div class="paragraph">
<p>In addition to the <code>actionListener</code> tag that allows you register a
custom listener onto a component, the core tag library includes the
<code>f:setPropertyActionListener</code> tag. You use this tag to register a
special action listener onto the <code>ActionSource</code> instance associated with
a component. When the component is activated, the listener will store
the object referenced by the tag&#8217;s <code>value</code> attribute into the object
referenced by the tag&#8217;s <code>target</code> attribute.</p>
</div>
<div class="paragraph">
<p>The <code>bookcatalog.xhtml</code> page of the Duke&#8217;s Bookstore application uses
<code>f:setPropertyActionListener</code> with two components: the <code>h:commandLink</code>
component used to link to the <code>bookdetails.xhtml</code> page and the
<code>h:commandButton</code> component used to add a book to the cart:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:dataTable</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">books</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{store.books}</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">headerClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list-header</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">styleClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list-background</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">rowClasses</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list-row-even, list-row-odd</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">border</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">summary</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.BookCatalog}</span><span class="delimiter">&quot;</span></span> <span class="tag">&gt;</span>
    ...
    <span class="tag">&lt;h:column&gt;</span>
        <span class="tag">&lt;f:facet</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">header</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ItemTitle}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/f:facet&gt;</span>
        <span class="tag">&lt;h:commandLink</span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{catalog.details}</span><span class="delimiter">&quot;</span></span>
                       <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{book.title}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;f:setPropertyActionListener</span> <span class="attribute-name">target</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{requestScope.book}</span><span class="delimiter">&quot;</span></span>
                                         <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{book}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/h:commandLink&gt;</span>
    <span class="tag">&lt;/h:column&gt;</span>
    ...
    <span class="tag">&lt;h:column&gt;</span>
        <span class="tag">&lt;f:facet</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">header</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.CartAdd}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/f:facet&gt;</span>
        <span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">add</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{catalog.add}</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.CartAdd}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;f:setPropertyActionListener</span> <span class="attribute-name">target</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{requestScope.book}</span><span class="delimiter">&quot;</span></span>
                                         <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{book}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/h:commandButton&gt;</span>
    <span class="tag">&lt;/h:column&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>h:commandLink</code> and <code>h:commandButton</code> tags are within an
<code>h:dataTable</code> tag, which iterates over the list of books. The <code>var</code>
attribute refers to a single book in the list of books.</p>
</div>
<div class="paragraph">
<p>The object referenced by the <code>var</code> attribute of an <code>h:dataTable</code> tag is
in page scope. However, in this case you need to put this object into
request scope so that when the user activates the <code>commandLink</code>
component to go to <code>bookdetails.xhtml</code> or activates the <code>commandButton</code>
component to go to <code>bookcatalog.xhtml</code>, the book data is available to
those pages. Therefore, the <code>f:setPropertyActionListener</code> tag is used to
set the current book object into request scope when the <code>commandLink</code> or
<code>commandButton</code> component is activated.</p>
</div>
<div class="paragraph">
<p>In the preceding example, the <code>f:setPropertyActionListener</code> tag&#8217;s
<code>value</code> attribute references the <code>book</code> object. The
<code>f:setPropertyActionListener</code> tag&#8217;s <code>target</code> attribute references the
value expression <code>requestScope.book</code>, which is where the <code>book</code> object
referenced by the <code>value</code> attribute is stored when the <code>commandLink</code> or
the <code>commandButton</code> component is activated.</p>
</div>
<div class="paragraph">
<p><a id="BNATC"></a><a id="using-the-standard-validators"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_the_standard_validators">5.3. Using the Standard Validators</h3>
<div class="paragraph">
<p>Jakarta Server Faces technology provides a set of standard classes and
associated tags that page authors and application developers can use to
validate a component&#8217;s data. <a href="#BNATD">Table 11-6</a> lists all the
standard validator classes and the tags that allow you to use the
validators from the page.</p>
</div>
<div class="paragraph">
<p><a id="sthref65"></a><a id="BNATD"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 11-6 The Validator Classes</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Validator Class</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Function</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BeanValidator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>validateBean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registers a bean validator for the
component.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BeanValidator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>validateWholeBean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows cross-field validation by
enabling class-level bean validation on CDI-based backing beans.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DoubleRangeValidator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>validateDoubleRange</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checks whether the local
value of a component is within a certain range. The value must be
floating-point or convertible to floating-point.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LengthValidator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>validateLength</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checks whether the length of a
component&#8217;s local value is within a certain range. The value must be a
<code>java.lang.String</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LongRangeValidator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>validateLongRange</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checks whether the local
value of a component is within a certain range. The value must be any
numeric type or <code>String</code> that can be converted to a <code>long</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RegexValidator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>validateRegex</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checks whether the local value of a
component is a match against a regular expression from the
<code>java.util.regex</code> package.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RequiredValidator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>validateRequired</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures that the local value
is not empty on an <code>EditableValueHolder</code> component.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>All of these validator classes implement the <code>Validator</code> interface.
Component writers and application developers can also implement this
interface to define their own set of constraints for a component&#8217;s
value.</p>
</div>
<div class="paragraph">
<p>Similar to the standard converters, each of these validators has one or
more standard error messages associated with it. If you have registered
one of these validators onto a component on your page and the validator
is unable to validate the component&#8217;s value, the validator&#8217;s error
message will display on the page. For example, the error message that
displays when the component&#8217;s value exceeds the maximum value allowed by
<code>LongRangeValidator</code> is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">{1}: Validation Error: Value is greater than allowable maximum of &quot;{0}&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the <code>{1}</code> substitution parameter is replaced by the
component&#8217;s label or <code>id</code>, and the <code>{0}</code> substitution parameter is
replaced with the maximum value allowed by the validator.</p>
</div>
<div class="paragraph">
<p>See <a href="#BNASO">Displaying Error Messages with the
h:message and h:messages Tags</a> for information on how to display
validation error messages on the page when validation fails.</p>
</div>
<div class="paragraph">
<p>Instead of using the standard validators, you can use Bean Validation to
validate data. If you specify bean validation constraints on your
managed bean properties, the constraints are automatically placed on the
corresponding fields on your applications web pages. See
<a href="#CHDGJIIA">Chapter 23, "Introduction to Bean
Validation"</a> for more information. You do not need to specify the
<code>validateBean</code> tag to use Bean Validation, but the tag allows you to use
more advanced Bean Validation features. For example, you can use the
<code>validationGroups</code> attribute of the tag to specify constraint groups.</p>
</div>
<div class="paragraph">
<p>You can also create and register custom validators, although Bean
Validation has made this feature less useful. For details, see
<a href="#BNAUW">Creating and Using a Custom Validator</a>.</p>
</div>
<div class="paragraph">
<p><a id="BNATE"></a><a id="validating-a-components-value"></a></p>
</div>
<div class="sect3">
<h4 id="_validating_a_components_value">5.3.1. Validating a Component&#8217;s Value</h4>
<div class="paragraph">
<p>To validate a component&#8217;s value using a particular validator, you need
to register that validator on the component. You can do this in one of
the following ways.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Nest the validator&#8217;s corresponding tag (shown in <a href="#BNATD">Table
11-6</a>) inside the component&#8217;s tag. <a href="#BNATF">Using Validator Tags</a>
explains how to use the <code>validateLongRange</code> tag. You can use the other
standard tags in the same way.</p>
</li>
<li>
<p>Refer to a method that performs the validation from the component
tag&#8217;s <code>validator</code> attribute.</p>
</li>
<li>
<p>Nest a validator tag inside the component tag, and use either the
validator tag&#8217;s <code>validatorId</code> attribute or its <code>binding</code> attribute to
refer to the validator.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="#BNATR">Referencing a Method That Performs
Validation</a> for more information on using the <code>validator</code> attribute.</p>
</div>
<div class="paragraph">
<p>The <code>validatorId</code> attribute works similarly to the <code>converterId</code>
attribute of the <code>converter</code> tag, as described in
<a href="#BNASU">Converting a Component&#8217;s Value</a>.</p>
</div>
<div class="paragraph">
<p>Keep in mind that validation can be performed only on components that
implement <code>EditableValueHolder</code>, because these components accept values
that can be validated.</p>
</div>
<div class="paragraph">
<p><a id="BNATF"></a><a id="using-validator-tags"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_validator_tags">5.3.2. Using Validator Tags</h4>
<div class="paragraph">
<p>The following example shows how to use the <code>f:validateLongRange</code>
validator tag on an input component named <code>quantity</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">quantity</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">4</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{item.quantity}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:validateLongRange</span> <span class="attribute-name">minimum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span>
<span class="tag">&lt;h:message</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">quantity</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This tag requires the user to enter a number that is at least 1. The
<code>validateLongRange</code> tag also has a <code>maximum</code> attribute, which sets a
maximum value for the input.</p>
</div>
<div class="paragraph">
<p>The attributes of all the standard validator tags accept EL value
expressions. This means that the attributes can reference managed bean
properties rather than specify literal values. For example, the
<code>f:validateLongRange</code> tag in the preceding example can reference managed
bean properties called <code>minimum</code> and <code>maximum</code> to get the minimum and
maximum values acceptable to the validator implementation, as shown in
this snippet from the <code>guessnumber-jsf</code> example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userNo</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Type a number from 0 to 10:</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.userNumber}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:validateLongRange</span> <span class="attribute-name">minimum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.minimum}</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">maximum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.maximum}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following <code>f:validateRegex</code> tag shows how you might ensure that a
password is from 4 to 10 characters long and contains at least one
digit, at least one lowercase letter, and at least one uppercase letter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;f:validateRegex</span> <span class="attribute-name">pattern</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">((?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{4,10})</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">passwordVal</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BNATN"></a><a id="referencing-a-managed-bean-method"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_referencing_a_managed_bean_method">5.4. Referencing a Managed Bean Method</h3>
<div class="paragraph">
<p>A component tag has a set of attributes for referencing managed bean
methods that can perform certain functions for the component associated
with the tag. These attributes are summarized in <a href="#BNATO">Table
11-7</a>.</p>
</div>
<div class="paragraph">
<p><a id="sthref66"></a><a id="BNATO"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 11-7 Component Tag Attributes That Reference Managed Bean Methods</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 60%;">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Attribute</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Function</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>action</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Refers to a managed bean method that performs navigation
processing for the component and returns a logical outcome <code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>actionListener</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Refers to a managed bean method that handles action
events</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>validator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Refers to a managed bean method that performs validation
on the component&#8217;s value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>valueChangeListener</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Refers to a managed bean method that handles
value-change events</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Only components that implement <code>ActionSource</code> can use the <code>action</code> and
<code>actionListener</code> attributes. Only components that implement
<code>EditableValueHolder</code> can use the <code>validator</code> or <code>valueChangeListener</code>
attributes.</p>
</div>
<div class="paragraph">
<p>The component tag refers to a managed bean method using a method
expression as a value of one of the attributes. The method referenced by
an attribute must follow a particular signature, which is defined by the
tag attribute&#8217;s definition in the o<a href="JSFTL">Jakarta Server Faces Facelets
Tag Library documentation</a>. For example, the definition of the
<code>validator</code> attribute of the <code>inputText</code> tag is the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">void validate(javax.faces.context.FacesContext,
              javax.faces.component.UIComponent, java.lang.Object)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following sections give examples of how to use the attributes.</p>
</div>
<div class="paragraph">
<p><a id="BNATP"></a><a id="referencing-a-method-that-performs-navigation"></a></p>
</div>
<div class="sect3">
<h4 id="_referencing_a_method_that_performs_navigation">5.4.1. Referencing a Method That Performs Navigation</h4>
<div class="paragraph">
<p>If your page includes a component, such as a button or a link, that
causes the application to navigate to another page when the component is
activated, the tag corresponding to this component must include an
<code>action</code> attribute. This attribute does one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Specifies a logical outcome <code>String</code> that tells the application which
page to access next</p>
</li>
<li>
<p>References a managed bean method that performs some processing and
returns a logical outcome <code>String</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following example shows how to reference a navigation method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.Submit}</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.submit}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#BNAVC">Writing a Method to Handle Navigation</a>
for information on how to write such a method.</p>
</div>
<div class="paragraph">
<p><a id="BNATQ"></a><a id="referencing-a-method-that-handles-an-action-event"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_referencing_a_method_that_handles_an_action_event">5.4.2. Referencing a Method That Handles an Action Event</h4>
<div class="paragraph">
<p>If a component on your page generates an action event, and if that event
is handled by a managed bean method, you refer to the method by using
the component&#8217;s <code>actionListener</code> attribute.</p>
</div>
<div class="paragraph">
<p>The following example shows how such a method could be referenced:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandLink</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Duke</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookstore</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">actionListener</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{actionBean.chooseBookFromLink}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>actionListener</code> attribute of this component tag references the
<code>chooseBookFromLink</code> method using a method expression. The
<code>chooseBookFromLink</code> method handles the event when the user clicks the
link rendered by this component. See
<a href="#BNAVD">Writing a Method to Handle an Action
Event</a> for information on how to write such a method.</p>
</div>
<div class="paragraph">
<p><a id="BNATR"></a><a id="referencing-a-method-that-performs-validation"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_referencing_a_method_that_performs_validation">5.4.3. Referencing a Method That Performs Validation</h4>
<div class="paragraph">
<p>If the input of one of the components on your page is validated by a
managed bean method, refer to the method from the component&#8217;s tag by
using the <code>validator</code> attribute.</p>
</div>
<div class="paragraph">
<p>The following simplified example from
<a href="#GJCXV">The guessnumber-cdi CDI Example</a>
shows how to reference a method that performs validation on
<code>inputGuess</code>, an input component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">inputGuess</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.userNumber}</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">disabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.number eq userNumberBean.userNumber ...}</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">validator</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.validateNumberRange}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The managed bean method <code>validateNumberRange</code> verifies that the input
value is within the valid range, which changes each time another guess
is made. See <a href="#BNAVE">Writing a Method to Perform
Validation</a> for information on how to write such a method.</p>
</div>
<div class="paragraph">
<p><a id="BNATS"></a><a id="referencing-a-method-that-handles-a-value-change-event"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_referencing_a_method_that_handles_a_value_change_event">5.4.4. Referencing a Method That Handles a Value-Change Event</h4>
<div class="paragraph">
<p>If you want a component on your page to generate a value-change event
and you want that event to be handled by a managed bean method instead
of a <code>ValueChangeListener</code> implementation, you refer to the method by
using the component&#8217;s <code>valueChangeListener</code> attribute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">30</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.name}</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">valueChangeListener</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.processValueChange}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>valueChangeListener</code> attribute of this component tag references the
<code>processValueChange</code> method of <code>CashierBean</code> by using a method
expression. The <code>processValueChange</code> method handles the event of a user
entering a name in the input field rendered by this component.</p>
</div>
<div class="paragraph">
<p><a href="#BNAVF">Writing a Method to Handle a Value-Change
Event</a> describes how to implement a method that handles a
<code>ValueChangeEvent</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_developing_with_jakarta_server_faces_technology">6. Developing with Jakarta Server Faces Technology</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="BNATX"></a><a id="developing-with-javaserver-faces-technology"></a></p>
</div>
<div class="paragraph">
<p>This chapter provides an overview of managed beans and explains how to
write methods and properties of managed beans that are used by a
Jakarta Server Faces application. This chapter also introduces the Bean
Validation feature.</p>
</div>
<div class="paragraph">
<p><a id="BNAQM"></a><a id="managed-beans-in-javaserver-faces-technology"></a></p>
</div>
<div class="sect2">
<h3 id="_managed_beans_in_jakarta_server_faces_technology">6.1. Managed Beans in Jakarta Server Faces Technology</h3>
<div class="paragraph">
<p>A typical Jakarta Server Faces application includes one or more managed
beans, each of which can be associated with the components used in a
particular page. This section introduces the basic concepts of creating,
configuring, and using managed beans in an application.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Note</strong>:</p>
</div>
<div class="paragraph">
<p><a href="#BNAQZ">Chapter 10, "Using Jakarta Server Faces Technology
in Web Pages"</a> and <a href="#GJCUT">Chapter 11, "Using
Converters, Listeners, and Validators"</a> show how to add components to a
page and connect them to server-side objects by using component tags and
core tags. These chapters also show how to provide additional
functionality to the components through converters, listeners, and
validators. Developing a Jakarta Server Faces application also involves the
task of programming the server-side objects: managed beans, converters,
event handlers, and validators.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#BNAQN">Creating a Managed Bean</a></p>
</li>
<li>
<p><a href="#BNAQP">Using the EL to Reference Managed Beans</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="BNAQN"></a><a id="creating-a-managed-bean"></a></p>
</div>
<div class="sect3">
<h4 id="_creating_a_managed_bean">6.1.1. Creating a Managed Bean</h4>
<div class="paragraph">
<p>A managed bean is created with a constructor with no arguments, a set of
properties, and a set of methods that perform functions for a component.
Each of the managed bean properties can be bound to one of the
following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A component value</p>
</li>
<li>
<p>A component instance</p>
</li>
<li>
<p>A converter instance</p>
</li>
<li>
<p>A listener instance</p>
</li>
<li>
<p>A validator instance</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The most common functions that managed bean methods perform include the
following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Validating a component&#8217;s data</p>
</li>
<li>
<p>Handling an event fired by a component</p>
</li>
<li>
<p>Performing processing to determine the next page to which the
application must navigate</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As with all JavaBeans components, a property consists of a private data
field and a set of accessor methods, as shown by this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="predefined-type">Integer</span> userNumber = <span class="predefined-constant">null</span>;
...
public <span class="type">void</span> setUserNumber(<span class="predefined-type">Integer</span> user_number) {
    userNumber = user_number;
}
<span class="directive">public</span> <span class="predefined-type">Integer</span> getUserNumber() {
    <span class="keyword">return</span> userNumber;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When bound to a component&#8217;s value, a bean property can be any of the
basic primitive and numeric types or any Java object type for which the
application has access to an appropriate converter. For example, a
property can be of type <code>java.util.Date</code> if the application has access
to a converter that can convert the <code>Date</code> type to a <code>String</code> and back
again. See <a href="#BNATY">Writing Bean Properties</a> for
information on which types are accepted by which component tags.</p>
</div>
<div class="paragraph">
<p>When a bean property is bound to a component instance, the property&#8217;s
type must be the same as the component object. For example, if a
<code>javax.faces.component.UISelectBoolean</code> component is bound to the
property, the property must accept and return a <code>UISelectBoolean</code>
object. Likewise, if the property is bound to a converter, validator, or
listener instance, the property must be of the appropriate converter,
validator, or listener type.</p>
</div>
<div class="paragraph">
<p>For more information on writing beans and their properties, see
<a href="#BNATY">Writing Bean Properties</a>.</p>
</div>
<div class="paragraph">
<p><a id="BNAQP"></a><a id="using-the-el-to-reference-managed-beans"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_the_el_to_reference_managed_beans">6.1.2. Using the EL to Reference Managed Beans</h4>
<div class="paragraph">
<p>To bind component values and objects to managed bean properties or to
reference managed bean methods from component tags, page authors use the
Expression Language syntax. As explained in
<a href="#BNAHQ">Overview of the EL</a>, the following are some of
the features that the EL offers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Deferred evaluation of expressions</p>
</li>
<li>
<p>The ability to use a value expression to both read and write data</p>
</li>
<li>
<p>Method expressions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Deferred evaluation of expressions is important because the Jakarta Server
Faces lifecycle is split into several phases in which component event
handling, data conversion and validation, and data propagation to
external objects are all performed in an orderly fashion. The
implementation must be able to delay the evaluation of expressions until
the proper phase of the lifecycle has been reached. Therefore, the
implementation&#8217;s tag attributes always use deferred-evaluation syntax,
which is distinguished by the <code>#{}</code> delimiter.</p>
</div>
<div class="paragraph">
<p>To store data in external objects, almost all Jakarta Server Faces tag
attributes use lvalue expressions, which are expressions that allow both
getting and setting data on external objects.</p>
</div>
<div class="paragraph">
<p>Finally, some component tag attributes accept method expressions that
reference methods that handle component events or validate or convert
component data.</p>
</div>
<div class="paragraph">
<p>To illustrate a Jakarta Server Faces tag using the EL, the following tag
references a method that validates user input:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">inputGuess</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.userNumber}</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">disabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.number eq userNumberBean.userNumber ...}</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">validator</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.validateNumberRange}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This tag binds the <code>inputGuess</code> component&#8217;s value to the
<code>UserNumberBean.userNumber</code> managed bean property by using an lvalue
expression. The tag uses a method expression to refer to the
<code>UserNumberBean.validateNumberRange</code> method, which performs validation
of the component&#8217;s local value. The local value is whatever the user
types into the field corresponding to this tag. This method is invoked
when the expression is evaluated.</p>
</div>
<div class="paragraph">
<p>Nearly all Jakarta Server Faces tag attributes accept value expressions. In
addition to referencing bean properties, value expressions can reference
lists, maps, arrays, implicit objects, and resource bundles.</p>
</div>
<div class="paragraph">
<p>Another use of value expressions is to bind a component instance to a
managed bean property. A page author does this by referencing the
property from the <code>binding</code> attribute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fanClub</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">binding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.specialOfferText}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
               value=&quot;#{bundle.DukeFanClub}&quot;/<span class="error">&gt;</span>
<span class="tag">&lt;/h:outputLabel&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to using expressions with the standard component tags, you
can configure your custom component properties to accept expressions by
creating <code>javax.el.ValueExpression</code> or <code>javax.el.MethodExpression</code>
instances for them.</p>
</div>
<div class="paragraph">
<p>For information on the EL, see <a href="#GJDDD">Chapter 9,
"Expression Language"</a>.</p>
</div>
<div class="paragraph">
<p>For information on referencing managed bean methods from component tags,
see <a href="#BNATN">Referencing a Managed Bean Method</a>.</p>
</div>
<div class="paragraph">
<p><a id="BNATY"></a><a id="writing-bean-properties"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_writing_bean_properties">6.2. Writing Bean Properties</h3>
<div class="paragraph">
<p>As explained in <a href="#BNAQM">Managed Beans in
Jakarta Server Faces Technology</a>, a managed bean property can be bound to
one of the following items:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A component value</p>
</li>
<li>
<p>A component instance</p>
</li>
<li>
<p>A converter implementation</p>
</li>
<li>
<p>A listener implementation</p>
</li>
<li>
<p>A validator implementation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These properties follow the conventions of JavaBeans components (also
called beans). For more information on JavaBeans components, see the
JavaBeans Tutorial at
<code><a href="http://docs.oracle.com/javase/tutorial/javabeans/index.html" class="bare">http://docs.oracle.com/javase/tutorial/javabeans/index.html</a></code>.</p>
</div>
<div class="paragraph">
<p>The component&#8217;s tag binds the component&#8217;s value to a managed bean
property by using its <code>value</code> attribute and binds the component&#8217;s
instance to a managed bean property by using its <code>binding</code> attribute.
Likewise, all the converter, listener, and validator tags use their
<code>binding</code> attributes to bind their associated implementations to managed
bean properties. See <a href="#BNATG">Binding Component
Values and Instances to Managed Bean Properties</a> and
<a href="#BNATM">Binding Converters, Listeners, and
Validators to Managed Bean Properties</a> for more information.</p>
</div>
<div class="paragraph">
<p>To bind a component&#8217;s value to a managed bean property, the type of the
property must match the type of the component&#8217;s value to which it is
bound. For example, if a managed bean property is bound to a
<code>UISelectBoolean</code> component&#8217;s value, the property should accept and
return a <code>boolean</code> value or a <code>Boolean</code> wrapper <code>Object</code> instance.</p>
</div>
<div class="paragraph">
<p>To bind a component instance to a managed bean property, the property
must match the type of component. For example, if a managed bean
property is bound to a <code>UISelectBoolean</code> instance, the property should
accept and return a <code>UISelectBoolean</code> value.</p>
</div>
<div class="paragraph">
<p>Similarly, to bind a converter, listener, or validator implementation to
a managed bean property, the property must accept and return the same
type of converter, listener, or validator object. For example, if you
are using the <code>convertDateTime</code> tag to bind a
<code>javax.faces.convert.DateTimeConverter</code> to a property, that property
must accept and return a <code>DateTimeConverter</code> instance.</p>
</div>
<div class="paragraph">
<p>The rest of this section explains how to write properties that can be
bound to component values, to component instances for the component
objects described in <a href="#BNARF">Adding Components to a
Page Using HTML Tag Library Tags</a>, and to converter, listener, and
validator implementations.</p>
</div>
<div class="paragraph">
<p><a id="BNATZ"></a><a id="writing-properties-bound-to-component-values"></a></p>
</div>
<div class="sect3">
<h4 id="_writing_properties_bound_to_component_values">6.2.1. Writing Properties Bound to Component Values</h4>
<div class="paragraph">
<p>To write a managed bean property that is bound to a component&#8217;s value,
you must match the property type to the component&#8217;s value.</p>
</div>
<div class="paragraph">
<p><a href="#BNAUA">Table 12-1</a> lists the <code>javax.faces.component</code> classes and
the acceptable types of their values.</p>
</div>
<div class="paragraph">
<p><a id="sthref67"></a><a id="BNAUA"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 12-1 Acceptable Types of Component Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Component Class</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Acceptable Types of Component Values</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>UIInput</code>, <code>UIOutput</code>, <code>UISelectItem</code>, <code>UISelectOne</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any of the basic
primitive and numeric types or any Java programming language object type
for which an appropriate <code>javax.faces.convert.Converter</code> implementation
is available</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>UIData</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>array</code> of beans, <code>List</code> of beans, single bean,
<code>java.sql.ResultSet</code>, <code>javax.servlet.jsp.jstl.sql.Result</code>,
<code>javax.sql.RowSet</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>UISelectBoolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code> or <code>Boolean</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>UISelectItems</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.lang.String</code>, <code>Collection</code>, <code>Array</code>, <code>Map</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>UISelectMany</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>array</code> or <code>List</code>, although elements of the <code>array</code> or
<code>List</code> can be any of the standard types</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When they bind components to properties by using the <code>value</code> attributes
of the component tags, page authors need to ensure that the
corresponding properties match the types of the components' values.</p>
</div>
<div class="paragraph">
<p><a id="BNAUB"></a><a id="uiinput-and-uioutput-properties"></a></p>
</div>
<div class="sect4">
<h5 id="_uiinput_and_uioutput_properties">UIInput and UIOutput Properties</h5>
<div class="paragraph">
<p>The <code>UIInput</code> and <code>UIOutput</code> component classes are represented by the
component tags that begin with <code>h:input</code> and <code>h:output</code>, respectively
(for example, <code>h:inputText</code> and <code>h:outputText</code>).</p>
</div>
<div class="paragraph">
<p>In the following example, an <code>h:inputText</code> tag binds the <code>name</code>
component to the <code>name</code> property of a managed bean called <code>CashierBean</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;h:inputText id=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>
             size=<span class="string"><span class="delimiter">&quot;</span><span class="content">30</span><span class="delimiter">&quot;</span></span>
             value=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.name}</span><span class="delimiter">&quot;</span></span>
    ...&gt;
&lt;/h:inputText&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following code snippet from the managed bean <code>CashierBean</code> shows the
bean property type bound by the preceding component tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">protected</span> <span class="predefined-type">String</span> name = <span class="predefined-constant">null</span>;

<span class="directive">public</span> <span class="type">void</span> setName(<span class="predefined-type">String</span> name) {
    <span class="local-variable">this</span>.name = name;
}
<span class="directive">public</span> <span class="predefined-type">String</span> getName() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.name;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As described in <a href="#BNAST">Using the Standard
Converters</a>, to convert the value of an input or output component you
can either apply a converter or create the bean property bound to the
component with the matching type. Here is the example tag, from
<a href="#BNASV">Using DateTimeConverter</a>, that displays
the date on which items will be shipped.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;h:outputText value=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.shipDate}</span><span class="delimiter">&quot;</span></span>&gt;
    &lt;f:convertDateTime type=<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span> dateStyle=<span class="string"><span class="delimiter">&quot;</span><span class="content">full</span><span class="delimiter">&quot;</span></span> /&gt;
&lt;/h:outputText&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The bean property represented by this tag must have a type of
<code>java.util.Date</code>. The following code snippet shows the <code>shipDate</code>
property, from the managed bean <code>CashierBean</code>, that is bound by the
tag&#8217;s value in the preceding example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="predefined-type">Date</span> shipDate;

<span class="directive">public</span> <span class="predefined-type">Date</span> getShipDate() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.shipDate;
}
<span class="directive">public</span> <span class="type">void</span> setShipDate(<span class="predefined-type">Date</span> shipDate) {
    <span class="local-variable">this</span>.shipDate = shipDate;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BNAUC"></a><a id="uidata-properties"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_uidata_properties">UIData Properties</h5>
<div class="paragraph">
<p>The <code>UIData</code> component class is represented by the <code>h:dataTable</code>
component tag.</p>
</div>
<div class="paragraph">
<p><code>UIData</code> components must be bound to one of the managed bean property
types listed in <a href="#BNAUA">Table 12-1</a>. Data components are discussed
in <a href="#BNARZ">Using Data-Bound Table Components</a>. Here
is part of the start tag of <code>dataTable</code> from that section:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:dataTable</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">items</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">...</span>
    <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cart.items}</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">...</span>
    <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">item</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The value expression points to the <code>items</code> property of a shopping cart
bean named <code>cart</code>. The <code>cart</code> bean maintains a map of <code>ShoppingCartItem</code>
beans.</p>
</div>
<div class="paragraph">
<p>The <code>getItems</code> method from the <code>cart</code> bean populates a <code>List</code> with
<code>ShoppingCartItem</code> instances that are saved in the <code>items</code> map when the
customer adds books to the cart, as shown in the following code segment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">synchronized</span> <span class="predefined-type">List</span>&lt;ShoppingCartItem&gt; getItems() {
    <span class="predefined-type">List</span>&lt;ShoppingCartItem&gt; results = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;ShoppingCartItem&gt;();
    results.addAll(<span class="local-variable">this</span>.items.values());
    <span class="keyword">return</span> results;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>All the components contained in the <code>UIData</code> component are bound to the
properties of the <code>cart</code> bean that is bound to the entire <code>UIData</code>
component. For example, here is the <code>h:outputText</code> tag that displays the
book title in the table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;h:commandLink action=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{showcart.details}</span><span class="delimiter">&quot;</span></span>&gt;
    &lt;h:outputText value=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{item.item.title}</span><span class="delimiter">&quot;</span></span>/&gt;
&lt;/h:commandLink&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The title is actually a link to the <code>bookdetails.xhtml</code> page. The
<code>h:outputText</code> tag uses the value expression <code>#{item.item.title}</code> to
bind its <code>UIOutput</code> component to the <code>title</code> property of the <code>Book</code>
entity. The first item in the expression is the <code>ShoppingCartItem</code>
instance that the <code>h:dataTable</code> tag is referencing while rendering the
current row. The second item in expression refers to the <code>item</code> property
of <code>ShoppingCartItem</code>, which returns an <code>Object</code> (in this case, a
<code>Book</code>). The <code>title</code> part of the expression refers to the <code>title</code>
property of <code>Book</code>. The value of the <code>UIOutput</code> component corresponding
to this tag is bound to the <code>title</code> property of the <code>Book</code> entity:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="predefined-type">String</span> title;
...
public <span class="predefined-type">String</span> getTitle() {
    <span class="keyword">return</span> title;
}

<span class="directive">public</span> <span class="type">void</span> setTitle(<span class="predefined-type">String</span> title) {
    <span class="local-variable">this</span>.title = title;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The UIData component (and UIRepeat) supports the <code>Map</code> and <code>Iterable</code>
interfaces, as well as custom types.</p>
</div>
<div class="paragraph">
<p>For UIData and UIRepeat, the supported types are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>null</code> (becomes empty list)</p>
</li>
<li>
<p><code>javax.faces.model.DataMode</code></p>
</li>
<li>
<p><code>java.util.List</code></p>
</li>
<li>
<p><code>java.lang.Object</code>[]</p>
</li>
<li>
<p><code>java.sql.ResultSet</code></p>
</li>
<li>
<p><code>javax.servlet.jsp.jstl.sql.Result</code></p>
</li>
<li>
<p><code>java.util.Collection</code></p>
</li>
<li>
<p><code>java.lang.Iterable</code></p>
</li>
<li>
<p><code>java.util.Map</code></p>
</li>
<li>
<p><code>java.lang.Object</code> (becomes ScalarDataModel)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="BNAUD"></a><a id="uiselectboolean-properties"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_uiselectboolean_properties">UISelectBoolean Properties</h5>
<div class="paragraph">
<p>The <code>UISelectBoolean</code> component class is represented by the component
tag <code>h:selectBooleanCheckbox</code>.</p>
</div>
<div class="paragraph">
<p>Managed bean properties that hold a <code>UISelectBoolean</code> component&#8217;s data
must be of <code>boolean</code> or <code>Boolean</code> type. The example
<code>selectBooleanCheckbox</code> tag from the section
<a href="#BNASE">Displaying Components for Selecting One
Value</a> binds a component to a property. The following example shows a
tag that binds a component value to a <code>boolean</code> property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;h:selectBooleanCheckbox title=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.receiveEmails}</span><span class="delimiter">&quot;</span></span>
                         value=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{custFormBean.receiveEmails}</span><span class="delimiter">&quot;</span></span>&gt;
&lt;/h:selectBooleanCheckbox&gt;
&lt;h:outputText value=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.receiveEmails}</span><span class="delimiter">&quot;</span></span>&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example property that can be bound to the component
represented by the example tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="type">boolean</span> receiveEmails = <span class="predefined-constant">false</span>;
...
public <span class="type">void</span> setReceiveEmails(<span class="type">boolean</span> receiveEmails) {
    <span class="local-variable">this</span>.receiveEmails = receiveEmails;
}
<span class="directive">public</span> <span class="type">boolean</span> getReceiveEmails() {
    <span class="keyword">return</span> receiveEmails;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BNAUE"></a><a id="uiselectmany-properties"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_uiselectmany_properties">UISelectMany Properties</h5>
<div class="paragraph">
<p>The <code>UISelectMany</code> component class is represented by the component tags
that begin with <code>h:selectMany</code> (for example, <code>h:selectManyCheckbox</code> and
<code>h:selectManyListbox</code>).</p>
</div>
<div class="paragraph">
<p>Because a <code>UISelectMany</code> component allows a user to select one or more
items from a list of items, this component must map to a bean property
of type <code>List</code> or <code>array</code>. This bean property represents the set of
currently selected items from the list of available items.</p>
</div>
<div class="paragraph">
<p>The following example of the <code>selectManyCheckbox</code> tag comes from
<a href="#BNASI">Displaying Components for Selecting Multiple
Values</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;h:selectManyCheckbox id=<span class="string"><span class="delimiter">&quot;</span><span class="content">newslettercheckbox</span><span class="delimiter">&quot;</span></span>
                      layout=<span class="string"><span class="delimiter">&quot;</span><span class="content">pageDirection</span><span class="delimiter">&quot;</span></span>
                      value=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.newsletters}</span><span class="delimiter">&quot;</span></span>&gt;
    &lt;f:selectItems value=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.newsletterItems}</span><span class="delimiter">&quot;</span></span>/&gt;
&lt;/h:selectManyCheckbox&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the bean property that maps to the <code>value</code> of the
<code>selectManyCheckbox</code> tag from the preceding example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="predefined-type">String</span><span class="type">[]</span> newsletters;

<span class="directive">public</span> <span class="type">void</span> setNewsletters(<span class="predefined-type">String</span><span class="type">[]</span> newsletters) {
    <span class="local-variable">this</span>.newsletters = newsletters;
}
<span class="directive">public</span> <span class="predefined-type">String</span><span class="type">[]</span> getNewsletters() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.newsletters;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>UISelectItem</code> and <code>UISelectItems</code> components are used to represent
all the values in a <code>UISelectMany</code> component. See
<a href="#BNAUH">UISelectItems
Properties</a> for information on writing the bean properties for the
<code>UISelectItem</code> and <code>UISelectItems</code> components.</p>
</div>
<div class="paragraph">
<p><a id="BNAUF"></a><a id="uiselectone-properties"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_uiselectone_properties">UISelectOne Properties</h5>
<div class="paragraph">
<p>The <code>UISelectOne</code> component class is represented by the component tags
that begin with <code>h:selectOne</code> (for example, <code>h:selectOneRadio</code> and
<code>h:selectOneListbox</code>).</p>
</div>
<div class="paragraph">
<p><code>UISelectOne</code> properties accept the same types as <code>UIInput</code> and
<code>UIOutput</code> properties, because a <code>UISelectOne</code> component represents the
single selected item from a set of items. This item can be any of the
primitive types and anything else for which you can apply a converter.</p>
</div>
<div class="paragraph">
<p>Here is an example of the <code>h:selectOneMenu</code> tag from
<a href="#BNASH">Displaying a Menu Using the h:selectOneMenu
Tag</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;h:selectOneMenu id=<span class="string"><span class="delimiter">&quot;</span><span class="content">shippingOption</span><span class="delimiter">&quot;</span></span>
                 required=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
                 value=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.shippingOption}</span><span class="delimiter">&quot;</span></span>&gt;
    &lt;f:selectItem itemValue=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span>
                  itemLabel=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.QuickShip}</span><span class="delimiter">&quot;</span></span>/&gt;
    &lt;f:selectItem itemValue=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span>
                  itemLabel=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.NormalShip}</span><span class="delimiter">&quot;</span></span>/&gt;
    &lt;f:selectItem itemValue=<span class="string"><span class="delimiter">&quot;</span><span class="content">7</span><span class="delimiter">&quot;</span></span>
                  itemLabel=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.SaverShip}</span><span class="delimiter">&quot;</span></span>/&gt;
 &lt;/h:selectOneMenu&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the bean property corresponding to this tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="predefined-type">String</span> shippingOption = <span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span>;

<span class="directive">public</span> <span class="type">void</span> setShippingOption(<span class="predefined-type">String</span> shippingOption) {
    <span class="local-variable">this</span>.shippingOption = shippingOption;
}
<span class="directive">public</span> <span class="predefined-type">String</span> getShippingOption() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.shippingOption;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that <code>shippingOption</code> represents the currently selected item from
the list of items in the <code>UISelectOne</code> component.</p>
</div>
<div class="paragraph">
<p>The <code>UISelectItem</code> and <code>UISelectItems</code> components are used to represent
all the values in a <code>UISelectOne</code> component. This is explained in
<a href="#BNASH">Displaying a Menu Using the h:selectOneMenu
Tag</a>.</p>
</div>
<div class="paragraph">
<p>For information on how to write the managed bean properties for the
<code>UISelectItem</code> and <code>UISelectItems</code> components, see
<a href="#BNAUH">UISelectItems
Properties</a>.</p>
</div>
<div class="paragraph">
<p><a id="BNAUG"></a><a id="uiselectitem-properties"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_uiselectitem_properties">UISelectItem Properties</h5>
<div class="paragraph">
<p>A <code>UISelectItem</code> component represents a single value in a set of values
in a <code>UISelectMany</code> or a <code>UISelectOne</code> component. A <code>UISelectItem</code>
component must be bound to a managed bean property of type
<code>javax.faces.model.SelectItem</code>. A <code>SelectItem</code> object is composed of an
<code>Object</code> representing the value along with two <code>Strings</code> representing
the label and the description of the <code>UISelectItem</code> object.</p>
</div>
<div class="paragraph">
<p>The example <code>selectOneMenu</code> tag from <a href="#BNAUF">UISelectOne Properties</a>
contains <code>selectItem</code> tags that set the values of the list of items in
the page. Here is an example of a bean property that can set the values
for this list in the bean:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">SelectItem itemOne = <span class="predefined-constant">null</span>;

SelectItem getItemOne(){
    <span class="keyword">return</span> itemOne;
}
<span class="type">void</span> setItemOne(SelectItem item) {
    itemOne = item;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BNAUH"></a><a id="uiselectitems-properties"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_uiselectitems_properties">UISelectItems Properties</h5>
<div class="paragraph">
<p><code>UISelectItems</code> components are children of <code>UISelectMany</code> and
<code>UISelectOne</code> components. Each <code>UISelectItems</code> component is composed of
a set of either <code>UISelectItem</code> instances or any collection of objects,
such as an array, a list, or even POJOs.</p>
</div>
<div class="paragraph">
<p>The following code snippet from <code>CashierBean</code> shows how to write the
properties for <code>selectItems</code> tags containing <code>SelectItem</code> instances.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="predefined-type">String</span><span class="type">[]</span> newsletters;
<span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> SelectItem<span class="type">[]</span> newsletterItems = {
    <span class="keyword">new</span> SelectItem(<span class="string"><span class="delimiter">&quot;</span><span class="content">Duke's Quarterly</span><span class="delimiter">&quot;</span></span>),
    <span class="keyword">new</span> SelectItem(<span class="string"><span class="delimiter">&quot;</span><span class="content">Innovator's Almanac</span><span class="delimiter">&quot;</span></span>),
    <span class="keyword">new</span> SelectItem(<span class="string"><span class="delimiter">&quot;</span><span class="content">Duke's Diet and Exercise Journal</span><span class="delimiter">&quot;</span></span>),
    <span class="keyword">new</span> SelectItem(<span class="string"><span class="delimiter">&quot;</span><span class="content">Random Ramblings</span><span class="delimiter">&quot;</span></span>)
};
...
public <span class="type">void</span> setNewsletters(<span class="predefined-type">String</span><span class="type">[]</span> newsletters) {
    <span class="local-variable">this</span>.newsletters = newsletters;
}

<span class="directive">public</span> <span class="predefined-type">String</span><span class="type">[]</span> getNewsletters() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.newsletters;
}

<span class="directive">public</span> SelectItem<span class="type">[]</span> getNewsletterItems() {
    <span class="keyword">return</span> newsletterItems;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, the <code>newsletters</code> property represents the <code>SelectItems</code> object,
whereas the <code>newsletterItems</code> property represents a static array of
<code>SelectItem</code> objects. The <code>SelectItem</code> class has several constructors;
in this example, the first argument is an <code>Object</code> representing the
value of the item, whereas the second argument is a <code>String</code>
representing the label that appears in the <code>UISelectMany</code> component on
the page.</p>
</div>
<div class="paragraph">
<p><a id="BNAUK"></a><a id="writing-properties-bound-to-component-instances"></a>]</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_writing_properties_bound_to_component_instances">6.2.2. Writing Properties Bound to Component Instances</h4>
<div class="paragraph">
<p>A property bound to a component instance returns and accepts a component
instance rather than a component value. The following components bind a
component instance to a managed bean property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:selectBooleanCheckbox</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fanClub</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">binding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.specialOffer}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fanClub</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">binding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.specialOfferText}</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.DukeFanClub}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputLabel&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>selectBooleanCheckbox</code> tag renders a check box and binds the
<code>fanClub</code> <code>UISelectBoolean</code> component to the <code>specialOffer</code> property of
<code>CashierBean</code>. The <code>outputLabel</code> tag binds the value of the <code>value</code>
attribute, which represents the check box&#8217;s label, to the
<code>specialOfferText</code> property of <code>CashierBean</code>. If the user orders more
than $100 worth of books and clicks the Submit button, the <code>submit</code>
method of <code>CashierBean</code> sets both components' <code>rendered</code> properties to
<code>true</code>, causing the check box and label to display when the page is
re-rendered.</p>
</div>
<div class="paragraph">
<p>Because the components corresponding to the example tags are bound to
the managed bean properties, these properties must match the components'
types. This means that the <code>specialOfferText</code> property must be of type
<code>UIOutput</code>, and the <code>specialOffer</code> property must be of type
<code>UISelectBoolean</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">UIOutput specialOfferText = <span class="predefined-constant">null</span>;
UISelectBoolean specialOffer = <span class="predefined-constant">null</span>;

<span class="directive">public</span> UIOutput getSpecialOfferText() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.specialOfferText;
}
<span class="directive">public</span> <span class="type">void</span> setSpecialOfferText(UIOutput specialOfferText) {
    <span class="local-variable">this</span>.specialOfferText = specialOfferText;
}

<span class="directive">public</span> UISelectBoolean getSpecialOffer() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.specialOffer;
}
<span class="directive">public</span> <span class="type">void</span> setSpecialOffer(UISelectBoolean specialOffer) {
    <span class="local-variable">this</span>.specialOffer = specialOffer;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more general information on component binding, see
<a href="#BNAQM">Managed Beans in Jakarta Server Faces
Technology</a>.</p>
</div>
<div class="paragraph">
<p>For information on how to reference a managed bean method that performs
navigation when a button is clicked, see
<a href="#BNATP">Referencing a Method That Performs
Navigation</a>.</p>
</div>
<div class="paragraph">
<p>For more information on writing managed bean methods that handle
navigation, see <a href="#BNAVC">Writing a Method to Handle
Navigation</a>.</p>
</div>
<div class="paragraph">
<p><a id="BNAUL"></a><a id="writing-properties-bound-to-converters-listeners-or-validators"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_writing_properties_bound_to_converters_listeners_or_validators">6.2.3. Writing Properties Bound to Converters, Listeners, or Validators</h4>
<div class="paragraph">
<p>All the standard converter, listener, and validator tags included with
Jakarta Server Faces technology support binding attributes that allow you to
bind converter, listener, or validator implementations to managed bean
properties.</p>
</div>
<div class="paragraph">
<p>The following example shows a standard <code>convertDateTime</code> tag using a
value expression with its <code>binding</code> attribute to bind the
<code>javax.faces.convert.DateTimeConverter</code> instance to the <code>convertDate</code>
property of <code>LoginBean</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{loginBean.birthDate}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertDateTime</span> <span class="attribute-name">binding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{loginBean.convertDate}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>convertDate</code> property must therefore accept and return a
<code>DateTimeConverter</code> object, as shown here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> DateTimeConverter convertDate;
<span class="directive">public</span> DateTimeConverter getConvertDate() {
       ...
    return convertDate;
}
<span class="directive">public</span> <span class="type">void</span> setConvertDate(DateTimeConverter convertDate) {
    convertDate.setPattern(<span class="string"><span class="delimiter">&quot;</span><span class="content">EEEEEEEE, MMM dd, yyyy</span><span class="delimiter">&quot;</span></span>);
    <span class="local-variable">this</span>.convertDate = convertDate;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Because the converter is bound to a managed bean property, the managed
bean property can modify the attributes of the converter or add new
functionality to it. In the case of the preceding example, the property
sets the date pattern that the converter uses to parse the user&#8217;s input
into a <code>Date</code> object.</p>
</div>
<div class="paragraph">
<p>The managed bean properties that are bound to validator or listener
implementations are written in the same way and have the same general
purpose.</p>
</div>
<div class="paragraph">
<p><a id="BNAVB"></a><a id="writing-managed-bean-methods"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_writing_managed_bean_methods">6.3. Writing Managed Bean Methods</h3>
<div class="paragraph">
<p>Methods of a managed bean can perform several application-specific
functions for components on the page. These functions include</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Performing processing associated with navigation</p>
</li>
<li>
<p>Handling action events</p>
</li>
<li>
<p>Performing validation on the component&#8217;s value</p>
</li>
<li>
<p>Handling value-change events</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="sthref68"></a><a id="why-use-managed-beans"></a></p>
</div>
<div class="sect3">
<h4 id="_why_use_managed_beans">6.3.1. Why Use Managed Beans</h4>
<div class="paragraph">
<p>By using a managed bean to perform these functions, you eliminate the
need to implement the <code>javax.faces.validator.Validator</code> interface to
handle the validation or one of the listener interfaces to handle
events. Also, by using a managed bean instead of a <code>Validator</code>
implementation to perform validation, you eliminate the need to create a
custom tag for the <code>Validator</code> implementation.</p>
</div>
<div class="paragraph">
<p>In general, it is good practice to include these methods in the same
managed bean that defines the properties for the components referencing
these methods. The reason for doing so is that the methods might need to
access the component&#8217;s data to determine how to handle the event or to
perform the validation associated with the component.</p>
</div>
<div class="paragraph">
<p>The following sections explain how to write various types of managed
bean methods.</p>
</div>
<div class="paragraph">
<p><a id="BNAVC"></a><a id="writing-a-method-to-handle-navigation"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_writing_a_method_to_handle_navigation">6.3.2. Writing a Method to Handle Navigation</h4>
<div class="paragraph">
<p>An action method, a managed bean method that handles navigation
processing, must be a public method that takes no parameters and returns
an <code>Object</code>, which is the logical outcome that the navigation system
uses to determine the page to display next. This method is referenced
using the component tag&#8217;s <code>action</code> attribute.</p>
</div>
<div class="paragraph">
<p>The following action method is from the managed bean <code>CashierBean</code>,
which is invoked when a user clicks the Submit button on the page. If
the user has ordered more than $100 worth of books, this method sets the
<code>rendered</code> properties of the <code>fanClub</code> and <code>specialOffer</code> components to
<code>true</code>, causing them to be displayed on the page the next time that page
is rendered.</p>
</div>
<div class="paragraph">
<p>After setting the components' <code>rendered</code> properties to <code>true</code>, this
method returns the logical outcome <code>null</code>. This causes the Jakarta Server
Faces implementation to re-render the page without creating a new view
of the page, retaining the customer&#8217;s input. If this method were to
return <code>purchase</code>, which is the logical outcome to use to advance to a
payment page, the page would re-render without retaining the customer&#8217;s
input. In this case, you want to re-render the page without clearing the
data.</p>
</div>
<div class="paragraph">
<p>If the user does not purchase more than $100 worth of books or if the
<code>thankYou</code> component has already been rendered, the method returns
<code>bookreceipt</code>. The Jakarta Server Faces implementation loads the
<code>bookreceipt.xhtml</code> page after this method returns:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">String</span> submit() {
    ...
    if ((cart().getTotal()&gt; <span class="float">100.00</span>) &amp;&amp; !specialOffer.isRendered()) {
        specialOfferText.setRendered(<span class="predefined-constant">true</span>);
        specialOffer.setRendered(<span class="predefined-constant">true</span>);
        <span class="keyword">return</span> <span class="predefined-constant">null</span>;
    } <span class="keyword">else</span> <span class="keyword">if</span> (specialOffer.isRendered() &amp;&amp; !thankYou.isRendered()) {
        thankYou.setRendered(<span class="predefined-constant">true</span>);
        <span class="keyword">return</span> <span class="predefined-constant">null</span>;
    } <span class="keyword">else</span> {
        ...
        cart.clear();
        <span class="keyword">return</span> (<span class="string"><span class="delimiter">&quot;</span><span class="content">bookreceipt</span><span class="delimiter">&quot;</span></span>);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Typically, an action method will return a <code>String</code> outcome, as shown in
the preceding example. Alternatively, you can define an <code>Enum</code> class
that encapsulates all possible outcome strings and then make an action
method return an <code>enum</code> constant, which represents a particular <code>String</code>
outcome defined by the <code>Enum</code> class.</p>
</div>
<div class="paragraph">
<p>The following example uses an <code>Enum</code> class to encapsulate all logical
outcomes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">enum</span> Navigation  {
    main, accountHist, accountList, atm, atmAck, transferFunds,
     transferAck, error
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When it returns an outcome, an action method uses the dot notation to
reference the outcome from the <code>Enum</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">Object</span> submit(){
    ...
    return Navigation.accountHist;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The section <a href="#BNATP">Referencing a Method That
Performs Navigation</a> explains how a component tag references this
method. The section <a href="#BNAUK">Writing Properties
Bound to Component Instances</a> explains how to write the bean properties
to which the components are bound.</p>
</div>
<div class="paragraph">
<p><a id="BNAVD"></a><a id="writing-a-method-to-handle-an-action-event"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_writing_a_method_to_handle_an_action_event">6.3.3. Writing a Method to Handle an Action Event</h4>
<div class="paragraph">
<p>A managed bean method that handles an action event must be a public
method that accepts an action event and returns <code>void</code>. This method is
referenced using the component tag&#8217;s <code>actionListener</code> attribute. Only
components that implement <code>javax.faces.component.ActionSource</code> can refer
to this method.</p>
</div>
<div class="paragraph">
<p>In the following example, a method from a managed bean named
<code>ActionBean</code> processes the event of a user clicking one of the links on
the page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> chooseBookFromLink(<span class="predefined-type">ActionEvent</span> event) {
    <span class="predefined-type">String</span> current = event.getComponent().getId();
    FacesContext context = FacesContext.getCurrentInstance();
    <span class="predefined-type">String</span> bookId = books.get(current);
    context.getExternalContext().getSessionMap().put(<span class="string"><span class="delimiter">&quot;</span><span class="content">bookId</span><span class="delimiter">&quot;</span></span>, bookId);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This method gets the component that generated the event from the event
object; then it gets the component&#8217;s ID, which is a code for the book.
The method matches the code against a <code>HashMap</code> object that contains the
book codes and corresponding book ID values. Finally, the method sets
the book ID by using the selected value from the <code>HashMap</code> object.</p>
</div>
<div class="paragraph">
<p><a href="#BNATQ">Referencing a Method That Handles an
Action Event</a> explains how a component tag references this method.</p>
</div>
<div class="paragraph">
<p><a id="BNAVE"></a><a id="writing-a-method-to-perform-validation"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_writing_a_method_to_perform_validation">6.3.4. Writing a Method to Perform Validation</h4>
<div class="paragraph">
<p>Instead of implementing the <code>javax.faces.validator.Validator</code> interface
to perform validation for a component, you can include a method in a
managed bean to take care of validating input for the component. A
managed bean method that performs validation must accept a
<code>javax.faces.context.FacesContext</code>, the component whose data must be
validated, and the data to be validated, just as the <code>validate</code> method
of the <code>Validator</code> interface does. A component refers to the managed
bean method by using its <code>validator</code> attribute. Only values of <code>UIInput</code>
components or values of components that extend <code>UIInput</code> can be
validated.</p>
</div>
<div class="paragraph">
<p>Here is an example of a managed bean method that validates user input,
from <a href="#GJCXV">The guessnumber-cdi CDI
Example</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> validateNumberRange(FacesContext context,
                                UIComponent toValidate,
                                <span class="predefined-type">Object</span> value) {
    <span class="keyword">if</span> (remainingGuesses &lt;= <span class="integer">0</span>) {
        ((UIInput) toValidate).setValid(<span class="predefined-constant">false</span>);
        FacesMessage message = <span class="keyword">new</span> FacesMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">No guesses left!</span><span class="delimiter">&quot;</span></span>);
        context.addMessage(toValidate.getClientId(context), message);
        <span class="keyword">return</span>;
    }

    <span class="type">int</span> input = (<span class="predefined-type">Integer</span>) value;
    <span class="keyword">if</span> (input &lt; minimum || input&gt; maximum) {
        ((UIInput) toValidate).setValid(<span class="predefined-constant">false</span>);

        FacesMessage message = <span class="keyword">new</span> FacesMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">Invalid guess</span><span class="delimiter">&quot;</span></span>);
        context.addMessage(toValidate.getClientId(context), message);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>validateNumberRange</code> method performs two different validations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the user has run out of guesses, the method sets the <code>valid</code>
property of the <code>UIInput</code> component to <code>false</code>. Then it queues a message
onto the <code>FacesContext</code> instance, associating the message with the
component ID, and returns.</p>
</li>
<li>
<p>If the user has some remaining guesses, the method then retrieves the
local value of the component. If the input value is outside the
allowable range, the method again sets the <code>valid</code> property of the
<code>UIInput</code> component to <code>false</code>, queues a different message on the
<code>FacesContext</code> instance, and returns.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="#BNATR">Referencing a Method That Performs
Validation</a> for information on how a component tag references this
method.</p>
</div>
<div class="paragraph">
<p><a id="BNAVF"></a><a id="writing-a-method-to-handle-a-value-change-event"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_writing_a_method_to_handle_a_value_change_event">6.3.5. Writing a Method to Handle a Value-Change Event</h4>
<div class="paragraph">
<p>A managed bean that handles a value-change event must use a public
method that accepts a value-change event and returns <code>void</code>. This method
is referenced using the component&#8217;s <code>valueChangeListener</code> attribute.
This section explains how to write a managed bean method to replace the
<code>javax.faces.event.ValueChangeListener</code> implementation.</p>
</div>
<div class="paragraph">
<p>The following example tag comes from
<a href="#BNATA">Registering a Value-Change Listener on a
Component</a>, where the <code>h:inputText</code> tag with the <code>id</code> of <code>name</code> has a
<code>ValueChangeListener</code> instance registered on it. This
<code>ValueChangeListener</code> instance handles the event of entering a value in
the field corresponding to the component. When the user enters a value,
a value-change event is generated, and the
<code>processValueChange(ValueChangeEvent)</code> method of the
<code>ValueChangeListener</code> class is invoked:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">30</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.name}</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">requiredMessage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ReqCustomerName}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
     <span class="tag">&lt;f:valueChangeListener</span>
         <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jakarta.tutorial.dukesbookstore.listeners.NameChanged</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Instead of implementing <code>ValueChangeListener</code>, you can write a managed
bean method to handle this event. To do this, you move the
<code>processValueChange(ValueChangeEvent)</code> method from the
<code>ValueChangeListener</code> class, called <code>NameChanged</code>, to your managed bean.</p>
</div>
<div class="paragraph">
<p>Here is the managed bean method that processes the event of entering a
value in the <code>name</code> field on the page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> processValueChange(ValueChangeEvent event)
        <span class="directive">throws</span> AbortProcessingException {
    <span class="keyword">if</span> (<span class="predefined-constant">null</span> != event.getNewValue()) {
        FacesContext.getCurrentInstance().getExternalContext().
                getSessionMap().put(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, event.getNewValue());
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To make this method handle the <code>ValueChangeEvent</code> generated by an input
component, reference this method from the component tag&#8217;s
<code>valueChangeListener</code> attribute. See
<a href="#BNATS">Referencing a Method That Handles a
Value-Change Event</a> for more information.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_ajax_with_jakarta_server_faces_technology">7. Using Ajax with Jakarta Server Faces Technology</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="GKIOW"></a><a id="using-ajax-with-javaserver-faces-technology"></a></p>
</div>
<div class="paragraph">
<p>This chapter describes using Ajax functionality in Jakarta Server Faces web
applications. Ajax is an acronym for Asynchronous JavaScript and XML, a
group of web technologies that enable creation of dynamic and highly
responsive web applications. Using Ajax, web applications can retrieve
content from the server without interfering with the display on the
client. In the Jakarta EE platform, Jakarta Server Faces technology provides
built-in support for Ajax.</p>
</div>
<div class="paragraph">
<p><a id="GKIGR"></a><a id="overview-of-ajax"></a></p>
</div>
<div class="sect2">
<h3 id="_overview_of_ajax">7.1. Overview of Ajax</h3>
<div class="paragraph">
<p>Early web applications were created mostly as static web pages. When a
static web page is updated by a client, the entire page has to reload to
reflect the update. In effect, every update needs a page reload to
reflect the change. Repetitive page reloads can result in excessive
network access and can impact application performance. Technologies such
as Ajax were created to overcome these deficiencies.</p>
</div>
<div class="paragraph">
<p>Ajax refers to JavaScript and XML, technologies that are widely used for
creating dynamic and asynchronous web content. While Ajax is not limited
to JavaScript and XML technologies, more often than not they are used
together by web applications. The focus of this tutorial is on using
JavaScript based Ajax functionality in Jakarta Server Faces web
applications.</p>
</div>
<div class="paragraph">
<p>JavaScript is a dynamic scripting language for web applications. It
allows users to add enhanced functionality to user interfaces and allows
web pages to interact with clients asynchronously. JavaScript runs
mainly on the client side (as in a browser) and thereby reduces server
access by clients.</p>
</div>
<div class="paragraph">
<p>When a JavaScript function sends an asynchronous request from the client
to the server, the server sends back a response that is used to update
the page&#8217;s Document Object Model (DOM). This response is often in the
format of an XML document. The term Ajax refers to this interaction
between the client and server.</p>
</div>
<div class="paragraph">
<p>The server response need not be in XML only; it can also be in other
formats, such as JSON (see <a href="#BABEECIB">Introduction to
JSON</a> and <code><a href="http://www.json.org/" class="bare">http://www.json.org/</a></code>). This tutorial does not focus on the
response formats.</p>
</div>
<div class="paragraph">
<p>Ajax enables asynchronous and partial updating of web applications. Such
functionality allows for highly responsive web pages that are rendered
in near real time. Ajax-based web applications can access server and
process information and can also retrieve data without interfering with
the display and rendering of the current web page on a client (such as a
browser).</p>
</div>
<div class="paragraph">
<p>Some of the advantages of using Ajax are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Form data validation in real time, eliminating the need to submit the
form for verification</p>
</li>
<li>
<p>Enhanced functionality for web pages, such as user name and password
prompts</p>
</li>
<li>
<p>Partial update of the web content, avoiding complete page reloads</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GKINL"></a><a id="using-ajax-functionality-with-javaserver-faces-technology"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_using_ajax_functionality_with_jakarta_server_faces_technology">7.2. Using Ajax Functionality with Jakarta Server Faces Technology</h3>
<div class="paragraph">
<p>Ajax functionality can be added to a Jakarta Server Faces application in one
of the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adding the required JavaScript code to an application</p>
</li>
<li>
<p>Using the built-in Ajax resource library</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In earlier releases of the Jakarta EE platform, Jakarta Server Faces
applications provided Ajax functionality by adding the necessary
JavaScript to the web page. In the Jakarta EE platform, standard Ajax
support is provided by a built-in JavaScript resource library.</p>
</div>
<div class="paragraph">
<p>With the support of this JavaScript resource library, Jakarta Server Faces
standard UI components, such as buttons, labels, or text fields, can be
enabled for Ajax functionality. You can also load this resource library
and use its methods directly from within the managed bean code. The next
sections of the tutorial describe the use of the built-in Ajax resource
library.</p>
</div>
<div class="paragraph">
<p>In addition, because the Jakarta Server Faces technology component model can
be extended, custom components can be created with Ajax functionality.</p>
</div>
<div class="paragraph">
<p>The tutorial examples include an Ajax version of the <code>guessnumber</code>
application, <code>ajaxguessnumber</code>. See <a href="#GKOKB">The
ajaxguessnumber Example Application</a> for more information.</p>
</div>
<div class="paragraph">
<p>The Ajax specific <code>f:ajax</code> tag and its attributes are explained in the
next sections.</p>
</div>
<div class="paragraph">
<p><a id="GKABR"></a><a id="using-ajax-with-facelets"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_using_ajax_with_facelets">7.3. Using Ajax with Facelets</h3>
<div class="paragraph">
<p>As mentioned in the previous section, Jakarta Server Faces technology
supports Ajax by using a built-in JavaScript resource library that is
provided as part of the Jakarta Server Faces core libraries. This built-in
Ajax resource can be used in Jakarta Server Faces web applications in one of
the following ways.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>By using the <code>f:ajax</code> tag along with another standard component in a
Facelets application. This method adds Ajax functionality to any UI
component without additional coding and configuration.</p>
</li>
<li>
<p>By using the JavaScript API method <code>jsf.ajax.request()</code> directly
within the Facelets application. This method provides direct access to
Ajax methods and allows customized control of component behavior.</p>
</li>
<li>
<p>By using the <code>&lt;h:commandScript&gt;</code> component to execute arbitrary
server-side methods from a view. The component generates a JavaScript
function with a given name that when invoked, in turn invokes, a given
server-side method via Ajax.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GKAFN"></a><a id="using-the-fajax-tag"></a></p>
</div>
<div class="sect3">
<h4 id="_using_the_fajax_tag">7.3.1. Using the f:ajax Tag</h4>
<div class="paragraph">
<p>The <code>f:ajax</code> tag is a Jakarta Server Faces core tag that provides Ajax
functionality to any regular UI component when used in conjunction with
that component. In the following example, Ajax behavior is added to an
input component by including the <code>f:ajax</code> core tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bean.message}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:ajax</span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, although Ajax is enabled, the other attributes of the
<code>f:ajax</code> tag are not defined. If an event is not defined, the default
action for the component is performed. For the <code>inputText</code> component,
when no <code>event</code> attribute is specified, the default event is
<code>valueChange</code>. <a href="#GKDER">Table 13-1</a> lists the attributes of the
<code>f:ajax</code> tag and their default actions.</p>
</div>
<div class="paragraph">
<p><a id="sthref69"></a><a id="GKDER"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 13-1 Attributes of the f:ajax Tag</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 15%;">
<col style="width: 25%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>disabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.el.ValueExpression</code> that evaluates to a <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A
<code>Boolean</code> value that identifies the tag status. A value of <code>true</code>
indicates that the Ajax behavior should not be rendered. A value of
<code>false</code> indicates that the Ajax behavior should be rendered. The default
value is <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>event</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.el.ValueExpression</code> that evaluates to a <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A
<code>String</code> that identifies the type of event to which the Ajax action will
apply. If specified, it must be one of the events supported by the
component. If not specified, the default event (the event that triggers
the Ajax request) is determined for the component. The default event is
<code>action</code> for <code>javax.faces.component.ActionSource</code> components and
<code>valueChange</code> for <code>javax.faces.component.EditableValueHolder</code>
components.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>execute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.el.ValueExpression</code> that evaluates to an <code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A
<code>Collection</code> that identifies a list of components to be executed on the
server. If a literal is specified, it must be a space-delimited <code>String</code>
of component identifiers and/or one of the keywords. If a
<code>ValueExpression</code> is specified, it must refer to a property that returns
a <code>Collection</code> of <code>String</code> objects. If not specified, the default value
is <code>@this</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>immediate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.el.ValueExpression</code> that evaluates to a <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <code>Boolean</code> value that indicates whether inputs are to be processed
early in the lifecycle. If <code>true</code>, behavior events generated from this
behavior are broadcast during the Apply Request Values phase. Otherwise,
the events will be broadcast during the Invoke Application phase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>listener</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.el.MethodExpression</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the listener
method that is called when a <code>javax.faces.event.AjaxBehaviorEvent</code> has
been broadcast for the listener.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onevent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.el.ValueExpression</code> that evaluates to a <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The
name of the JavaScript function that handles UI events.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onerror</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.el.ValueExpression</code> that evaluates to a <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The
name of the JavaScript function that handles errors.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>render</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.el.ValueExpression</code> that evaluates to an <code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A
<code>Collection</code> that identifies a list of components to be rendered on the
client. If a literal is specified, it must be a space-delimited <code>String</code>
of component identifiers and/or one of the keywords. If a
<code>ValueExpression</code> is specified, it must refer to a property that returns
a <code>Collection</code> of <code>String</code> objects. If not specified, the default value
is <code>@none</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The keywords listed in <a href="#GKNLK">Table 13-2</a> can be used with the
<code>execute</code> and <code>render</code> attributes of the <code>f:ajax</code> tag.</p>
</div>
<div class="paragraph">
<p><a id="sthref70"></a><a id="GKNLK"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 13-2 Execute and Render Keywords</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 60%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Keyword</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@all</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All component identifiers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@form</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The form that encloses the component</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@none</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No component identifiers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@this</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The element that triggered the request</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Note that when you use the <code>f:ajax</code> tag in a Facelets page, the
JavaScript resource library is loaded implicitly. This resource library
can also be loaded explicitly as described in
<a href="#GKAAM">Loading JavaScript as a Resource</a>.</p>
</div>
<div class="paragraph">
<p><a id="GKACE"></a><a id="sending-an-ajax-request"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sending_an_ajax_request">7.4. Sending an Ajax Request</h3>
<div class="paragraph">
<p>To activate Ajax functionality, the web application must create an Ajax
request and send it to the server. The server then processes the
request.</p>
</div>
<div class="paragraph">
<p>The application uses the attributes of the <code>f:ajax</code> tag listed in
<a href="#GKDER">Table 13-1</a> to create the Ajax request. The
following sections explain the process of creating and sending an Ajax
request using some of these attributes.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Note</strong>:</p>
</div>
<div class="paragraph">
<p>Behind the scenes, the <code>jsf.ajax.request()</code> method of the JavaScript
resource library collects the data provided by the <code>f:ajax</code> tag and
posts the request to the Jakarta Server Faces lifecycle.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GKHVT">Using the event Attribute</a></p>
</li>
<li>
<p><a href="#GKHUZ">Using the execute Attribute</a></p>
</li>
<li>
<p><a href="#GKHWM">Using the immediate Attribute</a></p>
</li>
<li>
<p><a href="#GKHZS">Using the listener Attribute</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GKHVT"></a><a id="using-the-event-attribute"></a></p>
</div>
<div class="sect3">
<h4 id="_using_the_event_attribute">7.4.1. Using the event Attribute</h4>
<div class="paragraph">
<p>The <code>event</code> attribute defines the event that triggers the Ajax action.
Some of the possible values for this attribute are <code>click</code>, <code>keyup</code>,
<code>mouseover</code>, <code>focus</code>, and <code>blur</code>.</p>
</div>
<div class="paragraph">
<p>If not specified, a default event based on the parent component will be
applied. The default event is <code>action</code> for
<code>javax.faces.component.ActionSource</code> components, such as a
<code>commandButton</code>, and <code>valueChange</code> for
<code>javax.faces.component.EditableValueHolder</code> components, such as
<code>inputText</code>. In the following example, an Ajax tag is associated with
the button component, and the event that triggers the Ajax action is a
mouse click:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Submit</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:ajax</span> <span class="attribute-name">event</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">click</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:commandButton&gt;</span>
<span class="tag">&lt;h:outputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">result</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.response}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Note:</p>
</div>
<div class="paragraph">
<p>You may have noticed that the listed events are very similar to
JavaScript events. In fact, they are based on JavaScript events, but do
not have the <code>on</code> prefix.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For a command button, the default event is <code>click</code>, so you do not
actually need to specify <code>event="click"</code> to obtain the desired behavior.</p>
</div>
<div class="paragraph">
<p><a id="GKHUZ"></a><a id="using-the-execute-attribute"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_the_execute_attribute">7.4.2. Using the execute Attribute</h4>
<div class="paragraph">
<p>The <code>execute</code> attribute defines the component or components to be
executed on the server. The component is identified by its <code>id</code>
attribute. You can specify more than one executable component. If more
than one component is to be executed, specify a space-delimited list of
components.</p>
</div>
<div class="paragraph">
<p>When a component is executed, it participates in all phases of the
request-processing lifecycle except the Render Response phase.</p>
</div>
<div class="paragraph">
<p>The <code>execute</code> attribute value can also be a keyword, such as <code>@all</code>,
<code>@none</code>, <code>@this</code>, or <code>@form</code>. The default value is <code>@this</code>, which refers
to the component within which the <code>f:ajax</code> tag is nested.</p>
</div>
<div class="paragraph">
<p>The following code specifies that the <code>h:inputText</code> component with the
<code>id</code> value of <code>userNo</code> should be executed when the button is clicked:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userNo</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Type a number from 0 to 10:</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.userNumber}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    ...
<span class="tag">&lt;/h:inputText&gt;</span>
<span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Submit</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:ajax</span> <span class="attribute-name">event</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">click</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">execute</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userNo</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:commandButton&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GKHWM"></a><a id="using-the-immediate-attribute"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_the_immediate_attribute">7.4.3. Using the immediate Attribute</h4>
<div class="paragraph">
<p>The <code>immediate</code> attribute indicates whether user inputs are to be
processed early in the application lifecycle or later. If the attribute
is set to <code>true</code>, events generated from this component are broadcast
during the Apply Request Values phase. Otherwise, the events will be
broadcast during the Invoke Application phase.</p>
</div>
<div class="paragraph">
<p>If not defined, the default value of this attribute is <code>false</code>.</p>
</div>
<div class="paragraph">
<p><a id="GKHZS"></a><a id="using-the-listener-attribute"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_the_listener_attribute">7.4.4. Using the listener Attribute</h4>
<div class="paragraph">
<p>The <code>listener</code> attribute refers to a method expression that is executed
on the server side in response to an Ajax action on the client. The
listener&#8217;s <code>javax.faces.event.AjaxBehaviorListener.processAjaxBehavior</code>
method is called once during the Invoke Application phase of the
lifecycle. In the following code from the <code>reservation</code> example
application (see <a href="#BABGGIAA">The reservation
Example Application</a>), a <code>listener</code> attribute is defined by an <code>f:ajax</code>
tag, which refers to a method from the bean:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;f:ajax</span> <span class="attribute-name">event</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">change</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">render</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">total</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">listener</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{reservationBean.calculateTotal}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Whenever either the price or the number of tickets ordered changes, the
<code>calculateTotal</code> method of <code>ReservationBean</code> recalculates the total cost
of the tickets and displays it in the output component named <code>total</code>.</p>
</div>
<div class="paragraph">
<p><a id="GKDDF"></a><a id="monitoring-events-on-the-client"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_monitoring_events_on_the_client">7.5. Monitoring Events on the Client</h3>
<div class="paragraph">
<p>To monitor ongoing Ajax requests, use the <code>onevent</code> attribute of the
<code>f:ajax</code> tag. The value of this attribute is the name of a JavaScript
function. Jakarta Server Faces calls the <code>onevent</code> function at each stage of
the processing of an Ajax request: begin, complete, and success.</p>
</div>
<div class="paragraph">
<p>When calling the JavaScript function assigned to the <code>onevent</code> property,
Jakarta Server Faces passes a data object to it. The data object contains
the properties listed in <a href="#GKGOE">Table 13-3</a>.</p>
</div>
<div class="paragraph">
<p><a id="sthref71"></a><a id="GKGOE"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 13-3 Properties of the onevent Data Object</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 60%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>responseXML</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The response to the Ajax call in XML format</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>responseText</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The response to the Ajax call in text format</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>responseCode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The response to the Ajax call in numeric code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>source</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The source of the current Ajax event: the DOM element</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>status</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The status of the current Ajax call: <code>begin</code>, <code>complete</code>, or
<code>success</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of the Ajax call: <code>event</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>By using the <code>status</code> property of the data object, you can identify the
current status of the Ajax request and monitor its progress. In the
following example, <code>monitormyajaxevent</code> is a JavaScript function that
monitors the Ajax request sent by the event:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;f:ajax</span> <span class="attribute-name">event</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">click</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">render</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">statusmessage</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">onevent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">monitormyajaxevent</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GKDCB"></a><a id="handling-errors"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_handling_errors">7.6. Handling Errors</h3>
<div class="paragraph">
<p>Jakarta Server Faces handles Ajax errors through use of the <code>onerror</code>
attribute of the <code>f:ajax</code> tag. The value of this attribute is the name
of a JavaScript function.</p>
</div>
<div class="paragraph">
<p>When there is an error in processing a Ajax request, Jakarta Server Faces
calls the defined <code>onerror</code> JavaScript function and passes a data object
to it. The data object contains all the properties available for the
<code>onevent</code> attribute and, in addition, the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>description</code></p>
</li>
<li>
<p><code>errorName</code></p>
</li>
<li>
<p><code>errorMessage</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>type</code> is <code>error</code>. The <code>status</code> property of the data object contains
one of the valid error values listed in <a href="#GKGOU">Table 13-4</a>.</p>
</div>
<div class="paragraph">
<p><a id="sthref72"></a><a id="GKGOU"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 13-4 Valid Error Values for the Data Object status Property</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 60%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Values</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>emptyResponse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No Ajax response from server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>httpError</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One of the valid HTTP errors: <code>request.status==null</code> or
<code>request.status==undefined</code> or <code>request.status&lt;200</code> or
<code>request.status&gt;=300</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>malformedXML</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Ajax response is not well formed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>serverError</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Ajax response contains an <code>error</code> element.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In the following example, any errors that occurred in processing the
Ajax request are handled by the <code>handlemyajaxerror</code> JavaScript function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;f:ajax</span> <span class="attribute-name">event</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">click</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">render</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">errormessage</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">onerror</span>=<span class="string"><span class="delimiter">&quot;</span>handlemyajaxerror<span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GKDBR"></a><a id="receiving-an-ajax-response"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_receiving_an_ajax_response">7.7. Receiving an Ajax Response</h3>
<div class="paragraph">
<p>After the application sends an Ajax request, it is processed on the
server side, and a response is sent back to the client. As described
earlier, Ajax allows for partial updating of web pages. To enable such
partial updating, Jakarta Server Faces technology allows for partial
processing of the view. The handling of the response is defined by the
<code>render</code> attribute of the <code>f:ajax</code> tag.</p>
</div>
<div class="paragraph">
<p>Similar to the <code>execute</code> attribute, the <code>render</code> attribute defines which
sections of the page will be updated. The value of a <code>render</code> attribute
can be one or more component <code>id</code> values, one of the keywords <code>@this</code>,
<code>@all</code>, <code>@none</code>, or <code>@form</code>, or an EL expression. In the following
example, the <code>render</code> attribute identifies an output component to be
displayed when the button component is clicked (the default event for a
command button):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Submit</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:ajax</span> <span class="attribute-name">execute</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userNo</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">render</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">result</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:commandButton&gt;</span>
<span class="tag">&lt;h:outputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">result</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.response}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Note</strong>:</p>
</div>
<div class="paragraph">
<p>Behind the scenes, once again the <code>jsf.ajax.request()</code> method handles
the response. It registers a response-handling callback when the
original request is created. When the response is sent back to the
client, the callback is invoked. This callback automatically updates the
client-side DOM to reflect the rendered response.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="GKUAR"></a><a id="ajax-request-lifecycle"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_ajax_request_lifecycle">7.8. Ajax Request Lifecycle</h3>
<div class="paragraph">
<p>An Ajax request varies from other typical Jakarta Server Faces requests, and
its processing is also handled differently by the Jakarta Server Faces
lifecycle.</p>
</div>
<div class="paragraph">
<p>As described in <a href="#GKNOJ">Partial Processing and
Partial Rendering</a>, when an Ajax request is received, the state
associated with that request is captured by the
<code>javax.faces.context.PartialViewContext</code>. This object provides access to
information such as which components are targeted for
processing/rendering. The <code>processPartial</code> method of
<code>PartialViewContext</code> uses this information to perform partial component
tree processing and rendering.</p>
</div>
<div class="paragraph">
<p>The <code>execute</code> attribute of the <code>f:ajax</code> tag identifies which segments of
the server-side component tree should be processed. Because components
can be uniquely identified in the Jakarta Server Faces component tree, it is
easy to identify and process a single component, a few components, or a
whole tree. This is made possible by the <code>visitTree</code> method of the
<code>UIComponent</code> class. The identified components then run through the
Jakarta Server Faces request lifecycle phases.</p>
</div>
<div class="paragraph">
<p>Similar to the <code>execute</code> attribute, the <code>render</code> attribute identifies
which segments of the Jakarta Server Faces component tree need to be
rendered during the render response phase.</p>
</div>
<div class="paragraph">
<p>During the render response phase, the <code>render</code> attribute is examined.
The identified components are found and asked to render themselves and
their children. The components are then packaged up and sent back to the
client as a response.</p>
</div>
<div class="paragraph">
<p><a id="GKHYH"></a><a id="grouping-of-components"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_grouping_of_components">7.9. Grouping of Components</h3>
<div class="paragraph">
<p>The previous sections describe how to associate a single UI component
with Ajax functionality. You can also associate Ajax with more than one
component at a time by grouping them together on a page. The following
example shows how a number of components can be grouped by using the
<code>f:ajax</code> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;f:ajax&gt;</span>
    <span class="tag">&lt;h:form&gt;</span>
        <span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">input1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{user.name}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Submit</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/h:form&gt;</span>
<span class="tag">&lt;/f:ajax&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example, neither component is associated with any Ajax <code>event</code> or
<code>render</code> attributes yet. Therefore, no action will take place in case of
user input. You can associate the above components with an <code>event</code> and a
<code>render</code> attribute as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;f:ajax</span> <span class="attribute-name">event</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">click</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">render</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@all</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;h:form&gt;</span>
        <span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">input1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{user.name}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Submit</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/h:form&gt;</span>
<span class="tag">&lt;/f:ajax&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the updated example, when the user clicks either component, the
updated results will be displayed for all components. You can further
fine-tune the Ajax action by adding specific events to each of the
components, in which case Ajax functionality becomes cumulative.
Consider the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;f:ajax</span> <span class="attribute-name">event</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">click</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">render</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@all</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    ...
    <span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Submit</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;f:ajax</span> <span class="attribute-name">event</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mouseover</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/h:commandButton&gt;</span>
    ...
<span class="tag">&lt;/f:ajax&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now the button component will fire an Ajax action in case of a
<code>mouseover</code> event as well as a mouse-click event.</p>
</div>
<div class="paragraph">
<p><a id="GKAAM"></a><a id="loading-javascript-as-a-resource"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_loading_javascript_as_a_resource">7.10. Loading JavaScript as a Resource</h3>
<div class="paragraph">
<p>The JavaScript resource file bundled with Jakarta Server Faces technology is
named <code>jsf.js</code> and is available in the <code>javax.faces</code> library. This
resource library supports Ajax functionality in Jakarta Server Faces
applications.</p>
</div>
<div class="paragraph">
<p>If you use the <code>f:ajax</code> tag on a page, the <code>jsf.js</code> resource is
automatically delivered to the client. It is not necessary to use the
<code>h:outputScript</code> tag to specify this resource. You may want to use the
<code>h:outputScript</code> tag to specify other JavaScript libraries.</p>
</div>
<div class="paragraph">
<p>To use a JavaScript resource directly with a <code>UIComponent</code>, you must
explicitly load the resource as described in either of the following
topics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GKAFI">Using JavaScript API in a Facelets Application</a> – Uses the
<code>h:outputScript</code> tag directly in a Facelets page</p>
</li>
<li>
<p><a href="#GKIPX">Using the @ResourceDependency Annotation in a Bean Class</a>
– Uses the <code>javax.faces.application.ResourceDependency</code> annotation on a
<code>UIComponent</code> Java class</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GKAFI"></a><a id="using-javascript-api-in-a-facelets-application"></a></p>
</div>
<div class="sect3">
<h4 id="_using_javascript_api_in_a_facelets_application">7.10.1. Using JavaScript API in a Facelets Application</h4>
<div class="paragraph">
<p>To use the JavaScript resource API directly in a web application, such
as a Facelets page:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Identify the default JavaScript resource for the page with the help
of the <code>h:outputScript</code> tag.</p>
<div class="paragraph">
<p>For example, consider the following section of a Facelets page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:form&gt;</span>
    <span class="tag">&lt;h:outputScript</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jsf.js</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">library</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">javax.faces</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">target</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">head</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Specifying the target as <code>head</code> causes the script resource to be
rendered within the <code>head</code> element on the HTML page.</p>
</div>
</li>
<li>
<p>Identify the component to which you would like to attach the Ajax
functionality.</p>
</li>
<li>
<p>Add the Ajax functionality to the component by using the JavaScript
API. For example, consider the following:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:form&gt;</span>
    <span class="tag">&lt;h:outputScript</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jsf.js</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">library</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">javax.faces</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">target</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">head</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">inputname</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userBean.name}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;h:outputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outputname</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userBean.name}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Submit</span><span class="delimiter">&quot;</span></span>
                     <span class="attribute-name">onclick</span>=<span class="string"><span class="delimiter">&quot;</span>jsf.ajax.request(<span class="local-variable">this</span>, event,
                              {<span class="key">execute</span>:<span class="string"><span class="delimiter">'</span><span class="content">inputname</span><span class="delimiter">'</span></span>,<span class="key">render</span>:<span class="string"><span class="delimiter">'</span><span class="content">outputname</span><span class="delimiter">'</span></span>});
                              <span class="keyword">return</span> <span class="predefined-constant">false</span>;<span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>jsf.ajax.request</code> method takes up to three parameters that specify
source, event, and options. The source parameter identifies the DOM
element that triggered the Ajax request, typically <code>this</code>. The optional
event parameter identifies the DOM event that triggered this request.
The optional options parameter contains a set of name/value pairs from
<a href="#GKAIW">Table 13-5</a>.</p>
</div>
<div class="paragraph">
<p><a id="sthref73"></a><a id="GKAIW"></a></p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Table 13-5 Possible Values for the Options Parameter</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 70%;">
<colgroup>
<col style="width: 21.4285%;">
<col style="width: 78.5715%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Value</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>execute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A space-delimited list of client identifiers or one of the
keywords listed in <a href="#GKNLK">Table 13-2</a>. The
identifiers reference the components that will be processed during the
Execute phase of the lifecycle.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>render</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A space-delimited list of client identifiers or one of the
keywords listed in <a href="#GKNLK">Table 13-2</a>. The
identifiers reference the components that will be processed during the
render phase of the lifecycle.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onevent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <code>String</code> that is the name of the JavaScript function to
call when an event occurs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onerror</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <code>String</code> that is the name of the JavaScript function to
call when an error occurs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>params</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An object that may include additional parameters to include
in the request.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>+
If no identifier is specified, the default assumed keyword for the
<code>execute</code> attribute is <code>@this</code>, and for the <code>render</code> attribute it is
<code>@none</code>.</p>
</div>
<div class="paragraph">
<p>+
You can also place the JavaScript method in a file and include it as a
resource.</p>
</div>
<div class="paragraph">
<p><a id="GKIPX"></a><a id="using-the-resourcedependency-annotation-in-a-bean-class"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_the_resourcedependency_annotation_in_a_bean_class">7.10.2. Using the @ResourceDependency Annotation in a Bean Class</h4>
<div class="paragraph">
<p>Use the <code>javax.faces.application.ResourceDependency</code> annotation to cause
the bean class to load the default <code>jsf.js</code> library.</p>
</div>
<div class="paragraph">
<p>To load the Ajax resource from the server side:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the <code>jsf.ajax.request</code> method within the bean class.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Note</strong>:</p>
</div>
<div class="paragraph">
<p>This method is usually used when creating a custom component or a custom
renderer for a component.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following example shows how the resource is loaded in a bean class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ResourceDependency</span>(name=<span class="string"><span class="delimiter">&quot;</span><span class="content">jsf.js</span><span class="delimiter">&quot;</span></span> library=<span class="string"><span class="delimiter">&quot;</span><span class="content">javax.faces</span><span class="delimiter">&quot;</span></span> target=<span class="string"><span class="delimiter">&quot;</span><span class="content">head</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GKOKB"></a><a id="the-ajaxguessnumber-example-application"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_ajaxguessnumber_example_application">7.11. The ajaxguessnumber Example Application</h3>
<div class="paragraph">
<p>To demonstrate the advantages of using Ajax, revisit the <code>guessnumber</code>
example from <a href="#GIEPX">Chapter 8, "Introduction to
Facelets"</a>. If you modify this example to use Ajax, the response need
not be displayed on the <code>response.xhtml</code> page. Instead, an asynchronous
call is made to the bean on the server side, and the response is
displayed on the originating page by executing just the input component
rather than by form submission.</p>
</div>
<div class="paragraph">
<p>The source code for this application is in the
tut-install`/examples/web/jsf/ajaxguessnumber/` directory.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GKOIJ">The ajaxguessnumber Source Files</a></p>
</li>
<li>
<p><a href="#GKOKE">Running the ajaxguessnumber Example</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GKOIJ"></a><a id="the-ajaxguessnumber-source-files"></a></p>
</div>
<div class="sect3">
<h4 id="_the_ajaxguessnumber_source_files">7.11.1. The ajaxguessnumber Source Files</h4>
<div class="paragraph">
<p>The changes to the <code>guessnumber</code> application occur in two source files.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GKOFW">The ajaxgreeting.xhtml Facelets Page</a></p>
</li>
<li>
<p><a href="#GKOHN">The UserNumberBean Backing Bean</a></p>
</li>
<li>
<p><a href="#CHDGAIGJ">The DukesNumberBean CDI Managed Bean</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GKOFW"></a><a id="the-ajaxgreeting.xhtml-facelets-page"></a></p>
</div>
<div class="sect4">
<h5 id="_the_ajaxgreeting_xhtml_facelets_page">The ajaxgreeting.xhtml Facelets Page</h5>
<div class="paragraph">
<p>The Facelets page for <code>ajaxguessnumber</code>, <code>ajaxgreeting.xhtml</code>, is almost
the same as the <code>greeting.xhtml</code> page for the <code>guessnumber</code> application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:head&gt;</span>
    <span class="tag">&lt;h:outputStylesheet</span> <span class="attribute-name">library</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">css</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">default.css</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;title&gt;</span>Ajax Guess Number Facelets Application<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;/h:head&gt;</span>
<span class="tag">&lt;h:body&gt;</span>
    <span class="tag">&lt;h:form</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">AjaxGuess</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;h:graphicImage</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{resource['images:wave.med.gif']}</span><span class="delimiter">&quot;</span></span>
                        <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Duke waving his hand</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;h2&gt;</span>
            Hi, my name is Duke. I am thinking of a number from
            #{dukesNumberBean.minimum} to #{dukesNumberBean.maximum}.
            Can you guess it?
        <span class="tag">&lt;/h2&gt;</span>
        <span class="tag">&lt;p&gt;</span>
            <span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userNo</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Enter a number from 0 to 10:</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.userNumber}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;f:validateLongRange</span> <span class="attribute-name">minimum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{dukesNumberBean.minimum}</span><span class="delimiter">&quot;</span></span>
                                     <span class="attribute-name">maximum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{dukesNumberBean.maximum}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/h:inputText&gt;</span>

            <span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Submit</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;f:ajax</span> <span class="attribute-name">execute</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userNo</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">render</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outputGroup</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;/h:commandButton&gt;</span>
        <span class="tag">&lt;/p&gt;</span>
        <span class="tag">&lt;p&gt;</span>
            <span class="tag">&lt;h:panelGroup</span> <span class="attribute-name">layout</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">block</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outputGroup</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;h:outputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">result</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">color</span>:<span class="value">blue</span><span class="delimiter">&quot;</span></span>
                              <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{userNumberBean.response}</span><span class="delimiter">&quot;</span></span>
                              <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{!facesContext.validationFailed}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                <span class="tag">&lt;h:message</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">errors1</span><span class="delimiter">&quot;</span></span>
                           <span class="attribute-name">showSummary</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
                           <span class="attribute-name">showDetail</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>
                           <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">color</span>: <span class="color">#d20005</span>;
                           <span class="key">font-family</span>: <span class="string"><span class="delimiter">'</span><span class="content">New Century Schoolbook</span><span class="delimiter">'</span></span>, <span class="value">serif</span>;
                           <span class="key">font-style</span>: <span class="value">oblique</span>;
                           <span class="key">text-decoration</span>: <span class="value">overline</span><span class="delimiter">&quot;</span></span>
                           <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userNo</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/h:panelGroup&gt;</span>
        <span class="tag">&lt;/p&gt;</span>
    <span class="tag">&lt;/h:form&gt;</span>
<span class="tag">&lt;/h:body&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The most important change is in the <code>h:commandButton</code> tag. The <code>action</code>
attribute is removed from the tag, and an <code>f:ajax</code> tag is added.</p>
</div>
<div class="paragraph">
<p>The <code>f:ajax</code> tag specifies that when the button is clicked the
<code>h:inputText</code> component with the <code>id</code> value <code>userNo</code> is executed. The
components within the <code>outputGroup</code> panel group are then rendered. If a
validation error occurs, the managed bean is not executed, and the
validation error message is displayed in the message pane. Otherwise,
the result of the guess is rendered in the <code>result</code> component.</p>
</div>
<div class="paragraph">
<p><a id="GKOHN"></a><a id="the-usernumberbean-backing-bean"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_the_usernumberbean_backing_bean">The UserNumberBean Backing Bean</h5>
<div class="paragraph">
<p>A small change is also made in the <code>UserNumberBean</code> code so that the
output component does not display any message for the default (null)
value of the property <code>response</code>. Here is the modified bean code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">String</span> getResponse() {
    <span class="keyword">if</span> ((userNumber != <span class="predefined-constant">null</span>)
            &amp;&amp; (userNumber.compareTo(dukesNumberBean.getRandomInt()) == <span class="integer">0</span>)) {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Yay! You got it!</span><span class="delimiter">&quot;</span></span>;
    }
    <span class="keyword">if</span> (userNumber == <span class="predefined-constant">null</span>) {
        <span class="keyword">return</span> <span class="predefined-constant">null</span>;
    } <span class="keyword">else</span> {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Sorry, </span><span class="delimiter">&quot;</span></span> + userNumber + <span class="string"><span class="delimiter">&quot;</span><span class="content"> is incorrect.</span><span class="delimiter">&quot;</span></span>;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="CHDGAIGJ"></a><a id="the-dukesnumberbean-cdi-managed-bean"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_the_dukesnumberbean_cdi_managed_bean">The DukesNumberBean CDI Managed Bean</h5>
<div class="paragraph">
<p>The <code>DukesNumberBean</code> session-scoped CDI managed bean stores the range
of guessable numbers and the randomly chosen number from that range. It
is injected into <code>UserNumberBean</code> with the CDI <code>@Inject</code> annotation so
that the value of the random number can be compared to the number the
user submitted:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
DukesNumberBean dukesNumberBean;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will learn more about CDI in <a href="#GIWHB">Chapter 25,
"Introduction to Jakarta Contexts and Dependency Injection"</a>.</p>
</div>
<div class="paragraph">
<p><a id="GKOKE"></a><a id="running-the-ajaxguessnumber-example"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_running_the_ajaxguessnumber_example">7.11.2. Running the ajaxguessnumber Example</h4>
<div class="paragraph">
<p>You can use either NetBeans IDE or Maven to build, package, deploy, and
run the <code>ajaxguessnumber</code> application.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GLHVU">To Build, Package, and Deploy the ajaxguessnumber Example
Using NetBeans IDE</a></p>
</li>
<li>
<p><a href="#GLHVQ">To Build, Package, and Deploy the ajaxguessnumber Example
Using Maven</a></p>
</li>
<li>
<p><a href="#GLHWE">To Run the ajaxguessnumber Example</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GLHVU"></a><a id="to-build-package-and-deploy-the-ajaxguessnumber-example-using-netbeans-ide"></a></p>
</div>
<div class="sect4">
<h5 id="_to_build_package_and_deploy_the_ajaxguessnumber_example_using_netbeans_ide">To Build, Package, and Deploy the ajaxguessnumber Example Using NetBeans IDE</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>From the File menu, choose Open Project.</p>
</li>
<li>
<p>In the Open Project dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/web/jsf</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>ajaxguessnumber</code> folder.</p>
</li>
<li>
<p>Click Open Project.</p>
</li>
<li>
<p>In the Projects tab, right-click the <code>ajaxguessnumber</code> project and
select Build.</p>
<div class="paragraph">
<p>This command builds and deploys the project.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GLHVQ"></a><a id="to-build-package-and-deploy-the-ajaxguessnumber-example-using-maven"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_build_package_and_deploy_the_ajaxguessnumber_example_using_maven">To Build, Package, and Deploy the ajaxguessnumber Example Using Maven</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/web/jsf/ajaxguessnumber/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file,
<code>ajaxguessnumber.war</code>, located in the <code>target</code> directory. It then
deploys the application.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GLHWE"></a><a id="to-run-the-ajaxguessnumber-example"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_run_the_ajaxguessnumber_example">To Run the ajaxguessnumber Example</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In a web browser, enter the following URL:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/ajaxguessnumber</span></code></pre>
</div>
</div>
</li>
<li>
<p>Enter a value in the field and click Submit.</p>
<div class="paragraph">
<p>If the value is in the range of 0 to 10, a message states whether the
guess is correct or incorrect. If the value is outside that range or if
the value is not a number, an error message appears in red.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GKSDK"></a><a id="further-information-about-ajax-in-javaserver-faces-technology"></a></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_further_information_about_ajax_in_jakarta_server_faces_technology">7.12. Further Information about Ajax in Jakarta Server Faces Technology</h3>
<div class="paragraph">
<p>For more information on Ajax in Jakarta Server Faces Technology, see</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Jakarta Server Faces project website:</p>
<div class="paragraph">
<p><code><a href="https://javaserverfaces.github.io/users.html" class="bare">https://javaserverfaces.github.io/users.html</a></code></p>
</div>
</li>
<li>
<p><a href="../javaserver-faces-2-2/jsdocs/symbols/jsf.ajax.html">Jakarta Server
Faces JavaScript Library APIs</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_composite_components_advanced_topics_and_an_example">8. Composite Components: Advanced Topics and an Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="GKHXA"></a><a id="composite-components-advanced-topics-and-an-example"></a></p>
</div>
<div class="paragraph">
<p>This chapter describes the advanced features of composite components in
Jakarta Server Faces technology.</p>
</div>
<div class="paragraph">
<p><a id="GKHWV"></a><a id="attributes-of-a-composite-component"></a></p>
</div>
<div class="sect2">
<h3 id="_attributes_of_a_composite_component">8.1. Attributes of a Composite Component</h3>
<div class="paragraph">
<p>A composite component is a special type of Jakarta Server Faces template
that acts as a component. If you are new to composite components, see
<a href="#GIQZR">Composite Components</a> before you proceed
with this chapter.</p>
</div>
<div class="paragraph">
<p>You define an attribute of a composite component by using the
<code>composite:attribute</code> tag. <a href="#GKHVF">Table 14-1</a> lists the commonly
used attributes of this tag.</p>
</div>
<div class="paragraph">
<p><a id="sthref74"></a><a id="GKHVF"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 14-1 Commonly Used Attributes of the composite:attribute Tag</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 70%;">
<colgroup>
<col style="width: 21.4285%;">
<col style="width: 78.5715%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Attribute</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the name of the composite component attribute to be
used in the using page. Alternatively, the <code>name</code> attribute can specify
standard event handlers such as <code>action</code>, <code>actionListener</code>, and managed
bean.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>default</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the default value of the composite component
attribute.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>required</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies whether it is mandatory to provide a value for
the attribute.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>method-signature</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specifies a subclass of <code>java.lang.Object</code> as the type of the composite
component&#8217;s attribute. The <code>method-signature</code> element declares that the
composite component attribute is a method expression. The <code>type</code>
attribute and the <code>method-signature</code> attribute are mutually exclusive.
If you specify both, <code>method-signature</code> is ignored. The default type of
an attribute is <code>java.lang.Object.</code></p>
</div>
<div class="paragraph">
<p>Note: Method expressions are similar to value expressions, but rather
than supporting the dynamic retrieval and setting of properties, method
expressions support the invocation of a method of an arbitrary object,
passing a specified set of parameters and returning the result from the
called method (if any).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a fully qualified class name as the type of the
attribute. The <code>type</code> attribute and the <code>method-signature</code> attribute are
mutually exclusive. If you specify both, <code>method-signature</code> is ignored.
The default type of an attribute is <code>java.lang.Object.</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following code snippet defines a composite component attribute and
assigns it a default value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;composite:attribute</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">default</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">admin</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following code snippet uses the <code>method-signature</code> element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;composite:attribute</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myaction</span><span class="delimiter">&quot;</span></span>
                     <span class="attribute-name">method-signature</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">java.lang.String action()</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following code snippet uses the <code>type</code> element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;composite:attribute</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dateofjoining</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">java.util.Date</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GKHUO"></a><a id="invoking-a-managed-bean"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_invoking_a_managed_bean">8.2. Invoking a Managed Bean</h3>
<div class="paragraph">
<p>To enable a composite component to handle server-side data</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Invoke a managed bean in one of the following ways:</p>
<div class="ulist">
<ul>
<li>
<p>Pass the reference of the managed bean to the composite component.</p>
</li>
<li>
<p>Directly use the properties of the managed bean.</p>
<div class="paragraph">
<p>The example application described in
<a href="#GKHVN">The compositecomponentexample Example
Application</a> shows how to use a managed bean with a composite component
by passing the reference of the managed bean to the component.</p>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GKHWO"></a><a id="validating-composite-component-values"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_validating_composite_component_values">8.3. Validating Composite Component Values</h3>
<div class="paragraph">
<p>Jakarta Server Faces provides the following tags for validating values of
input components. These tags can be used with the
<code>composite:valueHolder</code> or the <code>composite:editableValueHolder</code> tag.</p>
</div>
<div class="paragraph">
<p><a href="#GKHVG">Table 14-2</a> lists commonly used validator tags. See
<a href="#BNATC">Using the Standard Validators</a> for
details and a complete list.</p>
</div>
<div class="paragraph">
<p><a id="sthref75"></a><a id="GKHVG"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 14-2 Validator Tags</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 70%;">
<colgroup>
<col style="width: 21.4285%;">
<col style="width: 78.5715%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag Name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:validateBean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delegates the validation of the local value to the
Bean Validation API.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:validateRegex</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uses the <code>pattern</code> attribute to validate the
wrapping component. The entire pattern is matched against the <code>String</code>
value of the component. If it matches, it is valid.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f:validateRequired</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enforces the presence of a value. Has the same
effect as setting the <code>required</code> element of a composite component&#8217;s
attribute to <code>true</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="GKHVN"></a><a id="the-compositecomponentexample-example-application"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_the_compositecomponentexample_example_application">8.4. The compositecomponentexample Example Application</h3>
<div class="paragraph">
<p>The <code>compositecomponentexample</code> application creates a composite
component that accepts a name (or any other string). The component
interacts with a managed bean that calculates whether the letters in the
name, if converted to numeric values, add up to a prime number. The
component displays the sum of the letter values and reports whether it
is or is not prime.</p>
</div>
<div class="paragraph">
<p>The <code>compositecomponentexample</code> application has a composite component
file, a using page, and a managed bean.</p>
</div>
<div class="paragraph">
<p>The source code for this application is in the
tut-install`/examples/web/jsf/compositecomponentexample/` directory.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GKHUU">The Composite Component File</a></p>
</li>
<li>
<p><a href="#GKHVX">The Using Page</a></p>
</li>
<li>
<p><a href="#GKHVQ">The Managed Bean</a></p>
</li>
<li>
<p><a href="#GLECV">Running the compositecomponentexample Example</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GKHUU"></a><a id="the-composite-component-file"></a></p>
</div>
<div class="sect3">
<h4 id="_the_composite_component_file">8.4.1. The Composite Component File</h4>
<div class="paragraph">
<p>The composite component file is an XHTML file,
<code>/web/resources/ezcomp/PrimePanel.xhtml</code>. It has a <code>composite:interface</code>
section that declares the labels for the name and a command button. It
also declares a managed bean, which defines properties for the name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;composite:interface&gt;</span>
    <span class="tag">&lt;composite:attribute</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">namePrompt</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">default</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Name, word, or phrase: </span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;composite:attribute</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">calcButtonText</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">default</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Calculate</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;composite:attribute</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">calcAction</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">method-signature</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">java.lang.String action()</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;composite:attribute</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">primeBean</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;composite:editableValueHolder</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">nameVal</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">targets</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form:name</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/composite:interface&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The composite component implementation accepts the input value for the
<code>name</code> property of the managed bean. The <code>h:outputStylesheet</code> tag
specifies the stylesheet as a relocatable resource. The implementation
then specifies the format of the output, using properties of the managed
bean, as well as the format of error messages. The sum value is rendered
only after it has been calculated, and the report of whether the sum is
prime or not is rendered only if the input value is validated.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;composite:implementation&gt;</span>
    <span class="tag">&lt;h:form</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;h:outputStylesheet</span> <span class="attribute-name">library</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">css</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">default.css</span><span class="delimiter">&quot;</span></span>
                            <span class="attribute-name">target</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">head</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;h:panelGrid</span> <span class="attribute-name">columns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">role</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">presentation</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>
                           <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cc.attrs.namePrompt}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">45</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cc.attrs.primeBean.name}</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/h:panelGrid&gt;</span>
        <span class="tag">&lt;p&gt;</span>
            <span class="tag">&lt;h:commandButton</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">calcButton</span><span class="delimiter">&quot;</span></span>
                             <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cc.attrs.calcButtonText}</span><span class="delimiter">&quot;</span></span>
                             <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cc.attrs.calcAction}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;f:ajax</span> <span class="attribute-name">execute</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">render</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outputGroup</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/h:commandButton&gt;</span>
        <span class="tag">&lt;/p&gt;</span>

       <span class="tag">&lt;h:panelGroup</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outputGroup</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">layout</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">block</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;p&gt;</span>
                <span class="tag">&lt;h:outputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">result</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">color</span>:<span class="value">blue</span><span class="delimiter">&quot;</span></span>
                              <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cc.attrs.primeBean.totalSum gt 0}</span><span class="delimiter">&quot;</span></span>
                              <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Sum is #{cc.attrs.primeBean.totalSum}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;/p&gt;</span>
            <span class="tag">&lt;p&gt;</span>
                <span class="tag">&lt;h:outputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">response</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">color</span>:<span class="value">blue</span><span class="delimiter">&quot;</span></span>
                              <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cc.attrs.primeBean.response}</span><span class="delimiter">&quot;</span></span>
                              <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{!facesContext.validationFailed}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                <span class="tag">&lt;h:message</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">errors1</span><span class="delimiter">&quot;</span></span>
                           <span class="attribute-name">showSummary</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
                           <span class="attribute-name">showDetail</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>
                           <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">color</span>: <span class="color">#d20005</span>;
                           <span class="key">font-family</span>: <span class="string"><span class="delimiter">'</span><span class="content">New Century Schoolbook</span><span class="delimiter">'</span></span>, <span class="value">serif</span>;
                           <span class="key">font-style</span>: <span class="value">oblique</span>;
                           <span class="key">text-decoration</span>: <span class="value">overline</span><span class="delimiter">&quot;</span></span>
                           <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/p&gt;</span>
        <span class="tag">&lt;/h:panelGroup&gt;</span>
    <span class="tag">&lt;/h:form&gt;</span>
<span class="tag">&lt;/composite:implementation&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GKHVX"></a><a id="the-using-page"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_the_using_page">8.4.2. The Using Page</h4>
<div class="paragraph">
<p>The using page in this example application, <code>web/index.xhtml</code>, is an
XHTML file that invokes the <code>PrimePanel.xhtml</code> composite component file
along with the managed bean. It validates the user&#8217;s input.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">compositecomponent</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;ez:PrimePanel</span> <span class="attribute-name">primeBean</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{primeBean}</span><span class="delimiter">&quot;</span></span>
                   <span class="attribute-name">calcAction</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{primeBean.calculate}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;/ez:PrimePanel&gt;</span>
<span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GKHVQ"></a><a id="the-managed-bean"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_the_managed_bean">8.4.3. The Managed Bean</h4>
<div class="paragraph">
<p>The managed bean, <code>PrimeBean.java</code>, defines a method called <code>calculate</code>,
which performs the calculations on the input string and sets properties
accordingly. The bean first creates an array of prime numbers. It
calculates the sum of the letters in the string, with <code>'a'</code> equal to 1
and <code>'z'</code> equal to 26, and determines whether the value can be found in
the array of primes. An uppercase letter in the input string has the
same value as its lowercase equivalent.</p>
</div>
<div class="paragraph">
<p>The bean specifies the minimum and maximum size of the <code>name</code> string,
which is enforced by the Bean Validation <code>@Size</code> constraint. The bean
uses the <code>@Model</code> annotation, a shortcut for <code>@Named</code> and
<code>@RequestScoped</code>, as described in Step <a href="#CHDCABHC">7</a> of
<a href="#GJWTV">To View the hello1 Web Module Using NetBeans
IDE</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Model</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">PrimeBean</span> <span class="directive">implements</span> <span class="predefined-type">Serializable</span> {
    ...
    <span class="annotation">@Size</span>(min=<span class="integer">1</span>, max=<span class="integer">45</span>)
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    ...

    public <span class="predefined-type">String</span> calculate() {
        ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GLECV"></a><a id="running-the-compositecomponentexample-example"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_running_the_compositecomponentexample_example">8.4.4. Running the compositecomponentexample Example</h4>
<div class="paragraph">
<p>You can use either NetBeans IDE or Maven to build, package, deploy, and
run the <code>compositecomponentexample</code> example.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GKHVC">To Build, Package, and Deploy the
compositecomponentexample Example Using NetBeans IDE</a></p>
</li>
<li>
<p><a href="#GLEAE">To Build, Package, and Deploy the
compositecomponentexample Example Using Maven</a></p>
</li>
<li>
<p><a href="#GLEEU">To Run the compositecomponentexample Example</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GKHVC"></a><a id="to-build-package-and-deploy-the-compositecomponentexample-example-using-netbeans-ide"></a></p>
</div>
<div class="sect4">
<h5 id="_to_build_package_and_deploy_the_compositecomponentexample_example_using_netbeans_ide">To Build, Package, and Deploy the compositecomponentexample Example Using NetBeans IDE</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>From the File menu, choose Open Project.</p>
</li>
<li>
<p>In the Open Project dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/web/jsf</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>compositecomponentexample</code> folder.</p>
</li>
<li>
<p>Click Open Project.</p>
</li>
<li>
<p>In the Projects tab, right-click the <code>compositecomponentexample</code>
project and select Build.</p>
<div class="paragraph">
<p>This command builds and deploys the application.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GLEAE"></a><a id="to-build-package-and-deploy-the-compositecomponentexample-example-using-maven"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_build_package_and_deploy_the_compositecomponentexample_example_using_maven">To Build, Package, and Deploy the compositecomponentexample Example Using Maven</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/web/jsf/compositecomponentexample/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command to build and deploy the application:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">mvn install</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GLEEU"></a><a id="to-run-the-compositecomponentexample-example"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_run_the_compositecomponentexample_example">To Run the compositecomponentexample Example</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In a web browser, enter the following URL:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/compositecomponentexample</span></code></pre>
</div>
</div>
</li>
<li>
<p>On the page that appears, enter a string in the Name, word, or
phrase field, then click Calculate.</p>
<div class="paragraph">
<p>The page reports the sum of the letters and whether the sum is prime. A
validation error is reported if no value is entered or if the string
contains more than 45 characters.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_custom_ui_components_and_other_custom_objects">9. Creating Custom UI Components and Other Custom Objects</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="BNAVG"></a><a id="creating-custom-ui-components-and-other-custom-objects"></a></p>
</div>
<div class="paragraph">
<p>This chapter describes creating custom components for applications that
have additional functionality not provided by standard Jakarta Server Faces
components.</p>
</div>
<div class="paragraph">
<p><a id="A1350198"></a><a id="introduction-to-creating-custom-components"></a></p>
</div>
<div class="sect2">
<h3 id="_introduction_to_creating_custom_components">9.1. Introduction to Creating Custom Components</h3>
<div class="paragraph">
<p>Jakarta Server Faces technology offers a basic set of standard, reusable UI
components that enable quick and easy construction of user interfaces
for web applications. These components mostly map one-to-one to the
elements in HTML 4. But often an application requires a component that
has additional functionality or requires a completely new component.
Jakarta Server Faces technology allows extension of standard components to
enhance their functionality or to create custom components. A rich
ecosystem of third-party component libraries is built on this extension
capability, but it is beyond the scope of this tutorial to examine them.
A web search for "JSF Component Libraries" is a good starting point to
learn more about this important aspect of using Jakarta Server Faces
technology.</p>
</div>
<div class="paragraph">
<p>In addition to extending the functionality of standard components, a
component writer might want to give a page author the ability to change
the appearance of the component on the page or to alter listener
behavior. Alternatively, the component writer might want to render a
component to a different kind of client device type, such as a
smartphone or a tablet instead of a desktop computer. Enabled by the
flexible Jakarta Server Faces architecture, a component writer can separate
the definition of the component behavior from its appearance by
delegating the rendering of the component to a separate renderer. In
this way, a component writer can define the behavior of a custom
component once but create multiple renderers, each of which defines a
different way to render the component to a particular kind of client
device.</p>
</div>
<div class="paragraph">
<p>A <code>javax.faces.component.UIComponent</code> is a Java class that is
responsible for representing a self-contained piece of the user
interface during the request-processing lifecycle. It is intended to
represent the meaning of the component; the visual representation of the
component is the responsibility of the <code>javax.faces.render.Renderer</code>.
There can be multiple instances of the same <code>UIComponent</code> class in any
given Jakarta Server Faces view, just as there can be multiple instances of
any Java class in any given Java program.</p>
</div>
<div class="paragraph">
<p>Jakarta Server Faces technology provides the ability to create custom
components by extending the <code>UIComponent</code> class, the base class for all
standard UI components. A custom component can be used anywhere an
ordinary component can be used, such as within a composite component. A
<code>UIComponent</code> is identified by two names: <code>component-family</code> specifies
the general purpose of the component (input or output, for instance),
and <code>component-type</code> indicates the specific purpose of a component, such
as a text input field or a command button.</p>
</div>
<div class="paragraph">
<p>A <code>Renderer</code> is a helper to the <code>UIComponent</code> that deals with how that
specific <code>UIComponent</code> class should appear in a specific kind of client
device. Renderers are identified by two names: <code>render-kit-id</code> and
<code>renderer-type</code>. A render kit is just a bucket into which a particular
group of renderers is placed, and the <code>render-kit-id</code> identifies the
group. Most Jakarta Server Faces component libraries provide their own
render kits.</p>
</div>
<div class="paragraph">
<p>A <code>javax.faces.view.facelets.Tag</code> object is a helper to the
<code>UIComponent</code> and <code>Renderer</code> that allows the page author to include an
instance of a <code>UIComponent</code> in a Jakarta Server Faces view. A tag represents
a specific combination of <code>component-type</code> and <code>renderer-type</code>.</p>
</div>
<div class="paragraph">
<p>See <a href="#BNAVK">Component, Renderer, and Tag
Combinations</a> for information on how components, renderers, and tags
interact.</p>
</div>
<div class="paragraph">
<p>This chapter uses the image map component from the Duke&#8217;s Bookstore case
study example to explain how you can create simple custom components,
custom renderers, and associated custom tags, and take care of all the
other details associated with using the components and renderers in an
application. See <a href="#GLNVI">Chapter 60, "Duke&#8217;s
Bookstore Case Study Example"</a> for more information about this example.</p>
</div>
<div class="paragraph">
<p>The chapter also describes how to create other custom objects: custom
converters, custom listeners, and custom validators. It also describes
how to bind component values and instances to data objects and how to
bind custom objects to managed bean properties.</p>
</div>
<div class="paragraph">
<p><a id="BNAVH"></a><a id="determining-whether-you-need-a-custom-component-or-renderer"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_determining_whether_you_need_a_custom_component_or_renderer">9.2. Determining Whether You Need a Custom Component or Renderer</h3>
<div class="paragraph">
<p>The Jakarta Server Faces implementation supports a very basic set of
components and associated renderers. This section helps you to decide
whether you can use standard components and renderers in your
application or need a custom component or custom renderer.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#BNAVI">When to Use a Custom Component</a></p>
</li>
<li>
<p><a href="#BNAVJ">When to Use a Custom Renderer</a></p>
</li>
<li>
<p><a href="#BNAVK">Component, Renderer, and Tag Combinations</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="BNAVI"></a><a id="when-to-use-a-custom-component"></a></p>
</div>
<div class="sect3">
<h4 id="_when_to_use_a_custom_component">9.2.1. When to Use a Custom Component</h4>
<div class="paragraph">
<p>A component class defines the state and behavior of a UI component. This
behavior includes converting the value of a component to the appropriate
markup, queuing events on components, performing validation, and any
other behavior related to how the component interacts with the browser
and the request-processing lifecycle.</p>
</div>
<div class="paragraph">
<p>You need to create a custom component in the following situations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You need to add new behavior to a standard component, such as
generating an additional type of event (for example, notifying another
part of the page that something changed in this component as a result of
user interaction).</p>
</li>
<li>
<p>You need to take a different action in the request processing of the
value of a component from what is available in any of the existing
standard components.</p>
</li>
<li>
<p>You want to take advantage of an HTML capability offered by your
target browser, but none of the standard Jakarta Server Faces components
take advantage of the capability in the way you want, if at all. The
current release does not contain standard components for complex HTML
components, such as frames; however, because of the extensibility of the
component architecture, you can use Jakarta Server Faces technology to
create components like these. The Duke&#8217;s Bookstore case study creates
custom components that correspond to the HTML <code>map</code> and <code>area</code> tags.</p>
</li>
<li>
<p>You need to render to a non-HTML client that requires extra components
not supported by HTML. Eventually, the standard HTML render kit will
provide support for all standard HTML components. However, if you are
rendering to a different client, such as a phone, you might need to
create custom components to represent the controls uniquely supported by
the client. For example, some component architectures for wireless
clients include support for tickers and progress bars, which are not
available on an HTML client. In this case, you might also need a custom
renderer along with the component, or you might need only a custom
renderer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You do not need to create a custom component in the following cases.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You need to aggregate components to create a new component that has
its own unique behavior. In this situation, you can use a composite
component to combine existing standard components. For more information
on composite components, see <a href="#GIQZR">Composite
Components</a> and <a href="#GKHXA">Chapter 14, "Composite
Components: Advanced Topics and an Example"</a>.</p>
</li>
<li>
<p>You simply need to manipulate data on the component or add
application-specific functionality to it. In this situation, you should
create a managed bean for this purpose and bind it to the standard
component rather than create a custom component. See
<a href="#BNAQM">Managed Beans in Jakarta Server Faces
Technology</a> for more information on managed beans.</p>
</li>
<li>
<p>You need to convert a component&#8217;s data to a type not supported by its
renderer. See <a href="#BNAST">Using the Standard
Converters</a> for more information about converting a component&#8217;s data.</p>
</li>
<li>
<p>You need to perform validation on the component data. Standard
validators and custom validators can be added to a component by using
the validator tags from the page. See
<a href="#BNATC">Using the Standard Validators</a> and
<a href="#BNAUW">Creating and Using a Custom Validator</a> for
more information about validating a component&#8217;s data.</p>
</li>
<li>
<p>You need to register event listeners on components. You can either
register event listeners on components using the <code>f:valueChangeListener</code>
and <code>f:actionListener</code> tags, or you can point at an event-processing
method on a managed bean using the component&#8217;s <code>actionListener</code> or
<code>valueChangeListener</code> attributes. See
<a href="#BNAUT">Implementing an Event Listener</a> and
<a href="#BNAVB">Writing Managed Bean Methods</a> for more
information.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="BNAVJ"></a><a id="when-to-use-a-custom-renderer"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_when_to_use_a_custom_renderer">9.2.2. When to Use a Custom Renderer</h4>
<div class="paragraph">
<p>A renderer, which generates the markup to display a component on a web
page, allows you to separate the semantics of a component from its
appearance. By keeping this separation, you can support different kinds
of client devices with the same kind of authoring experience. You can
think of a renderer as a "client adapter." It produces output suitable
for consumption and display by the client and accepts input from the
client when the user interacts with that component.</p>
</div>
<div class="paragraph">
<p>If you are creating a custom component, you need to ensure, among other
things, that your component class performs these operations that are
central to rendering the component:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Decoding: Converting the incoming request parameters to the local
value of the component</p>
</li>
<li>
<p>Encoding: Converting the current local value of the component into the
corresponding markup that represents it in the response</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Jakarta Server Faces specification supports two programming models for
handling encoding and decoding.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Direct implementation: The component class itself implements the
decoding and encoding.</p>
</li>
<li>
<p>Delegated implementation: The component class delegates the
implementation of encoding and decoding to a separate renderer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By delegating the operations to the renderer, you have the option of
associating your custom component with different renderers so that you
can render the component on different clients. If you don&#8217;t plan to
render a particular component on different clients, it may be simpler to
let the component class handle the rendering. However, a separate
renderer enables you to preserve the separation of semantics from
appearance. The Duke&#8217;s Bookstore application separates the renderers
from the components, although it renders only to HTML 4 web browsers.</p>
</div>
<div class="paragraph">
<p>If you aren&#8217;t sure whether you will need the flexibility offered by
separate renderers but you want to use the simpler direct-implementation
approach, you can actually use both models. Your component class can
include some default rendering code, but it can delegate rendering to a
renderer if there is one.</p>
</div>
<div class="paragraph">
<p><a id="BNAVK"></a><a id="component-renderer-and-tag-combinations"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_component_renderer_and_tag_combinations">9.2.3. Component, Renderer, and Tag Combinations</h4>
<div class="paragraph">
<p>When you create a custom component, you can create a custom renderer to
go with it. To associate the component with the renderer and to
reference the component from the page, you will also need a custom tag.</p>
</div>
<div class="paragraph">
<p>Although you need to write the custom component and renderer, there is
no need to write code for a custom tag (called a tag handler). If you
specify the component and renderer combination, Facelets creates the tag
handler automatically.</p>
</div>
<div class="paragraph">
<p>In rare situations, you might use a custom renderer with a standard
component rather than a custom component. Or you might use a custom tag
without a renderer or a component. This section gives examples of these
situations and summarizes what is required for a custom component,
renderer, and tag.</p>
</div>
<div class="paragraph">
<p>You would use a custom renderer without a custom component if you wanted
to add some client-side validation on a standard component. You would
implement the validation code with a client-side scripting language,
such as JavaScript, and then render the JavaScript with the custom
renderer. In this situation, you need a custom tag to go with the
renderer so that its tag handler can register the renderer on the
standard component.</p>
</div>
<div class="paragraph">
<p>Custom components as well as custom renderers need custom tags
associated with them. However, you can have a custom tag without a
custom renderer or custom component. For example, suppose that you need
to create a custom validator that requires extra attributes on the
validator tag. In this case, the custom tag corresponds to a custom
validator and not to a custom component or custom renderer. In any case,
you still need to associate the custom tag with a server-side object.</p>
</div>
<div class="paragraph">
<p><a href="#BNAVL">Table 15-1</a> summarizes what you must or can associate with a
custom component, custom renderer, or custom tag.</p>
</div>
<div class="paragraph">
<p><a id="sthref76"></a><a id="BNAVL"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 15-1 Requirements for Custom Components, Custom Renderers, and
Custom Tags</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 34%;">
<col style="width: 30%;">
<col style="width: 36%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Custom Item</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Must Have</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Can Have</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom component</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom tag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom renderer or standard renderer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom renderer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom tag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom component or standard component</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom Jakarta Server Faces tag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Some server-side object, like a component,
a custom renderer, or custom validator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom component or standard
component associated with a custom renderer</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="GLPCB"></a><a id="understanding-the-image-map-example"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_understanding_the_image_map_example">9.3. Understanding the Image Map Example</h3>
<div class="paragraph">
<p>Duke&#8217;s Bookstore includes a custom image map component on the
<code>index.xhtml</code> page. This image map displays a selection of six book
titles. When the user clicks one of the book titles in the image map,
the application goes to a page that displays the title of the selected
book as well as information about a featured book. The page allows the
user to add either book (or none) to the shopping cart.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GLPBD">Why Use Jakarta Server Faces Technology to Implement an Image
Map?</a></p>
</li>
<li>
<p><a href="#GLPEM">Understanding the Rendered HTML</a></p>
</li>
<li>
<p><a href="#GLPCD">Understanding the Facelets Page</a></p>
</li>
<li>
<p><a href="#GLPBO">Configuring Model Data</a></p>
</li>
<li>
<p><a href="#GLPEL">Summary of the Image Map Application Classes</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GLPBD"></a><a id="why-use-javaserver-faces-technology-to-implement-an-image-map"></a></p>
</div>
<div class="sect3">
<h4 id="_why_use_jakarta_server_faces_technology_to_implement_an_image_map">9.3.1. Why Use Jakarta Server Faces Technology to Implement an Image Map?</h4>
<div class="paragraph">
<p>Jakarta Server Faces technology is an ideal framework to use for
implementing this kind of image map because it can perform the work that
must be done on the server without requiring you to create a server-side
image map.</p>
</div>
<div class="paragraph">
<p>In general, client-side image maps are preferred over server-side image
maps for several reasons. One reason is that the client-side image map
allows the browser to provide immediate feedback when a user positions
the mouse over a hotspot. Another reason is that client-side image maps
perform better because they don&#8217;t require round-trips to the server.
However, in some situations, your image map might need to access the
server to retrieve data or to change the appearance of nonform controls,
tasks that a client-side image map cannot do.</p>
</div>
<div class="paragraph">
<p>Because the image map custom component uses Jakarta Server Faces technology,
it has the best of both styles of image maps: It can handle the parts of
the application that need to be performed on the server while allowing
the other parts of the application to be performed on the client side.</p>
</div>
<div class="paragraph">
<p><a id="GLPEM"></a><a id="understanding-the-rendered-html"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_understanding_the_rendered_html">9.3.2. Understanding the Rendered HTML</h4>
<div class="paragraph">
<p>Here is an abbreviated version of the form part of the HTML page that
the application needs to render:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;form</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">j_idt13</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">j_idt13</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">post</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/dukesbookstore/index.xhtml</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">...</span><span class="tag">&gt;</span>
    ...
    <span class="tag">&lt;img</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">j_idt13:mapImage</span><span class="delimiter">&quot;</span></span>
         <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/dukesbookstore/javax.faces.resource/book_all.jpg?ln=images</span><span class="delimiter">&quot;</span></span>
         <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Choose a Book from our Catalog</span><span class="delimiter">&quot;</span></span>
         <span class="attribute-name">usemap</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#bookMap</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    ...
    <span class="tag">&lt;map</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookMap</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
       <span class="tag">&lt;area</span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Duke</span><span class="delimiter">&quot;</span></span>
          <span class="attribute-name">coords</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">67,23,212,268</span><span class="delimiter">&quot;</span></span>
          <span class="attribute-name">shape</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">rect</span><span class="delimiter">&quot;</span></span>
          <span class="attribute-name">onmouseout</span>=<span class="string"><span class="delimiter">&quot;</span>document.forms[<span class="integer">0</span>][<span class="string"><span class="delimiter">'</span><span class="content">j_idt13:mapImage</span><span class="delimiter">'</span></span>].src=<span class="string"><span class="delimiter">'</span><span class="content">resources/images/book_all.jpg</span><span class="delimiter">'</span></span><span class="delimiter">&quot;</span></span>
          <span class="attribute-name">onmouseover</span>=<span class="string"><span class="delimiter">&quot;</span>document.forms[<span class="integer">0</span>][<span class="string"><span class="delimiter">'</span><span class="content">j_idt13:mapImage</span><span class="delimiter">'</span></span>].src=<span class="string"><span class="delimiter">'</span><span class="content">resources/images/book_201.jpg</span><span class="delimiter">'</span></span><span class="delimiter">&quot;</span></span>
          <span class="attribute-name">onclick</span>=<span class="string"><span class="delimiter">&quot;</span>document.forms[<span class="integer">0</span>][<span class="string"><span class="delimiter">'</span><span class="content">bookMap_current</span><span class="delimiter">'</span></span>].value=<span class="string"><span class="delimiter">'</span><span class="content">Duke</span><span class="delimiter">'</span></span>; document.forms[<span class="integer">0</span>].submit()<span class="delimiter">&quot;</span></span>
       <span class="tag">/&gt;</span>
    ...
       <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookMap_current</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;/map&gt;</span>
    ...
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>img</code> tag associates an image (<code>book_all.jpg</code>) with the image map
referenced in the <code>usemap</code> attribute value.</p>
</div>
<div class="paragraph">
<p>The <code>map</code> tag specifies the image map and contains a set of <code>area</code> tags.</p>
</div>
<div class="paragraph">
<p>Each <code>area</code> tag specifies a region of the image map. The <code>onmouseover</code>,
<code>onmouseout</code>, and <code>onclick</code> attributes define which JavaScript code is
executed when these events occur. When the user moves the mouse over a
region, the <code>onmouseover</code> function associated with the region displays
the map with that region highlighted. When the user moves the mouse out
of a region, the <code>onmouseout</code> function redisplays the original image. If
the user clicks on a region, the <code>onclick</code> function sets the value of
the <code>input</code> tag to the ID of the selected area and submits the page.</p>
</div>
<div class="paragraph">
<p>The <code>input</code> tag represents a hidden control that stores the value of the
currently selected area between client-server exchanges so that the
server-side component classes can retrieve the value.</p>
</div>
<div class="paragraph">
<p>The server-side objects retrieve the value of <code>bookMap_current</code> and set
the locale in the <code>javax.faces.context.FacesContext</code> instance according
to the region that was selected.</p>
</div>
<div class="paragraph">
<p><a id="GLPCD"></a><a id="understanding-the-facelets-page"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_understanding_the_facelets_page">9.3.3. Understanding the Facelets Page</h4>
<div class="paragraph">
<p>Here is an abbreviated form of the Facelets page that the image map
component uses to generate the HTML page shown in the preceding section.
It uses custom <code>bookstore:map</code> and <code>bookstore:area</code> tags to represent
the custom components:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:form&gt;</span>
    ...
        <span class="tag">&lt;h:graphicImage</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mapImage</span><span class="delimiter">&quot;</span></span>
                        <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">book_all.jpg</span><span class="delimiter">&quot;</span></span>
                        <span class="attribute-name">library</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">images</span><span class="delimiter">&quot;</span></span>
                        <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ChooseBook}</span><span class="delimiter">&quot;</span></span>
                        <span class="attribute-name">usemap</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#bookMap</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;bookstore:map</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookMap</span><span class="delimiter">&quot;</span></span>
                       <span class="attribute-name">current</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">map1</span><span class="delimiter">&quot;</span></span>
                       <span class="attribute-name">immediate</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
                       <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookstore</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;f:actionListener</span>
                <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dukesbookstore.listeners.MapBookChangeListener</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;bookstore:area</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">map1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Book201}</span><span class="delimiter">&quot;</span></span>
                            <span class="attribute-name">onmouseover</span>=<span class="string"><span class="delimiter">&quot;</span>resources/images/book_201.jpg<span class="delimiter">&quot;</span></span>
                            <span class="attribute-name">onmouseout</span>=<span class="string"><span class="delimiter">&quot;</span>resources/images/book_all.jpg<span class="delimiter">&quot;</span></span>
                            <span class="attribute-name">targetImage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mapImage</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;bookstore:area</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">map2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Book202}</span><span class="delimiter">&quot;</span></span>
                            <span class="attribute-name">onmouseover</span>=<span class="string"><span class="delimiter">&quot;</span>resources/images/book_202.jpg<span class="delimiter">&quot;</span></span>
                            <span class="attribute-name">onmouseout</span>=<span class="string"><span class="delimiter">&quot;</span>resources/images/book_all.jpg<span class="delimiter">&quot;</span></span>
                            <span class="attribute-name">targetImage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mapImage</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            ...
        <span class="tag">&lt;/bookstore:map&gt;</span>
    ...
<span class="tag">&lt;/h:form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>alt</code> attribute of the <code>h:graphicImage</code> tag maps to the localized
string <code>"Choose a Book from our Catalog"</code>.</p>
</div>
<div class="paragraph">
<p>The <code>f:actionListener</code> tag within the <code>bookstore:map</code> tag points to a
listener class for an action event. The <code>processAction</code> method of the
listener places the book ID for the selected map area into the session
map. The way this event is handled is explained more in
<a href="#BNAWD">Handling Events for Custom Components</a>.</p>
</div>
<div class="paragraph">
<p>The <code>action</code> attribute of the <code>bookstore:map</code> tag specifies a logical
outcome <code>String</code>, <code>"bookstore"</code>, which by implicit navigation rules
sends the application to the page <code>bookstore.xhtml</code>. For more
information on navigation, see
<a href="#BNAXF">Configuring Navigation Rules</a>.</p>
</div>
<div class="paragraph">
<p>The <code>immediate</code> attribute of the <code>bookstore:map</code> tag is set to <code>true</code>,
which indicates that the default <code>javax.faces.event.ActionListener</code>
implementation should execute during the Apply Request Values phase of
the request-processing lifecycle, instead of waiting for the Invoke
Application phase. Because the request resulting from clicking the map
does not require any validation, data conversion, or server-side object
updates, it makes sense to skip directly to the Invoke Application
phase.</p>
</div>
<div class="paragraph">
<p>The <code>current</code> attribute of the <code>bookstore:map</code> tag is set to the default
area, which is <code>map1</code> (the book My Early Years: Growing Up on Star7, by
Duke).</p>
</div>
<div class="paragraph">
<p>Notice that the <code>bookstore:area</code> tags do not contain any of the
JavaScript, coordinate, or shape data that is displayed on the HTML
page. The JavaScript is generated by the
<code>dukesbookstore.renderers.AreaRenderer</code> class. The <code>onmouseover</code> and
<code>onmouseout</code> attribute values indicate the image to be loaded when these
events occur. How the JavaScript is generated is explained more in
<a href="#BNAVW">Performing Encoding</a>.</p>
</div>
<div class="paragraph">
<p>The coordinate, shape, and alternate text data are obtained through the
<code>value</code> attribute, whose value refers to an attribute in application
scope. The value of this attribute is a bean, which stores the <code>coords</code>,
<code>shape</code>, and <code>alt</code> data. How these beans are stored in the application
scope is explained more in the next section.</p>
</div>
<div class="paragraph">
<p><a id="GLPBO"></a><a id="configuring-model-data"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_model_data">9.3.4. Configuring Model Data</h4>
<div class="paragraph">
<p>In a Jakarta Server Faces application, data such as the coordinates of a
hotspot of an image map is retrieved from the <code>value</code> attribute through
a bean. However, the shape and coordinates of a hotspot should be
defined together because the coordinates are interpreted differently
depending on what shape the hotspot is. Because a component&#8217;s value can
be bound only to one property, the <code>value</code> attribute cannot refer to
both the shape and the coordinates.</p>
</div>
<div class="paragraph">
<p>To solve this problem, the application encapsulates all of this
information in a set of <code>ImageArea</code> objects. These objects are
initialized into application scope by the managed bean creation facility
(see <a href="#BNAWR">Using the managed-bean Element</a>).
Here is part of the managed bean declaration for the <code>ImageArea</code> bean
corresponding to the South America hotspot:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;managed-bean</span> <span class="attribute-name">eager</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    ...
    <span class="tag">&lt;managed-bean-name&gt;</span>Book201<span class="tag">&lt;/managed-bean-name&gt;</span>
    <span class="tag">&lt;managed-bean-class&gt;</span>
        jakarta.tutorial.dukesbookstore.model.ImageArea
    <span class="tag">&lt;/managed-bean-class&gt;</span>
    <span class="tag">&lt;managed-bean-scope&gt;</span>application<span class="tag">&lt;/managed-bean-scope&gt;</span>
    <span class="tag">&lt;managed-property&gt;</span>
        ...
        <span class="tag">&lt;property-name&gt;</span>shape<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;value&gt;</span>rect<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/managed-property&gt;</span>
    <span class="tag">&lt;managed-property&gt;</span>
        ...
        <span class="tag">&lt;property-name&gt;</span>alt<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;value&gt;</span>Duke<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/managed-property&gt;</span>
    <span class="tag">&lt;managed-property&gt;</span>
        ...
        <span class="tag">&lt;property-name&gt;</span>coords<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;value&gt;</span>67,23,212,268<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/managed-property&gt;</span>
<span class="tag">&lt;/managed-bean&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information on initializing managed beans with the managed bean
creation facility, see the section
<a href="#BNAWP">Application Configuration Resource
File</a>.</p>
</div>
<div class="paragraph">
<p>The <code>value</code> attributes of the <code>bookstore:area</code> tags refer to the beans
in the application scope, as shown in this <code>bookstore:area</code> tag from
<code>index.xhtml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bookstore:area</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">map1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Book201}</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">onmouseover</span>=<span class="string"><span class="delimiter">&quot;</span>resources/images/book_201.jpg<span class="delimiter">&quot;</span></span>
                <span class="attribute-name">onmouseout</span>=<span class="string"><span class="delimiter">&quot;</span>resources/images/book_all.jpg<span class="delimiter">&quot;</span></span>
                <span class="attribute-name">targetImage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mapImage</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To reference the <code>ImageArea</code> model object bean values from the component
class, you implement a <code>getValue</code> method in the component class. This
method calls <code>super.getValue</code>. The superclass of
tut-install`/examples/case-studies/dukes-bookstore/src/java/dukesbookstore/components/AreaComponent.java`,
<code>UIOutput</code>, has a <code>getValue</code> method that does the work of finding the
<code>ImageArea</code> object associated with <code>AreaComponent</code>. The <code>AreaRenderer</code>
class, which needs to render the <code>alt</code>, <code>shape</code>, and <code>coords</code> values
from the <code>ImageArea</code> object, calls the <code>getValue</code> method of
<code>AreaComponent</code> to retrieve the <code>ImageArea</code> object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ImageArea iarea = (ImageArea) area.getValue();</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ImageArea</code> is a simple bean, so you can access the shape, coordinates,
and alternative text values by calling the appropriate accessor methods
of <code>ImageArea</code>. <a href="#BNAWB">Creating the Renderer
Class</a> explains how to do this in the <code>AreaRenderer</code> class.</p>
</div>
<div class="paragraph">
<p><a id="GLPEL"></a><a id="summary-of-the-image-map-application-classes"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_summary_of_the_image_map_application_classes">9.3.5. Summary of the Image Map Application Classes</h4>
<div class="paragraph">
<p><a href="#GLPEK">Table 15-2</a> summarizes all the classes needed to implement
the image map component.</p>
</div>
<div class="paragraph">
<p><a id="sthref77"></a><a id="GLPEK"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 15-2 Image Map Classes</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 60%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Function</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AreaSelectedEvent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>javax.faces.event.ActionEvent</code> indicating
that an <code>AreaComponent</code> from the <code>MapComponent</code> has been selected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AreaComponent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The class that defines <code>AreaComponent</code>, which
corresponds to the <code>bookstore:area</code> custom tag.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MapComponent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The class that defines <code>MapComponent</code>, which
corresponds to the <code>bookstore:map</code> custom tag.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AreaRenderer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This <code>javax.faces.render.Renderer</code> performs the
delegated rendering for <code>AreaComponent</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ImageArea</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The bean that stores the shape and coordinates of the
hotspots.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MapBookChangeListener</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The action listener for the <code>MapComponent</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Duke&#8217;s Bookstore source directory, called bookstore-dir, is
tut-install`/examples/case-studies/dukes-bookstore/src/java/dukesbookstore/<code>.
The event and listener classes are located in
bookstore-dir</code>/listeners/<code>. The component classes are located in
bookstore-dir</code>/components/<code>. The renderer classes are located in
bookstore-dir</code>/renderers/<code>. `ImageArea</code> is located in
bookstore-dir`/model/`.</p>
</div>
<div class="paragraph">
<p><a id="BNAVT"></a><a id="steps-for-creating-a-custom-component"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_steps_for_creating_a_custom_component">9.4. Steps for Creating a Custom Component</h3>
<div class="paragraph">
<p>You can apply the following steps while developing your own custom
component.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a custom component class that does the following:</p>
</li>
<li>
<p>Overrides the <code>getFamily</code> method to return the component family, which is used to look up renderers that can render the component</p>
</li>
<li>
<p>Includes the rendering code or delegates it to a renderer (explained in Step <a href="#CDECBJAE">2</a>)</p>
</li>
<li>
<p>Enables component attributes to accept expressions</p>
</li>
<li>
<p>Queues an event on the component if the component generates events</p>
</li>
<li>
<p>Saves and restores the component state</p>
</li>
<li>
<p><a id="CDECBJAE"></a> Delegate rendering to a renderer if your component does not handle the rendering. To do this:</p>
<div class="openblock">
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Create a custom renderer class by extending <code>javax.faces.render.Renderer</code>.</p>
</li>
<li>
<p>Register the renderer to a render kit.</p>
</li>
<li>
<p>Register the component.</p>
</li>
<li>
<p>Create an event handler if your component generates events.</p>
</li>
<li>
<p>Create a tag library descriptor (TLD) that defines the custom tag.</p>
</li>
</ol>
</div>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>See <a href="#BNAXI">Registering a Custom Component</a> and
<a href="#BNAXH">Registering a Custom Renderer with a
Render Kit</a> for information on registering the custom component and the
renderer. The section <a href="#BNATT">Using a Custom
Component</a> discusses how to use the custom component in a Jakarta Server
Faces page.</p>
</div>
<div class="paragraph">
<p><a id="BNAVU"></a><a id="creating-custom-component-classes"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_custom_component_classes">9.5. Creating Custom Component Classes</h3>
<div class="paragraph">
<p>As explained in <a href="#BNAVI">When to Use a Custom
Component</a>, a component class defines the state and behavior of a UI
component. The state information includes the component&#8217;s type,
identifier, and local value. The behavior defined by the component class
includes the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Decoding (converting the request parameter to the component&#8217;s local
value)</p>
</li>
<li>
<p>Encoding (converting the local value into the corresponding markup)</p>
</li>
<li>
<p>Saving the state of the component</p>
</li>
<li>
<p>Updating the bean value with the local value</p>
</li>
<li>
<p>Processing validation on the local value</p>
</li>
<li>
<p>Queueing events</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>javax.faces.component.UIComponentBase</code> class defines the default
behavior of a component class. All the classes representing the standard
components extend from <code>UIComponentBase</code>. These classes add their own
behavior definitions, as your custom component class will do.</p>
</div>
<div class="paragraph">
<p>Your custom component class must either extend <code>UIComponentBase</code>
directly or extend a class representing one of the standard components.
These classes are located in the <code>javax.faces.component</code> package, and
their names begin with <code>UI</code>.</p>
</div>
<div class="paragraph">
<p>If your custom component serves the same purpose as a standard
component, you should extend that standard component rather than
directly extend <code>UIComponentBase</code>. For example, suppose you want to
create an editable menu component. It makes sense to have this component
extend <code>UISelectOne</code> rather than <code>UIComponentBase</code> because you can reuse
the behavior already defined in <code>UISelectOne</code>. The only new
functionality you need to define is to make the menu editable.</p>
</div>
<div class="paragraph">
<p>Whether you decide to have your component extend <code>UIComponentBase</code> or a
standard component, you might also want your component to implement one
or more of these behavioral interfaces defined in the
<code>javax.faces.component</code> package:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ActionSource</code>: Indicates that the component can fire a
<code>javax.faces.event.ActionEvent</code></p>
</li>
<li>
<p><code>ActionSource2</code>: Extends <code>ActionSource</code> and allows component
properties referencing methods that handle action events to use method
expressions as defined by the EL</p>
</li>
<li>
<p><code>EditableValueHolder</code>: Extends <code>ValueHolder</code> and specifies additional
features for editable components, such as validation and emitting
value-change events</p>
</li>
<li>
<p><code>NamingContainer</code>: Mandates that each component rooted at this
component has a unique ID</p>
</li>
<li>
<p><code>StateHolder</code>: Denotes that a component has state that must be saved
between requests</p>
</li>
<li>
<p><code>ValueHolder</code>: Indicates that the component maintains a local value as
well as the option of accessing data in the model tier</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If your component extends <code>UIComponentBase</code>, it automatically implements
only <code>StateHolder</code>. Because all components directly or indirectly extend
<code>UIComponentBase</code>, they all implement <code>StateHolder</code>. Any component that
implements <code>StateHolder</code> also implements the <code>StateHelper</code> interface,
which extends <code>StateHolder</code> and defines a <code>Map</code>-like contract that makes
it easy for components to save and restore a partial view state.</p>
</div>
<div class="paragraph">
<p>If your component extends one of the other standard components, it might
also implement other behavioral interfaces in addition to <code>StateHolder</code>.
If your component extends <code>UICommand</code>, it automatically implements
<code>ActionSource2</code>. If your component extends <code>UIOutput</code> or one of the
component classes that extend <code>UIOutput</code>, it automatically implements
<code>ValueHolder</code>. If your component extends <code>UIInput</code>, it automatically
implements <code>EditableValueHolder</code> and <code>ValueHolder</code>. See the Jakarta Server
Faces API documentation to find out what the other component classes
implement.</p>
</div>
<div class="paragraph">
<p>You can also make your component explicitly implement a behavioral
interface that it doesn&#8217;t already by virtue of extending a particular
standard component. For example, if you have a component that extends
<code>UIInput</code> and you want it to fire action events, you must make it
explicitly implement <code>ActionSource2</code> because a <code>UIInput</code> component
doesn&#8217;t automatically implement this interface.</p>
</div>
<div class="paragraph">
<p>The Duke&#8217;s Bookstore image map example has two component classes:
<code>AreaComponent</code> and <code>MapComponent</code>. The <code>MapComponent</code> class extends
<code>UICommand</code> and therefore implements <code>ActionSource2</code>, which means it can
fire action events when a user clicks on the map. The <code>AreaComponent</code>
class extends the standard component <code>UIOutput</code>. The <code>@FacesComponent</code>
annotation registers the components with the Jakarta Server Faces
implementation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@FacesComponent</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">DemoMap</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">MapComponent</span> <span class="directive">extends</span> UICommand {...}

<span class="annotation">@FacesComponent</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">DemoArea</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">AreaComponent</span> <span class="directive">extends</span> UIOutput {...}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>MapComponent</code> class represents the component corresponding to the
<code>bookstore:map</code> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bookstore:map</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookMap</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">current</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">map1</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">immediate</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookstore</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    ...
<span class="tag">&lt;/bookstore:map&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>AreaComponent</code> class represents the component corresponding to the
<code>bookstore:area</code> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bookstore:area</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">map1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Book201}</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">onmouseover</span>=<span class="string"><span class="delimiter">&quot;</span>resources/images/book_201.jpg<span class="delimiter">&quot;</span></span>
                <span class="attribute-name">onmouseout</span>=<span class="string"><span class="delimiter">&quot;</span>resources/images/book_all.jpg<span class="delimiter">&quot;</span></span>
                <span class="attribute-name">targetImage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mapImage</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>MapComponent</code> has one or more <code>AreaComponent</code> instances as children.
Its behavior consists of the following actions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Retrieving the value of the currently selected area</p>
</li>
<li>
<p>Defining the properties corresponding to the component&#8217;s values</p>
</li>
<li>
<p>Generating an event when the user clicks on the image map</p>
</li>
<li>
<p>Queuing the event</p>
</li>
<li>
<p>Saving its state</p>
</li>
<li>
<p>Rendering the HTML <code>map</code> tag and the HTML <code>input</code> tag</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>MapComponent</code> delegates the rendering of the HTML <code>map</code> and <code>input</code>
tags to the <code>MapRenderer</code> class.</p>
</div>
<div class="paragraph">
<p><code>AreaComponent</code> is bound to a bean that stores the shape and coordinates
of the region of the image map. You will see how all this data is
accessed through the value expression in
<a href="#BNAWB">Creating the Renderer Class</a>. The behavior
of <code>AreaComponent</code> consists of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Retrieving the shape and coordinate data from the bean</p>
</li>
<li>
<p>Setting the value of the hidden tag to the <code>id</code> of this component</p>
</li>
<li>
<p>Rendering the <code>area</code> tag, including the JavaScript for the
<code>onmouseover</code>, <code>onmouseout</code>, and <code>onclick</code> functions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Although these tasks are actually performed by <code>AreaRenderer</code>,
<code>AreaComponent</code> must delegate the tasks to <code>AreaRenderer</code>. See
<a href="#BNAWA">Delegating Rendering to a Renderer</a> for
more information.</p>
</div>
<div class="paragraph">
<p>The rest of this section describes the tasks that <code>MapComponent</code>
performs as well as the encoding and decoding that it delegates to
<code>MapRenderer</code>. <a href="#BNAWD">Handling Events for Custom
Components</a> details how <code>MapComponent</code> handles events.</p>
</div>
<div class="paragraph">
<p><a id="BNAVV"></a><a id="specifying-the-component-family"></a></p>
</div>
<div class="sect3">
<h4 id="_specifying_the_component_family">9.5.1. Specifying the Component Family</h4>
<div class="paragraph">
<p>If your custom component class delegates rendering, it needs to override
the <code>getFamily</code> method of <code>UIComponent</code> to return the identifier of a
component family, which is used to refer to a component or set of
components that can be rendered by a renderer or set of renderers. The
component family is used along with the renderer type to look up
renderers that can render the component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">String</span> getFamily() {
    <span class="keyword">return</span> (<span class="string"><span class="delimiter">&quot;</span><span class="content">Map</span><span class="delimiter">&quot;</span></span>);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The component family identifier, <code>Map</code>, must match that defined by the
<code>component-family</code> elements included in the component and renderer
configurations in the application configuration resource file.
<a href="#BNAXH">Registering a Custom Renderer with a
Render Kit</a> explains how to define the component family in the renderer
configuration. <a href="#BNAXI">Registering a Custom
Component</a> explains how to define the component family in the component
configuration.</p>
</div>
<div class="paragraph">
<p><a id="BNAVW"></a><a id="performing-encoding"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_performing_encoding">9.5.2. Performing Encoding</h4>
<div class="paragraph">
<p>During the Render Response phase, the Jakarta Server Faces implementation
processes the encoding methods of all components and their associated
renderers in the view. The encoding methods convert the current local
value of the component into the corresponding markup that represents it
in the response.</p>
</div>
<div class="paragraph">
<p>The <code>UIComponentBase</code> class defines a set of methods for rendering
markup: <code>encodeBegin</code>, <code>encodeChildren</code>, and <code>encodeEnd</code>. If the
component has child components, you might need to use more than one of
these methods to render the component; otherwise, all rendering should
be done in <code>encodeEnd</code>. Alternatively, you can use the <code>encodeALL</code>
method, which encompasses all the methods.</p>
</div>
<div class="paragraph">
<p>Because <code>MapComponent</code> is a parent component of <code>AreaComponent</code>, the
<code>area</code> tags must be rendered after the beginning <code>map</code> tag and before
the ending <code>map</code> tag. To accomplish this, the <code>MapRenderer</code> class
renders the beginning <code>map</code> tag in <code>encodeBegin</code> and the rest of the
<code>map</code> tag in <code>encodeEnd</code>.</p>
</div>
<div class="paragraph">
<p>The Jakarta Server Faces implementation automatically invokes the
<code>encodeEnd</code> method of <code>AreaComponent&#8217;s renderer after it invokes
`MapRenderer&#8217;s `encodeBegin</code> method and before it invokes
<code>MapRenderer&#8217;s `encodeEnd</code> method. If a component needs to perform the
rendering for its children, it does this in the <code>encodeChildren</code> method.</p>
</div>
<div class="paragraph">
<p>Here are the <code>encodeBegin</code> and <code>encodeEnd</code> methods of <code>MapRenderer</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> encodeBegin(FacesContext context, UIComponent component)
        <span class="directive">throws</span> <span class="exception">IOException</span> {
    <span class="keyword">if</span> ((context == <span class="predefined-constant">null</span>)|| (component == <span class="predefined-constant">null</span>)) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">NullPointerException</span>();
    }
    MapComponent map = (MapComponent) component;
    ResponseWriter writer = context.getResponseWriter();
    writer.startElement(<span class="string"><span class="delimiter">&quot;</span><span class="content">map</span><span class="delimiter">&quot;</span></span>, map);
    writer.writeAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, map.getId(), <span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>);
}

<span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> encodeEnd(FacesContext context, UIComponent component)
        <span class="directive">throws</span> <span class="exception">IOException</span> {
    <span class="keyword">if</span> ((context == <span class="predefined-constant">null</span>) || (component == <span class="predefined-constant">null</span>)){
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">NullPointerException</span>();
    }
    MapComponent map = (MapComponent) component;
    ResponseWriter writer = context.getResponseWriter();
    writer.startElement(<span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span>, map);
    writer.writeAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">null</span>);
    writer.writeAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, getName(context,map), <span class="string"><span class="delimiter">&quot;</span><span class="content">clientId</span><span class="delimiter">&quot;</span></span>);
    writer.endElement(<span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span>);
    writer.endElement(<span class="string"><span class="delimiter">&quot;</span><span class="content">map</span><span class="delimiter">&quot;</span></span>);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that <code>encodeBegin</code> renders only the beginning <code>map</code> tag. The
<code>encodeEnd</code> method renders the <code>input</code> tag and the ending <code>map</code> tag.</p>
</div>
<div class="paragraph">
<p>The encoding methods accept a <code>UIComponent</code> argument and a
<code>javax.faces.context.FacesContext</code> argument. The <code>FacesContext</code> instance
contains all the information associated with the current request. The
<code>UIComponent</code> argument is the component that needs to be rendered.</p>
</div>
<div class="paragraph">
<p>The rest of the method renders the markup to the
<code>javax.faces.context.ResponseWriter</code> instance, which writes out the
markup to the current response. This basically involves passing the HTML
tag names and attribute names to the <code>ResponseWriter</code> instance as
strings, retrieving the values of the component attributes, and passing
these values to the <code>ResponseWriter</code> instance.</p>
</div>
<div class="paragraph">
<p>The <code>startElement</code> method takes a <code>String</code> (the name of the tag) and the
component to which the tag corresponds (in this case, <code>map</code>). (Passing
this information to the <code>ResponseWriter</code> instance helps design-time
tools know which portions of the generated markup are related to which
components.)</p>
</div>
<div class="paragraph">
<p>After calling <code>startElement</code>, you can call <code>writeAttribute</code> to render
the tag&#8217;s attributes. The <code>writeAttribute</code> method takes the name of the
attribute, its value, and the name of a property or attribute of the
containing component corresponding to the attribute. The last parameter
can be null, and it won&#8217;t be rendered.</p>
</div>
<div class="paragraph">
<p>The <code>name</code> attribute value of the <code>map</code> tag is retrieved using the
<code>getId</code> method of <code>UIComponent</code>, which returns the component&#8217;s unique
identifier. The <code>name</code> attribute value of the <code>input</code> tag is retrieved
using the <code>getName(FacesContext, UIComponent)</code> method of <code>MapRenderer</code>.</p>
</div>
<div class="paragraph">
<p>If you want your component to perform its own rendering but delegate to
a renderer if there is one, include the following lines in the encoding
method to check whether there is a renderer associated with this
component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">if</span> (getRendererType() != <span class="predefined-constant">null</span>) {
    <span class="local-variable">super</span>.encodeEnd(context);
    <span class="keyword">return</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If there is a renderer available, this method invokes the superclass&#8217;s
<code>encodeEnd</code> method, which does the work of finding the renderer. The
<code>MapComponent</code> class delegates all rendering to <code>MapRenderer</code>, so it
does not need to check for available renderers.</p>
</div>
<div class="paragraph">
<p>In some custom component classes that extend standard components, you
might need to implement other methods in addition to <code>encodeEnd</code>. For
example, if you need to retrieve the component&#8217;s value from the request
parameters, you must also implement the <code>decode</code> method.</p>
</div>
<div class="paragraph">
<p><a id="BNAVX"></a><a id="performing-decoding"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_performing_decoding">9.5.3. Performing Decoding</h4>
<div class="paragraph">
<p>During the Apply Request Values phase, the Jakarta Server Faces
implementation processes the <code>decode</code> methods of all components in the
tree. The <code>decode</code> method extracts a component&#8217;s local value from
incoming request parameters and uses a <code>javax.faces.convert.Converter</code>
implementation to convert the value to a type that is acceptable to the
component class.</p>
</div>
<div class="paragraph">
<p>A custom component class or its renderer must implement the <code>decode</code>
method only if it must retrieve the local value or if it needs to queue
events. The component queues the event by calling <code>queueEvent</code>.</p>
</div>
<div class="paragraph">
<p>Here is the <code>decode</code> method of <code>MapRenderer</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> decode(FacesContext context, UIComponent component) {
    <span class="keyword">if</span> ((context == <span class="predefined-constant">null</span>) || (component == <span class="predefined-constant">null</span>)) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">NullPointerException</span>();
    }
    MapComponent map = (MapComponent) component;
    <span class="predefined-type">String</span> key = getName(context, map);
    <span class="predefined-type">String</span> value = (<span class="predefined-type">String</span>) context.getExternalContext().
            getRequestParameterMap().get(key);
    <span class="keyword">if</span> (value != <span class="predefined-constant">null</span>)
        map.setCurrent(value);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>decode</code> method first gets the name of the hidden <code>input</code> field by
calling <code>getName(FacesContext, UIComponent)</code>. It then uses that name as
the key to the request parameter map to retrieve the current value of
the <code>input</code> field. This value represents the currently selected area.
Finally, it sets the value of the <code>MapComponent</code> class&#8217;s <code>current</code>
attribute to the value of the <code>input</code> field.</p>
</div>
<div class="paragraph">
<p><a id="BNAVY"></a><a id="enabling-component-properties-to-accept-expressions"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_enabling_component_properties_to_accept_expressions">9.5.4. Enabling Component Properties to Accept Expressions</h4>
<div class="paragraph">
<p>Nearly all the attributes of the standard Jakarta Server Faces tags can
accept expressions, whether they are value expressions or method
expressions. It is recommended that you also enable your component
attributes to accept expressions because it gives you much more
flexibility when you write Facelets pages.</p>
</div>
<div class="paragraph">
<p>To enable the attributes to accept expressions, the component class must
implement getter and setter methods for the component properties. These
methods can use the facilities offered by the <code>StateHelper</code> interface to
store and retrieve not only the values for these properties but also the
state of the components across multiple requests.</p>
</div>
<div class="paragraph">
<p>Because <code>MapComponent</code> extends <code>UICommand</code>, the <code>UICommand</code> class
already does the work of getting the <code>ValueExpression</code> and
<code>MethodExpression</code> instances associated with each of the attributes that
it supports. Similarly, the <code>UIOutput</code> class that <code>AreaComponent</code>
extends already obtains the <code>ValueExpression</code> instances for its
supported attributes. For both components, the simple getter and setter
methods store and retrieve the key values and state for the attributes,
as shown in this code fragment from <code>AreaComponent</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">enum</span> PropertyKeys {
    alt, coords, shape, targetImage;
}
<span class="directive">public</span> <span class="predefined-type">String</span> getAlt() {
    <span class="keyword">return</span> (<span class="predefined-type">String</span>) getStateHelper().eval(PropertyKeys.alt, <span class="predefined-constant">null</span>);
}
<span class="directive">public</span> <span class="type">void</span> setAlt(<span class="predefined-type">String</span> alt) {
    getStateHelper().put(PropertyKeys.alt, alt);
}
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, if you have a custom component class that extends
<code>UIComponentBase</code>, you will need to implement the methods that get the
<code>ValueExpression</code> and <code>MethodExpression</code> instances associated with those
attributes that are enabled to accept expressions. For example, you
could include a method that gets the <code>ValueExpression</code> instance for the
<code>immediate</code> attribute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">boolean</span> isImmediate() {
    <span class="keyword">if</span> (<span class="local-variable">this</span>.immediateSet) {
        <span class="keyword">return</span> (<span class="local-variable">this</span>.immediate);
    }
    ValueExpression ve = getValueExpression(<span class="string"><span class="delimiter">&quot;</span><span class="content">immediate</span><span class="delimiter">&quot;</span></span>);
    <span class="keyword">if</span> (ve != <span class="predefined-constant">null</span>) {
        <span class="predefined-type">Boolean</span> value = (<span class="predefined-type">Boolean</span>) ve.getValue(
            getFacesContext().getELContext());
        <span class="keyword">return</span> (value.booleanValue());
    } <span class="keyword">else</span> {
        <span class="keyword">return</span> (<span class="local-variable">this</span>.immediate);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The properties corresponding to the component attributes that accept
method expressions must accept and return a <code>MethodExpression</code> object.
For example, if <code>MapComponent</code> extended <code>UIComponentBase</code> instead of
<code>UICommand</code>, it would need to provide an <code>action</code> property that returns
and accepts a <code>MethodExpression</code> object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> MethodExpression getAction() {
    <span class="keyword">return</span> (<span class="local-variable">this</span>.action);
}
<span class="directive">public</span> <span class="type">void</span> setAction(MethodExpression action) {
    <span class="local-variable">this</span>.action = action;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BNAVZ"></a><a id="saving-and-restoring-state"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_saving_and_restoring_state">9.5.5. Saving and Restoring State</h4>
<div class="paragraph">
<p>As described in <a href="#BNAVY">Enabling Component Properties to Accept
Expressions</a>, use of the <code>StateHelper</code> interface facilities allows you
to save the component&#8217;s state at the same time you set and retrieve
property values. The <code>StateHelper</code> implementation allows partial state
saving; it saves only the changes in the state since the initial
request, not the entire state, because the full state can be restored
during the Restore View phase.</p>
</div>
<div class="paragraph">
<p>Component classes that implement <code>StateHolder</code> may prefer to implement
the <code>saveState(FacesContext)</code> and <code>restoreState(FacesContext, Object)</code>
methods to help the Jakarta Server Faces implementation save and restore the
state of components across multiple requests.</p>
</div>
<div class="paragraph">
<p>To save a set of values, you can implement the <code>saveState(FacesContext)</code>
method. This method is called during the Render Response phase, during
which the state of the response is saved for processing on subsequent
requests. Here is a hypothetical method from <code>MapComponent</code>, which has
only one attribute, <code>current</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="predefined-type">Object</span> saveState(FacesContext context) {
    <span class="predefined-type">Object</span> values<span class="type">[]</span> = <span class="keyword">new</span> <span class="predefined-type">Object</span>[<span class="integer">2</span>];
    values[<span class="integer">0</span>] = <span class="local-variable">super</span>.saveState(context);
    values[<span class="integer">1</span>] = current;
    <span class="keyword">return</span> (values);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This method initializes an array, which will hold the saved state. It
next saves all of the state associated with the component.</p>
</div>
<div class="paragraph">
<p>A component that implements <code>StateHolder</code> may also provide an
implementation for <code>restoreState(FacesContext, Object)</code>, which restores
the state of the component to that saved with the
<code>saveState(FacesContext)</code> method. The
<code>restoreState(FacesContext, Object)</code> method is called during the Restore
View phase, during which the Jakarta Server Faces implementation checks
whether there is any state that was saved during the last Render
Response phase and needs to be restored in preparation for the next
postback.</p>
</div>
<div class="paragraph">
<p>Here is a hypothetical <code>restoreState(FacesContext, Object)</code> method from
<code>MapComponent</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> restoreState(FacesContext context, <span class="predefined-type">Object</span> state) {
    <span class="predefined-type">Object</span> values<span class="type">[]</span> = (<span class="predefined-type">Object</span><span class="type">[]</span>) state;
    <span class="local-variable">super</span>.restoreState(context, values[<span class="integer">0</span>]);
    current = (<span class="predefined-type">String</span>) values[<span class="integer">1</span>];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This method takes a <code>FacesContext</code> and an <code>Object</code> instance,
representing the array that is holding the state for the component. This
method sets the component&#8217;s properties to the values saved in the
<code>Object</code> array.</p>
</div>
<div class="paragraph">
<p>Whether or not you implement these methods in your component class, you
can use the <code>javax.faces.STATE_SAVING_METHOD</code> context parameter to
specify in the deployment descriptor where you want the state to be
saved: either <code>client</code> or <code>server</code>. If state is saved on the client, the
state of the entire view is rendered to a hidden field on the page. By
default, the state is saved on the server.</p>
</div>
<div class="paragraph">
<p>The web applications in the Duke&#8217;s Forest case study save their view
state on the client.</p>
</div>
<div class="paragraph">
<p>Saving state on the client uses more bandwidth as well as more client
resources, whereas saving it on the server uses more server resources.
You may also want to save state on the client if you expect your users
to disable cookies.</p>
</div>
<div class="paragraph">
<p><a id="BNAWA"></a><a id="delegating-rendering-to-a-renderer"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_delegating_rendering_to_a_renderer">9.6. Delegating Rendering to a Renderer</h3>
<div class="paragraph">
<p>Both <code>MapComponent</code> and <code>AreaComponent</code> delegate all of their rendering
to a separate renderer. The section
<a href="#BNAVW">Performing Encoding</a> explains how
<code>MapRenderer</code> performs the encoding for <code>MapComponent</code>. This section
explains in detail the process of delegating rendering to a renderer
using <code>AreaRenderer</code>, which performs the rendering for <code>AreaComponent</code>.</p>
</div>
<div class="paragraph">
<p>To delegate rendering, you perform the tasks described in the following
topics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#BNAWB">Creating the Renderer Class</a></p>
</li>
<li>
<p><a href="#BNAWC">Identifying the Renderer Type</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="BNAWB"></a><a id="creating-the-renderer-class"></a></p>
</div>
<div class="sect3">
<h4 id="_creating_the_renderer_class">9.6.1. Creating the Renderer Class</h4>
<div class="paragraph">
<p>When delegating rendering to a renderer, you can delegate all encoding
and decoding to the renderer, or you can choose to do part of it in the
component class. The <code>AreaComponent</code> class delegates encoding to the
<code>AreaRenderer</code> class.</p>
</div>
<div class="paragraph">
<p>The renderer class begins with a <code>@FacesRenderer</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@FacesRenderer</span>(componentFamily = <span class="string"><span class="delimiter">&quot;</span><span class="content">Area</span><span class="delimiter">&quot;</span></span>, rendererType = <span class="string"><span class="delimiter">&quot;</span><span class="content">DemoArea</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">AreaRenderer</span> <span class="directive">extends</span> <span class="predefined-type">Renderer</span> {</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@FacesRenderer</code> annotation registers the renderer class with the
Jakarta Server Faces implementation as a renderer class. The annotation
identifies the component family as well as the renderer type.</p>
</div>
<div class="paragraph">
<p>To perform the rendering for <code>AreaComponent</code>, <code>AreaRenderer</code> must
implement an <code>encodeEnd</code> method. The <code>encodeEnd</code> method of
<code>AreaRenderer</code> retrieves the shape, coordinates, and alternative text
values stored in the <code>ImageArea</code> bean that is bound to <code>AreaComponent</code>.
Suppose that the <code>area</code> tag currently being rendered has a <code>value</code>
attribute value of <code>"book203"</code>. The following line from <code>encodeEnd</code> gets
the value of the attribute <code>"book203"</code> from the <code>FacesContext</code> instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ImageArea ia = (ImageArea)area.getValue();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The attribute value is the <code>ImageArea</code> bean instance, which contains the
<code>shape</code>, <code>coords</code>, and <code>alt</code> values associated with the <code>book203</code>
<code>AreaComponent</code> instance. <a href="#GLPBO">Configuring Model
Data</a> describes how the application stores these values.</p>
</div>
<div class="paragraph">
<p>After retrieving the <code>ImageArea</code> object, the method renders the values
for <code>shape</code>, <code>coords</code>, and <code>alt</code> by simply calling the associated
accessor methods and passing the returned values to the <code>ResponseWriter</code>
instance, as shown by these lines of code, which write out the shape and
coordinates:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">writer.startElement(<span class="string"><span class="delimiter">&quot;</span><span class="content">area</span><span class="delimiter">&quot;</span></span>, area);
writer.writeAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">alt</span><span class="delimiter">&quot;</span></span>, iarea.getAlt(), <span class="string"><span class="delimiter">&quot;</span><span class="content">alt</span><span class="delimiter">&quot;</span></span>);
writer.writeAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">coords</span><span class="delimiter">&quot;</span></span>, iarea.getCoords(), <span class="string"><span class="delimiter">&quot;</span><span class="content">coords</span><span class="delimiter">&quot;</span></span>);
writer.writeAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">shape</span><span class="delimiter">&quot;</span></span>, iarea.getShape(), <span class="string"><span class="delimiter">&quot;</span><span class="content">shape</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>encodeEnd</code> method also renders the JavaScript for the <code>onmouseout</code>,
<code>onmouseover</code>, and <code>onclick</code> attributes. The Facelets page needs to
provide only the path to the images that are to be loaded during an
<code>onmouseover</code> or <code>onmouseout</code> action:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bookstore:area</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">map3</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Book203}</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">onmouseover</span>=<span class="string"><span class="delimiter">&quot;</span>resources/images/book_203.jpg<span class="delimiter">&quot;</span></span>
                <span class="attribute-name">onmouseout</span>=<span class="string"><span class="delimiter">&quot;</span>resources/images/book_all.jpg<span class="delimiter">&quot;</span></span>
                <span class="attribute-name">targetImage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mapImage</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>AreaRenderer</code> class takes care of generating the JavaScript for
these actions, as shown in the following code from <code>encodeEnd</code>. The
JavaScript that <code>AreaRenderer</code> generates for the <code>onclick</code> action sets
the value of the hidden field to the value of the current area&#8217;s
component ID and submits the page.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">sb = <span class="keyword">new</span> <span class="predefined-type">StringBuffer</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">document.forms[0]['</span><span class="delimiter">&quot;</span></span>).append(targetImageId).
        append(<span class="string"><span class="delimiter">&quot;</span><span class="content">'].src='</span><span class="delimiter">&quot;</span></span>);
sb.append(
        getURI(context,
        (<span class="predefined-type">String</span>) area.getAttributes().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">onmouseout</span><span class="delimiter">&quot;</span></span>)));
sb.append(<span class="string"><span class="delimiter">&quot;</span><span class="content">'</span><span class="delimiter">&quot;</span></span>);
writer.writeAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">onmouseout</span><span class="delimiter">&quot;</span></span>, sb.toString(), <span class="string"><span class="delimiter">&quot;</span><span class="content">onmouseout</span><span class="delimiter">&quot;</span></span>);
sb = <span class="keyword">new</span> <span class="predefined-type">StringBuffer</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">document.forms[0]['</span><span class="delimiter">&quot;</span></span>).append(targetImageId).
        append(<span class="string"><span class="delimiter">&quot;</span><span class="content">'].src='</span><span class="delimiter">&quot;</span></span>);
sb.append(
        getURI(context,
        (<span class="predefined-type">String</span>) area.getAttributes().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">onmouseover</span><span class="delimiter">&quot;</span></span>)));
sb.append(<span class="string"><span class="delimiter">&quot;</span><span class="content">'</span><span class="delimiter">&quot;</span></span>);
writer.writeAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">onmouseover</span><span class="delimiter">&quot;</span></span>, sb.toString(), <span class="string"><span class="delimiter">&quot;</span><span class="content">onmouseover</span><span class="delimiter">&quot;</span></span>);
sb = <span class="keyword">new</span> <span class="predefined-type">StringBuffer</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">document.forms[0]['</span><span class="delimiter">&quot;</span></span>);
sb.append(getName(context, area));
sb.append(<span class="string"><span class="delimiter">&quot;</span><span class="content">'].value='</span><span class="delimiter">&quot;</span></span>);
sb.append(iarea.getAlt());
sb.append(<span class="string"><span class="delimiter">&quot;</span><span class="content">'; document.forms[0].submit()</span><span class="delimiter">&quot;</span></span>);
writer.writeAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">onclick</span><span class="delimiter">&quot;</span></span>, sb.toString(), <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);
writer.endElement(<span class="string"><span class="delimiter">&quot;</span><span class="content">area</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>By submitting the page, this code causes the Jakarta Server Faces lifecycle
to return back to the Restore View phase. This phase saves any state
information, including the value of the hidden field, so that a new
request component tree is constructed. This value is retrieved by the
<code>decode</code> method of the <code>MapComponent</code> class. This decode method is
called by the Jakarta Server Faces implementation during the Apply Request
Values phase, which follows the Restore View phase.</p>
</div>
<div class="paragraph">
<p>In addition to the <code>encodeEnd</code> method, <code>AreaRenderer</code> contains an empty
constructor. This is used to create an instance of <code>AreaRenderer</code> so
that it can be added to the render kit.</p>
</div>
<div class="paragraph">
<p>The <code>@FacesRenderer</code> annotation registers the renderer class with the
Jakarta Server Faces implementation as a renderer class. The annotation
identifies the component family as well as the renderer type.</p>
</div>
<div class="paragraph">
<p><a id="BNAWC"></a><a id="identifying-the-renderer-type"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_identifying_the_renderer_type">9.6.2. Identifying the Renderer Type</h4>
<div class="paragraph">
<p>Register the renderer with a render kit by using the <code>@FacesRenderer</code>
annotation (or by using the application configuration resource file, as
explained in <a href="#BNAXH">Registering a Custom
Renderer with a Render Kit</a>). During the Render Response phase, the
Jakarta Server Faces implementation calls the <code>getRendererType</code> method of
the component&#8217;s tag handler to determine which renderer to invoke, if
there is one.</p>
</div>
<div class="paragraph">
<p>You identify the type associated with the renderer in the <code>rendererType</code>
element of the <code>@FacesRenderer</code> annotation for <code>AreaRenderer</code> as well as
in the <code>renderer-type</code> element of the tag library descriptor.</p>
</div>
<div class="paragraph">
<p><a id="BNAUT"></a><a id="implementing-an-event-listener"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementing_an_event_listener">9.7. Implementing an Event Listener</h3>
<div class="paragraph">
<p>The Jakarta Server Faces technology supports action events and value-change
events for components.</p>
</div>
<div class="paragraph">
<p>Action events occur when the user activates a component that implements
<code>javax.faces.component.ActionSource</code>. These events are represented by
the class <code>javax.faces.event.ActionEvent</code>.</p>
</div>
<div class="paragraph">
<p>Value-change events occur when the user changes the value of a component
that implements <code>javax.faces.component.EditableValueHolder</code>. These
events are represented by the class
<code>javax.faces.event.ValueChangeEvent</code>.</p>
</div>
<div class="paragraph">
<p>One way to handle events is to implement the appropriate listener
classes. Listener classes that handle the action events in an
application must implement the interface
<code>javax.faces.event.ActionListener</code>. Similarly, listeners that handle the
value-change events must implement the interface
<code>javax.faces.event.ValueChangeListener</code>.</p>
</div>
<div class="paragraph">
<p>This section explains how to implement the two listener classes.</p>
</div>
<div class="paragraph">
<p>To handle events generated by custom components, you must implement an
event listener and an event handler and manually queue the event on the
component. See <a href="#BNAWD">Handling Events for Custom
Components</a> for more information.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Note:</p>
</div>
<div class="paragraph">
<p>You do not need to create an <code>ActionListener</code> implementation to handle
an event that results solely in navigating to a page and does not
perform any other application-specific processing. See
<a href="#BNAVC">Writing a Method to Handle Navigation</a> for
information on how to manage page navigation.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="BNAUU"></a><a id="implementing-value-change-listeners"></a></p>
</div>
<div class="sect3">
<h4 id="_implementing_value_change_listeners">9.7.1. Implementing Value-Change Listeners</h4>
<div class="paragraph">
<p>A <code>javax.faces.event.ValueChangeListener</code> implementation must include a
<code>processValueChange(ValueChangeEvent)</code> method. This method processes the
specified value-change event and is invoked by the Jakarta Server Faces
implementation when the value-change event occurs. The
<code>ValueChangeEvent</code> instance stores the old and the new values of the
component that fired the event.</p>
</div>
<div class="paragraph">
<p>In the Duke&#8217;s Bookstore case study, the <code>NameChanged</code> listener
implementation is registered on the <code>name</code> <code>UIInput</code> component on the
<code>bookcashier.xhtml</code> page. This listener stores into session scope the
name the user entered in the field corresponding to the name component.</p>
</div>
<div class="paragraph">
<p>The <code>bookreceipt.xhtml</code> subsequently retrieves the name from the session
scope:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputFormat</span> <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">thanks</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ThankYouParam}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:param</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{sessionScope.name}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputFormat&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When the <code>bookreceipt.xhtml</code> page is loaded, it displays the name inside
the message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="string"><span class="delimiter">&quot;</span><span class="content">Thank you, {0}, for purchasing your books from us.</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is part of the <code>NameChanged</code> listener implementation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">NameChanged</span> <span class="directive">extends</span> <span class="predefined-type">Object</span> <span class="directive">implements</span> ValueChangeListener {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> processValueChange(ValueChangeEvent event)
            <span class="directive">throws</span> AbortProcessingException {

        <span class="keyword">if</span> (<span class="predefined-constant">null</span> != event.getNewValue()) {
            FacesContext.getCurrentInstance().getExternalContext().
                getSessionMap().put(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, event.getNewValue());
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the user enters the name in the field, a value-change event is
generated, and the <code>processValueChange(ValueChangeEvent)</code> method of the
<code>NameChanged</code> listener implementation is invoked. This method first gets
the ID of the component that fired the event from the <code>ValueChangeEvent</code>
object, and it puts the value, along with an attribute name, into the
session map of the <code>FacesContext</code> instance.</p>
</div>
<div class="paragraph">
<p><a href="#BNATA">Registering a Value-Change Listener on a
Component</a> explains how to register this listener onto a component.</p>
</div>
<div class="paragraph">
<p><a id="BNAUV"></a><a id="implementing-action-listeners"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_implementing_action_listeners">9.7.2. Implementing Action Listeners</h4>
<div class="paragraph">
<p>A <code>javax.faces.event.ActionListener</code> implementation must include a
<code>processAction(ActionEvent)</code> method. The <code>processAction(ActionEvent)</code>
method processes the specified action event. The Jakarta Server Faces
implementation invokes the <code>processAction(ActionEvent)</code> method when the
<code>ActionEvent</code> occurs.</p>
</div>
<div class="paragraph">
<p>The Duke&#8217;s Bookstore case study uses two <code>ActionListener</code>
implementations, <code>LinkBookChangeListener</code> and <code>MapBookChangeListener</code>.
See <a href="#BNAWD">Handling Events for Custom Components</a>
for details on <code>MapBookChangeListener</code>.</p>
</div>
<div class="paragraph">
<p><a href="#BNATB">Registering an Action Listener on a
Component</a> explains how to register this listener onto a component.</p>
</div>
<div class="paragraph">
<p><a id="BNAWD"></a><a id="handling-events-for-custom-components"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_handling_events_for_custom_components">9.8. Handling Events for Custom Components</h3>
<div class="paragraph">
<p>As explained in <a href="#BNAUT">Implementing an Event
Listener</a>, events are automatically queued on standard components that
fire events. A custom component, on the other hand, must manually queue
events from its <code>decode</code> method if it fires events.</p>
</div>
<div class="paragraph">
<p><a href="#BNAVX">Performing Decoding</a> explains how to queue
an event on <code>MapComponent</code> using its <code>decode</code> method. This section
explains how to write the class that represents the event of clicking on
the map and how to write the method that processes this event.</p>
</div>
<div class="paragraph">
<p>As explained in <a href="#GLPCD">Understanding the Facelets
Page</a>, the <code>actionListener</code> attribute of the <code>bookstore:map</code> tag points
to the <code>MapBookChangeListener</code> class. The listener class&#8217;s
<code>processAction</code> method processes the event of clicking the image map.
Here is the <code>processAction</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> processAction(<span class="predefined-type">ActionEvent</span> actionEvent)
        <span class="directive">throws</span> AbortProcessingException {

    AreaSelectedEvent event = (AreaSelectedEvent) actionEvent;
    <span class="predefined-type">String</span> current = event.getMapComponent().getCurrent();
    FacesContext context = FacesContext.getCurrentInstance();
    <span class="predefined-type">String</span> bookId = books.get(current);
    context.getExternalContext().getSessionMap().put(<span class="string"><span class="delimiter">&quot;</span><span class="content">bookId</span><span class="delimiter">&quot;</span></span>, bookId);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the Jakarta Server Faces implementation calls this method, it passes in
an <code>ActionEvent</code> object that represents the event generated by clicking
on the image map. Next, it casts it to an <code>AreaSelectedEvent</code> object
(see
tut-install`/examples/case-studies/dukes-bookstore/src/java/dukesbookstore/listeners/AreaSelectedEvent.java`).
Then this method gets the <code>MapComponent</code> associated with the event.
Next, it gets the value of the <code>MapComponent</code> object&#8217;s <code>current</code>
attribute, which indicates the currently selected area. The method then
uses the value of the <code>current</code> attribute to get the book&#8217;s ID value
from a <code>HashMap</code> object, which is constructed elsewhere in the
<code>MapBookChangeListener</code> class. Finally, the method places the ID
obtained from the <code>HashMap</code> object into the session map for the
application.</p>
</div>
<div class="paragraph">
<p>In addition to the method that processes the event, you need the event
class itself. This class is very simple to write; you have it extend
<code>ActionEvent</code> and provide a constructor that takes the component on
which the event is queued and a method that returns the component. Here
is the <code>AreaSelectedEvent</code> class used with the image map:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">AreaSelectedEvent</span> <span class="directive">extends</span> <span class="predefined-type">ActionEvent</span> {
    <span class="directive">public</span> AreaSelectedEvent(MapComponent map) {
        <span class="local-variable">super</span>(map);
    }
    <span class="directive">public</span> MapComponent getMapComponent() {
        <span class="keyword">return</span> ((MapComponent) getComponent());
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As explained in the section <a href="#BNAVU">Creating Custom
Component Classes</a>, in order for <code>MapComponent</code> to fire events in the
first place, it must implement <code>ActionSource</code>. Because <code>MapComponent</code>
extends <code>UICommand</code>, it also implements <code>ActionSource</code>.</p>
</div>
<div class="paragraph">
<p><a id="BNAWN"></a><a id="defining-the-custom-component-tag-in-a-tag-library-descriptor"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_defining_the_custom_component_tag_in_a_tag_library_descriptor">9.9. Defining the Custom Component Tag in a Tag Library Descriptor</h3>
<div class="paragraph">
<p>To use a custom tag, you declare it in a Tag Library Descriptor (TLD).
The TLD file defines how the custom tag is used in a Jakarta Server Faces
page. The web container uses the TLD to validate the tag. The set of
tags that are part of the HTML render kit are defined in the HTML_BASIC
TLD, available in the o<a href="JSFRK">Jakarta Server Faces standard HTML tag
library</a>.</p>
</div>
<div class="paragraph">
<p>The TLD file name must end with <code>taglib.xml</code>. In the Duke&#8217;s Bookstore
case study, the custom tags <code>area</code> and <code>map</code> are defined in the file
<code>web/WEB-INF/bookstore.taglib.xml</code>.</p>
</div>
<div class="paragraph">
<p>All tag definitions must be nested inside the <code>facelet-taglib</code> element
in the TLD. Each tag is defined by a <code>tag</code> element. Here are the tag
definitions for the <code>area</code> and <code>map</code> components:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;facelet-taglib</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/xml/ns/javaee</span><span class="delimiter">&quot;</span></span>
<span class="attribute-name">...</span><span class="tag">&gt;</span>
    <span class="tag">&lt;namespace&gt;</span>http://dukesbookstore<span class="tag">&lt;/namespace&gt;</span>
    <span class="tag">&lt;tag&gt;</span>
        <span class="tag">&lt;tag-name&gt;</span>area<span class="tag">&lt;/tag-name&gt;</span>
        <span class="tag">&lt;component&gt;</span>
            <span class="tag">&lt;component-type&gt;</span>DemoArea<span class="tag">&lt;/component-type&gt;</span>
            <span class="tag">&lt;renderer-type&gt;</span>DemoArea<span class="tag">&lt;/renderer-type&gt;</span>
        <span class="tag">&lt;/component&gt;</span>
    <span class="tag">&lt;/tag&gt;</span>
    <span class="tag">&lt;tag&gt;</span>
        <span class="tag">&lt;tag-name&gt;</span>map<span class="tag">&lt;/tag-name&gt;</span>
        <span class="tag">&lt;component&gt;</span>
            <span class="tag">&lt;component-type&gt;</span>DemoMap<span class="tag">&lt;/component-type&gt;</span>
            <span class="tag">&lt;renderer-type&gt;</span>DemoMap<span class="tag">&lt;/renderer-type&gt;</span>
        <span class="tag">&lt;/component&gt;</span>
    <span class="tag">&lt;/tag&gt;</span>
<span class="tag">&lt;/facelet-taglib&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>component-type</code> element specifies the name defined in the
<code>@FacesComponent</code> annotation, and the <code>renderer-type</code> element specifies
the <code>rendererType</code> defined in the <code>@FacesRenderer</code> annotation.</p>
</div>
<div class="paragraph">
<p>The <code>facelet-taglib</code> element must also include a <code>namespace</code> element,
which defines the namespace to be specified in pages that use the custom
component. See <a href="#BNATT">Using a Custom Component</a>
for information on specifying the namespace in pages.</p>
</div>
<div class="paragraph">
<p>The TLD file is located in the <code>WEB-INF</code> directory. In addition, an
entry is included in the web deployment descriptor (<code>web.xml</code>) to
identify the custom tag library descriptor file, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    <span class="tag">&lt;context-param&gt;</span>
        <span class="tag">&lt;param-name&gt;</span>javax.faces.FACELETS_LIBRARIES<span class="tag">&lt;/param-name&gt;</span>
        <span class="tag">&lt;param-value&gt;</span>/WEB-INF/bookstore.taglib.xml<span class="tag">&lt;/param-value&gt;</span>
    <span class="tag">&lt;/context-param&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BNATT"></a><a id="using-a-custom-component"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_using_a_custom_component">9.10. Using a Custom Component</h3>
<div class="paragraph">
<p>To use a custom component in a page, you add the custom tag associated
with the component to the page.</p>
</div>
<div class="paragraph">
<p>As explained in <a href="#BNAWN">Defining the Custom
Component Tag in a Tag Library Descriptor</a>, you must ensure that the TLD
that defines any custom tags is packaged in the application if you
intend to use the tags in your pages. TLD files are stored in the
<code>WEB-INF/</code> directory or subdirectory of the WAR file or in the
<code>META-INF/</code> directory or subdirectory of a tag library packaged in a JAR
file.</p>
</div>
<div class="paragraph">
<p>You also need to include a namespace declaration in the page so that the
page has access to the tags. The custom tags for the Duke&#8217;s Bookstore
case study are defined in <code>bookstore.taglib.xml</code>. The <code>ui:composition</code>
tag on the <code>index.xhtml</code> page declares the namespace defined in the tag
library:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;ui:composition</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">xmlns:ui</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/facelets</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">xmlns:h</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/html</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">xmlns:f</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/jsf/core</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">xmlns:bookstore</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://dukesbookstore</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">template</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./bookstoreTemplate.xhtml</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, to use a custom component in a page, you add the component&#8217;s
tag to the page.</p>
</div>
<div class="paragraph">
<p>The Duke&#8217;s Bookstore case study includes a custom image map component on
the <code>index.xhtml</code> page. This component allows you to select a book by
clicking on a region of the image map:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
<span class="tag">&lt;h:graphicImage</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mapImage</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">book_all.jpg</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">library</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">images</span>
                <span class="content">alt=</span><span class="delimiter">&quot;</span></span><span class="error">#</span><span class="error">{</span><span class="attribute-name">bundle.chooseLocale</span><span class="error">}</span><span class="error">&quot;</span>
                <span class="attribute-name">usemap</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#bookMap</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;bookstore:map</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookMap</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">current</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">map1</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">immediate</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookstore</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:actionListener</span>
        <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jakarta.tutorial.dukesbookstore.listeners.MapBookChangeListener</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;bookstore:area</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">map1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Book201}</span><span class="delimiter">&quot;</span></span>
                    <span class="attribute-name">onmouseover</span>=<span class="string"><span class="delimiter">&quot;</span>resources/images/book_201.jpg<span class="delimiter">&quot;</span></span>
                    <span class="attribute-name">onmouseout</span>=<span class="string"><span class="delimiter">&quot;</span>resources/images/book_all.jpg<span class="delimiter">&quot;</span></span>
                    <span class="attribute-name">targetImage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mapImage</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    ...
    <span class="tag">&lt;bookstore:area</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">map6</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Book207}</span><span class="delimiter">&quot;</span></span>
                    <span class="attribute-name">onmouseover</span>=<span class="string"><span class="delimiter">&quot;</span>resources/images/book_207.jpg<span class="delimiter">&quot;</span></span>
                    <span class="attribute-name">onmouseout</span>=<span class="string"><span class="delimiter">&quot;</span>resources/images<span class="comment">//book_all.jpg</span><span class="delimiter">&quot;</span></span>
                    <span class="attribute-name">targetImage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mapImage</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/bookstore:map&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The standard <code>h:graphicImage</code> tag associates an image (<code>book_all.jpg</code>)
with an image map that is referenced in the <code>usemap</code> attribute value.</p>
</div>
<div class="paragraph">
<p>The custom <code>bookstore:map</code> tag that represents the custom component,
<code>MapComponent</code>, specifies the image map and contains a set of
<code>bookstore:area</code> tags. Each custom <code>bookstore:area</code> tag represents a
custom <code>AreaComponent</code> and specifies a region of the image map.</p>
</div>
<div class="paragraph">
<p>On the page, the <code>onmouseover</code> and <code>onmouseout</code> attributes specify the
image that is displayed when the user performs the actions described by
the attributes. The custom renderer also renders an <code>onclick</code> attribute.</p>
</div>
<div class="paragraph">
<p>In the rendered HTML page, the <code>onmouseover</code>, <code>onmouseout</code>, and
<code>onclick</code> attributes define which JavaScript code is executed when these
events occur. When the user moves the mouse over a region, the
<code>onmouseover</code> function associated with the region displays the map with
that region highlighted. When the user moves the mouse out of a region,
the <code>onmouseout</code> function redisplays the original image. When the user
clicks a region, the <code>onclick</code> function sets the value of a hidden
<code>input</code> tag to the ID of the selected area and submits the page.</p>
</div>
<div class="paragraph">
<p>When the custom renderer renders these attributes in HTML, it also
renders the JavaScript code. The custom renderer also renders the entire
<code>onclick</code> attribute rather than letting the page author set it.</p>
</div>
<div class="paragraph">
<p>The custom renderer that renders the HTML <code>map</code> tag also renders a
hidden <code>input</code> component that holds the current area. The server-side
objects retrieve the value of the hidden <code>input</code> field and set the
locale in the <code>FacesContext</code> instance according to which region was
selected.</p>
</div>
<div class="paragraph">
<p><a id="BNAUS"></a><a id="creating-and-using-a-custom-converter"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_and_using_a_custom_converter">9.11. Creating and Using a Custom Converter</h3>
<div class="paragraph">
<p>A Jakarta Server Faces converter class converts strings to objects and
objects to strings as required. Several standard converters are provided
by Jakarta Server Faces for this purpose. See
<a href="#BNAST">Using the Standard Converters</a> for more
information on these included converters.</p>
</div>
<div class="paragraph">
<p>As explained in <a href="#BNAQI">Conversion Model</a>, if the
standard converters included with Jakarta Server Faces cannot perform the
data conversion that you need, you can create a custom converter to
perform this specialized conversion. This implementation, at a minimum,
must define how to convert data both ways between the two views of the
data described in <a href="#BNAQI">Conversion Model</a>.</p>
</div>
<div class="paragraph">
<p>All custom converters must implement the <code>javax.faces.convert.Converter</code>
interface. This section explains how to implement this interface to
perform a custom data conversion.</p>
</div>
<div class="paragraph">
<p>The Duke&#8217;s Bookstore case study uses a custom <code>Converter</code>
implementation, located in
tut-install`/examples/case-studies/dukes-bookstore/src/java/dukesbookstore/converters/CreditCardConverter.java`,
to convert the data entered in the Credit Card Number field on the
<code>bookcashier.xhtml</code> page. It strips blanks and hyphens from the text
string and formats it so that a blank space separates every four
characters.</p>
</div>
<div class="paragraph">
<p>Another common use case for a custom converter is in a list for a
nonstandard object type. In the Duke&#8217;s Tutoring case study, the
<code>Student</code> and <code>Guardian</code> entities require a custom converter so that
they can be converted to and from a <code>UISelectItems</code> input component.</p>
</div>
<div class="paragraph">
<p><a id="GLPHB"></a><a id="creating-a-custom-converter"></a></p>
</div>
<div class="sect3">
<h4 id="_creating_a_custom_converter">9.11.1. Creating a Custom Converter</h4>
<div class="paragraph">
<p>The <code>CreditCardConverter</code> custom converter class is created as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@FacesConverter</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">ccno</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">CreditCardConverter</span> <span class="directive">implements</span> Converter {
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@FacesConverter</code> annotation registers the custom converter class as
a converter with the name of <code>ccno</code> with the Jakarta Server Faces
implementation. Alternatively, you can register the converter with
entries in the application configuration resource file, as shown in
<a href="#BNAXE">Registering a Custom Converter</a>.</p>
</div>
<div class="paragraph">
<p>To define how the data is converted from the presentation view to the
model view, the <code>Converter</code> implementation must implement the
<code>getAsObject(FacesContext, UIComponent, String)</code> method from the
<code>Converter</code> interface. Here is the implementation of this method from
<code>CreditCardConverter</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="predefined-type">Object</span> getAsObject(FacesContext context,
        UIComponent component, <span class="predefined-type">String</span> newValue)
        <span class="directive">throws</span> ConverterException {

    <span class="keyword">if</span> (newValue.isEmpty()) {
        <span class="keyword">return</span> <span class="predefined-constant">null</span>;
    }
    <span class="comment">// Since this is only a String to String conversion,</span>
    <span class="comment">// this conversion does not throw ConverterException.</span>

    <span class="predefined-type">String</span> convertedValue = newValue.trim();
    <span class="keyword">if</span> ( (convertedValue.contains(<span class="string"><span class="delimiter">&quot;</span><span class="content">-</span><span class="delimiter">&quot;</span></span>)) || (convertedValue.contains(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>))) {
        <span class="type">char</span><span class="type">[]</span> input = convertedValue.toCharArray();
        <span class="predefined-type">StringBuilder</span> builder = <span class="keyword">new</span> <span class="predefined-type">StringBuilder</span>(input.length);
        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="integer">0</span>; i &lt; input.length; ++i) {
            <span class="keyword">if</span> ((input[i] == <span class="string"><span class="delimiter">'</span><span class="content">-</span><span class="delimiter">'</span></span>) || (input[i] == <span class="string"><span class="delimiter">'</span><span class="content"> </span><span class="delimiter">'</span></span>)) {
            } <span class="keyword">else</span> {
                builder.append(input[i]);
            }
        }
        convertedValue = builder.toString();
    }
    <span class="keyword">return</span> convertedValue;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>During the Apply Request Values phase, when the components' <code>decode</code>
methods are processed, the Jakarta Server Faces implementation looks up the
component&#8217;s local value in the request and calls the <code>getAsObject</code>
method. When calling this method, the Jakarta Server Faces implementation
passes in the current <code>FacesContext</code> instance, the component whose data
needs conversion, and the local value as a <code>String</code>. The method then
writes the local value to a character array, trims the hyphens and
blanks, adds the rest of the characters to a <code>String</code>, and returns the
<code>String</code>.</p>
</div>
<div class="paragraph">
<p>To define how the data is converted from the model view to the
presentation view, the <code>Converter</code> implementation must implement the
<code>getAsString(FacesContext, UIComponent, Object)</code> method from the
<code>Converter</code> interface. Here is an implementation of this method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="predefined-type">String</span> getAsString(FacesContext context,
        UIComponent component, <span class="predefined-type">Object</span> value)
        <span class="directive">throws</span> ConverterException {

    <span class="predefined-type">String</span> inputVal = <span class="predefined-constant">null</span>;
    <span class="keyword">if</span> ( value == <span class="predefined-constant">null</span> ) {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;
    }
    <span class="comment">// value must be of a type that can be cast to a String.</span>
    <span class="keyword">try</span> {
        inputVal = (<span class="predefined-type">String</span>)value;
    } <span class="keyword">catch</span> (<span class="exception">ClassCastException</span> ce) {
        FacesMessage errMsg = <span class="keyword">new</span> FacesMessage(CONVERSION_ERROR_MESSAGE_ID);
        FacesContext.getCurrentInstance().addMessage(<span class="predefined-constant">null</span>, errMsg);
        <span class="keyword">throw</span> <span class="keyword">new</span> ConverterException(errMsg.getSummary());
    }
    <span class="comment">// insert spaces after every four characters for better</span>
    <span class="comment">// readability if they are not already present.</span>
    <span class="type">char</span><span class="type">[]</span> input = inputVal.toCharArray();
    <span class="predefined-type">StringBuilder</span> builder = <span class="keyword">new</span> <span class="predefined-type">StringBuilder</span>(input.length + <span class="integer">3</span>);
    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="integer">0</span>; i &lt; input.length; ++i) {
        <span class="keyword">if</span> ((i % <span class="integer">4</span>) == <span class="integer">0</span> &amp;&amp; (i != <span class="integer">0</span>)) {
            <span class="keyword">if</span> ({input[i] != <span class="string"><span class="delimiter">'</span><span class="content"> </span><span class="delimiter">'</span></span>) || (input[i] != <span class="string"><span class="delimiter">'</span><span class="content">-</span><span class="delimiter">'</span></span>)){
                builder.append(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>);
                <span class="comment">// if there are any &quot;-&quot;'s convert them to blanks.</span>
            } <span class="keyword">else</span> <span class="keyword">if</span> (input[i] == <span class="string"><span class="delimiter">'</span><span class="content">-</span><span class="delimiter">'</span></span>) {
                builder.append(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>);
            }
         }
         builder.append(input[i]);
    }
    <span class="predefined-type">String</span> convertedValue = builder.toString();
    <span class="keyword">return</span> convertedValue;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>During the Render Response phase, in which the components' <code>encode</code>
methods are called, the Jakarta Server Faces implementation calls the
<code>getAsString</code> method in order to generate the appropriate output. When
the Jakarta Server Faces implementation calls this method, it passes in the
current <code>FacesContext</code>, the <code>UIComponent</code> whose value needs to be
converted, and the bean value to be converted. Because this converter
does a <code>String</code>-to-<code>String</code> conversion, this method can cast the bean
value to a <code>String</code>.</p>
</div>
<div class="paragraph">
<p>If the value cannot be converted to a <code>String</code>, the method throws an
exception, passing an error message from the resource bundle that is
registered with the application.
<a href="#BNAXB">Registering Application Messages</a>
explains how to register custom error messages with the application.</p>
</div>
<div class="paragraph">
<p>If the value can be converted to a <code>String</code>, the method reads the
<code>String</code> to a character array and loops through the array, adding a
space after every four characters.</p>
</div>
<div class="paragraph">
<p>You can also create a custom converter with a <code>@FacesConverter</code>
annotation that specifies the <code>forClass</code> attribute, as shown in the
following example from the Duke&#8217;s Tutoring case study:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@FacesConverter</span>(forClass=Guardian.class, value=<span class="string"><span class="delimiter">&quot;</span><span class="content">guardian</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">GuardianConverter</span> <span class="directive">extends</span> EntityConverter <span class="directive">implements</span> Converter { ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>forClass</code> attribute registers the converter as the default
converter for the <code>Guardian</code> class. Therefore, whenever that class is
specified by a <code>value</code> attribute of an input component, the converter is
invoked automatically.</p>
</div>
<div class="paragraph">
<p>A converter class can be a separate Java POJO class, as in the Duke&#8217;s
Bookstore case study. If it needs to access objects defined in a managed
bean class, however, it can be a subclass of a Jakarta Server Faces managed
bean, as in the <code>address-book</code> persistence example, in which the
converters use an enterprise bean that is injected into the managed bean
class.</p>
</div>
<div class="paragraph">
<p><a id="BNATU"></a><a id="using-a-custom-converter"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_a_custom_converter">9.11.2. Using a Custom Converter</h4>
<div class="paragraph">
<p>To apply the data conversion performed by a custom converter to a
particular component&#8217;s value, you must do one of the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reference the converter from the component tag&#8217;s <code>converter</code>
attribute.</p>
</li>
<li>
<p>Nest an <code>f:converter</code> tag inside the component&#8217;s tag and reference the
custom converter from one of the <code>f:converter</code> tag&#8217;s attributes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you are using the component tag&#8217;s <code>converter</code> attribute, this
attribute must reference the <code>Converter</code> implementation&#8217;s identifier or
the fully-qualified class name of the converter. <a href="#BNAUS">Creating
and Using a Custom Converter</a> explains how to implement a custom
converter.</p>
</div>
<div class="paragraph">
<p>The identifier for the credit card converter class is <code>ccno</code>, the value
specified in the <code>@FacesConverter</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@FacesConverter</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">ccno</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">CreditCardConverter</span> <span class="directive">implements</span> Converter {
    ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Therefore, the <code>CreditCardConverter</code> instance can be registered on the
<code>ccno</code> component as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ccno</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">19</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">converter</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ccno</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.creditCardNumber}</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">requiredMessage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ReqCreditCard}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    ...
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>By setting the <code>converter</code> attribute of a component&#8217;s tag to the
converter&#8217;s identifier or its class name, you cause that component&#8217;s
local value to be automatically converted according to the rules
specified in the <code>Converter</code> implementation.</p>
</div>
<div class="paragraph">
<p>Instead of referencing the converter from the component tag&#8217;s
<code>converter</code> attribute, you can reference the converter from an
<code>f:converter</code> tag nested inside the component&#8217;s tag. To reference the
custom converter using the <code>f:converter</code> tag, you do one of the
following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set the <code>f:converter</code> tag&#8217;s <code>converterId</code> attribute to the <code>Converter</code>
implementation&#8217;s identifier defined in the <code>@FacesConverter</code> annotation
or in the application configuration resource file. This method is shown
in <code>bookcashier.xhtml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ccno</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">19</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.creditCardNumber}</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">requiredMessage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ReqCreditCard}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:converter</span> <span class="attribute-name">converterId</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ccno</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;f:validateRegex</span>
       <span class="attribute-name">pattern</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">\d{16}|\d{4} \d{4} \d{4} \d{4}|\d{4}-\d{4}-\d{4}-\d{4}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p>Bind the <code>Converter</code> implementation to a managed bean property using
the <code>f:converter</code> tag&#8217;s <code>binding</code> attribute, as described in
<a href="#BNATM">Binding Converters, Listeners, and
Validators to Managed Bean Properties</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Jakarta Server Faces implementation calls the converter&#8217;s <code>getAsObject</code>
method to strip spaces and hyphens from the input value. The
<code>getAsString</code> method is called when the <code>bookcashier.xhtml</code> page is
redisplayed; this happens if the user orders more than $100 worth of
books.</p>
</div>
<div class="paragraph">
<p>In the Duke&#8217;s Tutoring case study, each converter is registered as the
converter for a particular class. The converter is automatically invoked
whenever that class is specified by a <code>value</code> attribute of an input
component. In the following example, the <code>itemValue</code> attribute
(highlighted in bold) calls the converter for the <code>Guardian</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:selectManyListbox</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">selectGuardiansMenu</span><span class="delimiter">&quot;</span></span>
                     <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle['action.add.guardian']}</span><span class="delimiter">&quot;</span></span>
                     <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{guardianManager.selectedGuardians}</span><span class="delimiter">&quot;</span></span>
                     <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span>
                     <span class="attribute-name">converter</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">guardian</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:selectItems</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{guardianManager.allGuardians}</span><span class="delimiter">&quot;</span></span>
                   <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">selectedGuardian</span><span class="delimiter">&quot;</span></span>
                   <span class="attribute-name">itemLabel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{selectedGuardian.name}</span><span class="delimiter">&quot;</span></span>
                   <span class="attribute-name">itemValue</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{selectedGuardian}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:selectManyListbox&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BNAUW"></a><a id="creating-and-using-a-custom-validator"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_and_using_a_custom_validator">9.12. Creating and Using a Custom Validator</h3>
<div class="paragraph">
<p>If the standard validators or Bean Validation don&#8217;t perform the
validation checking you need, you can create a custom validator to
validate user input. As explained in
<a href="#BNAQK">Validation Model</a>, there are two ways to
implement validation code.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Implement a managed bean method that performs the validation.</p>
</li>
<li>
<p>Provide an implementation of the <code>javax.faces.validator.Validator</code>
interface to perform the validation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#BNAVE">Writing a Method to Perform Validation</a>
explains how to implement a managed bean method to perform validation.
The rest of this section explains how to implement the <code>Validator</code>
interface.</p>
</div>
<div class="paragraph">
<p>If you choose to implement the <code>Validator</code> interface and you want to
allow the page author to configure the validator&#8217;s attributes from the
page, you also must specify a custom tag for registering the validator
on a component.</p>
</div>
<div class="paragraph">
<p>If you prefer to configure the attributes in the <code>Validator</code>
implementation, you can forgo specifying a custom tag and instead let
the page author register the validator on a component using the
<code>f:validator</code> tag, as described in <a href="#BNATV">Using a Custom
Validator</a>.</p>
</div>
<div class="paragraph">
<p>You can also create a managed bean property that accepts and returns the
<code>Validator</code> implementation you create, as described in
<a href="#BNAUL">Writing Properties Bound to Converters,
Listeners, or Validators</a>. You can use the <code>f:validator</code> tag&#8217;s binding
attribute to bind the <code>Validator</code> implementation to the managed bean
property.</p>
</div>
<div class="paragraph">
<p>Usually, you will want to display an error message when data fails
validation. You need to store these error messages in a resource bundle.</p>
</div>
<div class="paragraph">
<p>After creating the resource bundle, you have two ways to make the
messages available to the application. You can queue the error messages
onto the <code>FacesContext</code> programmatically, or you can register the error
messages in the application configuration resource file, as explained in
<a href="#BNAXB">Registering Application Messages</a>.</p>
</div>
<div class="paragraph">
<p>For example, an e-commerce application might use a general-purpose
custom validator called <code>FormatValidator.java</code> to validate input data
against a format pattern that is specified in the custom validator tag.
This validator would be used with a Credit Card Number field on a
Facelets page. Here is the custom validator tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;mystore:formatValidator
 formatPatterns=<span class="string"><span class="delimiter">&quot;</span><span class="content">9999999999999999|9999 9999 9999 9999|9999-9999-9999-9999</span><span class="delimiter">&quot;</span></span>/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>According to this validator, the data entered in the field must be one
of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A 16-digit number with no spaces</p>
</li>
<li>
<p>A 16-digit number with a space between every four digits</p>
</li>
<li>
<p>A 16-digit number with hyphens between every four digits</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>f:validateRegex</code> tag makes a custom validator unnecessary in this
situation. However, the rest of this section describes how this
validator would be implemented and how to specify a custom tag so that
the page author could register the validator on a component.</p>
</div>
<div class="paragraph">
<p><a id="BNAUX"></a><a id="implementing-the-validator-interface"></a></p>
</div>
<div class="sect3">
<h4 id="_implementing_the_validator_interface">9.12.1. Implementing the Validator Interface</h4>
<div class="paragraph">
<p>A <code>Validator</code> implementation must contain a constructor, a set of
accessor methods for any attributes on the tag, and a <code>validate</code> method,
which overrides the <code>validate</code> method of the <code>Validator</code> interface.</p>
</div>
<div class="paragraph">
<p>The hypothetical <code>FormatValidator</code> class also defines accessor methods
for setting the <code>formatPatterns</code> attribute, which specifies the
acceptable format patterns for input into the fields. The setter method
calls the <code>parseFormatPatterns</code> method, which separates the components
of the pattern string into a string array, <code>formatPatternsList</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">String</span> getFormatPatterns() {
    <span class="keyword">return</span> (<span class="local-variable">this</span>.formatPatterns);
}
<span class="directive">public</span> <span class="type">void</span> setFormatPatterns(<span class="predefined-type">String</span> formatPatterns) {
    <span class="local-variable">this</span>.formatPatterns = formatPatterns;
    parseFormatPatterns();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to defining accessor methods for the attributes, the class
overrides the <code>validate</code> method of the <code>Validator</code> interface. This
method validates the input and also accesses the custom error messages
to be displayed when the <code>String</code> is invalid.</p>
</div>
<div class="paragraph">
<p>The <code>validate</code> method performs the actual validation of the data. It
takes the <code>FacesContext</code> instance, the component whose data needs to be
validated, and the value that needs to be validated. A validator can
validate only data of a component that implements
<code>javax.faces.component.EditableValueHolder</code>.</p>
</div>
<div class="paragraph">
<p>Here is an implementation of the <code>validate</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@FacesValidator</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">FormatValidator</span> <span class="directive">implements</span> <span class="predefined-type">Validator</span>, StateHolder {
    ...
    public <span class="type">void</span> validate(FacesContext context, UIComponent component,
                         <span class="predefined-type">Object</span> toValidate) {

        <span class="type">boolean</span> valid = <span class="predefined-constant">false</span>;
        <span class="predefined-type">String</span> value = <span class="predefined-constant">null</span>;
        <span class="keyword">if</span> ((context == <span class="predefined-constant">null</span>) || (component == <span class="predefined-constant">null</span>)) {
            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">NullPointerException</span>();
        }
        <span class="keyword">if</span> (!(component <span class="keyword">instanceof</span> UIInput)) {
            <span class="keyword">return</span>;
        }
        <span class="keyword">if</span> ( <span class="predefined-constant">null</span> == formatPatternsList || <span class="predefined-constant">null</span> == toValidate) {
            <span class="keyword">return</span>;
        }
        value = toValidate.toString();
        <span class="comment">// validate the value against the list of valid patterns.</span>
        <span class="predefined-type">Iterator</span> patternIt = formatPatternsList.iterator();
        <span class="keyword">while</span> (patternIt.hasNext()) {
            valid = isFormatValid(
                ((<span class="predefined-type">String</span>)patternIt.next()), value);
            <span class="keyword">if</span> (valid) {
                <span class="keyword">break</span>;
            }
        }
        <span class="keyword">if</span> ( !valid ) {
            FacesMessage errMsg =
                <span class="keyword">new</span> FacesMessage(FORMAT_INVALID_MESSAGE_ID);
            FacesContext.getCurrentInstance().addMessage(<span class="predefined-constant">null</span>, errMsg);
            <span class="keyword">throw</span> <span class="keyword">new</span> ValidatorException(errMsg);
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@FacesValidator</code> annotation registers the <code>FormatValidator</code> class
as a validator with the Jakarta Server Faces implementation. The <code>validate</code>
method gets the local value of the component and converts it to a
<code>String</code>. It then iterates over the <code>formatPatternsList</code> list, which is
the list of acceptable patterns that was parsed from the
<code>formatPatterns</code> attribute of the custom validator tag.</p>
</div>
<div class="paragraph">
<p>While iterating over the list, this method checks the pattern of the
component&#8217;s local value against the patterns in the list. If the pattern
of the local value does not match any pattern in the list, this method
generates an error message. It then creates a
<code>javax.faces.application.FacesMessage</code> and queues it on the
<code>FacesContext</code> for display, using a <code>String</code> that represents the key in
the <code>Properties</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> FORMAT_INVALID_MESSAGE_ID =
     <span class="string"><span class="delimiter">&quot;</span><span class="content">FormatInvalid</span><span class="delimiter">&quot;</span></span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, the method passes the message to the constructor of
<code>javax.faces.validator.ValidatorException</code>.</p>
</div>
<div class="paragraph">
<p>When the error message is displayed, the format pattern will be
substituted for the <code>{0}</code> in the error message, which, in English, is as
follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Input must match one of the following patterns: {<span class="integer">0</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You may wish to save and restore state for your validator, although
state saving is not usually necessary. To do so, you will need to
implement the <code>StateHolder</code> interface as well as the <code>Validator</code>
interface. To implement <code>StateHolder</code>, you would need to implement its
four methods: <code>saveState(FacesContext)</code>,
<code>restoreState(FacesContext, Object)</code>, <code>isTransient</code>, and
<code>setTransient(boolean)</code>. See <a href="#BNAVZ">Saving and
Restoring State</a> for more information.</p>
</div>
<div class="paragraph">
<p><a id="BNAUY"></a><a id="specifying-a-custom-tag"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_specifying_a_custom_tag">9.12.2. Specifying a Custom Tag</h4>
<div class="paragraph">
<p>If you implemented a <code>Validator</code> interface rather than implementing a
managed bean method that performs the validation, you need to do one of
the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Allow the page author to specify the <code>Validator</code> implementation to use
with the <code>f:validator</code> tag. In this case, the <code>Validator</code> implementation
must define its own properties. <a href="#BNATV">Using a Custom Validator</a>
explains how to use the <code>f:validator</code> tag.</p>
</li>
<li>
<p>Specify a custom tag that provides attributes for configuring the
properties of the validator from the page.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To create a custom tag, you need to add the tag to the tag library
descriptor for the application, <code>bookstore.taglib.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;tag&gt;</span>
    <span class="tag">&lt;tag-name&gt;</span>validator<span class="tag">&lt;/tag-name&gt;</span>
    <span class="tag">&lt;validator&gt;</span>
        <span class="tag">&lt;validator-id&gt;</span>formatValidator<span class="tag">&lt;/validator-id&gt;</span>
        <span class="tag">&lt;validator-class&gt;</span>
            dukesbookstore.validators.FormatValidator
        <span class="tag">&lt;/validator-class&gt;</span>
    <span class="tag">&lt;/validator&gt;</span>
<span class="tag">&lt;/tag&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>tag-name</code> element defines the name of the tag as it must be used in
a Facelets page. The <code>validator-id</code> element identifies the custom
validator. The <code>validator-class</code> element wires the custom tag to its
implementation class.</p>
</div>
<div class="paragraph">
<p><a href="#BNATV">Using a Custom Validator</a> explains how to use the custom
validator tag on the page.</p>
</div>
<div class="paragraph">
<p><a id="BNATV"></a><a id="using-a-custom-validator"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_a_custom_validator">9.12.3. Using a Custom Validator</h4>
<div class="paragraph">
<p>To register a custom validator on a component, you must do one of the
following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Nest the validator&#8217;s custom tag inside the tag of the component whose
value you want to be validated.</p>
</li>
<li>
<p>Nest the standard <code>f:validator</code> tag within the tag of the component
and reference the custom <code>Validator</code> implementation from the
<code>f:validator</code> tag.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is a hypothetical custom <code>formatValidator</code> tag for the Credit Card
Number field, nested within the <code>h:inputText</code> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ccno</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">19</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">...</span>
  <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;mystore:formatValidator</span>
  <span class="attribute-name">formatPatterns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">9999999999999999|9999 9999 9999 9999|9999-9999-9999-9999</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span>
<span class="tag">&lt;h:message</span> <span class="attribute-name">styleClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">validationMessage</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ccno</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This tag validates the input of the <code>ccno</code> field against the patterns
defined by the page author in the <code>formatPatterns</code> attribute.</p>
</div>
<div class="paragraph">
<p>You can use the same custom validator for any similar component by
simply nesting the custom validator tag within the component tag.</p>
</div>
<div class="paragraph">
<p>If the application developer who created the custom validator prefers to
configure the attributes in the <code>Validator</code> implementation rather than
allow the page author to configure the attributes from the page, the
developer will not create a custom tag for use with the validator.</p>
</div>
<div class="paragraph">
<p>In this case, the page author must nest the <code>f:validator</code> tag inside the
tag of the component whose data needs to be validated. Then the page
author needs to do one of the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set the <code>f:validator</code> tag&#8217;s <code>validatorId</code> attribute to the ID of the
validator that is defined in the application configuration resource
file.</p>
</li>
<li>
<p>Bind the custom <code>Validator</code> implementation to a managed bean property
using the <code>f:validator</code> tag&#8217;s <code>binding</code> attribute, as described in
<a href="#BNATM">Binding Converters, Listeners, and
Validators to Managed Bean Properties</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following tag registers a hypothetical validator on a component
using an <code>f:validator</code> tag and references the ID of the validator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{CustomerBean.name}</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">10</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">...</span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:validator</span> <span class="attribute-name">validatorId</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">customValidator</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    ...
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BNATG"></a><a id="binding-component-values-and-instances-to-managed-bean-properties"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_binding_component_values_and_instances_to_managed_bean_properties">9.13. Binding Component Values and Instances to Managed Bean Properties</h3>
<div class="paragraph">
<p>A component tag can wire its data to a managed bean by one of the
following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Binding its component&#8217;s value to a bean property</p>
</li>
<li>
<p>Binding its component&#8217;s instance to a bean property</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To bind a component&#8217;s value to a managed bean property, a component
tag&#8217;s <code>value</code> attribute uses an EL value expression. To bind a component
instance to a bean property, a component tag&#8217;s <code>binding</code> attribute uses
a value expression.</p>
</div>
<div class="paragraph">
<p>When a component instance is bound to a managed bean property, the
property holds the component&#8217;s local value. Conversely, when a
component&#8217;s value is bound to a managed bean property, the property
holds the value stored in the managed bean. This value is updated with
the local value during the Update Model Values phase of the lifecycle.
There are advantages to both of these methods.</p>
</div>
<div class="paragraph">
<p>Binding a component instance to a bean property has the following
advantages.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The managed bean can programmatically modify component attributes.</p>
</li>
<li>
<p>The managed bean can instantiate components rather than let the page
author do so.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Binding a component&#8217;s value to a bean property has the following
advantages.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The page author has more control over the component attributes.</p>
</li>
<li>
<p>The managed bean has no dependencies on the Jakarta Server Faces API (such
as the component classes), allowing for greater separation of the
presentation layer from the model layer.</p>
</li>
<li>
<p>The Jakarta Server Faces implementation can perform conversions on the
data based on the type of the bean property without the developer
needing to apply a converter.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In most situations, you will bind a component&#8217;s value rather than its
instance to a bean property. You&#8217;ll need to use a component binding only
when you need to change one of the component&#8217;s attributes dynamically.
For example, if an application renders a component only under certain
conditions, it can set the component&#8217;s <code>rendered</code> property accordingly
by accessing the property to which the component is bound.</p>
</div>
<div class="paragraph">
<p>When referencing the property using the component tag&#8217;s <code>value</code>
attribute, you need to use the proper syntax. For example, suppose a
managed bean called <code>MyBean</code> has this <code>int</code> property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">protected</span> <span class="type">int</span> currentOption = <span class="predefined-constant">null</span>;
<span class="directive">public</span> <span class="type">int</span> getCurrentOption(){...}
<span class="directive">public</span> <span class="type">void</span> setCurrentOption(<span class="type">int</span> option){...}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>value</code> attribute that references this property must have this
value-binding expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="error">#</span>{myBean.currentOption}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to binding a component&#8217;s value to a bean property, the
<code>value</code> attribute can specify a literal value or can map the component&#8217;s
data to any primitive (such as <code>int</code>), structure (such as an array), or
collection (such as a list), independent of a JavaBeans component.
<a href="#BNATH">Table 15-3</a> lists some example value-binding expressions
that you can use with the <code>value</code> attribute.</p>
</div>
<div class="paragraph">
<p><a id="sthref78"></a><a id="BNATH"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 15-3 Examples of Value-Binding Expressions</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 60%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Value</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Expression</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cart.numberOfItems&gt; 0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A property initialized from a context initialization parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>initParam.quantity</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A bean property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cashierBean.name</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A value in an array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>books[3]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A value in a collection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>books["fiction"]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A property of an object in an array of objects</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>books[3].price</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The next two sections explain how to use the <code>value</code> attribute to bind a
component&#8217;s value to a bean property or other data objects and how to
use the <code>binding</code> attribute to bind a component instance to a bean
property.</p>
</div>
<div class="paragraph">
<p><a id="BNATI"></a><a id="binding-a-component-value-to-a-property"></a></p>
</div>
<div class="sect3">
<h4 id="_binding_a_component_value_to_a_property">9.13.1. Binding a Component Value to a Property</h4>
<div class="paragraph">
<p>To bind a component&#8217;s value to a managed bean property, you specify the
name of the bean and the property using the <code>value</code> attribute.</p>
</div>
<div class="paragraph">
<p>This means that the first part of the EL value expression must match the
name of the managed bean up to the first period (<code>.</code>) and the part of
the value expression after the period must match the property of the
managed bean.</p>
</div>
<div class="paragraph">
<p>For example, in the Duke&#8217;s Bookstore case study, the <code>h:dataTable</code> tag
in <code>bookcatalog.xhtml</code> sets the value of the component to the value of
the <code>books</code> property of the <code>BookstoreBean</code> backing bean, whose name is
<code>store</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:dataTable</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">books</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{store.books}</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">headerClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list-header</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">styleClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list-background</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">rowClasses</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list-row-even, list-row-odd</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">border</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">summary</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.BookCatalog}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The value is obtained by calling the backing bean&#8217;s <code>getBooks</code> method,
which in turn calls the <code>BookRequestBean</code> session bean&#8217;s <code>getBooks</code>
method.</p>
</div>
<div class="paragraph">
<p>If you use the application configuration resource file to configure
managed beans instead of defining them in managed bean classes, the name
of the bean in the <code>value</code> expression must match the <code>managed-bean-name</code>
element of the managed bean declaration up to the first period (<code>.</code>) in
the expression. Similarly, the part of the value expression after the
period must match the name specified in the corresponding
<code>property-name</code> element in the application configuration resource file.</p>
</div>
<div class="paragraph">
<p>For example, consider this managed bean configuration, which configures
the <code>ImageArea</code> bean corresponding to the top-left book in the image map
on the <code>index.html</code> page of the Duke&#8217;s Bookstore case study:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;managed-bean</span> <span class="attribute-name">eager</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    ...
    <span class="tag">&lt;managed-bean-name&gt;</span>Book201<span class="tag">&lt;/managed-bean-name&gt;</span>
    <span class="tag">&lt;managed-bean-class&gt;</span>dukesbookstore.model.ImageArea<span class="tag">&lt;/managed-bean-class&gt;</span>
    <span class="tag">&lt;managed-bean-scope&gt;</span>application<span class="tag">&lt;/managed-bean-scope&gt;</span>
    <span class="tag">&lt;managed-property&gt;</span>
        ...
        <span class="tag">&lt;property-name&gt;</span>shape<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;value&gt;</span>rect<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/managed-property&gt;</span>
    <span class="tag">&lt;managed-property&gt;</span>
        ...
        <span class="tag">&lt;property-name&gt;</span>alt<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;value&gt;</span>Duke<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/managed-property&gt;</span>
    ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example configures a bean called <code>Book201</code>, which has several
properties, one of which is called <code>shape</code>.</p>
</div>
<div class="paragraph">
<p>Although the <code>bookstore:area</code> tags on the <code>index.xhtml</code> page do not bind
to an <code>ImageArea</code> property (they bind to the bean itself), you could
refer to the property using a value expression from the <code>value</code>
attribute of the component&#8217;s tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{Book201.shape}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#BNAWQ">Configuring Managed Beans</a> for
information on how to configure beans in the application configuration
resource file.</p>
</div>
<div class="paragraph">
<p><a id="BNATJ"></a><a id="binding-a-component-value-to-an-implicit-object"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_binding_a_component_value_to_an_implicit_object">9.13.2. Binding a Component Value to an Implicit Object</h4>
<div class="paragraph">
<p>One external data source that a <code>value</code> attribute can refer to is an
implicit object.</p>
</div>
<div class="paragraph">
<p>The <code>bookreceipt.xhtml</code> page of the Duke&#8217;s Bookstore case study has a
reference to an implicit object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputFormat</span> <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">thanks</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ThankYouParam}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:param</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{sessionScope.name}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputFormat&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This tag gets the name of the customer from the session scope and
inserts it into the parameterized message at the key <code>ThankYouParam</code>
from the resource bundle. For example, if the name of the customer is
Gwen Canigetit, this tag will render:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Thank you, Gwen Canigetit, <span class="keyword">for</span> purchasing your books from us.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Retrieving values from other implicit objects is done in a similar way
to the example shown in this section. <a href="#BNATK">Table 15-4</a> lists the
implicit objects to which a value attribute can refer. All of the
implicit objects, except for the scope objects, are read-only and
therefore should not be used as values for a <code>UIInput</code> component.</p>
</div>
<div class="paragraph">
<p><a id="sthref79"></a><a id="BNATK"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 15-4 Implicit Objects</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 75%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Implicit Object</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>What It Is</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>applicationScope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <code>Map</code> of the application scope attribute values,
keyed by attribute name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cookie</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <code>Map</code> of the cookie values for the current request, keyed
by cookie name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>facesContext</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>FacesContext</code> instance for the current request</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>header</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <code>Map</code> of HTTP header values for the current request, keyed
by header name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>headerValues</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <code>Map</code> of <code>String</code> arrays containing all the header
values for HTTP headers in the current request, keyed by header name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>initParam</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <code>Map</code> of the context initialization parameters for this
web application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>param</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <code>Map</code> of the request parameters for this request, keyed by
parameter name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>paramValues</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <code>Map</code> of <code>String</code> arrays containing all the parameter
values for request parameters in the current request, keyed by parameter
name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requestScope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <code>Map</code> of the request attributes for this request,
keyed by attribute name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sessionScope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <code>Map</code> of the session attributes for this request,
keyed by attribute name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>view</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The root <code>UIComponent</code> in the current component tree stored in
the <code>FacesRequest</code> for this request</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="BNATL"></a><a id="binding-a-component-instance-to-a-bean-property"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_binding_a_component_instance_to_a_bean_property">9.13.3. Binding a Component Instance to a Bean Property</h4>
<div class="paragraph">
<p>A component instance can be bound to a bean property using a value
expression with the <code>binding</code> attribute of the component&#8217;s tag. You
usually bind a component instance rather than its value to a bean
property if the bean must dynamically change the component&#8217;s attributes.</p>
</div>
<div class="paragraph">
<p>Here are two tags from the <code>bookcashier.xhtml</code> page that bind components
to bean properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:selectBooleanCheckbox</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fanClub</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>
                         <span class="attribute-name">binding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.specialOffer}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fanClub</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">rendered</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">binding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashierBean.specialOfferText}</span><span class="delimiter">&quot;</span></span>
               <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.DukeFanClub}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputLabel&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>h:selectBooleanCheckbox</code> tag renders a check box and binds the
<code>fanClub</code> <code>UISelectBoolean</code> component to the <code>specialOffer</code> property of
the <code>cashier</code> bean. The <code>h:outputLabel</code> tag binds the component
representing the check box&#8217;s label to the <code>specialOfferText</code> property of
the <code>cashier</code> bean. If the application&#8217;s locale is English, the
<code>h:outputLabel</code> tag renders</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">I<span class="string"><span class="delimiter">'</span><span class="content">d like to join the Duke Fan Club, free with my purchase of over $100</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>rendered</code> attributes of both tags are set to <code>false</code> to prevent the
check box and its label from being rendered. If the customer makes a
large order and clicks the Submit button, the <code>submit</code> method of
<code>CashierBean</code> sets both components' <code>rendered</code> properties to <code>true</code>,
causing the check box and its label to be rendered.</p>
</div>
<div class="paragraph">
<p>These tags use component bindings rather than value bindings because the
managed bean must dynamically set the values of the components'
<code>rendered</code> properties.</p>
</div>
<div class="paragraph">
<p>If the tags were to use value bindings instead of component bindings,
the managed bean would not have direct access to the components and
would therefore require additional code to access the components from
the <code>FacesContext</code> instance to change the components' <code>rendered</code>
properties.</p>
</div>
<div class="paragraph">
<p><a href="#BNAUK">Writing Properties Bound to Component
Instances</a> explains how to write the bean properties bound to the
example components.</p>
</div>
<div class="paragraph">
<p><a id="BNATM"></a><a id="binding-converters-listeners-and-validators-to-managed-bean-properties"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_binding_converters_listeners_and_validators_to_managed_bean_properties">9.14. Binding Converters, Listeners, and Validators to Managed Bean Properties</h3>
<div class="paragraph">
<p>As described in <a href="#BNARF">Adding Components to a Page
Using HTML Tag Library Tags</a>, a page author can bind converter,
listener, and validator implementations to managed bean properties using
the <code>binding</code> attributes of the tags that are used to register the
implementations on components.</p>
</div>
<div class="paragraph">
<p>This technique has similar advantages to binding component instances to
managed bean properties, as described in
<a href="#BNATG">Binding Component Values and Instances to
Managed Bean Properties</a>. In particular, binding a converter, listener,
or validator implementation to a managed bean property yields the
following benefits.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The managed bean can instantiate the implementation instead of
allowing the page author to do so.</p>
</li>
<li>
<p>The managed bean can programmatically modify the attributes of the
implementation. In the case of a custom implementation, the only other
way to modify the attributes outside of the implementation class would
be to create a custom tag for it and require the page author to set the
attribute values from the page.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Whether you are binding a converter, listener, or validator to a managed
bean property, the process is the same for any of the implementations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Nest the converter, listener, or validator tag within an appropriate
component tag.</p>
</li>
<li>
<p>Make sure that the managed bean has a property that accepts and
returns the converter, listener, or validator implementation class that
you want to bind to the property.</p>
</li>
<li>
<p>Reference the managed bean property using a value expression from the
<code>binding</code> attribute of the converter, listener, or validator tag.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, say that you want to bind the standard <code>DateTime</code> converter
to a managed bean property because you want to set the formatting
pattern of the user&#8217;s input in the managed bean rather than on the
Facelets page. First, the page registers the converter onto the
component by nesting the <code>f:convertDateTime</code> tag within the component
tag. Then, the page references the property with the <code>binding</code> attribute
of the <code>f:convertDateTime</code> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{loginBean.birthDate}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertDateTime</span> <span class="attribute-name">binding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{loginBean.convertDate}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>convertDate</code> property would look something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> DateTimeConverter convertDate;
<span class="directive">public</span> DateTimeConverter getConvertDate() {
    ...
    return convertDate;
}
<span class="directive">public</span> <span class="type">void</span> setConvertDate(DateTimeConverter convertDate) {
    convertDate.setPattern(<span class="string"><span class="delimiter">&quot;</span><span class="content">EEEEEEEE, MMM dd, yyyy</span><span class="delimiter">&quot;</span></span>);
    <span class="local-variable">this</span>.convertDate = convertDate;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#BNAUL">Writing Properties Bound to
Converters, Listeners, or Validators</a> for more information on writing
managed bean properties for converter, listener, and validator
implementations.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_jakarta_server_faces_applications">10. Configuring Jakarta Server Faces Applications</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="BNAWO"></a><a id="configuring-javaserver-faces-applications"></a></p>
</div>
<div class="paragraph">
<p>This chapter describes additional configuration tasks required when you
create large and complex applications.</p>
</div>
<div class="paragraph">
<p><a id="A1352824"></a><a id="introduction-to-configuring-javaserver-faces-applications"></a></p>
</div>
<div class="sect2">
<h3 id="_introduction_to_configuring_jakarta_server_faces_applications">10.1. Introduction to Configuring Jakarta Server Faces Applications</h3>
<div class="paragraph">
<p>The process of building and deploying simple Jakarta Server Faces
applications is described in earlier chapters of this tutorial,
including <a href="#BNADR">Chapter 6, "Getting Started with Web
Applications,"</a> <a href="#GIEPX">Chapter 8, "Introduction to
Facelets,"</a> <a href="#GKIOW">Chapter 13, "Using Ajax with
Jakarta Server Faces Technology,"</a> and
<a href="#GKHXA">Chapter 14, "Composite Components:
Advanced Topics and an Example."</a> When you create large and complex
applications, however, various additional configuration tasks are
required. These tasks include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Registering managed beans with the application so that all parts of
the application have access to them</p>
</li>
<li>
<p>Configuring managed beans and model beans so that they are
instantiated with the proper values when a page makes reference to them</p>
</li>
<li>
<p>Defining navigation rules for each of the pages in the application so
that the application has a smooth page flow, if nondefault navigation is
needed</p>
</li>
<li>
<p>Packaging the application to include all the pages, resources, and
other files so that the application can be deployed on any compliant
container</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GIRCH"></a><a id="using-annotations-to-configure-managed-beans"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_using_annotations_to_configure_managed_beans">10.2. Using Annotations to Configure Managed Beans</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph lead">
<p><strong>Note</strong>:
In Jakarta Server Faces 2.3, managed bean annotations are deprecated; CDI is now the
preferred approach.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Jakarta Server Faces support for bean annotations is introduced in
<a href="#BNAPH">Chapter 7, "Jakarta Server Faces Technology"</a>. Bean
annotations can be used for configuring Jakarta Server Faces applications.</p>
</div>
<div class="paragraph">
<p>The <code>@Named</code> (<code>javax.inject.Named</code>) annotation in a class, along with a
scope annotation, automatically registers that class as a resource with
the Jakarta Server Faces implementation. A bean that uses these annotations
is a CDI managed bean.</p>
</div>
<div class="paragraph">
<p>The following shows the use of the <code>@Named</code> and <code>@SessionScoped</code>
annotations in a class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cart</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@SessionScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">ShoppingCart</span> ... { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above code snippet shows a bean that is managed by the Jakarta Server
Faces implementation and is available for the length of the session.</p>
</div>
<div class="paragraph">
<p>You can annotate beans with any of the scopes listed in the next
section, <a href="#GIRCR">Using Managed Bean Scopes</a>.</p>
</div>
<div class="paragraph">
<p>All classes will be scanned for annotations at startup unless the
<code>faces-config</code> element in the <code>faces-config.xml</code> file has the
<code>metadata-complete</code> attribute set to <code>true</code>.</p>
</div>
<div class="paragraph">
<p>Annotations are also available for other artifacts, such as components,
converters, validators, and renderers, to be used in place of
application configuration resource file entries. These are discussed,
along with registration of custom listeners, custom validators, and
custom converters, in <a href="#BNAVG">Chapter 15, "Creating
Custom UI Components and Other Custom Objects"</a>.</p>
</div>
<div class="paragraph">
<p><a id="GIRCR"></a><a id="using-managed-bean-scopes"></a></p>
</div>
<div class="sect3">
<h4 id="_using_managed_bean_scopes">10.2.1. Using Managed Bean Scopes</h4>
<div class="paragraph">
<p>You can use annotations to define the scope in which the bean will be
stored. You can specify one of the following scopes for a bean class.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Application (<code>javax.enterprise.context.ApplicationScoped</code>):
Application scope persists across all users' interactions with a web
application.</p>
</li>
<li>
<p>Session (<code>javax.enterprise.context.SessionScoped</code>): Session scope
persists across multiple HTTP requests in a web application.</p>
</li>
<li>
<p>Flow (<code>javax.faces.flows.FlowScoped</code>): Flow scope persists during a
user&#8217;s interaction with a specific flow of a web application. See
<a href="#CHDGFCJF">Using Faces Flows</a> for more
information.</p>
</li>
<li>
<p>Request (<code>javax.enterprise.context.RequestScoped</code>): Request scope
persists during a single HTTP request in a web application.</p>
</li>
<li>
<p>Dependent (<code>javax.enterprise.context.Dependent</code>): Indicates that the
bean depends on some other bean.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You may want to use <code>@Dependent</code> when a managed bean references another
managed bean. The second bean should not be in a scope (<code>@Dependent</code>) if
it is supposed to be created only when it is referenced. If you define a
bean as <code>@Dependent</code>, the bean is instantiated anew each time it is
referenced, so it does not get saved in any scope.</p>
</div>
<div class="paragraph">
<p>If your managed bean is referenced by the <code>binding</code> attribute of a
component tag, you should define the bean with a request scope. If you
placed the bean in session or application scope instead, the bean would
need to take precautions to ensure thread safety, because
<code>javax.faces.component.UIComponent</code> instances each depend on running
inside of a single thread.</p>
</div>
<div class="paragraph">
<p>If you are configuring a bean that allows attributes to be associated
with the view, you can use the view scope. The attributes persist until
the user has navigated to the next view.</p>
</div>
<div class="paragraph">
<p><a id="BNAWP"></a><a id="application-configuration-resource-file"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_application_configuration_resource_file">10.3. Application Configuration Resource File</h3>
<div class="paragraph">
<p>Jakarta Server Faces technology provides a portable configuration format (as
an XML document) for configuring application resources. One or more XML
documents, called application configuration resource files, may use this
format to register and configure objects and resources and to define
navigation rules for applications. An application configuration resource
file is usually named <code>faces-config.xml</code>.</p>
</div>
<div class="paragraph">
<p>You need an application configuration resource file in the following
cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To specify configuration elements for your application that are not
available through managed bean annotations, such as localized messages
and navigation rules</p>
</li>
<li>
<p>To override managed bean annotations when the application is deployed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The application configuration resource file must be valid against the
XML schema located at
<code><a href="http://xmlns.jcp.org/xml/ns/javaee/web-facesconfig_2_2.xsd" class="bare">http://xmlns.jcp.org/xml/ns/javaee/web-facesconfig_2_2.xsd</a></code>.</p>
</div>
<div class="paragraph">
<p>In addition, each file must include the following information, in the
following order:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The XML version number, usually with an <code>encoding</code> attribute:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding='UTF-8'?&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p>A <code>faces-config</code> tag enclosing all the other declarations:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;faces-config</span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2.2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/xml/ns/javaee</span><span class="delimiter">&quot;</span></span>
              <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
              <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/xml/ns/javaee</span>
              <span class="content">http://xmlns.jcp.org/xml/ns/javaee/web-facesconfig_2_2.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    ...
<span class="tag">&lt;/faces-config&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can have more than one application configuration resource file for
an application. The Jakarta Server Faces implementation finds the
configuration file or files by looking for the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A resource named <code>/META-INF/faces-config.xml</code> in any of the JAR files
in the web application&#8217;s <code>/WEB-INF/lib/</code> directory and in parent class
loaders. If a resource with this name exists, it is loaded as a
configuration resource. This method is practical for a packaged library
containing some components and renderers. In addition, any file with a
name that ends in <code>faces-config.xml</code> is also considered a configuration
resource and is loaded as such.</p>
</li>
<li>
<p>A context initialization parameter,
<code>javax.faces.application.CONFIG_FILES</code>, in your web deployment
descriptor file that specifies one or more (comma-delimited) paths to
multiple configuration files for your web application. This method is
most often used for enterprise-scale applications that delegate to
separate groups the responsibility for maintaining the file for each
portion of a big application.</p>
</li>
<li>
<p>A resource named <code>faces-config.xml</code> in the <code>/WEB-INF/</code> directory of
your application. Simple web applications make their configuration files
available in this way.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To access the resources registered with the application, an application
developer can use an instance of the
<code>javax.faces.application.Application</code> class, which is automatically
created for each application. The <code>Application</code> instance acts as a
centralized factory for resources that are defined in the XML file.</p>
</div>
<div class="paragraph">
<p>When an application starts up, the Jakarta Server Faces implementation
creates a single instance of the <code>Application</code> class and configures it
with the information you provided in the application configuration
resource file.</p>
</div>
<div class="paragraph">
<p><a id="GIREP"></a><a id="configuring-eager-application-scoped-managed-beans"></a></p>
</div>
<div class="sect3">
<h4 id="_configuring_eager_application_scoped_managed_beans">10.3.1. Configuring Eager Application-Scoped Managed Beans</h4>
<div class="paragraph">
<p>Jakarta Server Faces managed beans (either specified in the
f`aces-config.xml` file or annotated with
<code>javax.faces.bean.ManagedBean</code>) are lazily instantiated. That is, that
they are instantiated when a request is made from the application.</p>
</div>
<div class="paragraph">
<p>To force an application-scoped bean to be instantiated and placed in the
application scope as soon as the application is started and before any
request is made, the <code>eager</code> attribute of the managed bean should be set
to <code>true</code>, as shown in the following examples.</p>
</div>
<div class="paragraph">
<p>The <code>faces-config.xml</code> file declaration is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;managed-bean</span> <span class="attribute-name">eager</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The annotation is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">@ManagedBean(eager=true)
@ApplicationScoped</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GIQCK"></a><a id="ordering-of-application-configuration-resource-files"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_ordering_of_application_configuration_resource_files">10.3.2. Ordering of Application Configuration Resource Files</h4>
<div class="paragraph">
<p>Because Jakarta Server Faces technology allows the use of multiple
application configuration resource files stored in different locations,
the order in which they are loaded by the implementation becomes
important in certain situations (for example, when using
application-level objects). This order can be defined through an
<code>ordering</code> element and its subelements in the application configuration
resource file itself. The ordering of application configuration resource
files can be absolute or relative.</p>
</div>
<div class="paragraph">
<p>Absolute ordering is defined by an <code>absolute-ordering</code> element in the
file. With absolute ordering, the user specifies the order in which
application configuration resource files will be loaded. The following
example shows an entry for absolute ordering.</p>
</div>
<div class="paragraph">
<p>File <code>my-faces-config.xml</code> contains the following elements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;faces-config&gt;</span>
    <span class="tag">&lt;name&gt;</span>myJSF<span class="tag">&lt;/name&gt;</span>
    <span class="tag">&lt;absolute-ordering&gt;</span>
        <span class="tag">&lt;name&gt;</span>A<span class="tag">&lt;/name&gt;</span>
        <span class="tag">&lt;name&gt;</span>B<span class="tag">&lt;/name&gt;</span>
        <span class="tag">&lt;name&gt;</span>C<span class="tag">&lt;/name&gt;</span>
    <span class="tag">&lt;/absolute-ordering&gt;</span>
<span class="tag">&lt;/faces-config&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, A, B, and C are different application configuration
resource files and are to be loaded in the listed order.</p>
</div>
<div class="paragraph">
<p>If there is an <code>absolute-ordering</code> element in the file, only the files
listed by the subelement <code>name</code> are processed. To process any other
application configuration resource files, an <code>others</code> subelement is
required. In the absence of the <code>others</code> subelement, all other unlisted
files will be ignored at load time.</p>
</div>
<div class="paragraph">
<p>Relative ordering is defined by an <code>ordering</code> element and its
subelements <code>before</code> and <code>after</code>. With relative ordering, the order in
which application configuration resource files will be loaded is
calculated by considering ordering entries from the different files. The
following example shows some of these considerations. In the following
example, <code>config-A</code>, <code>config-B</code>, and <code>config-C</code> are different
application configuration resource files.</p>
</div>
<div class="paragraph">
<p>File <code>config-A</code> contains the following elements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;faces-config&gt;</span>
    <span class="tag">&lt;name&gt;</span>config-A<span class="tag">&lt;/name&gt;</span>
    <span class="tag">&lt;ordering&gt;</span>
        <span class="tag">&lt;before&gt;</span>
            <span class="tag">&lt;name&gt;</span>config-B<span class="tag">&lt;/name&gt;</span>
        <span class="tag">&lt;/before&gt;</span>
    <span class="tag">&lt;/ordering&gt;</span>
<span class="tag">&lt;/faces-config&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>File <code>config-B</code> (not shown here) does not contain any <code>ordering</code>
elements.</p>
</div>
<div class="paragraph">
<p>File <code>config-C</code> contains the following elements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;faces-config&gt;</span>
    <span class="tag">&lt;name&gt;</span>config-C<span class="tag">&lt;/name&gt;</span>
    <span class="tag">&lt;ordering&gt;</span>
        <span class="tag">&lt;after&gt;</span>
            <span class="tag">&lt;name&gt;</span>config-B<span class="tag">&lt;/name&gt;</span>
        <span class="tag">&lt;/after&gt;</span>
    <span class="tag">&lt;/ordering&gt;</span>
<span class="tag">&lt;/faces-config&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Based on the <code>before</code> subelement entry, file <code>config-A</code> will be loaded
before the <code>config-B</code> file. Based on the <code>after</code> subelement entry, file
<code>config-C</code> will be loaded after the <code>config-B</code> file.</p>
</div>
<div class="paragraph">
<p>In addition, a subelement <code>others</code> can also be nested within the
<code>before</code> and <code>after</code> subelements. If the <code>others</code> element is present,
the specified file may receive highest or lowest preference among both
listed and unlisted configuration files.</p>
</div>
<div class="paragraph">
<p>If an <code>ordering</code> element is not present in an application configuration
file, then that file will be loaded after all the files that contain
<code>ordering</code> elements.</p>
</div>
<div class="paragraph">
<p><a id="CHDGFCJF"></a><a id="using-faces-flows"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_faces_flows">10.4. Using Faces Flows</h3>
<div class="paragraph">
<p>The Faces Flows feature of Jakarta Server Faces technology allows you to
create a set of pages with a scope, <code>FlowScoped</code>, that is greater than
request scope but less than session scope. For example, you might want
to create a series of pages for the checkout process in an online store.
You could create a set of self-contained pages that could be transferred
from one store to another as needed.</p>
</div>
<div class="paragraph">
<p>Faces Flows are somewhat analogous to subroutines in procedural
programming, in the following ways.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Like a subroutine, a flow has a well defined entry point, list of
parameters, and return value. However, unlike a subroutine, a flow can
return multiple values.</p>
</li>
<li>
<p>Like a subroutine, a flow has a scope, allowing information to be
available only during the invocation of the flow. Such information is
not available outside the scope of the flow and does not consume any
resources once the flow returns.</p>
</li>
<li>
<p>Like a subroutine, a flow may call other flows before returning. The
invocation of flows is maintained in a call stack: a new flow causes a
push onto the stack, and a return causes a pop.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An application can have any number of flows. Each flow includes a set of
pages and, usually, one or more managed beans scoped to that flow. Each
flow has a starting point, called a start node, and an exit point,
called a return node.</p>
</div>
<div class="paragraph">
<p>The data in a flow is scoped to that flow alone, but you can pass data
from one flow to another by specifying parameters and calling the other
flow.</p>
</div>
<div class="paragraph">
<p>Flows can be nested, so that if you call one flow from another and then
exit the second flow, you return to the calling flow rather than to the
second flow&#8217;s return node.</p>
</div>
<div class="paragraph">
<p>You can configure a flow programmatically, by creating a class annotated
<code>@FlowDefinition</code>, or you can configure a flow by using a configuration
file. The configuration file can be limited to one flow, or you can use
the <code>faces-config.xml</code> file to put all the flows in one place, if you
have many flows in an application. The programmatic configuration places
the code closer to the rest of the flow code and enables you to
modularize the flows.</p>
</div>
<div class="paragraph">
<p><a href="#CHDIHDCD">Figure 16-1</a> shows two flows and illustrates how they
interact.</p>
</div>
<div id="CHDIHDCD" class="paragraph">
<div class="title"><strong>Figure 16-1 Two Faces Flows and Their Interactions</strong></div>
<p><span class="image"><img src="../images/jakartaeett_dt_017.png" alt="This figure shows two Faces flows, Flow A and Flow B. Each has a start node and two additional pages. Each has an associated managed bean. Each defines a return node, and each defines two parameters to be passed to the other flow."></span></p>
</div>
<div class="paragraph">
<p>In this figure, Flow A has a start node named <code>flow-a</code> and two
additional pages, <code>next_a1</code> and <code>next_a2</code>. From <code>next_a2</code>, a user can
either exit the flow using the defined return node, <code>taskFlowReturn1</code>,
or call Flow B, passing two parameters. Flow A also defines two inbound
parameters that it can accept from Flow B. Flow B is identical to Flow A
except for the names of the flow and files. Each flow also has an
associated managed bean; the beans are <code>Flow_a_Bean</code> and <code>Flow_b_Bean</code>.</p>
</div>
<div class="paragraph">
<p><a id="sthref81"></a><a id="packaging-flows-in-an-application"></a></p>
</div>
<div class="sect3">
<h4 id="_packaging_flows_in_an_application">10.4.1. Packaging Flows in an Application</h4>
<div class="paragraph">
<p>Typically, you package flows in a web application using a directory
structure that modularizes the flows. In the <code>src/main/webapp</code> directory
of a Maven project, for example, you would place the Facelets files that
are outside the flow at the top level as usual. Then the <code>webapp</code> files
for each flow would be in a separate directory, and the Java files would
be under <code>src/main/java</code>. For example, the files for the application
shown in <a href="#CHDIHDCD">Figure 16-1</a> might look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">src/main/webapp/
    index.xhtml
    return.xhtml
    WEB_INF/
        beans.xml
        web.xml
    flow-a/
        flow-a.xhtml
        next_a1.xhtml
        next_a2.xhtml
    flow-b/
        flow-b-flow.xml
        next_b1.xhtml
        next_b2.xhtml
src/main/java/jakarta/tutorial/flowexample
            FlowA.java
            Flow_a_Bean.java
            Flow_b_Bean.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, <code>flow-a</code> is defined programmatically in <code>FlowA.java</code>,
while <code>flow-b</code> is defined by the configuration file <code>flow-b-flow.xml</code>.</p>
</div>
<div class="paragraph">
<p><a id="sthref82"></a><a id="the-simplest-possible-flow-the-simple-flow-example-application"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_the_simplest_possible_flow_the_simple_flow_example_application">10.4.2. The Simplest Possible Flow: The simple-flow Example Application</h4>
<div class="paragraph">
<p>The <code>simple-flow</code> example application demonstrates the most basic
building blocks of a Faces Flows application and illustrates some of the
conventions that make it easy to get started with iterative development
using flows. You may want to start with a simple example like this one
and build upon it.</p>
</div>
<div class="paragraph">
<p>This example provides an implicit flow definition by including an empty
configuration file. A configuration file that has content, or a class
annotated <code>@FlowDefinition</code>, provides an explicit flow definition.</p>
</div>
<div class="paragraph">
<p>The source code for this application is in the
tut-install`/examples/web/jsf/simple-flow/` directory.</p>
</div>
<div class="paragraph">
<p>The file layout of the <code>simple-flow</code> example looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">src/main/webapp
    index.xhtml
    simple-flow-return.xhtml
    WEB_INF/
        web.xml
    simple-flow
        simple-flow-flow.xml
        simple-flow.xhtml
        simple-flow-page2.xhtml</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>simple-flow</code> example has an empty configuration file, which is by
convention named flow-name-<code>flow.xml</code>. The flow does not require any
configuration for the following reasons.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The flow does not call another flow, nor does it pass parameters to
another flow.</p>
</li>
<li>
<p>The flow uses default names for the first page of the flow,
flow-name`.xhtml`, and the return page, flow-name`-return.xhtml`.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This example has only four Facelets pages.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>index.xhtml</code>, the start page, which contains almost nothing but a
button that navigates to the first page of the flow:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;p&gt;</span><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Enter Flow</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">simple-flow</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span><span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><code>simple-flow.xhtml</code> and <code>simple-flow-page2.xhtml</code>, the two pages of
the flow itself. In the absence of an explicit flow definition, the page
whose name is the same as the name of the flow is assumed to be the
start node of the flow. In this case, the flow is named <code>simple-flow</code>,
so the page named <code>simple-flow.xhtml</code> is assumed to be the start node of
the flow. The start node is the node navigated to upon entry into the
flow. It can be thought of as the home page of the flow.</p>
<div class="paragraph">
<p>The <code>simple-flow.xhtml</code> page asks you to enter a flow-scoped value and
provides a button that navigates to the next page of the flow:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;p&gt;</span>Value: <span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{flowScope.value}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span><span class="tag">&lt;/p&gt;</span>

<span class="tag">&lt;p&gt;</span><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Next</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">simple-flow-page2</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span><span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The second page, which can have any name, displays the flow-scoped value
and provides a button that navigates to the return page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;p&gt;</span>Value: #{flowScope.value}<span class="tag">&lt;/p&gt;</span>

<span class="tag">&lt;p&gt;</span><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Return</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">simple-flow-return</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span><span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><code>simple-flow-return.xhtml</code>, the return page. The return page, which by
convention is named flow-name`-return.xhtml`, must be located outside of
the flow. This page displays the flow-scoped value, to show that it has
no value outside of the flow, and provides a link that navigates to the
<code>index.xhtml</code> page:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;p&gt;</span>Value (should be empty):
    &quot;<span class="tag">&lt;h:outputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">output</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{flowScope.value}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>&quot;<span class="tag">&lt;/p&gt;</span>

<span class="tag">&lt;p&gt;</span><span class="tag">&lt;h:link</span> <span class="attribute-name">outcome</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">index</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Back to Start</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span><span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Facelets pages use only flow-scoped data, so the example does not
need a managed bean.</p>
</div>
<div class="paragraph">
<p><a id="sthref83"></a><a id="to-build-package-and-deploy-the-simple-flow-example-using-netbeans-ide"></a></p>
</div>
<div class="sect4">
<h5 id="_to_build_package_and_deploy_the_simple_flow_example_using_netbeans_ide">To Build, Package, and Deploy the simple-flow Example Using NetBeans IDE</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>From the File menu, choose Open Project.</p>
</li>
<li>
<p>In the Open Project dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">tut-install/examples/web/jsf</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>simple-flow</code> folder.</p>
</li>
<li>
<p>Click Open Project.</p>
</li>
<li>
<p>In the Projects tab, right-click the <code>simple-flow</code> project and
select Build.</p>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file,
<code>simple-flow.war</code>, that is located in the <code>target</code> directory. It then
deploys the application to the server.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="sthref84"></a><a id="to-build-package-and-deploy-the-simple-flow-example-using-maven"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_build_package_and_deploy_the_simple_flow_example_using_maven">To Build, Package, and Deploy the simple-flow Example Using Maven</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">tut-install/examples/web/jsf/simple-flow/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file,
<code>simple-flow.war</code>, that is located in the <code>target</code> directory. It then
deploys the application to the server.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="sthref85"></a><a id="to-run-the-simple-flow-example"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_run_the_simple_flow_example">To Run the simple-flow Example</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enter the following URL in your web browser:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">http://localhost:8080/simple-flow</code></pre>
</div>
</div>
</li>
<li>
<p>On the <code>index.xhtml</code> page, click Enter Flow.</p>
</li>
<li>
<p>On the first page of the flow, enter any string in the Value field,
then click Next.</p>
</li>
<li>
<p>On the second page of the flow, you can see the value you entered.
Click Return.</p>
</li>
<li>
<p>On the return page, an empty pair of quotation marks encloses the
inaccessible value. Click Back to Start to return to the <code>index.xhtml</code>
page.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="sthref86"></a><a id="the-checkout-module-example-application"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_checkout_module_example_application">10.4.3. The checkout-module Example Application</h4>
<div class="paragraph">
<p>The <code>checkout-module</code> example application is considerably more complex
than <code>simple-flow</code>. It shows how you might use the Faces Flows feature
to implement a checkout module for an online store.</p>
</div>
<div class="paragraph">
<p>Like the hypothetical example in <a href="#CHDIHDCD">Figure 16-1</a>, the
example application contains two flows, each of which can call the
other. Both flows have explicit flow definitions. One flow,
<code>checkoutFlow</code>, is specified programmatically. The other flow,
<code>joinFlow</code>, is specified in a configuration file.</p>
</div>
<div class="paragraph">
<p>The source code for this application is in the
tut-install`/examples/web/jsf/checkout-module/` directory.</p>
</div>
<div class="paragraph">
<p>For the <code>checkout-module</code> application, the directory structure is as
follows (there is also a <code>src/main/webapp/resources</code> directory with a
stylesheet and an image):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">src/main/webapp/
    index.xhtml
    exithome.xhtml
    WEB_INF/
        beans.xml
        web.xml
    checkoutFlow/
        checkoutFlow.xhtml
        checkoutFlow2.xhtml
        checkoutFlow3.xhtml
        checkoutFlow4.xhtml
    joinFlow/
        joinFlow-flow.xml
        joinFlow.xhtml
        joinFlow2.xhtml
src/main/java/jakarta/tutorial/checkoutmodule
            CheckoutBean.java
            CheckoutFlow.java
            CheckoutFlowBean.java
            JoinFlowBean.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>For the example, <code>index.xhtml</code> is the beginning page for the application
as well as the return node for the checkout flow. The <code>exithome.xhtml</code>
page is the return node for the join flow.</p>
</div>
<div class="paragraph">
<p>The configuration file <code>joinFlow-flow.xml</code> defines the join flow, and
the source file <code>CheckoutFlow.java</code> defines the checkout flow.</p>
</div>
<div class="paragraph">
<p>The checkout flow contains four Facelets pages, whereas the join flow
contains two.</p>
</div>
<div class="paragraph">
<p>The managed beans scoped to each flow are <code>CheckoutFlowBean.java</code> and
<code>JoinFlowBean.java</code>, whereas <code>CheckoutBean.java</code> is the backing bean for
the <code>index.html</code> page.</p>
</div>
<div class="paragraph">
<p><a id="sthref87"></a><a id="the-facelets-pages-for-the-checkout-module-example"></a></p>
</div>
<div class="sect4">
<h5 id="_the_facelets_pages_for_the_checkout_module_example">The Facelets Pages for the checkout-module Example</h5>
<div class="paragraph">
<p>The starting page for the example, <code>index.xhtml</code>, summarizes the
contents of a hypothetical shopping cart. It allows the user to click
either of two buttons to enter one of the two flows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;p&gt;</span><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Check Out</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">checkoutFlow</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span><span class="tag">&lt;/p&gt;</span>
...
<span class="tag">&lt;p&gt;</span><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Join</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">joinFlow</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span><span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This page is also the return node for the checkout flow.</p>
</div>
<div class="paragraph">
<p>The Facelets page <code>exithome.xhtml</code> is the return node for the join flow.
This page has a button that allows you to return to the <code>index.xhtml</code>
page.</p>
</div>
<div class="paragraph">
<p>The four Facelets pages within the checkout flow, starting with
<code>checkoutFlow.xhtml</code> and ending with <code>checkoutFlow4.xhtml</code>, allow you to
proceed to the next page or, in some cases, to return from the flow. The
<code>checkoutFlow.xhtml</code> page allows you to access parameters passed from
the join flow through the flow scope. These appear as empty quotation
marks if you have not called the checkout flow from the join flow.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;p&gt;</span>If you called this flow from the Join flow, you can see these parameters:
    &quot;<span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{flowScope.param1Value}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>&quot; and
    &quot;<span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{flowScope.param2Value}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>&quot;
<span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Only <code>checkoutFlow2.xhtml</code> has a button to return to the previous page,
but moving between pages is generally permitted within flows. Here are
the buttons for c`heckoutFlow2.xhtml`:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;p&gt;</span><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Continue</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">checkoutFlow3</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span><span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;p&gt;</span><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Go Back</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">checkoutFlow</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span><span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;p&gt;</span><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Exit Flow</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">returnFromCheckoutFlow</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span><span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The action <code>returnFromCheckoutFlow</code> is defined in the configuration
source code file, <code>CheckoutFlow.java</code>.</p>
</div>
<div class="paragraph">
<p>The final page of the checkout flow, <code>checkoutFlow4.xhtml</code>, contains a
button that calls the join flow:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;p&gt;</span><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Join</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">calljoin</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span><span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;p&gt;</span><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Exit Flow</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">returnFromCheckoutFlow</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span><span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>calljoin</code> action is also defined in the configuration source code
file, <code>CheckoutFlow.java</code>. This action enters the join flow, passing two
parameters from the checkout flow.</p>
</div>
<div class="paragraph">
<p>The two pages in the join flow, <code>joinFlow.xhtml</code> and <code>joinFlow2.xhtml</code>,
are similar to those in the checkout flow. The second page has a button
to call the checkout flow as well as one to return from the join flow:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;p&gt;</span><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Check Out</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">callcheckoutFlow</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span><span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;p&gt;</span><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Exit Flow</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">returnFromJoinFlow</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span><span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For this flow, the actions <code>callcheckoutFlow</code> and <code>returnFromJoinFlow</code>
are defined in the configuration file <code>joinFlow-flow.xml</code>.</p>
</div>
<div class="paragraph">
<p><a id="sthref88"></a><a id="using-a-configuration-file-to-configure-a-flow"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_using_a_configuration_file_to_configure_a_flow">Using a Configuration File to Configure a Flow</h5>
<div class="paragraph">
<p>If you use an application configuration resource file to configure a
flow, it must be named flowName`-flow.xml`. In this example, the join
flow uses a configuration file named <code>joinFlow-flow.xml</code>. The file is a
<code>faces-config</code> file that specifies a <code>flow-definition</code> element. This
element must define the flow name using the <code>id</code> attribute. Under the
<code>flow-definition</code> element, there must be a <code>flow-return</code> element that
specifies the return point for the flow. Any inbound parameters are
specified with <code>inbound-parameter</code> elements. If the flow calls another
flow, the <code>call-flow</code> element must use the flow-reference element to
name the called flow and may use the <code>outbound-parameter</code> element to
specify any outbound parameters.</p>
</div>
<div class="paragraph">
<p>The configuration file for the join flow looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;faces-config</span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2.2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/xml/ns/javaee</span><span class="delimiter">&quot;</span></span>
              <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
              <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xmlns.jcp.org/xml/ns/javaee \</span>
              <span class="content">http://xmlns.jcp.org/xml/ns/javaee/web-facesconfig_2_2.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

    <span class="tag">&lt;flow-definition</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">joinFlow</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;flow-return</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">returnFromJoinFlow</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;from-outcome&gt;</span>#{joinFlowBean.returnValue}<span class="tag">&lt;/from-outcome&gt;</span>
        <span class="tag">&lt;/flow-return&gt;</span>

        <span class="tag">&lt;inbound-parameter&gt;</span>
            <span class="tag">&lt;name&gt;</span>param1FromCheckoutFlow<span class="tag">&lt;/name&gt;</span>
            <span class="tag">&lt;value&gt;</span>#{flowScope.param1Value}<span class="tag">&lt;/value&gt;</span>
        <span class="tag">&lt;/inbound-parameter&gt;</span>
        <span class="tag">&lt;inbound-parameter&gt;</span>
            <span class="tag">&lt;name&gt;</span>param2FromCheckoutFlow<span class="tag">&lt;/name&gt;</span>
            <span class="tag">&lt;value&gt;</span>#{flowScope.param2Value}<span class="tag">&lt;/value&gt;</span>
        <span class="tag">&lt;/inbound-parameter&gt;</span>

        <span class="tag">&lt;flow-call</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">callcheckoutFlow</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;flow-reference&gt;</span>
                <span class="tag">&lt;flow-id&gt;</span>checkoutFlow<span class="tag">&lt;/flow-id&gt;</span>
            <span class="tag">&lt;/flow-reference&gt;</span>
            <span class="tag">&lt;outbound-parameter&gt;</span>
                <span class="tag">&lt;name&gt;</span>param1FromJoinFlow<span class="tag">&lt;/name&gt;</span>
                <span class="tag">&lt;value&gt;</span>param1 joinFlow value<span class="tag">&lt;/value&gt;</span>
            <span class="tag">&lt;/outbound-parameter&gt;</span>
            <span class="tag">&lt;outbound-parameter&gt;</span>
                <span class="tag">&lt;name&gt;</span>param2FromJoinFlow<span class="tag">&lt;/name&gt;</span>
                <span class="tag">&lt;value&gt;</span>param2 joinFlow value<span class="tag">&lt;/value&gt;</span>
            <span class="tag">&lt;/outbound-parameter&gt;</span>
        <span class="tag">&lt;/flow-call&gt;</span>
    <span class="tag">&lt;/flow-definition&gt;</span>
<span class="tag">&lt;/faces-config&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>id</code> attribute of the <code>flow-definition</code> element defines the name of
the flow as <code>joinFlow</code>. The value of the <code>id</code> attribute of the
<code>flow-return</code> element identifies the name of the return node, and its
value is defined in the <code>from-outcome</code> element as the <code>returnValue</code>
property of the flow-scoped managed bean for the join flow,
<code>JoinFlowBean</code>.</p>
</div>
<div class="paragraph">
<p>The names and values of the inbound parameters are retrieved from the
flow scope in order (<code>flowScope.param1Value</code>, <code>flowScope.param2Value</code>),
based on the way they were defined in the checkout flow configuration.</p>
</div>
<div class="paragraph">
<p>The <code>flow-call</code> element defines how the join flow calls the checkout
flow. The <code>id</code> attribute of the element, <code>callcheckoutFlow</code>, defines the
action of calling the flow. Within the <code>flow-call</code> element, the
<code>flow-reference</code> element defines the actual name of the flow to call,
<code>checkoutFlow</code>. The <code>outbound-parameter</code> elements define the parameters
to be passed when <code>checkoutFlow</code> is called. Here they are just arbitrary
strings.</p>
</div>
<div class="paragraph">
<p><a id="sthref89"></a><a id="using-a-java-class-to-configure-a-flow"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_using_a_java_class_to_configure_a_flow">Using a Java Class to Configure a Flow</h5>
<div class="paragraph">
<p>If you use a Java class to configure a flow, it must have the name of
the flow. The class for the checkout flow is called <code>CheckoutFlow.java</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">java.io.Serializable</span>;
<span class="keyword">import</span> <span class="include">javax.enterprise.inject.Produces</span>;
<span class="keyword">import</span> <span class="include">javax.faces.flow.Flow</span>;
<span class="keyword">import</span> <span class="include">javax.faces.flow.builder.FlowBuilder</span>;
<span class="keyword">import</span> <span class="include">javax.faces.flow.builder.FlowBuilderParameter</span>;
<span class="keyword">import</span> <span class="include">javax.faces.flow.builder.FlowDefinition</span>;

<span class="type">class</span> <span class="class">CheckoutFlow</span> <span class="directive">implements</span> <span class="predefined-type">Serializable</span> {

    <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="type">long</span> serialVersionUID = <span class="integer">1L</span>;

    <span class="annotation">@Produces</span>
    <span class="annotation">@FlowDefinition</span>
    <span class="directive">public</span> Flow defineFlow(<span class="annotation">@FlowBuilderParameter</span> FlowBuilder flowBuilder) {

        <span class="predefined-type">String</span> flowId = <span class="string"><span class="delimiter">&quot;</span><span class="content">checkoutFlow</span><span class="delimiter">&quot;</span></span>;
        flowBuilder.id(<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>, flowId);
        flowBuilder.viewNode(flowId,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span> + flowId + <span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span> + flowId + <span class="string"><span class="delimiter">&quot;</span><span class="content">.xhtml</span><span class="delimiter">&quot;</span></span>).
                markAsStartNode();

        flowBuilder.returnNode(<span class="string"><span class="delimiter">&quot;</span><span class="content">returnFromCheckoutFlow</span><span class="delimiter">&quot;</span></span>).
                fromOutcome(<span class="string"><span class="delimiter">&quot;</span><span class="content">#{checkoutFlowBean.returnValue}</span><span class="delimiter">&quot;</span></span>);

        flowBuilder.inboundParameter(<span class="string"><span class="delimiter">&quot;</span><span class="content">param1FromJoinFlow</span><span class="delimiter">&quot;</span></span>,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">#{flowScope.param1Value}</span><span class="delimiter">&quot;</span></span>);
        flowBuilder.inboundParameter(<span class="string"><span class="delimiter">&quot;</span><span class="content">param2FromJoinFlow</span><span class="delimiter">&quot;</span></span>,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">#{flowScope.param2Value}</span><span class="delimiter">&quot;</span></span>);

        flowBuilder.flowCallNode(<span class="string"><span class="delimiter">&quot;</span><span class="content">calljoin</span><span class="delimiter">&quot;</span></span>).flowReference(<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">joinFlow</span><span class="delimiter">&quot;</span></span>).
                outboundParameter(<span class="string"><span class="delimiter">&quot;</span><span class="content">param1FromCheckoutFlow</span><span class="delimiter">&quot;</span></span>,
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">#{checkoutFlowBean.name}</span><span class="delimiter">&quot;</span></span>).
                outboundParameter(<span class="string"><span class="delimiter">&quot;</span><span class="content">param2FromCheckoutFlow</span><span class="delimiter">&quot;</span></span>,
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">#{checkoutFlowBean.city}</span><span class="delimiter">&quot;</span></span>);
        <span class="keyword">return</span> flowBuilder.getFlow();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The class performs actions that are almost identical to those performed
by the configuration file <code>joinFlow-flow.xml</code>. It contains a single
method, <code>defineFlow</code>, as a producer method with the <code>@FlowDefinition</code>
qualifier that returns a <code>javax.faces.flow.Flow</code> class. The <code>defineFlow</code>
method takes one parameter, a <code>FlowBuilder</code> with the qualifier
<code>@FlowBuilderParameter</code>, which is passed in from the Jakarta Server Faces
implementation. The method then calls methods from the
<code>javax.faces.flow.Builder.FlowBuilder</code> class to configure the flow.</p>
</div>
<div class="paragraph">
<p>First, the method defines the flow <code>id</code> as <code>checkoutFlow</code>. Then, it
explicitly defines the start node for the flow. By default, this is the
name of the flow with an <code>.xhtml</code> suffix.</p>
</div>
<div class="paragraph">
<p>The method then defines the return node similarly to the way the
configuration file does. The <code>returnNode</code> method sets the name of the
return node as <code>returnFromCheckoutFlow</code>, and the chained <code>fromOutcome</code>
method specifies its value as the <code>returnValue</code> property of the
flow-scoped managed bean for the checkout flow, <code>CheckoutFlowBean</code>.</p>
</div>
<div class="paragraph">
<p>The <code>inboundParameter</code> method sets the names and values of the inbound
parameters from the join flow, which are retrieved from the flow scope
in order (<code>flowScope.param1Value</code>, <code>flowScope.param2Value</code>), based on
the way they were defined in the join flow configuration.</p>
</div>
<div class="paragraph">
<p>The <code>flowCallNode</code> method defines how the checkout flow calls the join
flow. The argument, <code>calljoin</code>, specifies the action of calling the
flow. The chained <code>flowReference</code> method defines the actual name of the
flow to call, <code>joinFlow</code>, then calls <code>outboundParameter</code> methods to
define the parameters to be passed when <code>joinFlow</code> is called. Here they
are values from the <code>CheckoutFlowBean</code> managed bean.</p>
</div>
<div class="paragraph">
<p>Finally, the <code>defineFlow</code> method calls the <code>getFlow</code> method and returns
the result.</p>
</div>
<div class="paragraph">
<p><a id="sthref90"></a><a id="the-flow-scoped-managed-beans"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_the_flow_scoped_managed_beans">The Flow-Scoped Managed Beans</h5>
<div class="paragraph">
<p>Each of the two flows has a managed bean that defines properties for the
pages within the flow. For example, the <code>CheckoutFlowBean</code> defines
properties whose values are entered by the user on both the
<code>checkoutFlow.xhtml</code> page and the <code>checkoutFlow3.xhtml</code> page.</p>
</div>
<div class="paragraph">
<p>Each managed bean has a <code>getReturnValue</code> method that sets the value of
the return node. For the <code>CheckoutFlowBean</code>, the return node is the
<code>index.xhtml</code> page, specified using implicit navigation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">public String getReturnValue() {
    return &quot;index&quot;;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For the <code>JoinFlowBean</code>, the return node is the <code>exithome.xhtml</code> page.</p>
</div>
<div class="paragraph">
<p><a id="sthref91"></a><a id="to-build-package-and-deploy-the-checkout-module-example-using-netbeans-ide"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_build_package_and_deploy_the_checkout_module_example_using_netbeans_ide">To Build, Package, and Deploy the checkout-module Example Using NetBeans IDE</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>From the File menu, choose Open Project.</p>
</li>
<li>
<p>In the Open Project dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">tut-install/examples/web/jsf</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>checkout-module</code> folder.</p>
</li>
<li>
<p>Click Open Project.</p>
</li>
<li>
<p>In the Projects tab, right-click the <code>checkout-module</code> project and
select Build.</p>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file,
<code>checkout-module.war</code>, that is located in the <code>target</code> directory. It
then deploys the application to the server.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="sthref92"></a><a id="to-build-package-and-deploy-the-checkout-module-example-using-maven"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_build_package_and_deploy_the_checkout_module_example_using_maven">To Build, Package, and Deploy the checkout-module Example Using Maven</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">tut-install/examples/web/jsf/checkout-module/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file,
<code>checkout-module.war</code>, that is located in the <code>target</code> directory. It
then deploys the application to the server.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="sthref93"></a><a id="to-run-the-checkout-module-example"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_run_the_checkout_module_example">To Run the checkout-module Example</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enter the following URL in your web browser:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">http://localhost:8080/checkout-module</code></pre>
</div>
</div>
</li>
<li>
<p>The <code>index.xhtml</code> page presents hypothetical results of the shopping
expedition. Click either Check Out or Join to enter one of the two
flows.</p>
</li>
<li>
<p>Follow the flow, providing input as needed and choosing whether to
continue, go back, or exit the flow.</p>
<div class="paragraph">
<p>In the checkout flow, only one of the input fields is validated (the
credit card field expects 16 digits), so you can enter any values you
like. The join flow does not require you to check any boxes in its
checkbox menus.</p>
</div>
</li>
<li>
<p>On the last page of a flow, select the option to enter the other
flow. This allows you to view the inbound parameters from the previous
flow.</p>
</li>
<li>
<p>Because flows are nested, if you click Exit Flow from a called flow,
you will return to the first page of the calling flow. (You may see a
warning, which you can ignore.) Click Exit Flow on that page to go to
the specified return node.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="BNAWQ"></a><a id="configuring-managed-beans"></a></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_managed_beans">10.5. Configuring Managed Beans</h3>
<div class="paragraph">
<p>When a page references a managed bean for the first time, the Jakarta Server
Faces implementation initializes it either based on a <code>@Named</code>
annotation and scope annotation in the bean class or according to its
configuration in the application configuration resource file. For
information on using annotations to initialize beans, see
<a href="#GIRCH">Using Annotations to Configure Managed
Beans</a>.</p>
</div>
<div class="paragraph">
<p>You can use either annotations or the application configuration resource
file to instantiate managed beans that are used in a Jakarta Server Faces
application and to store them in scope. The managed bean creation
facility is configured in the application configuration resource file
using <code>managed-bean</code> XML elements to define each bean. This file is
processed at application startup time. For information on using this
facility, see <a href="#BNAWR">Using the managed-bean Element</a>.</p>
</div>
<div class="paragraph">
<p>Managed beans created in the application configuration resource file are
Jakarta Server Faces managed beans, not CDI managed beans.</p>
</div>
<div class="paragraph">
<p>With the managed bean creation facility, you can</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create beans in one centralized file that is available to the entire
application, rather than conditionally instantiate beans throughout the
application</p>
</li>
<li>
<p>Customize a bean&#8217;s properties without any additional code</p>
</li>
<li>
<p>Customize a bean&#8217;s property values directly from within the
configuration file so that it is initialized with these values when it
is created</p>
</li>
<li>
<p>Using <code>value</code> elements, set a property of one managed bean to be the
result of evaluating another value expression</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This section shows you how to initialize beans using the managed bean
creation facility. See <a href="#BNATY">Writing Bean
Properties</a> and <a href="#BNAVB">Writing Managed Bean
Methods</a> for information on programming managed beans.</p>
</div>
<div class="paragraph">
<p><a id="BNAWR"></a><a id="using-the-managed-bean-element"></a></p>
</div>
<div class="sect3">
<h4 id="_using_the_managed_bean_element">10.5.1. Using the managed-bean Element</h4>
<div class="paragraph">
<p>A managed bean is initiated in the application configuration resource
file using a <code>managed-bean</code> element, which represents an instance of a
bean class that must exist in the application. At runtime, the
Jakarta Server Faces implementation processes the <code>managed-bean</code> element. If
a page references the bean and no bean instance exists, the Jakarta Server
Faces implementation instantiates the bean as specified by the element
configuration.</p>
</div>
<div class="paragraph">
<p>Here is an example managed bean configuration from the Duke&#8217;s Bookstore
case study:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;managed-bean</span> <span class="attribute-name">eager</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;managed-bean-name&gt;</span>Book201<span class="tag">&lt;/managed-bean-name&gt;</span>
    <span class="tag">&lt;managed-bean-class&gt;</span>dukesbookstore.model.ImageArea<span class="tag">&lt;/managed-bean-class&gt;</span>
    <span class="tag">&lt;managed-bean-scope&gt;</span>application<span class="tag">&lt;/managed-bean-scope&gt;</span>
    <span class="tag">&lt;managed-property&gt;</span>
        <span class="tag">&lt;property-name&gt;</span>shape<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;value&gt;</span>rect<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/managed-property&gt;</span>
    <span class="tag">&lt;managed-property&gt;</span>
        <span class="tag">&lt;property-name&gt;</span>alt<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;value&gt;</span>Duke<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/managed-property&gt;</span>
    <span class="tag">&lt;managed-property&gt;</span>
        <span class="tag">&lt;property-name&gt;</span>coords<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;value&gt;</span>67,23,212,268<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/managed-property&gt;</span>
<span class="tag">&lt;/managed-bean&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>managed-bean-name</code> element defines the key under which the bean
will be stored in a scope. For a component&#8217;s value to map to this bean,
the component tag&#8217;s <code>value</code> attribute must match the <code>managed-bean-name</code>
up to the first period.</p>
</div>
<div class="paragraph">
<p>The <code>managed-bean-class</code> element defines the fully qualified name of the
JavaBeans component class used to instantiate the bean.</p>
</div>
<div class="paragraph">
<p>The <code>managed-bean</code> element can contain zero or more <code>managed-property</code>
elements, each corresponding to a property defined in the bean class.
These elements are used to initialize the values of the bean properties.
If you don&#8217;t want a particular property initialized with a value when
the bean is instantiated, do not include a <code>managed-property</code> definition
for it in your application configuration resource file.</p>
</div>
<div class="paragraph">
<p>If a <code>managed-bean</code> element does not contain other <code>managed-bean</code>
elements, it can contain one <code>map-entries</code> element or <code>list-entries</code>
element. The <code>map-entries</code> element configures a set of beans that are
instances of <code>Map</code>. The <code>list-entries</code> element configures a set of beans
that are instances of <code>List</code>.</p>
</div>
<div class="paragraph">
<p>In the following example, the <code>newsletters</code> managed bean, representing a
<code>UISelectItems</code> component, is configured as an <code>ArrayList</code> that
represents a set of <code>SelectItem</code> objects. Each <code>SelectItem</code> object is in
turn configured as a managed bean with properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;managed-bean&gt;</span>
    <span class="tag">&lt;managed-bean-name&gt;</span>newsletters<span class="tag">&lt;/managed-bean-name&gt;</span>
    <span class="tag">&lt;managed-bean-class&gt;</span>java.util.ArrayList<span class="tag">&lt;/managed-bean-class&gt;</span>
    <span class="tag">&lt;managed-bean-scope&gt;</span>application<span class="tag">&lt;/managed-bean-scope&gt;</span>
    <span class="tag">&lt;list-entries&gt;</span>
        <span class="tag">&lt;value-class&gt;</span>javax.faces.model.SelectItem<span class="tag">&lt;/value-class&gt;</span>
        <span class="tag">&lt;value&gt;</span>#{newsletter0}<span class="tag">&lt;/value&gt;</span>
        <span class="tag">&lt;value&gt;</span>#{newsletter1}<span class="tag">&lt;/value&gt;</span>
        <span class="tag">&lt;value&gt;</span>#{newsletter2}<span class="tag">&lt;/value&gt;</span>
        <span class="tag">&lt;value&gt;</span>#{newsletter3}<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/list-entries&gt;</span>
<span class="tag">&lt;/managed-bean&gt;</span>
<span class="tag">&lt;managed-bean&gt;</span>
    <span class="tag">&lt;managed-bean-name&gt;</span>newsletter0<span class="tag">&lt;/managed-bean-name&gt;</span>
    <span class="tag">&lt;managed-bean-class&gt;</span>javax.faces.model.SelectItem<span class="tag">&lt;/managed-bean-class&gt;</span>
    <span class="tag">&lt;managed-bean-scope&gt;</span>none<span class="tag">&lt;/managed-bean-scope&gt;</span>
    <span class="tag">&lt;managed-property&gt;</span>
        <span class="tag">&lt;property-name&gt;</span>label<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;value&gt;</span>Duke's Quarterly<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/managed-property&gt;</span>
    <span class="tag">&lt;managed-property&gt;</span>
        <span class="tag">&lt;property-name&gt;</span>value<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;value&gt;</span>200<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/managed-property&gt;</span>
<span class="tag">&lt;/managed-bean&gt;</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>This approach may be useful for quick-and-dirty creation of selection
item lists before a development team has had time to create such lists
from the database. Note that each of the individual newsletter beans has
a <code>managed-bean-scope</code> setting of <code>none</code> so that they will not
themselves be placed into any scope.</p>
</div>
<div class="paragraph">
<p>See <a href="#BNAWX">Initializing Array and List Properties</a> for more
information on configuring collections as beans.</p>
</div>
<div class="paragraph">
<p>To map to a property defined by a <code>managed-property</code> element, you must
ensure that the part of a component tag&#8217;s <code>value</code> expression after the
period matches the <code>managed-property</code> element&#8217;s <code>property-name</code> element.
The next section, <a href="#BNAWS">Initializing Properties Using the
managed-property Element</a>, explains in more detail how to use the
<code>managed-property</code> element. See <a href="#BNAWY">Initializing Managed Bean
Properties</a> for an example of initializing a managed bean property.</p>
</div>
<div class="paragraph">
<p><a id="BNAWS"></a><a id="initializing-properties-using-the-managed-property-element"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_initializing_properties_using_the_managed_property_element">10.5.2. Initializing Properties Using the managed-property Element</h4>
<div class="paragraph">
<p>A <code>managed-property</code> element must contain a <code>property-name</code> element,
which must match the name of the corresponding property in the bean. A
<code>managed-property</code> element must also contain one of a set of elements
that defines the value of the property. This value must be of the same
type as that defined for the property in the corresponding bean. Which
element you use to define the value depends on the type of the property
defined in the bean. <a href="#BNAWT">Table 16-1</a> lists all the elements that
are used to initialize a value.</p>
</div>
<div class="paragraph">
<p><a id="sthref94"></a><a id="BNAWT"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 16-1 Subelements of managed-property Elements That Define Property
Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 75%;">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Element</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Value It Defines</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list-entries</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the values in a list</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map-entries</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the values of a map</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null-value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicitly sets the property to <code>null</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines a single value, such as a <code>String</code>, <code>int</code>, or
Jakarta Server Faces EL expression</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="#BNAWR">Using the managed-bean Element</a> includes an example of
initializing an <code>int</code> property (a primitive type) using the <code>value</code>
subelement. You also use the <code>value</code> subelement to initialize <code>String</code>
and other reference types. The rest of this section describes how to use
the <code>value</code> subelement and other subelements to initialize properties of
Java <code>Enum</code> types, <code>Map</code>, <code>array</code>, and <code>Collection</code>, as well as
initialization parameters.</p>
</div>
<div class="paragraph">
<p><a id="BNAWU"></a><a id="referencing-a-java-enum-type"></a></p>
</div>
<div class="sect4">
<h5 id="_referencing_a_java_enum_type">Referencing a Java Enum Type</h5>
<div class="paragraph">
<p>A managed bean property can also be a Java <code>Enum</code> type (see
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html" class="bare">http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html</a></code>). In this
case, the <code>value</code> element of the <code>managed-property</code> element must be a
<code>String</code> that matches one of the <code>String</code> constants of the <code>Enum</code>. In
other words, the <code>String</code> must be one of the valid values that can be
returned if you were to call <code>valueOf(Class, String)</code> on <code>enum</code>, where
<code>Class</code> is the <code>Enum</code> class and <code>String</code> is the contents of the <code>value</code>
subelement. For example, suppose the managed bean property is the
following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">enum</span> Suit { Hearts, Spades, Diamonds, Clubs }
 ...
public Suit getSuit() { ... return Suit.Hearts; }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Assuming you want to configure this property in the application
configuration resource file, the corresponding <code>managed-property</code>
element looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;managed-property&gt;</span>
    <span class="tag">&lt;property-name&gt;</span>Suit<span class="tag">&lt;/property-name&gt;</span>
    <span class="tag">&lt;value&gt;</span>Hearts<span class="tag">&lt;/value&gt;</span>
<span class="tag">&lt;/managed-property&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When the system encounters this property, it iterates over each of the
members of the <code>enum</code> and calls <code>toString()</code> on each member until it
finds one that is exactly equal to the value from the <code>value</code> element.</p>
</div>
<div class="paragraph">
<p><a id="BNAWV"></a><a id="referencing-a-context-initialization-parameter"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_referencing_a_context_initialization_parameter">Referencing a Context Initialization Parameter</h5>
<div class="paragraph">
<p>Another powerful feature of the managed bean creation facility is the
ability to reference implicit objects from a managed bean property.</p>
</div>
<div class="paragraph">
<p>Suppose you have a page that accepts data from a customer, including the
customer&#8217;s address. Suppose also that most of your customers live in a
particular area code. You can make the area code component render this
area code by saving it in an implicit object and referencing it when the
page is rendered.</p>
</div>
<div class="paragraph">
<p>You can save the area code as an initial default value in the context
<code>initParam</code> implicit object by adding a context parameter to your web
application and setting its value in the deployment descriptor. For
example, to set a context parameter called <code>defaultAreaCode</code> to <code>650</code>,
add a <code>context-param</code> element to the deployment descriptor and give the
parameter the name <code>defaultAreaCode</code> and the value <code>650</code>.</p>
</div>
<div class="paragraph">
<p>Next, write a <code>managed-bean</code> declaration that configures a property that
references the parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;managed-bean&gt;</span>
    <span class="tag">&lt;managed-bean-name&gt;</span>customer<span class="tag">&lt;/managed-bean-name&gt;</span>
        <span class="tag">&lt;managed-bean-class&gt;</span>CustomerBean<span class="tag">&lt;/managed-bean-class&gt;</span>
        <span class="tag">&lt;managed-bean-scope&gt;</span>request<span class="tag">&lt;/managed-bean-scope&gt;</span>
        <span class="tag">&lt;managed-property&gt;</span>
            <span class="tag">&lt;property-name&gt;</span>areaCode<span class="tag">&lt;/property-name&gt;</span>
                <span class="tag">&lt;value&gt;</span>#{initParam.defaultAreaCode}<span class="tag">&lt;/value&gt;</span>
            <span class="tag">&lt;/managed-property&gt;</span>
            ...
<span class="tag">&lt;/managed-bean&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To access the area code at the time the page is rendered, refer to the
property from the <code>area</code> component tag&#8217;s <code>value</code> attribute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="attribute-value">area</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{customer.areaCode}</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Values are retrieved from other implicit objects in a similar way.</p>
</div>
<div class="paragraph">
<p><a id="BNAWW"></a><a id="initializing-map-properties"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_initializing_map_properties">Initializing Map Properties</h5>
<div class="paragraph">
<p>The <code>map-entries</code> element is used to initialize the values of a bean
property with a type of <code>Map</code> if the <code>map-entries</code> element is used
within a <code>managed-property</code> element. A <code>map-entries</code> element contains an
optional <code>key-class</code> element, an optional <code>value-class</code> element, and
zero or more <code>map-entry</code> elements.</p>
</div>
<div class="paragraph">
<p>Each of the <code>map-entry</code> elements must contain a <code>key</code> element and either
a <code>null-value</code> or <code>value</code> element. Here is an example that uses the
<code>map-entries</code> element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;managed-bean&gt;</span>
    ...
    <span class="tag">&lt;managed-property&gt;</span>
        <span class="tag">&lt;property-name&gt;</span>prices<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;map-entries&gt;</span>
            <span class="tag">&lt;map-entry&gt;</span>
                <span class="tag">&lt;key&gt;</span>My Early Years: Growing Up on *7<span class="tag">&lt;/key&gt;</span>
                <span class="tag">&lt;value&gt;</span>30.75<span class="tag">&lt;/value&gt;</span>
            <span class="tag">&lt;/map-entry&gt;</span>
            <span class="tag">&lt;map-entry&gt;</span>
                <span class="tag">&lt;key&gt;</span>Web Servers for Fun and Profit<span class="tag">&lt;/key&gt;</span>
                <span class="tag">&lt;value&gt;</span>40.75<span class="tag">&lt;/value&gt;</span>
            <span class="tag">&lt;/map-entry&gt;</span>
        <span class="tag">&lt;/map-entries&gt;</span>
    <span class="tag">&lt;/managed-property&gt;</span>
<span class="tag">&lt;/managed-bean&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The map created from this <code>map-entries</code> tag contains two entries. By
default, all the keys and values are converted to <code>String</code>. If you want
to specify a different type for the keys in the map, embed the
<code>key-class</code> element just inside the <code>map-entries</code> element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;map-entries&gt;</span>
    <span class="tag">&lt;key-class&gt;</span>java.math.BigDecimal<span class="tag">&lt;/key-class&gt;</span>
    ...
<span class="tag">&lt;/map-entries&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This declaration will convert all the keys into <code>java.math.BigDecimal</code>.
Of course, you must make sure that the keys can be converted to the type
you specify. The key from the example in this section cannot be
converted to a <code>BigDecimal</code>, because it is a <code>String</code>.</p>
</div>
<div class="paragraph">
<p>If you want to specify a different type for all the values in the map,
include the <code>value-class</code> element after the <code>key-class</code> element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;map-entries&gt;</span>
    <span class="tag">&lt;key-class&gt;</span>int<span class="tag">&lt;/key-class&gt;</span>
    <span class="tag">&lt;value-class&gt;</span>java.math.BigDecimal<span class="tag">&lt;/value-class&gt;</span>
    ...
<span class="tag">&lt;/map-entries&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that this tag sets only the type of all the <code>value</code> subelements.</p>
</div>
<div class="paragraph">
<p>Each <code>map-entry</code> in the preceding example includes a <code>value</code> subelement.
The <code>value</code> subelement defines a single value, which will be converted
to the type specified in the bean.</p>
</div>
<div class="paragraph">
<p>Instead of using a <code>map-entries</code> element, it is also possible to assign
the entire map using a <code>value</code> element that specifies a map-typed
expression.</p>
</div>
<div class="paragraph">
<p><a id="BNAWX"></a><a id="initializing-array-and-list-properties"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_initializing_array_and_list_properties">Initializing Array and List Properties</h5>
<div class="paragraph">
<p>The <code>list-entries</code> element is used to initialize the values of an array
or <code>List</code> property. Each individual value of the array or <code>List</code> is
initialized using a <code>value</code> or <code>null-value</code> element. Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;managed-bean&gt;</span>
    ...
    <span class="tag">&lt;managed-property&gt;</span>
        <span class="tag">&lt;property-name&gt;</span>books<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;list-entries&gt;</span>
            <span class="tag">&lt;value-class&gt;</span>java.lang.String<span class="tag">&lt;/value-class&gt;</span>
            <span class="tag">&lt;value&gt;</span>Web Servers for Fun and Profit<span class="tag">&lt;/value&gt;</span>
            <span class="tag">&lt;value&gt;</span>#{myBooks.bookId[3]}<span class="tag">&lt;/value&gt;</span>
            <span class="tag">&lt;null-value</span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/list-entries&gt;</span>
    <span class="tag">&lt;/managed-property&gt;</span>
<span class="tag">&lt;/managed-bean&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This example initializes an array or a <code>List</code>. The type of the
corresponding property in the bean determines which data structure is
created. The <code>list-entries</code> element defines the list of values in the
array or <code>List</code>. The <code>value</code> element specifies a single value in the
array or <code>List</code> and can reference a property in another bean. The
<code>null-value</code> element will cause the <code>setBooks</code> method to be called with
an argument of <code>null</code>. A <code>null</code> property cannot be specified for a
property whose data type is a Java primitive, such as <code>int</code> or
<code>boolean</code>.</p>
</div>
<div class="paragraph">
<p><a id="BNAWY"></a><a id="initializing-managed-bean-properties"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_initializing_managed_bean_properties">Initializing Managed Bean Properties</h5>
<div class="paragraph">
<p>Sometimes you might want to create a bean that also references other
managed beans so that you can construct a graph or a tree of beans. For
example, suppose you want to create a bean representing a customer&#8217;s
information, including the mailing address and street address, each of
which is also a bean. The following <code>managed-bean</code> declarations create a
<code>CustomerBean</code> instance that has two <code>AddressBean</code> properties: one
representing the mailing address and the other representing the street
address. This declaration results in a tree of beans with <code>CustomerBean</code>
as its root and the two <code>AddressBean</code> objects as children.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;managed-bean&gt;</span>
    <span class="tag">&lt;managed-bean-name&gt;</span>customer<span class="tag">&lt;/managed-bean-name&gt;</span>
    <span class="tag">&lt;managed-bean-class&gt;</span>
        com.example.mybeans.CustomerBean
    <span class="tag">&lt;/managed-bean-class&gt;</span>
    <span class="tag">&lt;managed-bean-scope&gt;</span> request <span class="tag">&lt;/managed-bean-scope&gt;</span>
    <span class="tag">&lt;managed-property&gt;</span>
        <span class="tag">&lt;property-name&gt;</span>mailingAddress<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;value&gt;</span>#{addressBean}<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/managed-property&gt;</span>
    <span class="tag">&lt;managed-property&gt;</span>
        <span class="tag">&lt;property-name&gt;</span>streetAddress<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;value&gt;</span>#{addressBean}<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/managed-property&gt;</span>
    <span class="tag">&lt;managed-property&gt;</span>
        <span class="tag">&lt;property-name&gt;</span>customerType<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;value&gt;</span>New<span class="tag">&lt;/value&gt;</span>
    <span class="tag">&lt;/managed-property&gt;</span>
<span class="tag">&lt;/managed-bean&gt;</span>
<span class="tag">&lt;managed-bean&gt;</span>
    <span class="tag">&lt;managed-bean-name&gt;</span>addressBean<span class="tag">&lt;/managed-bean-name&gt;</span>
    <span class="tag">&lt;managed-bean-class&gt;</span>
        com.example.mybeans.AddressBean
    <span class="tag">&lt;/managed-bean-class&gt;</span>
    <span class="tag">&lt;managed-bean-scope&gt;</span> none <span class="tag">&lt;/managed-bean-scope&gt;</span>
    <span class="tag">&lt;managed-property&gt;</span>
        <span class="tag">&lt;property-name&gt;</span>street<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;null-value</span><span class="tag">/&gt;</span>
    <span class="tag">&lt;managed-property&gt;</span>
    ...
<span class="tag">&lt;/managed-bean&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The first <code>CustomerBean</code> declaration (with the <code>managed-bean-name</code> of
<code>customer</code>) creates a <code>CustomerBean</code> in request scope. This bean has two
properties, <code>mailingAddress</code> and <code>streetAddress</code>. These properties use
the <code>value</code> element to reference a bean named <code>addressBean</code>.</p>
</div>
<div class="paragraph">
<p>The second managed bean declaration defines an <code>AddressBean</code> but does
not create it, because its <code>managed-bean-scope</code> element defines a scope
of <code>none</code>. Recall that a scope of <code>none</code> means that the bean is created
only when something else references it. Because both the
<code>mailingAddress</code> and the <code>streetAddress</code> properties reference
<code>addressBean</code> using the <code>value</code> element, two instances of <code>AddressBean</code>
are created when <code>CustomerBean</code> is created.</p>
</div>
<div class="paragraph">
<p>When you create an object that points to other objects, do not try to
point to an object with a shorter life span, because it might be
impossible to recover that scope&#8217;s resources when it goes away. A
session-scoped object, for example, cannot point to a request-scoped
object. And objects with <code>none</code> scope have no effective life span
managed by the framework, so they can point only to other <code>none</code>-scoped
objects. <a href="#BNAWZ">Table 16-2</a> outlines all of the allowed
connections.</p>
</div>
<div class="paragraph">
<p><a id="sthref95"></a><a id="BNAWZ"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 16-2 Allowable Connections between Scoped Objects</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 60%;">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>An Object of This Scope</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>May Point to an Object of This Scope</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>none</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>none</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>application</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>none</code>, <code>application</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>session</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>none</code>, <code>application</code>, <code>session</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>request</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>none</code>, <code>application</code>, <code>session</code>, <code>request</code>, <code>view</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>view</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>none</code>, <code>application</code>, <code>session</code>, <code>view</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Be sure not to allow cyclical references between objects. For example,
neither of the <code>AddressBean</code> objects in the preceding example should
point back to the <code>CustomerBean</code> object, because <code>CustomerBean</code> already
points to the <code>AddressBean</code> objects.</p>
</div>
<div class="paragraph">
<p><a id="BNAXA"></a><a id="initializing-maps-and-lists"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_initializing_maps_and_lists">10.5.3. Initializing Maps and Lists</h4>
<div class="paragraph">
<p>In addition to configuring <code>Map</code> and <code>List</code> properties, you can also
configure a <code>Map</code> and a <code>List</code> directly so that you can reference them
from a tag rather than referencing a property that wraps a <code>Map</code> or a
<code>List</code>.</p>
</div>
<div class="paragraph">
<p><a id="BNAXB"></a><a id="registering-application-messages"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_registering_application_messages">10.6. Registering Application Messages</h3>
<div class="paragraph">
<p>Application messages can include any strings displayed to the user as
well as custom error messages (which are displayed by the <code>message</code> and
<code>messages</code> tags) for your custom converters or validators. To make
messages available at application startup time, do one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Queue an individual message onto the
<code>javax.faces.context.FacesContext</code> instance programmatically, as
described in <a href="#GKUHG">Using FacesMessage to Create a Message</a></p>
</li>
<li>
<p>Register all the messages with your application using the application
configuration resource file</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is the section of the <code>faces-config.xml</code> file that registers the
messages for the Duke&#8217;s Bookstore case study application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;application&gt;</span>
    <span class="tag">&lt;resource-bundle&gt;</span>
        <span class="tag">&lt;base-name&gt;</span>
            jakarta.tutorial.dukesbookstore.web.messages.Messages
        <span class="tag">&lt;/base-name&gt;</span>
        <span class="tag">&lt;var&gt;</span>bundle<span class="tag">&lt;/var&gt;</span>
    <span class="tag">&lt;/resource-bundle&gt;</span>
    <span class="tag">&lt;locale-config&gt;</span>
        <span class="tag">&lt;default-locale&gt;</span>en<span class="tag">&lt;/default-locale&gt;</span>
        <span class="tag">&lt;supported-locale&gt;</span>es<span class="tag">&lt;/supported-locale&gt;</span>
        <span class="tag">&lt;supported-locale&gt;</span>de<span class="tag">&lt;/supported-locale&gt;</span>
        <span class="tag">&lt;supported-locale&gt;</span>fr<span class="tag">&lt;/supported-locale&gt;</span>
    <span class="tag">&lt;/locale-config&gt;</span>
<span class="tag">&lt;/application&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This set of elements causes the application to be populated with the
messages that are contained in the specified resource bundle.</p>
</div>
<div class="paragraph">
<p>The <code>resource-bundle</code> element represents a set of localized messages. It
must contain the fully qualified path to the resource bundle containing
the localized messages (in this case,
<code>dukesbookstore.web.messages.Messages</code>). The <code>var</code> element defines the
EL name by which page authors refer to the resource bundle.</p>
</div>
<div class="paragraph">
<p>The <code>locale-config</code> element lists the default locale and the other
supported locales. The <code>locale-config</code> element enables the system to
find the correct locale based on the browser&#8217;s language settings.</p>
</div>
<div class="paragraph">
<p>The <code>supported-locale</code> and <code>default-locale</code> tags accept the lowercase,
two-character codes defined by ISO 639-1 (see
<code><a href="http://www.loc.gov/standards/iso639-2/php/English_list.php" class="bare">http://www.loc.gov/standards/iso639-2/php/English_list.php</a></code>). Make sure
that your resource bundle actually contains the messages for the locales
you specify with these tags.</p>
</div>
<div class="paragraph">
<p>To access the localized message, the application developer merely
references the key of the message from the resource bundle.</p>
</div>
<div class="paragraph">
<p>You can pull localized text into an <code>alt</code> tag for a graphic image, as in
the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:graphicImage</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mapImage</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">book_all.jpg</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">library</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">images</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.ChooseBook}</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">usemap</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#bookMap</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>alt</code> attribute can accept value expressions. In this case, the
<code>alt</code> attribute refers to localized text that will be included in the
alternative text of the image rendered by this tag.</p>
</div>
<div class="paragraph">
<p><a id="GKUHG"></a><a id="using-facesmessage-to-create-a-message"></a></p>
</div>
<div class="sect3">
<h4 id="_using_facesmessage_to_create_a_message">10.6.1. Using FacesMessage to Create a Message</h4>
<div class="paragraph">
<p>Instead of registering messages in the application configuration
resource file, you can access the <code>java.util.ResourceBundle</code> directly
from managed bean code. The code snippet below locates an email error
message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">String</span> message = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;
...
message = ExampleBean.loadErrorMessage(context,
    ExampleBean.EX_RESOURCE_BUNDLE_NAME,
         <span class="string"><span class="delimiter">&quot;</span><span class="content">EMailError</span><span class="delimiter">&quot;</span></span>);
context.addMessage(toValidate.getClientId(context),
    <span class="keyword">new</span> FacesMessage(message));</code></pre>
</div>
</div>
<div class="paragraph">
<p>These lines call the bean&#8217;s <code>loadErrorMessage</code> method to get the message
from the <code>ResourceBundle</code>. Here is the <code>loadErrorMessage</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> <span class="predefined-type">String</span> loadErrorMessage(FacesContext context,
     <span class="predefined-type">String</span> basename, <span class="predefined-type">String</span> key) {
    <span class="keyword">if</span> ( bundle == <span class="predefined-constant">null</span> ) {
         <span class="keyword">try</span> {
            bundle = <span class="predefined-type">ResourceBundle</span>.getBundle(basename,
                 context.getViewRoot().getLocale());
        } <span class="keyword">catch</span> (<span class="exception">Exception</span> e) {
            <span class="keyword">return</span> <span class="predefined-constant">null</span>;
        }
    }
    <span class="keyword">return</span> bundle.getString(key);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BNASS"></a><a id="referencing-error-messages"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_referencing_error_messages">10.6.2. Referencing Error Messages</h4>
<div class="paragraph">
<p>A Jakarta Server Faces page uses the <code>message</code> or <code>messages</code> tags to access
error messages, as explained in <a href="#BNASO">Displaying
Error Messages with the h:message and h:messages Tags</a>.</p>
</div>
<div class="paragraph">
<p>The error messages these tags access include</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The standard error messages that accompany the standard converters and
validators that ship with the API. (see Section 2.5.2.4 of the
Jakarta Server Faces specification for a complete list of standard error
messages)</p>
</li>
<li>
<p>Custom error messages contained in resource bundles registered with
the application by the application architect using the <code>resource-bundle</code>
element in the configuration file</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When a converter or validator is registered on an input component, the
appropriate error message is automatically queued on the component.</p>
</div>
<div class="paragraph">
<p>A page author can override the error messages queued on a component by
using the following attributes of the component&#8217;s tag:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>converterMessage</code>: References the error message to display when the
data on the enclosing component cannot be converted by the converter
registered on this component.</p>
</li>
<li>
<p><code>requiredMessage</code>: References the error message to display when no
value has been entered into the enclosing component.</p>
</li>
<li>
<p><code>validatorMessage</code>: References the error message to display when the
data on the enclosing component cannot be validated by the validator
registered on this component.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All three attributes are enabled to take literal values and value
expressions. If an attribute uses a value expression, this expression
references the error message in a resource bundle. This resource bundle
must be made available to the application in one of the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>By the application architect using the <code>resource-bundle</code> element in
the configuration file</p>
</li>
<li>
<p>By the page author using the <code>f:loadBundle</code> tag</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Conversely, the <code>resource-bundle</code> element must be used to make available
to the application those resource bundles containing custom error
messages that are queued on the component as a result of a custom
converter or validator being registered on the component.</p>
</div>
<div class="paragraph">
<p>The following tags show how to specify the <code>requiredMessage</code> attribute
using a value expression to reference an error message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ccno</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">19</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">required</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">requiredMessage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{customMessages.ReqMessage}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    ...
<span class="tag">&lt;/h:inputText&gt;</span>
<span class="tag">&lt;h:message</span> <span class="attribute-name">styleClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">error-message</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ccno</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The value expression used by <code>requiredMessage</code> in this example
references the error message with the <code>ReqMessage</code> key in the resource
bundle <code>customMessages</code>.</p>
</div>
<div class="paragraph">
<p>This message replaces the corresponding message queued on the component
and will display wherever the <code>message</code> or <code>messages</code> tag is placed on
the page.</p>
</div>
<div class="paragraph">
<p><a id="GIREB"></a><a id="using-default-validators"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_default_validators">10.7. Using Default Validators</h3>
<div class="paragraph">
<p>In addition to the validators you declare on the components, you can
also specify zero or more default validators in the application
configuration resource file. The default validator applies to all
<code>javax.faces.component.UIInput</code> instances in a view or component tree
and is appended after the local defined validators. Here is an example
of a default validator registered in the application configuration
resource file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;faces-config&gt;</span>
    <span class="tag">&lt;application&gt;</span>
        <span class="tag">&lt;default-validators&gt;</span>
            <span class="tag">&lt;validator-id&gt;</span>javax.faces.Bean<span class="tag">&lt;/validator-id&gt;</span>
        <span class="tag">&lt;/default-validators&gt;</span>
    <span class="tag">&lt;application</span><span class="tag">/&gt;</span>
<span class="tag">&lt;/faces-config&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BNAXD"></a><a id="registering-a-custom-validator"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_registering_a_custom_validator">10.8. Registering a Custom Validator</h3>
<div class="paragraph">
<p>If the application developer provides an implementation of the
<code>javax.faces.validator.Validator</code> interface to perform validation, you
must register this custom validator either by using the
<code>@FacesValidator</code> annotation, as described in
<a href="#BNAUX">Implementing the Validator Interface</a>, or
by using the <code>validator</code> XML element in the application configuration
resource file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;validator&gt;</span>
    ...
    <span class="tag">&lt;validator-id&gt;</span>FormatValidator<span class="tag">&lt;/validator-id&gt;</span>
    <span class="tag">&lt;validator-class&gt;</span>
        myapplication.validators.FormatValidator
    <span class="tag">&lt;/validator-class&gt;</span>
    <span class="tag">&lt;attribute&gt;</span>
        ...
        <span class="tag">&lt;attribute-name&gt;</span>formatPatterns<span class="tag">&lt;/attribute-name&gt;</span>
        <span class="tag">&lt;attribute-class&gt;</span>java.lang.String<span class="tag">&lt;/attribute-class&gt;</span>
    <span class="tag">&lt;/attribute&gt;</span>
<span class="tag">&lt;/validator&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Attributes specified in a <code>validator</code> tag override any settings in the
<code>@FacesValidator</code> annotation.</p>
</div>
<div class="paragraph">
<p>The <code>validator-id</code> and <code>validator-class</code> elements are required
subelements. The <code>validator-id</code> element represents the identifier under
which the <code>Validator</code> class should be registered. This ID is used by the
tag class corresponding to the custom <code>validator</code> tag.</p>
</div>
<div class="paragraph">
<p>The <code>validator-class</code> element represents the fully qualified class name
of the <code>Validator</code> class.</p>
</div>
<div class="paragraph">
<p>The <code>attribute</code> element identifies an attribute associated with the
<code>Validator</code> implementation. It has required <code>attribute-name</code> and
<code>attribute-class</code> subelements. The <code>attribute-name</code> element refers to
the name of the attribute as it appears in the <code>validator</code> tag. The
<code>attribute-class</code> element identifies the Java type of the value
associated with the attribute.</p>
</div>
<div class="paragraph">
<p><a href="#BNAUW">Creating and Using a Custom Validator</a>
explains how to implement the <code>Validator</code> interface.</p>
</div>
<div class="paragraph">
<p><a href="#BNATV">Using a Custom Validator</a> explains how to
reference the validator from the page.</p>
</div>
<div class="paragraph">
<p><a id="BNAXE"></a><a id="registering-a-custom-converter"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_registering_a_custom_converter">10.9. Registering a Custom Converter</h3>
<div class="paragraph">
<p>As is the case with a custom validator, if the application developer
creates a custom converter, you must register it with the application
either by using the <code>@FacesConverter</code> annotation, as described in
<a href="#GLPHB">Creating a Custom Converter</a>, or by using
the <code>converter</code> XML element in the application configuration resource
file. Here is a hypothetical <code>converter</code> configuration for
<code>CreditCardConverter</code> from the Duke&#8217;s Bookstore case study:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;converter&gt;</span>
    <span class="tag">&lt;description&gt;</span>
        Converter for credit card numbers that normalizes
        the input to a standard format
    <span class="tag">&lt;/description&gt;</span>
    <span class="tag">&lt;converter-id&gt;</span>CreditCardConverter<span class="tag">&lt;/converter-id&gt;</span>
    <span class="tag">&lt;converter-class&gt;</span>
        dukesbookstore.converters.CreditCardConverter
    <span class="tag">&lt;/converter-class&gt;</span>
<span class="tag">&lt;/converter&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Attributes specified in a <code>converter</code> tag override any settings in the
<code>@FacesConverter</code> annotation.</p>
</div>
<div class="paragraph">
<p>The <code>converter</code> element represents a <code>javax.faces.convert.Converter</code>
implementation and contains required <code>converter-id</code> and
<code>converter-class</code> elements.</p>
</div>
<div class="paragraph">
<p>The <code>converter-id</code> element identifies an ID that is used by the
<code>converter</code> attribute of a UI component tag to apply the converter to
the component&#8217;s data. <a href="#BNATU">Using a Custom
Converter</a> includes an example of referencing the custom converter from
a component tag.</p>
</div>
<div class="paragraph">
<p>The <code>converter-class</code> element identifies the <code>Converter</code> implementation.</p>
</div>
<div class="paragraph">
<p><a href="#BNAUS">Creating and Using a Custom Converter</a>
explains how to create a custom converter.</p>
</div>
<div class="paragraph">
<p><a id="BNAXF"></a><a id="configuring-navigation-rules"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_navigation_rules">10.10. Configuring Navigation Rules</h3>
<div class="paragraph">
<p>Navigation between different pages of a Jakarta Server Faces application,
such as choosing the next page to be displayed after a button or link
component is clicked, is defined by a set of rules. Navigation rules can
be implicit, or they can be explicitly defined in the application
configuration resource file. For more information on implicit navigation
rules, see <a href="#BNAQL">Navigation Model</a>.</p>
</div>
<div class="paragraph">
<p>Each navigation rule specifies how to navigate from one page to another
page or set of pages. The Jakarta Server Faces implementation chooses the
proper navigation rule according to which page is currently displayed.</p>
</div>
<div class="paragraph">
<p>After the proper navigation rule is selected, the choice of which page
to access next from the current page depends on two factors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The action method invoked when the component was clicked</p>
</li>
<li>
<p>The logical outcome referenced by the component&#8217;s tag or returned from
the action method</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The outcome can be anything the developer chooses, but <a href="#BNAXG">Table
16-3</a> lists some outcomes commonly used in web applications.</p>
</div>
<div class="paragraph">
<p><a id="sthref96"></a><a id="BNAXG"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 16-3 Common Outcome Strings</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 60%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Outcome</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>What It Means</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>success</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everything worked. Go on to the next page.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Something is wrong. Go on to an error page.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>login</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The user needs to log in first. Go on to the login page.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>no results</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The search did not find anything. Go to the search page
again.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Usually, the action method performs some processing on the form data of
the current page. For example, the method might check whether the user
name and password entered in the form match the user name and password
on file. If they match, the method returns the outcome <code>success</code>.
Otherwise, it returns the outcome <code>failure</code>. As this example
demonstrates, both the method used to process the action and the outcome
returned are necessary to determine the correct page to access.</p>
</div>
<div class="paragraph">
<p>Here is a navigation rule that could be used with the example just
described:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;navigation-rule&gt;
    &lt;from-view-id&gt;/login.xhtml&lt;/from-view-id&gt;
    &lt;navigation-<span class="keyword">case</span>&gt;
        &lt;from-action&gt;<span class="error">#</span>{LoginForm.login}&lt;/from-action&gt;
        &lt;from-outcome&gt;success&lt;/from-outcome&gt;
        &lt;to-view-id&gt;/storefront.xhtml&lt;/to-view-id&gt;
    &lt;/navigation-<span class="keyword">case</span>&gt;
    &lt;navigation-<span class="keyword">case</span>&gt;
        &lt;from-action&gt;<span class="error">#</span>{LoginForm.logon}&lt;/from-action&gt;
        &lt;from-outcome&gt;failure&lt;/from-outcome&gt;
        &lt;to-view-id&gt;/logon.xhtml&lt;/to-view-id&gt;
    &lt;/navigation-<span class="keyword">case</span>&gt;
&lt;/navigation-rule&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This navigation rule defines the possible ways to navigate from
<code>login.xhtml</code>. Each <code>navigation-case</code> element defines one possible
navigation path from <code>login.xhtml</code>. The first <code>navigation-case</code> says
that if <code>LoginForm.login</code> returns an outcome of <code>success</code>, then
<code>storefront.xhtml</code> will be accessed. The second <code>navigation-case</code> says
that <code>login.xhtml</code> will be re-rendered if <code>LoginForm.login</code> returns
<code>failure</code>.</p>
</div>
<div class="paragraph">
<p>The configuration of an application&#8217;s page flow consists of a set of
navigation rules. Each rule is defined by the <code>navigation-rule</code> element
in the <code>faces-config.xml</code> file.</p>
</div>
<div class="paragraph">
<p>Each <code>navigation-rule</code> element corresponds to one component tree
identifier defined by the optional <code>from-view-id</code> element. This means
that each rule defines all the possible ways to navigate from one
particular page in the application. If there is no <code>from-view-id</code>
element, the navigation rules defined in the <code>navigation-rule</code> element
apply to all the pages in the application. The <code>from-view-id</code> element
also allows wildcard matching patterns. For example, this <code>from-view-id</code>
element says that the navigation rule applies to all the pages in the
<code>books</code> directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;from-view-id&gt;/books<span class="comment">/*&lt;/from-view-id&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code>navigation-rule</code> element can contain zero or more <code>navigation-case</code>
elements. The <code>navigation-case</code> element defines a set of matching
criteria. When these criteria are satisfied, the application will
navigate to the page defined by the <code>to-view-id</code> element contained in
the same <code>navigation-case</code> element.</p>
</div>
<div class="paragraph">
<p>The navigation criteria are defined by optional <code>from-outcome</code> and
<code>from-action</code> elements. The <code>from-outcome</code> element defines a logical
outcome, such as <code>success</code>. The <code>from-action</code> element uses a method
expression to refer to an action method that returns a <code>String</code>, which
is the logical outcome. The method performs some logic to determine the
outcome and returns the outcome.</p>
</div>
<div class="paragraph">
<p>The <code>navigation-case</code> elements are checked against the outcome and the
method expression in the following order.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Cases specifying both a <code>from-outcome</code> value and a <code>from-action</code>
value. Both of these elements can be used if the action method returns
different outcomes depending on the result of the processing it
performs.</p>
</li>
<li>
<p>Cases specifying only a <code>from-outcome</code> value. The <code>from-outcome</code>
element must match either the outcome defined by the <code>action</code> attribute
of the <code>javax.faces.component.UICommand</code> component or the outcome
returned by the method referred to by the <code>UICommand</code> component.</p>
</li>
<li>
<p>Cases specifying only a <code>from-action</code> value. This value must match
the <code>action</code> expression specified by the component tag.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When any of these cases is matched, the component tree defined by the
<code>to-view-id</code> element will be selected for rendering.</p>
</div>
<div class="paragraph">
<p><a id="BNAXH"></a><a id="registering-a-custom-renderer-with-a-render-kit"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_registering_a_custom_renderer_with_a_render_kit">10.11. Registering a Custom Renderer with a Render Kit</h3>
<div class="paragraph">
<p>When the application developer creates a custom renderer, as described
in <a href="#BNAWA">Delegating Rendering to a Renderer</a>, you
must register it using the appropriate render kit. Because the image map
application implements an HTML image map, the <code>AreaRenderer</code> and
<code>MapRenderer</code> classes in the Duke&#8217;s Bookstore case study should be
registered using the HTML render kit.</p>
</div>
<div class="paragraph">
<p>You register the renderer either by using the <code>@FacesRenderer</code>
annotation, as described in <a href="#BNAWB">Creating the
Renderer Class</a>, or by using the <code>render-kit</code> element of the application
configuration resource file. Here is a hypothetical configuration of
<code>AreaRenderer</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;render-kit&gt;</span>
    <span class="tag">&lt;renderer&gt;</span>
        <span class="tag">&lt;component-family&gt;</span>Area<span class="tag">&lt;/component-family&gt;</span>
        <span class="tag">&lt;renderer-type&gt;</span>DemoArea<span class="tag">&lt;/renderer-type&gt;</span>
        <span class="tag">&lt;renderer-class&gt;</span>
            dukesbookstore.renderers.AreaRenderer
        <span class="tag">&lt;/renderer-class&gt;</span>
        <span class="tag">&lt;attribute&gt;</span>
            <span class="tag">&lt;attribute-name&gt;</span>onmouseout<span class="tag">&lt;/attribute-name&gt;</span>
            <span class="tag">&lt;attribute-class&gt;</span>java.lang.String<span class="tag">&lt;/attribute-class&gt;</span>
        <span class="tag">&lt;/attribute&gt;</span>
        <span class="tag">&lt;attribute&gt;</span>
            <span class="tag">&lt;attribute-name&gt;</span>onmouseover<span class="tag">&lt;/attribute-name&gt;</span>
            <span class="tag">&lt;attribute-class&gt;</span>java.lang.String<span class="tag">&lt;/attribute-class&gt;</span>
        <span class="tag">&lt;/attribute&gt;</span>
        <span class="tag">&lt;attribute&gt;</span>
            <span class="tag">&lt;attribute-name&gt;</span>styleClass<span class="tag">&lt;/attribute-name&gt;</span>
            <span class="tag">&lt;attribute-class&gt;</span>java.lang.String<span class="tag">&lt;/attribute-class&gt;</span>
        <span class="tag">&lt;/attribute&gt;</span>
    <span class="tag">&lt;/renderer&gt;</span>
    ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Attributes specified in a <code>renderer</code> tag override any settings in the
<code>@FacesRenderer</code> annotation.</p>
</div>
<div class="paragraph">
<p>The <code>render-kit</code> element represents a javax.faces.render.<code>RenderKit</code>
implementation. If no <code>render-kit-id</code> is specified, the default HTML
render kit is assumed. The <code>renderer</code> element represents a
<code>javax.faces.render.Renderer</code> implementation. By nesting the <code>renderer</code>
element inside the <code>render-kit</code> element, you are registering the
renderer with the <code>RenderKit</code> implementation associated with the
<code>render-kit</code> element.</p>
</div>
<div class="paragraph">
<p>The <code>renderer-class</code> is the fully qualified class name of the
<code>Renderer</code>.</p>
</div>
<div class="paragraph">
<p>The <code>component-family</code> and <code>renderer-type</code> elements are used by a
component to find renderers that can render it. The <code>component-family</code>
identifier must match that returned by the component class&#8217;s <code>getFamily</code>
method. The component family represents a component or set of components
that a particular renderer can render. The <code>renderer-type</code> must match
that returned by the <code>getRendererType</code> method of the tag handler class.</p>
</div>
<div class="paragraph">
<p>By using the component family and renderer type to look up renderers for
components, the Jakarta Server Faces implementation allows a component to be
rendered by multiple renderers and allows a renderer to render multiple
components.</p>
</div>
<div class="paragraph">
<p>Each of the <code>attribute</code> tags specifies a render-dependent attribute and
its type. The <code>attribute</code> element doesn&#8217;t affect the runtime execution
of your application. Rather, it provides information to tools about the
attributes the <code>Renderer</code> supports.</p>
</div>
<div class="paragraph">
<p>The object responsible for rendering a component (be it the component
itself or a renderer to which the component delegates the rendering) can
use facets to aid in the rendering process. These facets allow the
custom component developer to control some aspects of rendering the
component. Consider this custom component tag example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;d:dataScroller&gt;</span>
    <span class="tag">&lt;f:facet</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">header</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;h:panelGroup&gt;</span>
            <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Account Id</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Customer Name</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Total Sales</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/h:panelGroup&gt;</span>
    <span class="tag">&lt;/f:facet&gt;</span>
    <span class="tag">&lt;f:facet</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">next</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;h:panelGroup&gt;</span>
            <span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Next</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;h:graphicImage</span> <span class="attribute-name">url</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/images/arrow-right.gif</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;/h:panelGroup&gt;</span>
    <span class="tag">&lt;/f:facet&gt;</span>
    ...
<span class="tag">&lt;/d:dataScroller&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>dataScroller</code> component tag includes a component that will render
the header and a component that will render the Next button. If the
renderer associated with this component renders the facets, you can
include the following <code>facet</code> elements in the <code>renderer</code> element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;facet&gt;</span>
    <span class="tag">&lt;description&gt;</span>This facet renders as the header of the table. It should be
         a panelGroup with the same number of columns as the data.
    <span class="tag">&lt;/description&gt;</span>
    <span class="tag">&lt;display-name&gt;</span>header<span class="tag">&lt;/display-name&gt;</span>
    <span class="tag">&lt;facet-name&gt;</span>header<span class="tag">&lt;/facet-name&gt;</span>
<span class="tag">&lt;/facet&gt;</span>
<span class="tag">&lt;facet&gt;</span>
    <span class="tag">&lt;description&gt;</span>This facet renders as the content of the &quot;next&quot; button in
         the scroller. It should be a panelGroup that includes an outputText
         tag that has the text &quot;Next&quot; and a right arrow icon.
    <span class="tag">&lt;/description&gt;</span>
    <span class="tag">&lt;display-name&gt;</span>Next<span class="tag">&lt;/display-name&gt;</span>
    <span class="tag">&lt;facet-name&gt;</span>next<span class="tag">&lt;/facet-name&gt;</span>
<span class="tag">&lt;/facet&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If a component that supports facets provides its own rendering and you
want to include <code>facet</code> elements in the application configuration
resource file, you need to put them in the component&#8217;s configuration
rather than the renderer&#8217;s configuration.</p>
</div>
<div class="paragraph">
<p><a id="BNAXI"></a><a id="registering-a-custom-component"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_registering_a_custom_component">10.12. Registering a Custom Component</h3>
<div class="paragraph">
<p>In addition to registering custom renderers (as explained in the
preceding section), you also must register the custom components that
are usually associated with the custom renderers. You use either a
<code>@FacesComponent</code> annotation, as described in
<a href="#BNAVU">Creating Custom Component Classes</a>, or the
<code>component</code> element of the application configuration resource file.</p>
</div>
<div class="paragraph">
<p>Here is a hypothetical <code>component</code> element from the application
configuration resource file that registers <code>AreaComponent</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;component&gt;</span>
    <span class="tag">&lt;component-type&gt;</span>DemoArea<span class="tag">&lt;/component-type&gt;</span>
    <span class="tag">&lt;component-class&gt;</span>
        dukesbookstore.components.AreaComponent
    <span class="tag">&lt;/component-class&gt;</span>
    <span class="tag">&lt;property&gt;</span>
        <span class="tag">&lt;property-name&gt;</span>alt<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;property-class&gt;</span>java.lang.String<span class="tag">&lt;/property-class&gt;</span>
    <span class="tag">&lt;/property&gt;</span>
    <span class="tag">&lt;property&gt;</span>
        <span class="tag">&lt;property-name&gt;</span>coords<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;property-class&gt;</span>java.lang.String<span class="tag">&lt;/property-class&gt;</span>
    <span class="tag">&lt;/property&gt;</span>
    <span class="tag">&lt;property&gt;</span>
        <span class="tag">&lt;property-name&gt;</span>shape<span class="tag">&lt;/property-name&gt;</span>
        <span class="tag">&lt;property-class&gt;</span>java.lang.String<span class="tag">&lt;/property-class&gt;</span>
    <span class="tag">&lt;/property&gt;</span>
<span class="tag">&lt;/component&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Attributes specified in a <code>component</code> tag override any settings in the
<code>@FacesComponent</code> annotation.</p>
</div>
<div class="paragraph">
<p>The <code>component-type</code> element indicates the name under which the
component should be registered. Other objects referring to this
component use this name. For example, the <code>component-type</code> element in
the configuration for <code>AreaComponent</code> defines a value of <code>DemoArea</code>,
which matches the value returned by the <code>AreaTag</code> class&#8217;s
<code>getComponentType</code> method.</p>
</div>
<div class="paragraph">
<p>The <code>component-class</code> element indicates the fully qualified class name
of the component. The <code>property</code> elements specify the component
properties and their types.</p>
</div>
<div class="paragraph">
<p>If the custom component can include facets, you can configure the facets
in the component configuration using <code>facet</code> elements, which are allowed
after the <code>component-class</code> elements. See
<a href="#BNAXH">Registering a Custom Renderer with a
Render Kit</a> for further details on configuring facets.</p>
</div>
<div class="paragraph">
<p><a id="BNAXJ"></a><a id="basic-requirements-of-a-javaserver-faces-application"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_basic_requirements_of_a_jakarta_server_faces_application">10.13. Basic Requirements of a Jakarta Server Faces Application</h3>
<div class="paragraph">
<p>In addition to configuring your application, you must satisfy other
requirements of Jakarta Server Faces applications, including properly
packaging all the necessary files and providing a deployment descriptor.
This section describes how to perform these administrative tasks.</p>
</div>
<div class="paragraph">
<p>Jakarta Server Faces applications can be packaged in a WAR file, which must
conform to specific requirements to execute across different containers.
At a minimum, a WAR file for a Jakarta Server Faces application may contain
the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A web application deployment descriptor, called <code>web.xml</code>, to configure resources required by a web application (required)</p>
</li>
<li>
<p>A specific set of JAR files containing essential classes (optional)</p>
</li>
<li>
<p>A set of application classes, Jakarta Server Faces pages, and other required resources, such as image files</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A WAR file may also contain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An application configuration resource file, which configures application resources</p>
</li>
<li>
<p>A set of tag library descriptor files</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, a Java Server Faces web application WAR file using Facelets
typically has the following directory structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="error">$</span>PROJECT_DIR
[Web Pages]
+- /[xhtml or html documents]
+- /resources
+- /WEB-INF
   +- /web.xml
   +- /beans.xml (optional)
   +- /classes (optional)
   +- /lib (optional)
   +- /faces-config.xml (optional)
   +- <span class="comment">/*.taglib.xml (optional)
   +- /glassfish-web.xml (optional)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>web.xml</code> file (or web deployment descriptor), the set of JAR files,
and the set of application files must be contained in the <code>WEB-INF</code>
directory of the WAR file.</p>
</div>
<div class="paragraph">
<p><a id="BNAXK"></a><a id="configuring-an-application-with-a-web-deployment-descriptor"></a></p>
</div>
<div class="sect3">
<h4 id="_configuring_an_application_with_a_web_deployment_descriptor">10.13.1. Configuring an Application with a Web Deployment Descriptor</h4>
<div class="paragraph">
<p>Web applications are commonly configured using elements contained in the
web application deployment descriptor, <code>web.xml</code>. The deployment
descriptor for a Jakarta Server Faces application must specify certain
configurations, including the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The servlet used to process Jakarta Server Faces requests</p>
</li>
<li>
<p>The servlet mapping for the processing servlet</p>
</li>
<li>
<p>The path to the configuration resource file, if it exists and is not located in a default location</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The deployment descriptor can also include other, optional
configurations, such as those that</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Specify where component state is saved</p>
</li>
<li>
<p>Encrypt state saved on the client</p>
</li>
<li>
<p>Compress state saved on the client</p>
</li>
<li>
<p>Restrict access to pages containing Jakarta Server Faces tags</p>
</li>
<li>
<p>Turn on XML validation</p>
</li>
<li>
<p>Specify the Project Stage</p>
</li>
<li>
<p>Verify custom objects</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This section gives more details on these configurations. Where
appropriate, it also describes how you can make these configurations
using NetBeans IDE.</p>
</div>
<div class="paragraph">
<p><a id="GLPOO"></a><a id="identifying-the-servlet-for-lifecycle-processing"></a></p>
</div>
<div class="sect4">
<h5 id="_identifying_the_servlet_for_lifecycle_processing">Identifying the Servlet for Lifecycle Processing</h5>
<div class="paragraph">
<p>A requirement of a Jakarta Server Faces application is that all requests to
the application that reference previously saved Jakarta Server Faces
components must go through <code>javax.faces.webapp.FacesServlet</code>. A
<code>FacesServlet</code> instance manages the request-processing lifecycle for web
applications and initializes the resources required by Jakarta Server Faces
technology.</p>
</div>
<div class="paragraph">
<p>Before a Jakarta Server Faces application can launch its first web page, the
web container must invoke the <code>FacesServlet</code> instance in order for the
application lifecycle process to start. See
<a href="#BNAQQ">The Lifecycle of a Jakarta Server Faces
Application</a> for more information.</p>
</div>
<div class="paragraph">
<p>The following example shows the default configuration of the
<code>FacesServlet</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;servlet&gt;</span>
    <span class="tag">&lt;servlet-name&gt;</span>Faces Servlet<span class="tag">&lt;/servlet-name&gt;</span>
    <span class="tag">&lt;servlet-class&gt;</span>javax.faces.webapp.FacesServlet<span class="tag">&lt;/servlet-class&gt;</span>
<span class="tag">&lt;/servlet&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You will provide a mapping configuration entry to make sure that the
<code>FacesServlet</code> instance is invoked. The mapping to <code>FacesServlet</code> can be
a prefix mapping, such as <code>/faces/<strong></code>, or an extension mapping, such as
<code></strong>.xhtml</code>. The mapping is used to identify a page as having Jakarta Server
Faces content. Because of this, the URL to the first page of the
application must include the URL pattern mapping.</p>
</div>
<div class="paragraph">
<p>The following elements specify a prefix mapping:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;servlet-mapping&gt;</span>
    <span class="tag">&lt;servlet-name&gt;</span>Faces Servlet<span class="tag">&lt;/servlet-name&gt;</span>
    <span class="tag">&lt;url-pattern&gt;</span>/faces/*<span class="tag">&lt;/url-pattern&gt;</span>
<span class="tag">&lt;/servlet-mapping&gt;</span>
...
<span class="tag">&lt;welcome-file-list&gt;</span>
    <span class="tag">&lt;welcome-file&gt;</span>faces/greeting.xhtml<span class="tag">&lt;/welcome-file&gt;</span>
<span class="tag">&lt;/welcome-file-list&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following elements, used in the tutorial examples, specify an
extension mapping:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;servlet-mapping&gt;</span>
    <span class="tag">&lt;servlet-name&gt;</span>Faces Servlet<span class="tag">&lt;/servlet-name&gt;</span>
    <span class="tag">&lt;url-pattern&gt;</span>*.xhtml<span class="tag">&lt;/url-pattern&gt;</span>
<span class="tag">&lt;/servlet-mapping&gt;</span>
...
<span class="tag">&lt;welcome-file-list&gt;</span>
    <span class="tag">&lt;welcome-file&gt;</span>index.xhtml<span class="tag">&lt;/welcome-file&gt;</span>
<span class="tag">&lt;/welcome-file-list&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When you use this mechanism, users access the application as shown in
the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/guessNumber</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the case of extension mapping, if a request comes to the server for a
page with an <code>.xhtml</code> extension, the container will send the request to
the <code>FacesServlet</code> instance, which will expect a corresponding page of
the same name containing the content to exist.</p>
</div>
<div class="paragraph">
<p>To minimize clutter and allow simple, friendly URLs, you can have
extensionless URLs by manually exact mapping the <code>FacesServlet</code> to the
existing prefix and suffix mapping options in <code>web.xml</code>, one or more
times.</p>
</div>
<div class="paragraph">
<p>If you are using NetBeans IDE to create your application, a web
deployment descriptor is automatically created for you with default
configurations. If you created your application without an IDE, you can
create a web deployment descriptor.</p>
</div>
<div class="paragraph">
<p><a id="BNAXM"></a><a id="to-specify-a-path-to-an-application-configuration-resource-file"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_specify_a_path_to_an_application_configuration_resource_file">To Specify a Path to an Application Configuration Resource File</h5>
<div class="paragraph">
<p>As explained in <a href="#BNAWP">Application
Configuration Resource File</a>, an application can have multiple
application configuration resource files. If these files are not located
in the directories that the implementation searches by default or the
files are not named <code>faces-config.xml</code>, you need to specify paths to
these files.</p>
</div>
<div class="paragraph">
<p>To specify these paths using NetBeans IDE, do the following.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Expand the node of your project in the Projects tab.</p>
</li>
<li>
<p>Expand the Web Pages and WEB-INF nodes that are under the project node.</p>
</li>
<li>
<p>Double-click <code>web.xml</code>.</p>
</li>
<li>
<p>After the <code>web.xml</code> file appears in the editor, click General at the top of the editor window.</p>
</li>
<li>
<p>Expand the Context Parameters node.</p>
</li>
<li>
<p>Click Add.</p>
</li>
<li>
<p>In the Add Context Parameter dialog box:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Enter <code>javax.faces.CONFIG_FILES</code> in the Parameter Name field.</p>
</li>
<li>
<p>Enter the path to your configuration file in the Parameter Value field.</p>
</li>
<li>
<p>Click OK.</p>
</li>
<li>
<p>Repeat steps 1 through 7 for each configuration file.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="BNAXN"></a><a id="to-specify-where-state-is-saved"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_to_specify_where_state_is_saved">To Specify Where State Is Saved</h5>
<div class="paragraph">
<p>For all the components in a web application, you can specify in your
deployment descriptor where you want the state to be saved, on either
client or server. You do this by setting a context parameter in your
deployment descriptor. By default, state is saved on the server, so you
need to specify this context parameter only if you want to save state on
the client. See <a href="#BNAVZ">Saving and Restoring State</a>
for information on the advantages and disadvantages of each location.</p>
</div>
<div class="paragraph">
<p>To specify where state is saved using NetBeans IDE, do the following.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Expand the node of your project in the Projects tab.</p>
</li>
<li>
<p>Expand the Web Pages and WEB-INF nodes under the project node.</p>
</li>
<li>
<p>Double-click <code>web.xml</code>.</p>
</li>
<li>
<p>After the <code>web.xml</code> file appears in the editor window, click General at the top of the editor window.</p>
</li>
<li>
<p>Expand the Context Parameters node.</p>
</li>
<li>
<p>Click Add.</p>
</li>
<li>
<p>In the Add Context Parameter dialog box:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Enter <code>javax.faces.STATE_SAVING_METHOD</code> in the Parameter Name field.</p>
</li>
<li>
<p>Enter <code>client</code> or <code>server</code> in the Parameter Value field.</p>
</li>
<li>
<p>Click OK.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>If state is saved on the client, the state of the entire view is
rendered to a hidden field on the page. The Jakarta Server Faces
implementation saves the state on the server by default. Duke&#8217;s Forest
saves its state on the client.</p>
</div>
<div class="paragraph">
<p><a id="GIQXL"></a><a id="configuring-project-stage"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_project_stage">10.13.2. Configuring Project Stage</h4>
<div class="paragraph">
<p>Project Stage is a context parameter identifying the status of a
Jakarta Server Faces application in the software lifecycle. The stage of an
application can affect the behavior of the application. For example,
error messages can be displayed during the Development stage but
suppressed during the Production stage.</p>
</div>
<div class="paragraph">
<p>The possible Project Stage values are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Development</code></p>
</li>
<li>
<p><code>UnitTest</code></p>
</li>
<li>
<p><code>SystemTest</code></p>
</li>
<li>
<p><code>Production</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Project Stage is configured through a context parameter in the web
deployment descriptor file. Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;context-param&gt;
    &lt;param-name&gt;javax.faces.PROJECT_STAGE&lt;/param-name&gt;
    &lt;param-value&gt;Development&lt;/param-value&gt;
&lt;/context-param&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If no Project Stage is defined, the default stage is <code>Production</code>. You
can also add custom stages according to your requirements.</p>
</div>
<div class="paragraph">
<p><a id="BNAXT"></a><a id="including-the-classes-pages-and-other-resources"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_including_the_classes_pages_and_other_resources">10.13.3. Including the Classes, Pages, and Other Resources</h4>
<div class="paragraph">
<p>When packaging web applications using the included build scripts, you&#8217;ll
notice that the scripts package resources in the following ways.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All web pages are placed at the top level of the WAR file.</p>
</li>
<li>
<p>The <code>faces-config.xml</code> file and the <code>web.xml</code> file are packaged in the <code>WEB-INF</code> directory.</p>
</li>
<li>
<p>All packages are stored in the <code>WEB-INF/classes/</code> directory.</p>
</li>
<li>
<p>All application JAR files are packaged in the <code>WEB-INF/lib/</code> directory.</p>
</li>
<li>
<p>All resource files are either under the root of the web application <code>/resources</code> directory or in the web application&#8217;s classpath, the `META-INF/resources/`resourceIdentifier directory. For more information on resources, see <a href="#GIRGM">Web Resources</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When packaging your own applications, you can use NetBeans IDE or you
can use XML files such as those created for Maven. You can modify the
XML files to fit your situation. However, you can continue to package
your WAR files by using the directory structure described in this
section, because this technique complies with the commonly accepted
practice for packaging web applications.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_websockets_with_jakarta_server_faces_technology">11. Using WebSockets with Jakarta Server Faces Technology</h2>
<div class="sectionbody">
<div id="using-websockets-with-javaserver-faces-technology" class="paragraph">
<p>This chapter describes using WebSockets in Jakarta Server Faces web applications.</p>
</div>
<div class="sect2">
<h3 id="about-websockets-in-jsf">11.1. About WebSockets in JSF</h3>
<div class="paragraph">
<p>You use the <code>f:websocket tag</code> in a view to allow server-side communications
to be pushed to all instances of a socket containing the same channel name.
When the communication is received, an <code>onmessage</code>, client-side JavaScript
event handler can be set that is called whenever a push arrives from the server.</p>
</div>
<div class="paragraph">
<p>The server side of a WebSocket communication has the ability to push out messages.
You can do this using <code>javax.faces.push.PushContext</code>, which is an injectable
context, allowing a server push to a named channel.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuring-websockets">11.2. Configuring WebSockets</h3>
<div class="paragraph">
<p>To configure WebSockets for use in server faces web applications, first enable the
WebSocket endpoint using the context parameter in <code>web.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;context-param&gt;</span>
    <span class="tag">&lt;param-name&gt;</span>javax.faces.ENABLE_WEBSOCKET_ENDPOINT<span class="tag">&lt;/param-name&gt;</span>
    <span class="tag">&lt;param-value&gt;</span>true<span class="tag">&lt;/param-value&gt;</span>
<span class="tag">&lt;/context-param&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If your server is configured to run a WebSocket container on a different TCP
port than the HTTP container, you can use the optional
<code>javax.faces.WEBSOCKET_ENDPOINT_PORT</code> integer context parameter
to explicitly specify the port:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;context-param&gt;</span>
    <span class="tag">&lt;param-name&gt;</span>javax.faces.WEBSOCKET_ENDPOINT_PORT<span class="tag">&lt;/param-name&gt;</span>
    <span class="tag">&lt;param-value&gt;</span>8000<span class="tag">&lt;/param-value&gt;</span>
<span class="tag">&lt;/context-param&gt;</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="websocket-usage-client-side">11.2.1. WebSocket Usage: Client Side</h4>
<div class="paragraph">
<p>Declare the <code>f:websocket tag</code> in the server faces view with a channel name and
an <code>onmessage</code> JavaScript listener function.</p>
</div>
<div class="paragraph">
<p>The following example refers to an existing JavaScript listener function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;f:websocket</span> <span class="attribute-name">channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">someChannel</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">onmessage</span>=<span class="string"><span class="delimiter">&quot;</span>someWebsocketListener<span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>

function someWebsocketListener(message, channel, event) { console.log(message);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example declares an inline JavaScript listener function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;f:websocket</span> <span class="attribute-name">channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">someChannel</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">onmessage</span>=<span class="string"><span class="delimiter">&quot;</span><span class="keyword">function</span>(m){console.log(m);}<span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>onmessage</code> JavaScript listener function is invoked with three arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>message</code>: The push message as a JSON object</p>
</li>
<li>
<p><code>channel</code>: The channel name</p>
</li>
<li>
<p><code>event</code>: The <code>MessageEvent</code> instance</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When successfully connected, the WebSocket is open by default for as long as
the document is open, and it will auto-reconnect, at increasing intervals,
when the connection is closed, or aborted, as a result of events such as a
network error or server restart. It will not auto-reconnect when the very
first connection attempt fails. The WebSocket will be implicitly closed after
the document is unloaded.</p>
</div>
</div>
<div class="sect3">
<h4 id="websocket-usage-server-side">11.2.2. WebSocket Usage: Server Side</h4>
<div class="paragraph">
<p>On the Java programming side, inject a <code>PushContext</code> using the <code>@Push</code> annotation
on the given channel in any CDI or container managed artifact, such as <code>@Named</code>,
or <code>@WebServlet</code>, where you want to send a push message. Then invoke
<code>PushContext.send(Object)</code> with any Java object representing the push message.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span> <span class="annotation">@Push</span>
<span class="directive">private</span> PushContext someChannel;

<span class="directive">public</span> <span class="type">void</span> sendMessage(<span class="predefined-type">Object</span> message) {
    someChannel.send(message);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the name of the channel is taken from the name of the variable
into which the injection takes place.</p>
</div>
<div class="paragraph">
<p>Optionally, the channel name can be specified using the <code>channel</code> attribute.
The following example injects the push context for channel name <code>foo</code> into a
variable named <code>bar</code>.</p>
</div>
<div class="paragraph">
<p><code>@Inject @Push(channel="foo")private PushContext bar;</code></p>
</div>
<div class="paragraph">
<p>The message object will be encoded as JSON and delivered as a message argument
of the <code>onmessage</code> JavaScript listener function associated with the channel name.
It can be a String, but it can also be a collection, map, or a JavaBean.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-the-fwebsocket-tag">11.3. Using the f:websocket Tag</h3>
<div class="paragraph">
<p><a href="#attributes-of-the-f:websocket-tag">Table 17-1</a> describes the attributes of
the <code>f:websocket</code> tag.</p>
</div>
<div id="attributes-of-the-f:websocket-tag" class="paragraph">
<p><strong>Table 17-1 Attributes of the <code>f:websocket</code> Tag</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 85%;">
<colgroup>
<col style="width: 17.647%;">
<col style="width: 17.647%;">
<col style="width: 64.706%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>channel</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required. The name of the WebSocket channel. It may not
be an EL expression and may only contain alphanumeric characters, hyphens,
underscores, and periods. All open WebSockets on the same channel name will
receive the same push notification from the server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. The identifier of the UIWebSocket component to be created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. The scope of the WebSocket channel. It may not be
an EL expression. Allowed values (case insensitive) are: <code>application</code>, <code>session</code>,
and <code>view</code>.</p>
<p class="tableblock">When the value is <code>application</code>, all channels with the same name throughout the
application receive the same push message. When the value is <code>session</code>, only the
channels with the same name in the current user session receive the same push
message. When the value is <code>view</code>, only the channel in the current view receives
the push message.</p>
<p class="tableblock">The default scope is <code>application</code>. When the <code>user</code> attribute is specified,
then the default scope is <code>session</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>user</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Serializable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. The user identifier of the WebSocket channel,
so that user-targeted push messages can be sent. It must implement Serializable
and preferably have a low memory footprint.</p>
<p class="tableblock"><strong>Hint</strong>: Use <code>#{request.remoteUser}</code> or #<code>{someLoggedInUser.id}</code>.</p>
<p class="tableblock">All open WebSockets on the same channel and user will receive the same push
message from the server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onopen</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. The JavaScript event handler function that is
invoked when the WebSocket is opened. The function is invoked with one argument:
the channel name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onmessage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. The JavaScript event handler function that is
invoked when a push message is received from the server. The function is invoked
with three arguments: the push message, the channel name, and the <code>MessageEvent</code>
instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onclose</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. The JavaScript event handler function that is
invoked when the WebSocket is closed. The function is invoked with three
arguments: the close reason code, the channel name, and the <code>CloseEvent</code>.</p>
<p class="tableblock">Note that this will also be invoked on errors. If an error occurred, you can
inspect the close reason code and which code was given (for example, when the
code is not <code>1000</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>connected</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Specifies whether to auto-reconnect the
WebSocket. Defaults to <code>true</code>. It is interpreted as a JavaScript instruction to
open or close the WebSocket push connection.</p>
<p class="tableblock">This attribute is implicitly re-evaluated on every ajax request by a
<code>PreRenderViewEvent</code> listener on the <code>UIViewRoot</code>. You can also explicitly set it
to <code>false</code> and then manually control it in JavaScript using <code>jsf.push.open(clientId)</code>
and <code>jsf.push.close(clientId)</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rendered</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Specifies whether to render the WebSocket scripts.
Defaults to <code>true</code>.</p>
<p class="tableblock">This attribute is implicitly re-evaluated on every ajax request by a
<code>PreRenderViewEvent</code> listener on the <code>UIViewRoot</code>. If the value changes to <code>false</code>
while the WebSocket is already opened, then the WebSocket will implicitly be closed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>binding</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UIComponent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. The value binding expression to a backing
bean property bound to the component instance for the <code>UIComponent</code> created by
this tag.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="websocket-scopes-and-users">11.4. WebSocket Scopes and Users</h3>
<div class="paragraph">
<p>By default, the WebSocket is application-scoped. For example, any view or
session throughout the web application having the same WebSocket channel open
will receive the same push message. The push message can be sent by all users
and the application. To restrict the push messages to all views in the current
user session only, set the optional scope attribute to <code>session</code> . In this case,
the push message can only be sent by the user and not by the application.</p>
</div>
<div class="paragraph">
<p><code>&lt;f:websocket channel="someChannel" scope="session" &#8230;&#8203; /&gt;</code></p>
</div>
<div class="paragraph">
<p>To restrict the push messages to the current view only, you can set the scope
attribute to <code>view</code> . The push message will not show up in other views in the
same session, even if it has the same URL. This push message can be sent only
by the user and not by the application.</p>
</div>
<div class="paragraph">
<p><code>&lt;f:websocket channel="someChannel" scope="view" &#8230;&#8203; /&gt;</code></p>
</div>
<div class="paragraph">
<p>The scope attribute may not be an EL expression.</p>
</div>
<div class="paragraph">
<p>Additionally, you can set the optional <code>user</code> attribute to the unique identifier
of the logged-in user, usually the login name or the user ID. As such, the push
message can be targeted to a specific user and can also be sent by other users
and the application. The value of the <code>user</code> attribute must implement
<code>Serializable</code> and have a low memory footprint, so an entire user entity is not
recommended.</p>
</div>
<div class="paragraph">
<p>For example, when you are using container managed authentication or a related
framework or library:</p>
</div>
<div class="paragraph">
<p><code>&lt;f:websocket channel="someChannel"user="#{request.remoteUser}" &#8230;&#8203; /&gt;</code></p>
</div>
<div class="paragraph">
<p>Or, when you have a custom user entity accessible via EL, such as
<code>#{someLoggedInUser}</code> which has an <code>id</code> property representing its identifier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;f:websocket channel=<span class="string"><span class="delimiter">&quot;</span><span class="content">someChannel</span><span class="delimiter">&quot;</span></span>
user=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{someLoggedInUser.id}</span><span class="delimiter">&quot;</span></span> ... /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the <code>user</code> attribute is specified, the scope defaults to <code>session</code> and
cannot be set to <code>application</code>.</p>
</div>
<div class="paragraph">
<p>On the server side, the push message can be targeted to the user specified in
the <code>user</code> attribute using <code>PushContext.send(Object, Serializable)</code>. The push
message can be sent by all users and the application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span> <span class="annotation">@Push</span>
<span class="directive">private</span> PushContext someChannel;

<span class="directive">public</span> <span class="type">void</span> sendMessage(<span class="predefined-type">Object</span> message, User recipientUser) { <span class="predefined-type">Long</span> recipientUserId = recipientUser.getId(); someChannel.send(message, recipientUserId);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Multiple users can be targeted by passing a <code>Collection</code> holding user
identifiers to <code>PushContext.send(Object, Collection)</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> sendMessage(<span class="predefined-type">Object</span> message, <span class="predefined-type">Group</span> recipientGroup) {
<span class="predefined-type">Collection</span>&lt;<span class="predefined-type">Long</span>&gt; recipientUserIds = recipientGroup.getUserIds();
someChannel.send(message, recipientUserIds);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="conditionally-connecting-websockets">11.5. Conditionally Connecting WebSockets</h3>
<div class="paragraph">
<p>You can use the optional connected attribute to control whether to
auto-reconnect the WebSocket.</p>
</div>
<div class="paragraph">
<p><code>&lt;f:websocket &#8230;&#8203; connected="#{bean.pushable}" /&gt;</code></p>
</div>
<div class="paragraph">
<p>The connected attribute defaults to <code>true</code> and is interpreted as a JavaScript
instruction to open or close the WebSocket push connection. If the value is an
EL expression and it becomes <code>false</code> during an ajax request, then the push
connection will explicitly be closed during <code>oncomplete</code> of that ajax request.</p>
</div>
<div class="paragraph">
<p>You can also explicitly set it to <code>false</code> and manually open the push
connection on the client side by invoking <code>jsf.push.open(clientId)</code>,
passing the component&#8217;s client ID.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:commandButton</span> <span class="attribute-name">...</span> <span class="attribute-name">onclick</span>=<span class="string"><span class="delimiter">&quot;</span>jsf.push.open(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>)<span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:ajax</span> <span class="attribute-name">...</span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:commandButton&gt;</span>
<span class="tag">&lt;f:websocket</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">scope</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">view</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">...</span> <span class="attribute-name">connected</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you intend to have a one-time push and do not expect more messages,
you can optionally explicitly close the push connection from the client side
by invoking <code>jsf.push.close(clientId)</code>, passing the component&#8217;s client ID.
For example, in the <code>onmessage</code> JavaScript listener function, as seen below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">function someWebsocketListener(message) {
// ... jsf.push.close('foo');
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="websocket-events-server">11.5.1. WebSocket Events: Server</h4>
<div class="paragraph">
<p>When a session or view-scoped socket is automatically closed with close reason
code <code>1000</code> by the server (and thus, not manually closed by the client
  via <code>jsf.push.close(clientId)</code>), it means that the session or view has expired.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ApplicationScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">WebsocketObserver</span> {

    <span class="directive">public</span> <span class="type">void</span> onOpen(<span class="annotation">@Observes</span> <span class="annotation">@Opened</span> WebsocketEvent event) {
        <span class="predefined-type">String</span> channel = event.getChannel();
        <span class="comment">// Returns &lt;f:websocket channel&gt;. Long userId = event.getUser();</span>
        <span class="comment">// Returns &lt;f:websocket user&gt;, if any.</span>
        <span class="comment">// ...</span>
    }

    <span class="directive">public</span> <span class="type">void</span> onClose(<span class="annotation">@Observes</span> <span class="annotation">@Closed</span> WebsocketEvent event) { <span class="predefined-type">String</span> channel = event.getChannel();
        <span class="comment">// Returns &lt;f:websocket channel&gt;. Long userId = event.getUser();</span>
        <span class="comment">// Returns &lt;f:websocket user&gt;, if any. CloseCode code = event.getCloseCode();</span>
        <span class="comment">// Returns close reason code.</span>
       <span class="comment">// ...</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="websocket-events-clients">11.5.2. WebSocket Events: Clients</h4>
<div class="paragraph">
<p>You can use the optional <code>onopen</code> JavaScript listener function to listen for
the open of a WebSocket on the client side. This function is invoked on the
very first connection attempt, regardless of whether it will be successful.
It will not be invoked when the WebSocket auto-reconnects a broken connection
after the first successful connection.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;f:websocket ... onopen=<span class="string"><span class="delimiter">&quot;</span><span class="content">websocketOpenListener</span><span class="delimiter">&quot;</span></span> /&gt;
function websocketOpenListener(channel) {
<span class="comment">// ...</span>

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>onopen</code> JavaScript listener function is invoked with one argument: <code>channel</code>
(the channel name, particularly useful if you have a global listener).</p>
</div>
<div class="paragraph">
<p>You can use the optional <code>onclose</code> JavaScript listener function to listen for
a normal or abnormal close of a WebSocket. This function is invoked when the
very first connection attempt fails, or the server has returned close reason
code <code>1000</code> (normal closure) or <code>1008</code> (policy violated), or the maximum
reconnect attempts have been exceeded. It will not be invoked if the WebSocket
makes an auto-reconnect attempt on a broken connection after the first
successful connection.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;f:websocket ... onclose=<span class="string"><span class="delimiter">&quot;</span><span class="content">websocketCloseListener</span><span class="delimiter">&quot;</span></span> /&gt;
function websocketCloseListener(code, channel, event) {
    <span class="keyword">if</span> (code == -<span class="integer">1</span>) {
        <span class="comment">// Websockets not supported by client.</span>
    } <span class="keyword">else</span> <span class="keyword">if</span> (code == <span class="integer">1000</span>) {
        <span class="comment">// Normal close (as result of expired session or view).</span>
    } <span class="keyword">else</span> {
        <span class="comment">// Abnormal close reason (as result of an error).</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>onclose</code> JavaScript listener function is invoked with three arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>code</code>: The close reason code as an integer. If it is <code>-1</code>, the WebSocket
is not supported by the client. If it is <code>1000</code>, then it was normally closed.
Otherwise, if it is not <code>1000</code>, then there might be an error.</p>
</li>
<li>
<p><code>channel</code>: The channel name</p>
</li>
<li>
<p><code>event</code>: The <code>CloseEvent</code> instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="websocket-security-considerations">11.6. WebSocket Security Considerations</h3>
<div class="paragraph">
<p>If the WebSocket is declared in a page which is restricted to logged-in users
only with a specific role, then you might want to add the push handshake request
URL to the set of restricted URLs.</p>
</div>
<div class="paragraph">
<p>The push handshake request URL is composed of the URI prefix, <code>/javax.faces.push/</code>,
followed by the channel name. In the example of container managed security,
which has already restricted an example page, <code>/user/foo.xhtml</code>, to logged-in
users with the example role, <code>USER</code>, on the example URL pattern, <code>/user/*</code>, in
<code>web.xml</code>, see below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;security-constraint&gt;</span>
    <span class="tag">&lt;web-resource-collection&gt;</span>
        <span class="tag">&lt;web-resource-name&gt;</span>Restrict access to role USER.<span class="tag">&lt;/web-resource-name&gt;</span>
        <span class="tag">&lt;url-pattern&gt;</span>/user/*<span class="tag">&lt;/url-pattern&gt;</span>
    <span class="tag">&lt;/web-resource-collection&gt;</span>
    <span class="tag">&lt;auth-constraint&gt;</span>
        <span class="tag">&lt;role-name&gt;</span>USER<span class="tag">&lt;/role-name&gt;</span>
    <span class="tag">&lt;/auth-constraint&gt;</span>
<span class="tag">&lt;/security-constraint&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If the page, <code>/user/foo.xhtml</code>, contains <code>&lt;f:websocket channel="foo"&gt;</code>, then you
must add a restriction on the push handshake request URL pattern of
<code>/javax.faces.push/foo</code>, as shown next:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;security-constraint&gt;</span>
    <span class="tag">&lt;web-resource-collection&gt;</span>
        <span class="tag">&lt;web-resource-name&gt;</span>Restrict access to role USER.<span class="tag">&lt;/web-resource-name&gt;</span>
        <span class="tag">&lt;url-pattern&gt;</span>/user/*<span class="tag">&lt;/url-pattern&gt;</span>
        <span class="tag">&lt;url-pattern&gt;</span>/javax.faces.push/foo<span class="tag">&lt;/url-pattern&gt;</span>
    <span class="tag">&lt;/web-resource-collection&gt;</span>
    <span class="tag">&lt;auth-constraint&gt;</span>
        <span class="tag">&lt;role-name&gt;</span>USER<span class="tag">&lt;/role-name&gt;</span>
    <span class="tag">&lt;/auth-constraint&gt;</span>
<span class="tag">&lt;/security-constraint&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As extra security, particularly for those public channels which cannot be
restricted by security constraints, the <code>f:websocket</code> tag will register all
previously declared channels in the current HTTP session, and any incoming
WebSocket open request will be checked for whether it matches these channels
in the current HTTP session. If the channel is unknown (for example, randomly
guessed or spoofed by end users or manually reconnected after the session
is expired), then the WebSocket will immediately be closed with close reason
code, <code>CloseCodes.VIOLATED_POLICY (1008)</code>. Also, when the HTTP session gets
destroyed, all session and view-scoped channels which are still open will
explicitly be closed from the server side with close reason code,
<code>CloseCodes.NORMAL_CLOSURE (1000)</code>. Only application-scoped sockets remain open
and are still reachable from the server even when the session or view associated
with the page in the client side is expired.</p>
</div>
</div>
<div class="sect2">
<h3 id="using-ajax-with-websockets">11.7. Using Ajax With WebSockets</h3>
<div class="paragraph">
<p>If you want to perform complex UI updates depending on the received push
message, you can nest the <code>f:ajax</code> tag inside the <code>f:websocket</code> tag. See the
following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:panelGroup</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    ... (some complex UI here) ...
<span class="tag">&lt;/h:panelGroup&gt;</span>
<span class="tag">&lt;h:form&gt;</span>
    <span class="tag">&lt;f:websocket</span> <span class="attribute-name">channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">someChannel</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">scope</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">view</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;f:ajax</span> <span class="attribute-name">event</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">someEvent</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">listener</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bean.pushed}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">render</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">:foo</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/f:websocket&gt;</span>
<span class="tag">&lt;/h:form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, the push message simply represents the ajax event name. You can use any
custom event name.</p>
</div>
<div class="paragraph">
<p><code>someChannel.send("someEvent");</code></p>
</div>
<div class="paragraph">
<p>An alternative is to combine the <code>f:websocket</code> tag with the <code>h:commandScript</code> tag.
The <code>&lt;f:websocket onmessage&gt;</code> references exactly the <code>&lt;h:commandScript name&gt;</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:panelGroup</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    ... (some complex UI here) ...
<span class="tag">&lt;/h:panelGroup&gt;</span>
<span class="tag">&lt;f:websocket</span> <span class="attribute-name">channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">someChannel</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">scope</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">view</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">onmessage</span>=<span class="string"><span class="delimiter">&quot;</span>pushed<span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;h:form&gt;</span>
    <span class="tag">&lt;h:commandScript</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">pushed</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bean.pushed}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">render</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">:foo</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you pass a <code>Map&lt;String,V&gt;</code> or a JavaBean as the push message object, then all
entries or properties will transparently be available as request parameters in
the command script method <code>#{bean.pushed}</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_internationalizing_and_localizing_web_applications">12. Internationalizing and Localizing Web Applications</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="BNAXU"></a><a id="internationalizing-and-localizing-web-applications"></a></p>
</div>
<div class="paragraph">
<p>The process of preparing an application to support more than one
language and data format is called internationalization. Localization is
the process of adapting an internationalized application to support a
specific region or locale. Examples of locale-dependent information
include messages and user interface labels, character sets and encoding,
and date and currency formats. Although all client user interfaces
should be internationalized and localized, it is particularly important
for web applications because of the global nature of the web.</p>
</div>
<div class="paragraph">
<p><a id="BNAXV"></a><a id="java-platform-localization-classes"></a></p>
</div>
<div class="sect2">
<h3 id="_java_platform_localization_classes">12.1. Java Platform Localization Classes</h3>
<div class="paragraph">
<p>In the Java platform, java.util.Locale
(<code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html" class="bare">http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html</a></code>)
represents a specific geographical, political, or cultural region. The
string representation of a locale consists of the international standard
two-character abbreviation for language and country and an optional
variant, all separated by underscore (<code>_</code>) characters. Examples of
locale strings include <code>fr</code> (French), <code>de_CH</code> (Swiss German), and
<code>en_US_POSIX</code> (English on a POSIX-compliant platform).</p>
</div>
<div class="paragraph">
<p>Locale-sensitive data is stored in a java.util.ResourceBundle
(<code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/ResourceBundle.html" class="bare">http://docs.oracle.com/javase/8/docs/api/java/util/ResourceBundle.html</a></code>).
A resource bundle contains key-value pairs, where the keys uniquely
identify a locale-specific object in the bundle. A resource bundle can
be backed by a text file (properties resource bundle) or a class (list
resource bundle) containing the pairs. You construct a resource bundle
instance by appending a locale string representation to a base name.</p>
</div>
<div class="paragraph">
<p>The Duke&#8217;s Bookstore application (see
<a href="#GLNVI">Chapter 60, "Duke&#8217;s Bookstore Case Study
Example"</a>) contains resource bundles with the base name
<code>messages.properties</code> for the locales <code>de</code> (German), <code>es</code> (Spanish), and
<code>fr</code> (French). The default locale, <code>en</code> (English), which is specified in
the <code>faces-config.xml</code> file, uses the resource bundle with the base
name, <code>messages.properties</code>.</p>
</div>
<div class="paragraph">
<p>For more details on internationalization and localization in the Java
platform, see <code><a href="http://docs.oracle.com/javase/tutorial/i18n/index.html" class="bare">http://docs.oracle.com/javase/tutorial/i18n/index.html</a></code>.</p>
</div>
<div class="paragraph">
<p><a id="BNAXW"></a><a id="providing-localized-messages-and-labels"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_providing_localized_messages_and_labels">12.2. Providing Localized Messages and Labels</h3>
<div class="paragraph">
<p>Messages and labels should be tailored according to the conventions of a
user&#8217;s language and region. There are two approaches to providing
localized messages and labels in a web application.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Provide a version of the web page in each of the target locales and
have a controller servlet dispatch the request to the appropriate page
depending on the requested locale. This approach is useful if large
amounts of data on a page or an entire web application need to be
internationalized.</p>
</li>
<li>
<p>Isolate any locale-sensitive data on a page into resource bundles, and
access the data so that the corresponding translated message is fetched
automatically and inserted into the page. Thus, instead of creating
strings directly in your code, you create a resource bundle that
contains translations and read the translations from that bundle using
the corresponding key.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Duke&#8217;s Bookstore application follows the second approach. Here are a
few lines from the default resource bundle <code>messages</code>.<code>properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">TitleShoppingCart=Shopping Cart
TitleReceipt=Receipt
TitleBookCatalog=Book Catalog
TitleCashier=Cashier
TitleBookDescription=Book Description
Visitor=You are visitor number
What=What We\'re Reading</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GKUIA"></a><a id="establishing-the-locale"></a></p>
</div>
<div class="sect3">
<h4 id="_establishing_the_locale">12.2.1. Establishing the Locale</h4>
<div class="paragraph">
<p>To get the correct strings for a given user, a web application either
retrieves the locale (set by a browser language preference) from the
request using the <code>getLocale</code> method, or allows the user to explicitly
select the locale.</p>
</div>
<div class="paragraph">
<p>A component can explicitly set the locale by using the <code>fmt:setLocale</code>
tag.</p>
</div>
<div class="paragraph">
<p>The <code>locale-config</code> element in the configuration file registers the
default locale and also registers other supported locales. This element
in Duke&#8217;s Bookstore registers English as the default locale and
indicates that German, French, and Spanish are supported locales.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;locale-config&gt;</span>
    <span class="tag">&lt;default-locale&gt;</span>en<span class="tag">&lt;/default-locale&gt;</span>
    <span class="tag">&lt;supported-locale&gt;</span>es<span class="tag">&lt;/supported-locale&gt;</span>
    <span class="tag">&lt;supported-locale&gt;</span>de<span class="tag">&lt;/supported-locale&gt;</span>
    <span class="tag">&lt;supported-locale&gt;</span>fr<span class="tag">&lt;/supported-locale&gt;</span>
<span class="tag">&lt;/locale-config&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>LocaleBean</code> in the Duke&#8217;s Bookstore application uses the
<code>getLocale</code> method to retrieve the locale.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">public class LocaleBean {

    ...
    private FacesContext ctx = FacesContext.getCurrentInstance();
    private Locale locale = ctx.getViewRoot().getLocale();;

    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BNAXY"></a><a id="setting-the-resource-bundle"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_setting_the_resource_bundle">12.2.2. Setting the Resource Bundle</h4>
<div class="paragraph">
<p>The resource bundle is set with the <code>resource-bundle</code> element in the
configuration file. The setting for Duke&#8217;s Bookstore looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;resource-bundle&gt;</span>
    <span class="tag">&lt;base-name&gt;</span>
        jakarta.tutorial.dukesbookstore.web.messages.Messages
    <span class="tag">&lt;/base-name&gt;</span>
    <span class="tag">&lt;var&gt;</span>bundle<span class="tag">&lt;/var&gt;</span>
<span class="tag">&lt;/resource-bundle&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After the locale is set, the controller of a web application could
retrieve the resource bundle for that locale and save it as a session
attribute (see <a href="#BNAGO">Associating Objects with a
Session</a>) for use by other components or simply be used to return a text
string appropriate for the selected locale:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">String</span> toString(<span class="predefined-type">Locale</span> locale) {
    <span class="predefined-type">ResourceBundle</span> res =
        <span class="predefined-type">ResourceBundle</span>.getBundle(
            <span class="string"><span class="delimiter">&quot;</span><span class="content">jakarta.tutorial.dukesbookstore.web.messages.Messages</span><span class="delimiter">&quot;</span></span>, locale);
    <span class="keyword">return</span> res.getString(name() + <span class="string"><span class="delimiter">&quot;</span><span class="content">.string</span><span class="delimiter">&quot;</span></span>);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, an application could use the <code>f:loadBundle</code> tag to set
the resource bundle. This tag loads the correct resource bundle
according to the locale stored in <code>FacesContext</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;f:loadBundle</span> <span class="attribute-name">basename</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jakarta.tutorial.dukesbookstore.web.messages.Messages</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bundle</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Resource bundles containing messages that are explicitly referenced from
a Jakarta Server Faces tag attribute using a value expression must be
registered using the <code>resource-bundle</code> element of the configuration
file.</p>
</div>
<div class="paragraph">
<p>For more information on using this element, see
<a href="#BNAXB">Registering Application Messages</a>.</p>
</div>
<div class="paragraph">
<p><a id="GKUFC"></a><a id="retrieving-localized-messages"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_retrieving_localized_messages">12.2.3. Retrieving Localized Messages</h4>
<div class="paragraph">
<p>A web component written in the Java programming language retrieves the
resource bundle from the session:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">ResourceBundle messages = (ResourceBundle)session.getAttribute(&quot;messages&quot;);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then it looks up the string associated with the key <code>person.lastName</code> as
follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">messages.getString(<span class="string"><span class="delimiter">&quot;</span><span class="content">person.lastName</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can only use a <code>message</code> or <code>messages</code> tag to display messages that
are queued onto a component as a result of a converter or validator
being registered on the component. The following example shows a
<code>message</code> tag that displays the error message queued on the <code>userNo</code>
input component if the validator registered on the component fails to
validate the value the user enters into the component.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:inputText</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userNo</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{UserNumberBean.userNumber}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:validateLongRange</span> <span class="attribute-name">minimum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">maximum</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">10</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/h:inputText&gt;</span>
...
<span class="tag">&lt;h:message</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">color</span>: <span class="value">red</span>; <span class="key">text-decoration</span>: <span class="value">overline</span><span class="delimiter">&quot;</span></span>
           <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">errors1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">userNo</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information on using the <code>message</code> or <code>messages</code> tags, see
<a href="#BNASO">Displaying Error Messages with the h:message
and h:messages Tags</a>.</p>
</div>
<div class="paragraph">
<p>Messages that are not queued on a component and are therefore not loaded
automatically are referenced using a value expression. You can reference
a localized message from almost any Jakarta Server Faces tag attribute.</p>
</div>
<div class="paragraph">
<p>The value expression that references a message has the same notation
whether you loaded the resource bundle with the <code>loadBundle</code> tag or
registered it with the <code>resource-bundle</code> element in the configuration
file.</p>
</div>
<div class="paragraph">
<p>The value expression notation is <code>var.message</code>, in which <code>var</code> matches
the <code>var</code> attribute of the <code>loadBundle</code> tag or the <code>var</code> element defined
in the <code>resource-bundle</code> element of the configuration file, and
<code>message</code> matches the key of the message contained in the resource
bundle, referred to by the <code>var</code> attribute.</p>
</div>
<div class="paragraph">
<p>Here is an example from <code>bookcashier.xhtml</code> in Duke&#8217;s Bookstore:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputLabel</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{bundle.Name}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that <code>bundle</code> matches the <code>var</code> element from the configuration
file and that <code>Name</code> matches the key in the resource bundle.</p>
</div>
<div class="paragraph">
<p><a id="BNAYA"></a><a id="date-and-number-formatting"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_date_and_number_formatting">12.3. Date and Number Formatting</h3>
<div class="paragraph">
<p>Java programs use the <code>DateFormat.getDateInstance(int,</code> <code>locale)</code> method
to parse and format dates in a locale-sensitive manner. Java programs
use the <code>NumberFormat.get`XXX`Instance(locale)</code> method, where XXX can be
<code>Currency</code>, <code>Number</code>, or <code>Percent</code>, to parse and format numerical values
in a locale-sensitive manner.</p>
</div>
<div class="paragraph">
<p>An application can use date/time and number converters to format dates
and numbers in a locale-sensitive manner. For example, a shipping date
could be converted as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;h:outputText</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#{cashier.shipDate}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;f:convertDateTime</span> <span class="attribute-name">dateStyle</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">full</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/h:outputText&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For information on Jakarta Server Faces converters, see
<a href="#BNAST">Using the Standard Converters</a>.</p>
</div>
<div class="paragraph">
<p><a id="BNAYB"></a><a id="character-sets-and-encodings"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_character_sets_and_encodings">12.4. Character Sets and Encodings</h3>
<div class="paragraph">
<p>The following sections describe character sets and character encodings.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#BNAYC">Character Sets</a></p>
</li>
<li>
<p><a href="#BNAYD">Character Encoding</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="BNAYC"></a><a id="character-sets"></a></p>
</div>
<div class="sect3">
<h4 id="_character_sets">12.4.1. Character Sets</h4>
<div class="paragraph">
<p>A character set is a set of textual and graphic symbols, each of which
is mapped to a set of nonnegative integers.</p>
</div>
<div class="paragraph">
<p>The first character set used in computing was US-ASCII. It is limited in
that it can represent only American English. US-ASCII contains uppercase
and lowercase Latin alphabets, numerals, punctuation, a set of control
codes, and a few miscellaneous symbols.</p>
</div>
<div class="paragraph">
<p>Unicode defines a standardized, universal character set that can be
extended to accommodate additions. When the Java program source file
encoding doesn&#8217;t support Unicode, you can represent Unicode characters
as escape sequences by using the notation `\u`XXXX, where XXXX is the
character&#8217;s 16-bit representation in hexadecimal. For example, the
Spanish version of a message file could use Unicode for non-ASCII
characters, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">admin.nav.main=P<span class="error">\</span>u00e1gina principal de administraci<span class="error">\</span>u00f3n</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BNAYD"></a><a id="character-encoding"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_character_encoding">12.4.2. Character Encoding</h4>
<div class="paragraph">
<p>A character encoding maps a character set to units of a specific width
and defines byte serialization and ordering rules. Many character sets
have more than one encoding. For example, Java programs can represent
Japanese character sets using the <code>EUC-JP</code> or <code>Shift-JIS</code> encodings,
among others. Each encoding has rules for representing and serializing a
character set.</p>
</div>
<div class="paragraph">
<p>The ISO 8859 series defines 13 character encodings that can represent
texts in dozens of languages. Each ISO 8859 character encoding can have
up to 256 characters. ISO-8859-1 (Latin-1) comprises the ASCII character
set, characters with diacritics (accents, diaereses, cedillas,
circumflexes, and so on), and additional symbols.</p>
</div>
<div class="paragraph">
<p>UTF-8 (Unicode Transformation Format, 8-bit form) is a variable-width
character encoding that encodes 16-bit Unicode characters as one to four
bytes. A byte in UTF-8 is equivalent to 7-bit ASCII if its high-order
bit is zero; otherwise, the character comprises a variable number of
bytes.</p>
</div>
<div class="paragraph">
<p>UTF-8 is compatible with the majority of existing web content and
provides access to the Unicode character set. Current versions of
browsers and email clients support UTF-8. In addition, many web
standards specify UTF-8 as their character encoding. For example, UTF-8
is one of the two required encodings for XML documents (the other is
UTF-16).</p>
</div>
<div class="paragraph">
<p>Web components usually use <code>PrintWriter</code> to produce responses;
<code>PrintWriter</code> automatically encodes using ISO-8859-1. Servlets can also
output binary data using <code>OutputStream</code> classes, which perform no
encoding. An application that uses a character set that cannot use the
default encoding must explicitly set a different encoding.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-04-26 19:19:24 UTC
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</body>
</html>