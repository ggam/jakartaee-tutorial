<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.2">
<title>REST Web Services</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement when using as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#rest-web-services">REST Web Services</a></li>
<li><a href="#introduction-to-web-services">Introduction to Web Services</a>
<ul class="sectlevel2">
<li><a href="#what-are-web-services">What Are Web Services?</a></li>
<li><a href="#types-of-web-services">Types of Web Services</a></li>
<li><a href="#deciding-which-type-of-web-service-to-use">Deciding Which Type of Web Service to Use</a></li>
</ul>
</li>
<li><a href="#building-restful-web-services-with-jakarta-rest">Building RESTful Web Services with Jakarta REST</a>
<ul class="sectlevel2">
<li><a href="#what-are-restful-web-services">What Are RESTful Web Services?</a></li>
<li><a href="#creating-a-restful-root-resource-class">Creating a RESTful Root Resource Class</a></li>
<li><a href="#example-applications-for-jakarta-rest">Example Applications for Jakarta REST</a></li>
<li><a href="#further-information-about-jakarta-rest">Further Information about Jakarta REST</a></li>
</ul>
</li>
<li><a href="#accessing-rest-resources-with-the-jakarta-rest-client-api">Accessing REST Resources with the Jakarta REST Client API</a>
<ul class="sectlevel2">
<li><a href="#overview-of-the-client-api">Overview of the Client API</a></li>
<li><a href="#using-the-client-api-in-the-jakarta-rest-example-applications">Using the Client API in the Jakarta REST Example Applications</a></li>
<li><a href="#advanced-features-of-the-client-api">Advanced Features of the Client API</a></li>
</ul>
</li>
<li><a href="#jakarta-rest-advanced-topics-and-an-example">Jakarta REST: Advanced Topics and an Example</a>
<ul class="sectlevel2">
<li><a href="#annotations-for-field-and-bean-properties-of-resource-classes">Annotations for Field and Bean Properties of Resource Classes</a></li>
<li><a href="#validating-resource-data-with-bean-validation">Validating Resource Data with Bean Validation</a></li>
<li><a href="#subresources-and-runtime-resource-resolution">Subresources and Runtime Resource Resolution</a></li>
<li><a href="#integrating-jakarta-rest-with-jakarta-enterprise-beans-technology-and-cdi">Integrating Jakarta REST with Jakarta Enterprise Beans Technology and CDI</a></li>
<li><a href="#conditional-http-requests">Conditional HTTP Requests</a></li>
<li><a href="#runtime-content-negotiation">Runtime Content Negotiation</a></li>
<li><a href="#using-jakarta-rest-with-jakarta-xml-binding">Using Jakarta REST with Jakarta XML Binding</a></li>
<li><a href="#the-customer-example-application">The customer Example Application</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="rest-web-services"><a class="anchor" href="#rest-web-services"></a>REST Web Services</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="introduction-to-web-services"><a class="anchor" href="#introduction-to-web-services"></a>Introduction to Web Services</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="GIJTI"></a><a id="introduction-to-web-services"></a></p>
</div>
<div class="paragraph">
<p>This part of the tutorial discusses Jakarta EE 8 web services technologies.
These technologies include Java API for XML Web Services (JAX-WS) and
Jakarta RESTful Web Services.</p>
</div>
<div class="paragraph">
<p><a id="GIJVH"></a><a id="what-are-web-services"></a></p>
</div>
<div class="sect2">
<h3 id="what-are-web-services"><a class="anchor" href="#what-are-web-services"></a>What Are Web Services?</h3>
<div class="paragraph">
<p>Web services are client and server applications that communicate over
the World Wide Web&#8217;s (WWW) HyperText Transfer Protocol (HTTP). As
described by the World Wide Web Consortium (W3C), web services provide a
standard means of interoperating between software applications running
on a variety of platforms and frameworks. Web services are characterized
by their great interoperability and extensibility as well as their
machine-processable descriptions, thanks to the use of XML. Web services
can be combined in a loosely coupled way to achieve complex operations.
Programs providing simple services can interact with each other to
deliver sophisticated added-value services.</p>
</div>
<div class="paragraph">
<p><a id="GIQSX"></a><a id="types-of-web-services"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="types-of-web-services"><a class="anchor" href="#types-of-web-services"></a>Types of Web Services</h3>
<div class="paragraph">
<p>On the conceptual level, a service is a software component provided
through a network-accessible endpoint. The service consumer and provider
use messages to exchange invocation request and response information in
the form of self-containing documents that make very few assumptions
about the technological capabilities of the receiver.</p>
</div>
<div class="paragraph">
<p>On a technical level, web services can be implemented in various ways.
The two types of web services discussed in this section can be
distinguished as "big" web services and "RESTful" web services.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GKCDG">"Big" Web Services</a></p>
</li>
<li>
<p><a href="#GKCAW">RESTful Web Services</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GKCDG"></a><a id="big-web-services"></a></p>
</div>
<div class="sect3">
<h4 id="big-web-services"><a class="anchor" href="#big-web-services"></a>"Big" Web Services</h4>
<div class="paragraph">
<p>JAX-WS provides the functionality for "big" web services,
which are described in <a href="#BNAYL">Chapter 31, "Building Web
Services with JAX-WS"</a>. Big web services use XML messages that follow
the Simple Object Access Protocol (SOAP) standard, an XML language
defining a message architecture and message formats. Such systems often
contain a machine-readable description of the operations offered by the
service, written in the Web Services Description Language (WSDL), an XML
language for defining interfaces syntactically.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> JAX-WS was moved to Java SE 8 and is not included in the Jakarta EE 8 platform. However, the JAX-WS API can still be used in EE applications.</p>
</div>
<div class="paragraph">
<p>The SOAP message format and the WSDL interface definition language have
gained widespread adoption. Many development tools, such as NetBeans
IDE, can reduce the complexity of developing web service applications.</p>
</div>
<div class="paragraph">
<p>A SOAP-based design must include the following elements.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A formal contract must be established to describe the interface that
the web service offers. WSDL can be used to describe the details of the
contract, which may include messages, operations, bindings, and the
location of the web service. You may also process SOAP messages in a
JAX-WS service without publishing a WSDL.</p>
</li>
<li>
<p>The architecture must address complex nonfunctional requirements. Many
web service specifications address such requirements and establish a
common vocabulary for them. Examples include transactions, security,
addressing, trust, coordination, and so on.</p>
</li>
<li>
<p>The architecture needs to handle asynchronous processing and
invocation. In such cases, the infrastructure provided by standards,
such as Web Services Reliable Messaging (WSRM), and APIs, such as
JAX-WS, with their client-side asynchronous invocation support, can be
leveraged out of the box.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GKCAW"></a><a id="restful-web-services"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="restful-web-services"><a class="anchor" href="#restful-web-services"></a>RESTful Web Services</h4>
<div class="paragraph">
<p>In Jakarta EE, Jakarta RESTful Web Services provides the functionality for Representational
State Transfer (RESTful) web services. REST is well suited for basic, ad
hoc integration scenarios. RESTful web services, often better integrated
with HTTP than SOAP-based services are, do not require XML messages or
WSDL service-API definitions.</p>
</div>
<div class="paragraph">
<p>Project Jersey is a production-ready implementation for the
Jakarta RESTful Web Services specification. Jersey implements support for the annotations
defined in the Jakarta RESTful Web Services specification, making it easy for developers to
build RESTful web services with Java and the Java Virtual Machine (JVM).</p>
</div>
<div class="paragraph">
<p>Because RESTful web services use existing well-known W3C and Internet
Engineering Task Force (IETF) standards (HTTP, XML, URI, MIME) and have
a lightweight infrastructure that allows services to be built with
minimal tooling, developing RESTful web services is inexpensive and thus
has a very low barrier for adoption. You can use a development tool such
as NetBeans IDE to further reduce the complexity of developing RESTful
web services.</p>
</div>
<div class="paragraph">
<p>A RESTful design may be appropriate when the following conditions are
met.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The web services are completely stateless. A good test is to consider
whether the interaction can survive a restart of the server.</p>
</li>
<li>
<p>A caching infrastructure can be leveraged for performance. If the data
that the web service returns is not dynamically generated and can be
cached, the caching infrastructure that web servers and other
intermediaries inherently provide can be leveraged to improve
performance. However, the developer must take care because such caches
are limited to the HTTP <code>GET</code> method for most servers.</p>
</li>
<li>
<p>The service producer and service consumer have a mutual understanding
of the context and content being passed along. Because there is no
formal way to describe the web services interface, both parties must
agree out of band on the schemas that describe the data being exchanged
and on ways to process it meaningfully. In the real world, most
commercial applications that expose services as RESTful implementations
also distribute so-called value-added toolkits that describe the
interfaces to developers in popular programming languages.</p>
</li>
<li>
<p>Bandwidth is particularly important and needs to be limited. REST is
particularly useful for limited-profile devices, such as PDAs and mobile
phones, for which the overhead of headers and additional layers of SOAP
elements on the XML payload must be restricted.</p>
</li>
<li>
<p>Web service delivery or aggregation into existing websites can be
enabled easily with a RESTful style. Developers can use such
technologies as JAX-RS and Asynchronous JavaScript with XML (Ajax) and
such toolkits as Direct Web Remoting (DWR) to consume the services in
their web applications. Rather than starting from scratch, services can
be exposed with XML and consumed by HTML pages without significantly
refactoring the existing website architecture. Existing developers will
be more productive because they are adding to something they are already
familiar with rather than having to start from scratch with new
technology.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>RESTful web services are discussed in <a href="#GIEPU">Chapter 32,
"Building RESTful Web Services with Jakarta RESTful Web Services"</a>. This chapter contains
information about generating the skeleton of a RESTful web service using
both NetBeans IDE and the Maven project-management tool.</p>
</div>
<div class="paragraph">
<p><a id="GJBJI"></a><a id="deciding-which-type-of-web-service-to-use"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="deciding-which-type-of-web-service-to-use"><a class="anchor" href="#deciding-which-type-of-web-service-to-use"></a>Deciding Which Type of Web Service to Use</h3>
<div class="paragraph">
<p>Basically, you want to use RESTful web services for integration over the
web and big web services in enterprise application–integration scenarios
that have advanced quality-of-service (QoS) requirements.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JAX-WS: Addresses advanced QoS requirements that commonly occur in
enterprise computing. When compared to Jakarta RESTful Web Services, JAX-WS makes it easier to
support the WS-* set of protocols, which provide standards for security
and reliability, among other things, and interoperate with other WS-*
conforming clients and servers.</p>
</li>
<li>
<p>Jakarta RESTful Web Services: Makes it easier to write web applications that apply some or
all of the constraints of the REST style to induce desirable properties
in the application, such as loose coupling (evolving the server is
easier without breaking existing clients), scalability (start small and
grow), and architectural simplicity (use off-the-shelf components, such
as proxies or HTTP routers). You would choose to use Jakarta RESTful Web Services for your web
application because it is easier for many types of clients to consume
RESTful web services while enabling the server side to evolve and scale.
Clients can choose to consume some or all aspects of the service and
mash it up with other web-based services.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-restful-web-services-with-jakarta-rest"><a class="anchor" href="#building-restful-web-services-with-jakarta-rest"></a>Building RESTful Web Services with Jakarta REST</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="GIEPU"></a><a id="building-restful-web-services-with-jax-rs"></a></p>
</div>
<div class="paragraph">
<p>This chapter describes the REST architecture, RESTful web services, and
the Jakarta RESTful Web Services.</p>
</div>
<div class="paragraph">
<p>Jakarta REST makes it easy for developers to build RESTful web services using
the Java programming language.</p>
</div>
<div class="paragraph">
<p><a id="GIJQY"></a><a id="what-are-restful-web-services"></a></p>
</div>
<div class="sect2">
<h3 id="what-are-restful-web-services"><a class="anchor" href="#what-are-restful-web-services"></a>What Are RESTful Web Services?</h3>
<div class="paragraph">
<p>RESTful web services are loosely coupled, lightweight web services that
are particularly well suited for creating APIs for clients spread out
across the internet. Representational State Transfer (REST) is an
architectural style of client-server application centered around the
transfer of representations of resources through requests and responses.
In the REST architectural style, data and functionality are considered
resources and are accessed using Uniform Resource Identifiers (URIs),
typically links on the Web. The resources are represented by documents
and are acted upon by using a set of simple, well-defined operations.</p>
</div>
<div class="paragraph">
<p>For example, a REST resource might be the current weather conditions for
a city. The representation of that resource might be an XML document, an
image file, or an HTML page. A client might retrieve a particular
representation, modify the resource by updating its data, or delete the
resource entirely.</p>
</div>
<div class="paragraph">
<p>The REST architectural style is designed to use a stateless
communication protocol, typically HTTP. In the REST architecture style,
clients and servers exchange representations of resources by using a
standardized interface and protocol.</p>
</div>
<div class="paragraph">
<p>The following principles encourage RESTful applications to be simple,
lightweight, and fast:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Resource identification through URI: A RESTful web service exposes a
set of resources that identify the targets of the interaction with its
clients. Resources are identified by URIs, which provide a global
addressing space for resource and service discovery. See
<a href="#GINPW">The @Path Annotation and URI Path Templates</a> for
more information.</p>
</li>
<li>
<p>Uniform interface: Resources are manipulated using a fixed set of four
create, read, update, delete operations: PUT, GET, POST, and DELETE. PUT
creates a new resource, which can be then deleted by using DELETE. GET
retrieves the current state of a resource in some representation. POST
transfers a new state onto a resource. See
<a href="#GIPYS">Responding to HTTP Methods and Requests</a> for
more information.</p>
</li>
<li>
<p>Self-descriptive messages: Resources are decoupled from their
representation so that their content can be accessed in a variety of
formats, such as HTML, XML, plain text, PDF, JPEG, JSON, and other
document formats. Metadata about the resource is available and used, for
example, to control caching, detect transmission errors, negotiate the
appropriate representation format, and perform authentication or access
control. See <a href="#GIPYS">Responding to HTTP Methods and
Requests</a> and <a href="#GIPZE">Using Entity Providers to Map HTTP
Response and Request Entity Bodies</a> for more information.</p>
</li>
<li>
<p>Stateful interactions through links: Every interaction with a resource
is stateless; that is, request messages are self-contained. Stateful
interactions are based on the concept of explicit state transfer.
Several techniques exist to exchange state, such as URI rewriting,
cookies, and hidden form fields. State can be embedded in response
messages to point to valid future states of the interaction. See
<a href="#GIPZE">Using Entity Providers to Map HTTP Response and
Request Entity Bodies</a> and <a href="#GIPZE">Extracting Request Parameters</a> in the Jakarta REST Overview
document for more information.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GILIK"></a><a id="creating-a-restful-root-resource-class"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-restful-root-resource-class"><a class="anchor" href="#creating-a-restful-root-resource-class"></a>Creating a RESTful Root Resource Class</h3>
<div class="paragraph">
<p>Root resource classes are "plain old Java objects" (POJOs) that are
either annotated with <code>@Path</code> or have at least one method annotated with
<code>@Path</code> or a request method designator, such as <code>@GET</code>, <code>@PUT</code>, <code>@POST</code>,
or <code>@DELETE</code>. Resource methods are methods of a resource class annotated
with a request method designator. This section explains how to use
Jakarta REST to annotate Java classes to create RESTful web services.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GILRU">Developing RESTful Web Services with Jakarta REST</a></p>
</li>
<li>
<p><a href="#GILQB">Overview of a Jakarta REST Application</a></p>
</li>
<li>
<p><a href="#GINPW">The @Path Annotation and URI Path Templates</a></p>
</li>
<li>
<p><a href="#GIPYS">Responding to HTTP Methods and Requests</a></p>
</li>
<li>
<p><a href="#GIPZH">Using @Consumes and @Produces to Customize Requests and
Responses</a></p>
</li>
<li>
<p><a href="#GIPYW">Extracting Request Parameters</a></p>
</li>
<li>
<p><a href="#CIHEGAGI">Configuring Jakarta REST Applications</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GILRU"></a><a id="developing-restful-web-services-with-jax-rs"></a></p>
</div>
<div class="sect3">
<h4 id="developing-restful-web-services-with-jakarta-rest"><a class="anchor" href="#developing-restful-web-services-with-jakarta-rest"></a>Developing RESTful Web Services with Jakarta REST</h4>
<div class="paragraph">
<p>Jakarta REST is a Java programming language API designed to make it easy to
develop applications that use the REST architecture.</p>
</div>
<div class="paragraph">
<p>The Jakarta REST API uses Java programming language annotations to simplify
the development of RESTful web services. Developers decorate Java
programming language class files with Jakarta REST annotations to define
resources and the actions that can be performed on those resources.
Jakarta REST annotations are runtime annotations; therefore, runtime
reflection will generate the helper classes and artifacts for the
resource. A Jakarta EE application archive containing Jakarta REST resource
classes will have the resources configured, the helper classes and
artifacts generated, and the resource exposed to clients by deploying
the archive to a Jakarta EE server.</p>
</div>
<div class="paragraph">
<p><a href="#GINNA">Table 30-1</a> lists some of the Java programming annotations
that are defined by Jakarta REST, with a brief description of how each is
used. Further information on the Jakarta REST APIs can be viewed at
<code><a href="https://jakarta.ee/specifications/platform/8/apidocs/" class="bare">https://jakarta.ee/specifications/platform/8/apidocs/</a></code>.</p>
</div>
<div class="paragraph">
<p><a id="sthref137"></a><a id="GINNA"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 30-1 Summary of Jakarta REST Annotations</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Annotation</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>@Path</code> annotation&#8217;s value is a relative URI path
indicating where the Java class will be hosted: for example,
<code>/helloworld</code>. You can also embed variables in the URIs to make a URI
path template. For example, you could ask for the name of a user and
pass it to the application as a variable in the URI:
<code>/helloworld/{username}</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@GET</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>@GET</code> annotation is a request method designator and
corresponds to the similarly named HTTP method. The Java method
annotated with this request method designator will process HTTP GET
requests. The behavior of a resource is determined by the HTTP method to
which the resource is responding.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@POST</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>@POST</code> annotation is a request method designator and
corresponds to the similarly named HTTP method. The Java method
annotated with this request method designator will process HTTP POST
requests. The behavior of a resource is determined by the HTTP method to
which the resource is responding.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@PUT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>@PUT</code> annotation is a request method designator and
corresponds to the similarly named HTTP method. The Java method
annotated with this request method designator will process HTTP PUT
requests. The behavior of a resource is determined by the HTTP method to
which the resource is responding.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@DELETE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>@DELETE</code> annotation is a request method designator and
corresponds to the similarly named HTTP method. The Java method
annotated with this request method designator will process HTTP DELETE
requests. The behavior of a resource is determined by the HTTP method to
which the resource is responding.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@HEAD</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>@HEAD</code> annotation is a request method designator and
corresponds to the similarly named HTTP method. The Java method
annotated with this request method designator will process HTTP HEAD
requests. The behavior of a resource is determined by the HTTP method to
which the resource is responding.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@OPTIONS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>@OPTIONS</code> annotation is a request method designator
and corresponds to the similarly named HTTP method. The Java method
annotated with this request method designator will process HTTP OPTIONS
requests. The behavior of a resource is determined by the HTTP method to
which the resource is responding.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@PATCH</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>@PATCH</code> annotation is a request method designator and
corresponds to the similarly named HTTP method. The Java method
annotated with this request method designator will process HTTP PATCH
requests. The behavior of a resource is determined by the HTTP method to
which the resource is responding.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@PathParam</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>@PathParam</code> annotation is a type of parameter that
you can extract for use in your resource class. URI path parameters are
extracted from the request URI, and the parameter names correspond to
the URI path template variable names specified in the <code>@Path</code>
class-level annotation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@QueryParam</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>@QueryParam</code> annotation is a type of parameter that
you can extract for use in your resource class. Query parameters are
extracted from the request URI query parameters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Consumes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>@Consumes</code> annotation is used to specify the MIME
media types of representations a resource can consume that were sent by
the client.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Produces</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>@Produces</code> annotation is used to specify the MIME
media types of representations a resource can produce and send back to
the client: for example, <code>"text/plain"</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Provider</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>@Provider</code> annotation is used for anything that is of
interest to the Jakarta REST runtime, such as <code>MessageBodyReader</code> and
<code>MessageBodyWriter</code>. For HTTP requests, the <code>MessageBodyReader</code> is used
to map an HTTP request entity body to method parameters. On the response
side, a return value is mapped to an HTTP response entity body by using
a <code>MessageBodyWriter</code>. If the application needs to supply additional
metadata, such as HTTP headers or a different status code, a method can
return a <code>Response</code> that wraps the entity and that can be built using
<code>Response.ResponseBuilder</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@ApplicationPath</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>@ApplicationPath</code> annotation is used to define
the URL mapping for the application. The path specified by
<code>@ApplicationPath</code> is the base URI for all resource URIs specified by
<code>@Path</code> annotations in the resource class. You may only apply
<code>@ApplicationPath</code> to a subclass of <code>javax.ws.rs.core.Application</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="GILQB"></a><a id="overview-of-a-jax-rs-application"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="overview-of-a-jakarta-rest-application"><a class="anchor" href="#overview-of-a-jakarta-rest-application"></a>Overview of a Jakarta REST Application</h4>
<div class="paragraph">
<p>The following code sample is a very simple example of a root resource
class that uses Jakarta REST annotations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">jakarta.tutorial.hello</span>;

<span class="keyword">import</span> <span class="include">javax.ws.rs.Consumes</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.GET</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.PUT</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.Path</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.Produces</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.core.Context</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.core.UriInfo</span>;

<span class="comment">/**
 * Root resource (exposed at &quot;helloworld&quot; path)
 */</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">helloworld</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">HelloWorld</span> {
    <span class="annotation">@Context</span>
    <span class="directive">private</span> UriInfo context;

    <span class="comment">/** Creates a new instance of HelloWorld */</span>
    <span class="directive">public</span> HelloWorld() {
    }

    <span class="comment">/**
     * Retrieves representation of an instance of helloWorld.HelloWorld
     * @return an instance of java.lang.String
     */</span>
    <span class="annotation">@GET</span>
    <span class="annotation">@Produces</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">text/html</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getHtml() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;html lang=</span><span class="char">\&quot;</span><span class="content">en</span><span class="char">\&quot;</span><span class="content">&gt;&lt;body&gt;&lt;h1&gt;Hello, World!!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;</span><span class="delimiter">&quot;</span></span>;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following sections describe the annotations used in this example.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>@Path</code> annotation&#8217;s value is a relative URI path. In the
preceding example, the Java class will be hosted at the URI path
<code>/helloworld</code>. This is an extremely simple use of the <code>@Path</code>
annotation, with a static URI path. Variables can be embedded in the
URIs. URI path templates are URIs with variables embedded within the URI
syntax.</p>
</li>
<li>
<p>The <code>@GET</code> annotation is a request method designator, along with
<code>@POST</code>, <code>@PUT</code>, <code>@DELETE</code>, and <code>@HEAD</code>, defined by Jakarta REST and
corresponding to the similarly named HTTP methods. In the example, the
annotated Java method will process HTTP GET requests. The behavior of a
resource is determined by the HTTP method to which the resource is
responding.</p>
</li>
<li>
<p>The <code>@Produces</code> annotation is used to specify the MIME media types a
resource can produce and send back to the client. In this example, the
Java method will produce representations identified by the MIME media
type <code>"text/html"</code>.</p>
</li>
<li>
<p>The <code>@Consumes</code> annotation is used to specify the MIME media types a
resource can consume that were sent by the client. The example could be
modified to set the message returned by the <code>getHtml</code> method, as shown
in this code example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@POST</span>
<span class="annotation">@Consumes</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">text/plain</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">void</span> postHtml(<span class="predefined-type">String</span> message) {
    <span class="comment">// Store the message</span>
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GINPW"></a><a id="the-path-annotation-and-uri-path-templates"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="the-path-annotation-and-uri-path-templates"><a class="anchor" href="#the-path-annotation-and-uri-path-templates"></a>The @Path Annotation and URI Path Templates</h4>
<div class="paragraph">
<p>The <code>@Path</code> annotation identifies the URI path template to which the
resource responds and is specified at the class or method level of a
resource. The <code>@Path</code> annotation&#8217;s value is a partial URI path template
relative to the base URI of the server on which the resource is
deployed, the context root of the application, and the URL pattern to
which the Jakarta REST runtime responds.</p>
</div>
<div class="paragraph">
<p>URI path templates are URIs with variables embedded within the URI
syntax. These variables are substituted at runtime in order for a
resource to respond to a request based on the substituted URI. Variables
are denoted by braces (<code>{</code> and <code>}</code>). For example, look at the following
<code>@Path</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/users/{username}</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this kind of example, a user is prompted to type his or her name, and
then a Jakarta REST web service configured to respond to requests to this URI
path template responds. For example, if the user types the user name
"Galileo," the web service responds to the following URL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//example.com/users/Galileo</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To obtain the value of the user name, the <code>@PathParam</code> annotation may be
used on the method parameter of a request method, as shown in the
following code example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/users/{username}</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">UserResource</span> {

    <span class="annotation">@GET</span>
    <span class="annotation">@Produces</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">text/xml</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getUser(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> userName) {
        ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the URI variable must match the regular expression
<code>"[^/]+?"</code>. This variable may be customized by specifying a different
regular expression after the variable name. For example, if a user name
must consist only of lowercase and uppercase alphanumeric characters,
override the default regular expression in the variable definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">users/{username: [a-zA-Z][a-zA-Z_0-9]*}</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>username</code> variable will match only user names that
begin with one uppercase or lowercase letter and zero or more
alphanumeric characters and the underscore character. If a user name
does not match that template, a 404 (Not Found) response will be sent to
the client.</p>
</div>
<div class="paragraph">
<p>A <code>@Path</code> value isn&#8217;t required to have leading or trailing slashes (/).
The Jakarta REST runtime parses URI path templates the same way, whether or
not they have leading or trailing slashes.</p>
</div>
<div class="paragraph">
<p>A URI path template has one or more variables, with each variable name
surrounded by braces: <code>{</code> to begin the variable name and <code>}</code> to end it.
In the preceding example, <code>username</code> is the variable name. At runtime, a
resource configured to respond to the preceding URI path template will
attempt to process the URI data that corresponds to the location of
<code>{username}</code> in the URI as the variable data for <code>username</code>.</p>
</div>
<div class="paragraph">
<p>For example, if you want to deploy a resource that responds to the URI
path template
<code><a href="http://example.com/myContextRoot/resources/{name1}/{name2}/" class="bare">http://example.com/myContextRoot/resources/{name1}/{name2}/</a></code>, you must
first deploy the application to a Jakarta EE server that responds to
requests to the <code><a href="http://example.com/myContextRoot" class="bare">http://example.com/myContextRoot</a></code> URI and then decorate
your resource with the following <code>@Path</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/{name1}/{name2}/</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SomeResource</span> {
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the URL pattern for the Jakarta REST helper servlet,
specified in <code>web.xml</code>, is the default:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;servlet-mapping&gt;
      &lt;servlet-name&gt;javax.ws.rs.core.Application&lt;/servlet-name&gt;
      &lt;url-pattern&gt;/resources<span class="comment">/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A variable name can be used more than once in the URI path template.</p>
</div>
<div class="paragraph">
<p>If a character in the value of a variable would conflict with the
reserved characters of a URI, the conflicting character should be
substituted with percent encoding. For example, spaces in the value of a
variable should be substituted with <code>%20</code>.</p>
</div>
<div class="paragraph">
<p>When defining URI path templates, be careful that the resulting URI
after substitution is valid.</p>
</div>
<div class="paragraph">
<p><a href="#GIPYM">Table 32-2</a> lists some examples of URI path template
variables and how the URIs are resolved after substitution. The
following variable names and values are used in the examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>name1</code>: <code>james</code></p>
</li>
<li>
<p><code>name2</code>: <code>gatz</code></p>
</li>
<li>
<p><code>name3</code>:</p>
</li>
<li>
<p><code>location</code>: <code>Main%20Street</code></p>
</li>
<li>
<p><code>question</code>: <code>why</code></p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Note</strong>:</p>
</div>
<div class="paragraph">
<p>The value of the <code>name3</code> variable is an empty string.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="sthref138"></a><a id="GIPYM"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 32-2 Examples of URI Path Templates</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>URI Path Template</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>URI After Substitution</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://example.com/{name1}/{name2}/" class="bare">http://example.com/{name1}/{name2}/</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://example.com/james/gatz/" class="bare">http://example.com/james/gatz/</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://example.com/{question}/{question}/{question}/" class="bare">http://example.com/{question}/{question}/{question}/</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://example.com/why/why/why/" class="bare">http://example.com/why/why/why/</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://example.com/maps/{location}" class="bare">http://example.com/maps/{location}</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://example.com/maps/Main%20Street" class="bare">http://example.com/maps/Main%20Street</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://example.com/{name3}/home/" class="bare">http://example.com/{name3}/home/</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://example.com//home/" class="bare">http://example.com//home/</a></code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="GIPYS"></a><a id="responding-to-http-methods-and-requests"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="responding-to-http-methods-and-requests"><a class="anchor" href="#responding-to-http-methods-and-requests"></a>Responding to HTTP Methods and Requests</h4>
<div class="paragraph">
<p>The behavior of a resource is determined by the HTTP methods (typically,
GET, POST, PUT, or DELETE) to which the resource is responding.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GIPXS">The Request Method Designator Annotations</a></p>
</li>
<li>
<p><a href="#GIPZE">Using Entity Providers to Map HTTP Response and Request
Entity Bodies</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GIPXS"></a><a id="the-request-method-designator-annotations"></a></p>
</div>
<div class="sect4">
<h5 id="the-request-method-designator-annotations"><a class="anchor" href="#the-request-method-designator-annotations"></a>The Request Method Designator Annotations</h5>
<div class="paragraph">
<p>Request method designator annotations are runtime annotations, defined
by Jakarta REST, that correspond to the similarly named HTTP methods. Within a
resource class file, HTTP methods are mapped to Java programming
language methods by using the request method designator annotations. The
behavior of a resource is determined by which HTTP method the resource
is responding to. Jakarta REST defines a set of request method designators for
the common HTTP methods GET, POST, PUT, DELETE, and HEAD; you can also
create your own custom request method designators. Creating custom
request method designators is outside the scope of this document.</p>
</div>
<div class="paragraph">
<p>The following example shows the use of the PUT method to create or
update a storage container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@PUT</span>
<span class="directive">public</span> Response putContainer() {
    <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">PUT CONTAINER </span><span class="delimiter">&quot;</span></span> + container);

    <span class="predefined-type">URI</span> uri =  uriInfo.getAbsolutePath();
    <span class="predefined-type">Container</span> c = <span class="keyword">new</span> <span class="predefined-type">Container</span>(container, uri.toString());

    Response r;
    <span class="keyword">if</span> (!MemoryStore.MS.hasContainer(c)) {
        r = Response.created(uri).build();
    } <span class="keyword">else</span> {
        r = Response.noContent().build();
    }

    MemoryStore.MS.createContainer(c);
    <span class="keyword">return</span> r;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the Jakarta REST runtime will automatically support the methods
HEAD and OPTIONS if not explicitly implemented. For HEAD, the runtime
will invoke the implemented GET method, if present, and ignore the
response entity, if set. For OPTIONS, the <code>Allow</code> response header will
be set to the set of HTTP methods supported by the resource. In
addition, the Jakarta REST runtime will return a Web Application Definition
Language (WADL) document describing the resource; see
<code><a href="http://www.w3.org/Submission/wadl/" class="bare">http://www.w3.org/Submission/wadl/</a></code> for more information.</p>
</div>
<div class="paragraph">
<p>Methods decorated with request method designators must return <code>void</code>, a
Java programming language type, or a <code>javax.ws.rs.core.Response</code> object.
Multiple parameters may be extracted from the URI by using the
<code>@PathParam</code> or <code>@QueryParam</code> annotations, as described in
<a href="#GIPYW">Extracting Request Parameters</a>. Conversion between Java
types and an entity body is the responsibility of an entity provider,
such as <code>MessageBodyReader</code> or <code>MessageBodyWriter</code>. Methods that need to
provide additional metadata with a response should return an instance of
the <code>Response</code> class. The <code>ResponseBuilder</code> class provides a convenient
way to create a <code>Response</code> instance using a builder pattern. The HTTP
PUT and POST methods expect an HTTP request body, so you should use a
<code>MessageBodyReader</code> for methods that respond to PUT and POST requests.</p>
</div>
<div class="paragraph">
<p>Both <code>@PUT</code> and <code>@POST</code> can be used to create or update a resource. POST
can mean anything, so when using POST, it is up to the application to
define the semantics. PUT has well-defined semantics. When using PUT for
creation, the client declares the URI for the newly created resource.</p>
</div>
<div class="paragraph">
<p>PUT has very clear semantics for creating and updating a resource. The
representation the client sends must be the same representation that is
received using a GET, given the same media type. PUT does not allow a
resource to be partially updated, a common mistake when attempting to
use the PUT method. A common application pattern is to use POST to
create a resource and return a <code>201</code> response with a location header
whose value is the URI to the newly created resource. In this pattern,
the web service declares the URI for the newly created resource.</p>
</div>
<div class="paragraph">
<p><a id="GIPZE"></a><a id="using-entity-providers-to-map-http-response-and-request-entity-bodies"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="using-entity-providers-to-map-http-response-and-request-entity-bodies"><a class="anchor" href="#using-entity-providers-to-map-http-response-and-request-entity-bodies"></a>Using Entity Providers to Map HTTP Response and Request Entity Bodies</h5>
<div class="paragraph">
<p>Entity providers supply mapping services between representations and
their associated Java types. The two types of entity providers are
<code>MessageBodyReader</code> and <code>MessageBodyWriter</code>. For HTTP requests, the
<code>MessageBodyReader</code> is used to map an HTTP request entity body to method
parameters. On the response side, a return value is mapped to an HTTP
response entity body by using a <code>MessageBodyWriter</code>. If the application
needs to supply additional metadata, such as HTTP headers or a different
status code, a method can return a <code>Response</code> that wraps the entity and
that can be built by using <code>Response.ResponseBuilder</code>.</p>
</div>
<div class="paragraph">
<p><a href="#GKCCG">Table 32-3</a> shows the standard types that are supported
automatically for HTTP request and response entity bodies. You need to
write an entity provider only if you are not choosing one of these
standard types.</p>
</div>
<div class="paragraph">
<p><a id="sthref139"></a><a id="GKCCG"></a></p>
</div>
<div class="paragraph">
<p>Table 32-3 Types Supported for HTTP Request and Response Entity Bodies</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Java Type</th>
<th class="tableblock halign-left valign-top">Supported Media Types</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>byte[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All media types (<code><strong>/</strong></code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.lang.String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All text media types (<code>text/*</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.io.InputStream</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All media types (<code><strong>/</strong></code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.io.Reader</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All media types (<code><strong>/</strong></code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.io.File</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All media types (<code><strong>/</strong></code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.activation.DataSource</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All media types (<code><strong>/</strong></code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.xml.transform.Source</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XML media types (<code>text/xml</code>,
<code>application/xml</code>, and <code>application/*+xml</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.xml.bind.JAXBElement</code> and application-supplied Jakarta XML Binding classes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XML
media types (<code>text/xml</code>, <code>application/xml</code>, and <code>application/*+xml</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MultivaluedMap&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Form content
(<code>application/x-www-form-urlencoded</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>StreamingOutput</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All media types (<code><strong>/</strong></code>), <code>MessageBodyWriter</code> only</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following example shows how to use <code>MessageBodyReader</code> with the
<code>@Consumes</code> and <code>@Provider</code> annotations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Consumes</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/x-www-form-urlencoded</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Provider</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">FormReader</span> <span class="directive">implements</span> MessageBodyReader&lt;NameValuePair&gt; {</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to use <code>MessageBodyWriter</code> with the
<code>@Produces</code> and <code>@Provider</code> annotations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Produces</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">text/html</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Provider</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">FormWriter</span> <span class="directive">implements</span>
        MessageBodyWriter&lt;<span class="predefined-type">Hashtable</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt;&gt; {</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to use <code>ResponseBuilder</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@GET</span>
<span class="directive">public</span> Response getItem() {
    <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">GET ITEM </span><span class="delimiter">&quot;</span></span> + container + <span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span> + item);

    Item i = MemoryStore.MS.getItem(container, item);
    <span class="keyword">if</span> (i == <span class="predefined-constant">null</span>)
        <span class="keyword">throw</span> <span class="keyword">new</span> NotFoundException(<span class="string"><span class="delimiter">&quot;</span><span class="content">Item not found</span><span class="delimiter">&quot;</span></span>);
    <span class="predefined-type">Date</span> lastModified = i.getLastModified().getTime();
    EntityTag et = <span class="keyword">new</span> EntityTag(i.getDigest());
    ResponseBuilder rb = request.evaluatePreconditions(lastModified, et);
    <span class="keyword">if</span> (rb != <span class="predefined-constant">null</span>)
        <span class="keyword">return</span> rb.build();

    <span class="type">byte</span><span class="type">[]</span> b = MemoryStore.MS.getItemData(container, item);
    <span class="keyword">return</span> Response.ok(b, i.getMimeType()).
            lastModified(lastModified).tag(et).build();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GIPZH"></a><a id="using-consumes-and-produces-to-customize-requests-and-responses"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="using-consumes-and-produces-to-customize-requests-and-responses"><a class="anchor" href="#using-consumes-and-produces-to-customize-requests-and-responses"></a>Using @Consumes and @Produces to Customize Requests and Responses</h4>
<div class="paragraph">
<p>The information sent to a resource and then passed back to the client is
specified as a MIME media type in the headers of an HTTP request or
response. You can specify which MIME media types of representations a
resource can respond to or produce by using the following annotations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>javax.ws.rs.Consumes</code></p>
</li>
<li>
<p><code>javax.ws.rs.Produces</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, a resource class can respond to and produce all MIME media
types of representations specified in the HTTP request and response
headers.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GIPXF">The @Produces Annotation</a></p>
</li>
<li>
<p><a href="#GIPYT">The @Consumes Annotation</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GIPXF"></a><a id="the-produces-annotation"></a></p>
</div>
<div class="sect4">
<h5 id="the-produces-annotation"><a class="anchor" href="#the-produces-annotation"></a>The @Produces Annotation</h5>
<div class="paragraph">
<p>The <code>@Produces</code> annotation is used to specify the MIME media types or
representations a resource can produce and send back to the client. If
<code>@Produces</code> is applied at the class level, all the methods in a resource
can produce the specified MIME types by default. If applied at the
method level, the annotation overrides any <code>@Produces</code> annotations
applied at the class level.</p>
</div>
<div class="paragraph">
<p>If no methods in a resource are able to produce the MIME type in a
client request, the Jakarta REST runtime sends back an HTTP "406 Not
Acceptable" error.</p>
</div>
<div class="paragraph">
<p>The value of <code>@Produces</code> is an array of <code>String</code> of MIME types or a
comma-separated list of <code>MediaType</code> constants. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Produces</span>({<span class="string"><span class="delimiter">&quot;</span><span class="content">image/jpeg,image/png</span><span class="delimiter">&quot;</span></span>})</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to apply <code>@Produces</code> at both the class
and method levels:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/myResource</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Produces</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">text/plain</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SomeResource</span> {
    <span class="annotation">@GET</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> doGetAsPlainText() {
        ...
    }

    <span class="annotation">@GET</span>
    <span class="annotation">@Produces</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">text/html</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> doGetAsHtml() {
        ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>doGetAsPlainText</code> method defaults to the MIME media type of the
<code>@Produces</code> annotation at the class level. The <code>doGetAsHtml</code> method&#8217;s
<code>@Produces</code> annotation overrides the class-level <code>@Produces</code> setting and
specifies that the method can produce HTML rather than plain text.</p>
</div>
<div class="paragraph">
<p><code>@Produces</code> can also use the constants defined in the
<code>javax.ws.rs.core.MediaType</code> class to specify the media type. For
example, specifying <code>MediaType.APPLICATION_XML</code> is equivalent to
specifying <code>"application/xml"</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Produces</span>(MediaType.APPLICATION_XML)
<span class="annotation">@GET</span>
<span class="directive">public</span> Customer getCustomer() { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a resource class is capable of producing more than one MIME media
type, the resource method chosen will correspond to the most acceptable
media type as declared by the client. More specifically, the <code>Accept</code>
header of the HTTP request declares what is most acceptable. For
example, if the <code>Accept</code> header is <code>Accept: text/plain</code>, the
<code>doGetAsPlainText</code> method will be invoked. Alternatively, if the
<code>Accept</code> header is <code>Accept: text/plain;q=0.9, text/html</code>, which declares
that the client can accept media types of <code>text/plain</code> and <code>text/html</code>
but prefers the latter, the <code>doGetAsHtml</code> method will be invoked.</p>
</div>
<div class="paragraph">
<p>More than one media type may be declared in the same <code>@Produces</code>
declaration. The following code example shows how this is done:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Produces</span>({<span class="string"><span class="delimiter">&quot;</span><span class="content">application/xml</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">application/json</span><span class="delimiter">&quot;</span></span>})
<span class="directive">public</span> <span class="predefined-type">String</span> doGetAsXmlOrJson() {
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>doGetAsXmlOrJson</code> method will get invoked if either of the media
types <code>application/xml</code> or <code>application/json</code> is acceptable. If both are
equally acceptable, the former will be chosen because it occurs first.
The preceding examples refer explicitly to MIME media types for clarity.
It is possible to refer to constant values, which may reduce
typographical errors. For more information, see the API documentation
for the constant field values of <code>javax.ws.rs.core.MediaType</code>.</p>
</div>
<div class="paragraph">
<p><a id="GIPYT"></a><a id="the-consumes-annotation"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="the-consumes-annotation"><a class="anchor" href="#the-consumes-annotation"></a>The @Consumes Annotation</h5>
<div class="paragraph">
<p>The <code>@Consumes</code> annotation is used to specify which MIME media types of
representations a resource can accept, or consume, from the client. If
<code>@Consumes</code> is applied at the class level, all the response methods
accept the specified MIME types by default. If applied at the method
level, <code>@Consumes</code> overrides any <code>@Consumes</code> annotations applied at the
class level.</p>
</div>
<div class="paragraph">
<p>If a resource is unable to consume the MIME type of a client request,
the Jakarta REST runtime sends back an HTTP 415 ("Unsupported Media Type")
error.</p>
</div>
<div class="paragraph">
<p>The value of <code>@Consumes</code> is an array of <code>String</code> of acceptable MIME
types, or a comma-separated list of <code>MediaType</code> constants. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Consumes</span>({<span class="string"><span class="delimiter">&quot;</span><span class="content">text/plain,text/html</span><span class="delimiter">&quot;</span></span>})</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is the equivalent of:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Consumes</span>({MediaType.TEXT_PLAIN,MediaType.TEXT_HTML})</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to apply <code>@Consumes</code> at both the class
and method levels:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/myResource</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Consumes</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">multipart/related</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SomeResource</span> {
    <span class="annotation">@POST</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> doPost(MimeMultipart mimeMultipartData) {
        ...
    }

    <span class="annotation">@POST</span>
    <span class="annotation">@Consumes</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/x-www-form-urlencoded</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> doPost2(FormURLEncodedProperties formData) {
        ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>doPost</code> method defaults to the MIME media type of the <code>@Consumes</code>
annotation at the class level. The <code>doPost2</code> method overrides the class
level <code>@Consumes</code> annotation to specify that it can accept URL-encoded
form data.</p>
</div>
<div class="paragraph">
<p>If no resource methods can respond to the requested MIME type, an HTTP
415 ("Unsupported Media Type") error is returned to the client.</p>
</div>
<div class="paragraph">
<p>The <code>HelloWorld</code> example discussed previously in this section can be
modified to set the message by using <code>@Consumes</code>, as shown in the
following code example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@POST</span>
<span class="annotation">@Consumes</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">text/html</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">void</span> postHtml(<span class="predefined-type">String</span> message) {
    <span class="comment">// Store the message</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the Java method will consume representations identified
by the MIME media type <code>text/plain</code>. Note that the resource method
returns <code>void</code>. This means that no representation is returned and that a
response with a status code of HTTP 204 ("No Content") will be returned.</p>
</div>
<div class="paragraph">
<p><a id="GIPYW"></a><a id="extracting-request-parameters"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="extracting-request-parameters"><a class="anchor" href="#extracting-request-parameters"></a>Extracting Request Parameters</h4>
<div class="paragraph">
<p>Parameters of a resource method may be annotated with parameter-based
annotations to extract information from a request. A previous example
presented the use of the <code>@PathParam</code> parameter to extract a path
parameter from the path component of the request URL that matched the
path declared in <code>@Path</code>.</p>
</div>
<div class="paragraph">
<p>You can extract the following types of parameters for use in your
resource class:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Query</p>
</li>
<li>
<p>URI path</p>
</li>
<li>
<p>Form</p>
</li>
<li>
<p>Cookie</p>
</li>
<li>
<p>Header</p>
</li>
<li>
<p>Matrix</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Query parameters are extracted from the request URI query parameters and
are specified by using the <code>javax.ws.rs.QueryParam</code> annotation in the
method parameter arguments. The following example demonstrates using
<code>@QueryParam</code> to extract query parameters from the <code>Query</code> component of
the request URL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">smooth</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@GET</span>
<span class="directive">public</span> Response smooth(
        <span class="annotation">@DefaultValue</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span>) <span class="annotation">@QueryParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">step</span><span class="delimiter">&quot;</span></span>) <span class="type">int</span> step,
        <span class="annotation">@DefaultValue</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>) <span class="annotation">@QueryParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">min-m</span><span class="delimiter">&quot;</span></span>) <span class="type">boolean</span> hasMin,
        <span class="annotation">@DefaultValue</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>) <span class="annotation">@QueryParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">max-m</span><span class="delimiter">&quot;</span></span>) <span class="type">boolean</span> hasMax,
        <span class="annotation">@DefaultValue</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>) <span class="annotation">@QueryParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">last-m</span><span class="delimiter">&quot;</span></span>) <span class="type">boolean</span> hasLast,
        <span class="annotation">@DefaultValue</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">blue</span><span class="delimiter">&quot;</span></span>) <span class="annotation">@QueryParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">min-color</span><span class="delimiter">&quot;</span></span>) ColorParam minColor,
        <span class="annotation">@DefaultValue</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">green</span><span class="delimiter">&quot;</span></span>) <span class="annotation">@QueryParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">max-color</span><span class="delimiter">&quot;</span></span>) ColorParam maxColor,
        <span class="annotation">@DefaultValue</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">red</span><span class="delimiter">&quot;</span></span>) <span class="annotation">@QueryParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">last-color</span><span class="delimiter">&quot;</span></span>) ColorParam lastColor
        ) { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the query parameter <code>step</code> exists in the query component of the
request URI, the value of <code>step</code> will be extracted and parsed as a
32-bit signed integer and assigned to the <code>step</code> method parameter. If
<code>step</code> does not exist, a default value of 2, as declared in the
<code>@DefaultValue</code> annotation, will be assigned to the <code>step</code> method
parameter. If the <code>step</code> value cannot be parsed as a 32-bit signed
integer, an HTTP 400 ("Client Error") response is returned.</p>
</div>
<div class="paragraph">
<p>User-defined Java programming language types may be used as query
parameters. The following code example shows the <code>ColorParam</code> class used
in the preceding query parameter example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ColorParam</span> <span class="directive">extends</span> <span class="predefined-type">Color</span> {
    <span class="directive">public</span> ColorParam(<span class="predefined-type">String</span> s) {
        <span class="local-variable">super</span>(getRGB(s));
    }

    <span class="directive">private</span> <span class="directive">static</span> <span class="type">int</span> getRGB(<span class="predefined-type">String</span> s) {
        <span class="keyword">if</span> (s.charAt(<span class="integer">0</span>) == <span class="string"><span class="delimiter">'</span><span class="content">#</span><span class="delimiter">'</span></span>) {
            <span class="keyword">try</span> {
                <span class="predefined-type">Color</span> c = <span class="predefined-type">Color</span>.decode(<span class="string"><span class="delimiter">&quot;</span><span class="content">0x</span><span class="delimiter">&quot;</span></span> + s.substring(<span class="integer">1</span>));
                <span class="keyword">return</span> c.getRGB();
            } <span class="keyword">catch</span> (<span class="exception">NumberFormatException</span> e) {
                <span class="keyword">throw</span> <span class="keyword">new</span> WebApplicationException(<span class="integer">400</span>);
            }
        } <span class="keyword">else</span> {
            <span class="keyword">try</span> {
                <span class="predefined-type">Field</span> f = <span class="predefined-type">Color</span>.class.getField(s);
                <span class="keyword">return</span> ((<span class="predefined-type">Color</span>)f.get(<span class="predefined-constant">null</span>)).getRGB();
            } <span class="keyword">catch</span> (<span class="exception">Exception</span> e) {
                <span class="keyword">throw</span> <span class="keyword">new</span> WebApplicationException(<span class="integer">400</span>);
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The constructor for <code>ColorParam</code> takes a single <code>String</code> parameter.</p>
</div>
<div class="paragraph">
<p>Both <code>@QueryParam</code> and <code>@PathParam</code> can be used only on the following
Java types.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All primitive types except <code>char</code>.</p>
</li>
<li>
<p>All wrapper classes of primitive types except <code>Character</code>.</p>
</li>
<li>
<p>Any class with a constructor that accepts a single <code>String</code> argument.</p>
</li>
<li>
<p>Any class with the static method named <code>valueOf(String)</code> that accepts
a single <code>String</code> argument.</p>
</li>
<li>
<p><code>List&lt;T&gt;</code>, <code>Set&lt;T&gt;</code>, or <code>SortedSet&lt;T&gt;</code>, where T matches the already
listed criteria. Sometimes, parameters may contain more than one value
for the same name. If this is the case, these types may be used to
obtain all values.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>@DefaultValue</code> is not used in conjunction with <code>@QueryParam</code>, and
the query parameter is not present in the request, the value will be an
empty collection for <code>List</code>, <code>Set</code>, or <code>SortedSet</code>; null for other
object types; and the default for primitive types.</p>
</div>
<div class="paragraph">
<p>URI path parameters are extracted from the request URI, and the
parameter names correspond to the URI path template variable names
specified in the <code>@Path</code> class-level annotation. URI parameters are
specified using the <code>javax.ws.rs.PathParam</code> annotation in the method
parameter arguments. The following example shows how to use <code>@Path</code>
variables and the <code>@PathParam</code> annotation in a method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/{username}</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">MyResourceBean</span> {
    ...
    <span class="annotation">@GET</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> printUsername(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> userId) {
        ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding snippet, the URI path template variable name <code>username</code>
is specified as a parameter to the <code>printUsername</code> method. The
<code>@PathParam</code> annotation is set to the variable name <code>username</code>. At
runtime, before <code>printUsername</code> is called, the value of <code>username</code> is
extracted from the URI and cast to a <code>String</code>. The resulting <code>String</code> is
then available to the method as the <code>userId</code> variable.</p>
</div>
<div class="paragraph">
<p>If the URI path template variable cannot be cast to the specified type,
the Jakarta REST runtime returns an HTTP 400 ("Bad Request") error to the
client. If the <code>@PathParam</code> annotation cannot be cast to the specified
type, the Jakarta REST runtime returns an HTTP 404 ("Not Found") error to the
client.</p>
</div>
<div class="paragraph">
<p>The <code>@PathParam</code> parameter and the other parameter-based annotations
(<code>@MatrixParam</code>, <code>@HeaderParam</code>, <code>@CookieParam</code>, and <code>@FormParam</code>) obey
the same rules as <code>@QueryParam</code>.</p>
</div>
<div class="paragraph">
<p>Cookie parameters, indicated by decorating the parameter with
<code>javax.ws.rs.CookieParam</code>, extract information from the cookies declared
in cookie-related HTTP headers. Header parameters, indicated by
decorating the parameter with <code>javax.ws.rs.HeaderParam</code>, extract
information from the HTTP headers. Matrix parameters, indicated by
decorating the parameter with <code>javax.ws.rs.MatrixParam</code>, extract
information from URL path segments.</p>
</div>
<div class="paragraph">
<p>Form parameters, indicated by decorating the parameter with
<code>javax.ws.rs.FormParam</code>, extract information from a request
representation that is of the MIME media type
<code>application/x-www-form-urlencoded</code> and conforms to the encoding
specified by HTML forms, as described in
<code><a href="http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1" class="bare">http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1</a></code>. This
parameter is very useful for extracting information sent by POST in HTML
forms.</p>
</div>
<div class="paragraph">
<p>The following example extracts the <code>name</code> form parameter from the POST
form data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@POST</span>
<span class="annotation">@Consumes</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/x-www-form-urlencoded</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">void</span> post(<span class="annotation">@FormParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> name) {
    <span class="comment">// Store the message</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To obtain a general map of parameter names and values for query and path
parameters, use the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@GET</span>
<span class="directive">public</span> <span class="predefined-type">String</span> get(<span class="annotation">@Context</span> UriInfo ui) {
    MultivaluedMap&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; queryParams = ui.getQueryParameters();
    MultivaluedMap&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; pathParams = ui.getPathParameters();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following method extracts header and cookie parameter names and
values into a map:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@GET</span>
<span class="directive">public</span> <span class="predefined-type">String</span> get(<span class="annotation">@Context</span> HttpHeaders hh) {
    MultivaluedMap&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; headerParams = hh.getRequestHeaders();
    <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, Cookie&gt; pathParams = hh.getCookies();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In general, <code>@Context</code> can be used to obtain contextual Java types
related to the request or response.</p>
</div>
<div class="paragraph">
<p>For form parameters, it is possible to do the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@POST</span>
<span class="annotation">@Consumes</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/x-www-form-urlencoded</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">void</span> post(MultivaluedMap&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; formParams) {
    <span class="comment">// Store the message</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="CIHEGAGI"></a><a id="configuring-jax-rs-applications"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="configuring-jakarta-rest-applications"><a class="anchor" href="#configuring-jakarta-rest-applications"></a>Configuring Jakarta REST Applications</h4>
<div class="paragraph">
<p>A Jakarta REST application consists of at least one resource class packaged
within a WAR file. The base URI from which an application&#8217;s resources
respond to requests can be set one of two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using the <code>@ApplicationPath</code> annotation in a subclass of
<code>javax.ws.rs.core.Application</code> packaged within the WAR</p>
</li>
<li>
<p>Using the <code>servlet-mapping</code> tag within the WAR&#8217;s <code>web.xml</code> deployment
descriptor</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#CIHFEBJF">Configuring a Jakarta REST Application Using a Subclass of
Application</a></p>
</li>
<li>
<p><a href="#CIHDHAIJ">Configuring the Base URI in web.xml</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="CIHFEBJF"></a><a id="configuring-a-jax-rs-application-using-a-subclass-of-application"></a></p>
</div>
<div class="sect4">
<h5 id="configuring-a-jakarta-rest-application-using-a-subclass-of-application"><a class="anchor" href="#configuring-a-jakarta-rest-application-using-a-subclass-of-application"></a>Configuring a Jakarta REST Application Using a Subclass of Application</h5>
<div class="paragraph">
<p>Create a subclass of <code>javax.ws.rs.core.Application</code> to manually
configure the environment in which the REST resources defined in your
resource classes are run, including the base URI. Add a class-level
<code>@ApplicationPath</code> annotation to set the base URI.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ApplicationPath</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/webapi</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">MyApplication</span> <span class="directive">extends</span> Application { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, the base URI is set to <code>/webapi</code>, which means
that all resources defined within the application are relative to
<code>/webapi</code>.</p>
</div>
<div class="paragraph">
<p>By default, all the resources in an archive will be processed for
resources. Override the <code>getClasses</code> method to manually register the
resource classes in the application with the Jakarta REST runtime.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="predefined-type">Set</span>&lt;<span class="predefined-type">Class</span>&lt;?&gt;&gt; getClasses() {
    <span class="directive">final</span> <span class="predefined-type">Set</span>&lt;<span class="predefined-type">Class</span>&lt;?&gt;&gt; classes = <span class="keyword">new</span> <span class="predefined-type">HashSet</span>&lt;&gt;();
    <span class="comment">// register root resource</span>
    classes.add(MyResource.class);
    <span class="keyword">return</span> classes;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="CIHDHAIJ"></a><a id="configuring-the-base-uri-in-web.xml"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="configuring-the-base-uri-in-web-xml"><a class="anchor" href="#configuring-the-base-uri-in-web-xml"></a>Configuring the Base URI in web.xml</h5>
<div class="paragraph">
<p>The base URI for a Jakarta REST application can be set using a
<code>servlet-mapping</code> tag in the <code>web.xml</code> deployment descriptor, using the
<code>Application</code> class name as the servlet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;servlet-mapping&gt;</span>
    <span class="tag">&lt;servlet-name&gt;</span>javax.ws.rs.core.Application<span class="tag">&lt;/servlet-name&gt;</span>
    <span class="tag">&lt;url-pattern&gt;</span>/webapi/*<span class="tag">&lt;/url-pattern&gt;</span>
<span class="tag">&lt;/servlet-mapping&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This setting will also override the path set by <code>@ApplicationPath</code> when
using an <code>Application</code> subclass.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;servlet-mapping&gt;</span>
   <span class="tag">&lt;servlet-name&gt;</span>com.example.rest.MyApplication<span class="tag">&lt;/servlet-name&gt;</span>
   <span class="tag">&lt;url-pattern&gt;</span>/services/*<span class="tag">&lt;/url-pattern&gt;</span>
<span class="tag">&lt;/servlet-mapping&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GIPZZ"></a><a id="example-applications-for-jax-rs"></a></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="example-applications-for-jakarta-rest"><a class="anchor" href="#example-applications-for-jakarta-rest"></a>Example Applications for Jakarta REST</h3>
<div class="paragraph">
<p>This section provides an introduction to creating, deploying, and
running your own Jakarta REST applications. This section demonstrates the
steps that are needed to create, build, deploy, and test a very simple
web application that uses Jakarta REST annotations.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GIPYZ">Creating a Simple RESTful Web Service</a></p>
</li>
<li>
<p><a href="#GJVBC">The rsvp Example Application</a></p>
</li>
<li>
<p><a href="#GIRCI">Real-World Examples</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GIPYZ"></a><a id="creating-a-simple-restful-web-service"></a></p>
</div>
<div class="sect3">
<h4 id="creating-a-simple-restful-web-service"><a class="anchor" href="#creating-a-simple-restful-web-service"></a>Creating a Simple RESTful Web Service</h4>
<div class="paragraph">
<p>This section explains how to use NetBeans IDE to create a RESTful web
service using a Maven archetype. The archetype generates a skeleton for
the application, and you simply need to implement the appropriate
method.</p>
</div>
<div class="paragraph">
<p>You can find a version of this application at
<code><em>tut-install</em>/examples/jaxrs/hello/</code>.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GIQAA">To Create a RESTful Web Service Using NetBeans IDE</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GIQAA"></a><a id="to-create-a-restful-web-service-using-netbeans-ide"></a></p>
</div>
<div class="sect4">
<h5 id="to-create-a-restful-web-service-using-netbeans-ide"><a class="anchor" href="#to-create-a-restful-web-service-using-netbeans-ide"></a>To Create a RESTful Web Service Using NetBeans IDE</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure you have installed the tutorial archetypes as described in <a href="#CHDJGCCA">Installing the Tutorial Archetypes</a>.</p>
</li>
<li>
<p>In NetBeans IDE, create a simple web application using the <code>jaxrs-service-archetype</code> Maven archetype. This archetype creates a very simple "Hello, World" web application.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>From the File menu, choose New Project.</p>
</li>
<li>
<p>From Categories, select Maven. From Projects, select Project From Archetype. Click Next.</p>
</li>
<li>
<p>Under Search enter <code>jaxrs-service</code>, select the <code>jaxrs-service-archetype</code>, and click Next.</p>
</li>
<li>
<p>Under Project Name enter <code>HelloWorldApplication</code>, set the Project Location, and set the Package name to <code>jakarta.tutorial.hello</code>, and click Finish.</p>
<div class="paragraph">
<p>The project is created.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>In <code>HelloWorld.java</code>, find the <code>getHtml()</code> method. Replace the <code>//TODO</code> comment with the following text, so that the finished product resembles the following method:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@GET</span>
<span class="annotation">@Produces</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">text/html</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="predefined-type">String</span> getHtml() {
    <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;html lang=</span><span class="char">\&quot;</span><span class="content">en</span><span class="char">\&quot;</span><span class="content">&gt;&lt;body&gt;&lt;h1&gt;Hello, World!!&lt;/body&gt;&lt;/h1&gt;&lt;/html&gt;</span><span class="delimiter">&quot;</span></span>;
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Note</strong>:</p>
</div>
<div class="paragraph">
<p>Because the MIME type produced is HTML, you can use HTML tags in your
return statement.</p>
</div></div></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Right-click the <code>HelloWorldApplication</code> project in the Projects pane and select Run.</p>
<div class="paragraph">
<p>This will build and deploy the application to GlassFish Server.</p>
</div>
</li>
<li>
<p>In a browser, open the following URL:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/HelloWorldApplication/HelloWorldApplication</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A browser window opens and displays the return value of <code>Hello, World!!</code></p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For other sample applications that demonstrate deploying and running
Jakarta REST applications using NetBeans IDE, see <a href="#GJVBC">The rsvp Example
Application</a> and Your First Cup: An Introduction to the Jakarta EE Platform
at <code><a href="https://eclipse-ee4j.github.io/jakartaee-firstcup/toc.html" class="bare">https://eclipse-ee4j.github.io/jakartaee-firstcup/toc.html</a></code>. You may also look at
the tutorials on the NetBeans IDE tutorial site, such as the one titled
"Getting Started with RESTful Web Services" at
<code><a href="https://netbeans.apache.org/kb/docs/websvc/rest.html" class="bare">https://netbeans.apache.org/kb/docs/websvc/rest.html</a></code>. This tutorial includes
a section on creating a CRUD application from a database. Create, read,
update, and delete (CRUD) are the four basic functions of persistent
storage and relational databases.</p>
</div>
<div class="paragraph">
<p><a id="GJVBC"></a><a id="the-rsvp-example-application"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="the-rsvp-example-application"><a class="anchor" href="#the-rsvp-example-application"></a>The rsvp Example Application</h4>
<div class="paragraph">
<p>The <code>rsvp</code> example application, located in the
<code><em>tut-install</em></code> <code>/examples/jaxrs/rsvp/</code> directory, allows invitees to an
event to indicate whether they will attend. The events, people invited
to the event, and the responses to the invite are stored in Apache Derby using Jakarta Persistence. The Jakarta REST resources in <code>rsvp</code>
are exposed in a stateless session enterprise bean.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GJVAW">Components of the rsvp Example Application</a></p>
</li>
<li>
<p><a href="#GKCCA">Running the rsvp Example Application</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GJVAW"></a><a id="components-of-the-rsvp-example-application"></a></p>
</div>
<div class="sect4">
<h5 id="components-of-the-rsvp-example-application"><a class="anchor" href="#components-of-the-rsvp-example-application"></a>Components of the rsvp Example Application</h5>
<div class="paragraph">
<p>The three enterprise beans in the <code>rsvp</code> example application are
<code>rsvp.ejb.ConfigBean</code>, <code>rsvp.ejb.StatusBean</code>, and
<code>rsvp.ejb.ResponseBean</code>.</p>
</div>
<div class="paragraph">
<p><code>ConfigBean</code> is a singleton session bean that initializes the data in
the database.</p>
</div>
<div class="paragraph">
<p><code>StatusBean</code> exposes a Jakarta REST resource for displaying the current status
of all invitees to an event. The URI path template is declared first on
the class and then on the <code>getEvent</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Stateless</span>
<span class="annotation">@Named</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/status</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">StatusBean</span> {
    ...
    <span class="annotation">@GET</span>
    <span class="annotation">@Produces</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">{eventId}/</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">Event</span> getEvent(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">eventId</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">Long</span> eventId) {
         ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The combination of the two <code>@Path</code> annotations results in the following
URI path template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/status/{eventId}/</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The URI path variable <code>eventId</code> is a <code>@PathParam</code> variable in the
<code>getEvent</code> method, which responds to HTTP GET requests and has been
annotated with <code>@GET</code>. The <code>eventId</code> variable is used to look up all the
current responses in the database for that particular event.</p>
</div>
<div class="paragraph">
<p><code>ResponseBean</code> exposes a Jakarta REST resource for setting an invitee&#8217;s
response to a particular event. The URI path template for <code>ResponseBean</code>
is declared as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/{eventId}/{inviteId}</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Two URI path variables are declared in the path template: <code>eventId</code> and
<code>inviteId</code>. As in <code>StatusBean</code>, <code>eventId</code> is the unique ID for a
particular event. Each invitee to that event has a unique ID for the
invitation, and that is the <code>inviteId</code>. Both of these path variables are
used in two Jakarta REST methods in <code>ResponseBean</code>: <code>getResponse</code> and
<code>putResponse</code>. The <code>getResponse</code> method responds to HTTP GET requests
and displays the invitee&#8217;s current response and a form to change the
response.</p>
</div>
<div class="paragraph">
<p>The <code>jakarta.tutorial.rsvp.rest.RsvpApplication</code> class defines the root
application path for the resources by applying the
<code>javax.ws.rs.ApplicationPath</code> annotation at the class level.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ApplicationPath</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/webapi</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">RsvpApplication</span> <span class="directive">extends</span> Application {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>An invitee who wants to change his or her response selects the new
response and submits the form data, which is processed as an HTTP POST
request by the <code>putResponse</code> method. The new response is extracted from
the HTTP POST request and stored as the <code>userResponse</code> string. The
<code>putResponse</code> method uses <code>userResponse</code>, <code>eventId</code>, and <code>inviteId</code> to
update the invitee&#8217;s response in the database.</p>
</div>
<div class="paragraph">
<p>The events, people, and responses in <code>rsvp</code> are encapsulated in Jakarta
Persistence entities. The <code>rsvp.entity.Event</code>, <code>rsvp.entity.Person</code>,
and <code>rsvp.entity.Response</code> entities respectively represent events,
invitees, and responses to an event.</p>
</div>
<div class="paragraph">
<p>The <code>rsvp.util.ResponseEnum</code> class declares an enumerated type that
represents all the possible response statuses an invitee may have.</p>
</div>
<div class="paragraph">
<p>The web application also includes two CDI managed beans, <code>StatusManager</code>
and <code>EventManager</code>, which use the Jakarta REST Client API to call the
resources exposed in <code>StatusBean</code> and <code>ResponseBean</code>. For information on
how the Client API is used in <code>rsvp</code>, see
<a href="#BABEDFIG">"The Client API in the rsvp Example
Application"</a>.</p>
</div>
<div class="paragraph">
<p><a id="GKCCA"></a><a id="running-the-rsvp-example-application"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="running-the-rsvp-example-application"><a class="anchor" href="#running-the-rsvp-example-application"></a>Running the rsvp Example Application</h5>
<div class="paragraph">
<p>Both NetBeans IDE and Maven can be used to deploy and run the <code>rsvp</code>
example application.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#CIHEFEHA">To Run the rsvp Example Application Using NetBeans IDE</a></p>
</li>
<li>
<p><a href="#CIHHHIEI">To Run the rsvp Example Application Using Maven</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="CIHEFEHA"></a><a id="to-run-the-rsvp-example-application-using-netbeans-ide"></a></p>
</div>
<div class="sect5">
<h6 id="to-run-the-rsvp-example-application-using-netbeans-ide"><a class="anchor" href="#to-run-the-rsvp-example-application-using-netbeans-ide"></a>To Run the rsvp Example Application Using NetBeans IDE</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If the database server is not already running, start it by following
the instructions in <a href="#BNADK">Starting and
Stopping Apache Derby</a>.</p>
</li>
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>From the File menu, choose Open Project.</p>
</li>
<li>
<p>In the Open Project dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/jaxrs</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>rsvp</code> folder.</p>
</li>
<li>
<p>Click Open Project.</p>
</li>
<li>
<p>In the Projects tab, right-click the <code>rsvp</code> project and select Run.</p>
<div class="paragraph">
<p>The project will be compiled, assembled, and deployed to GlassFish
Server. A web browser window will open to the following URL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/rsvp/index.xhtml</span></code></pre>
</div>
</div>
</li>
<li>
<p>In the web browser window, click the Event status link for the Duke&#8217;s Birthday event.</p>
<div class="paragraph">
<p>You&#8217;ll see the current invitees and their responses.</p>
</div>
</li>
<li>
<p>Click the current response of one of the invitees in the Status column of the table, select a new response, and click Update your status.</p>
<div class="paragraph">
<p>The invitee&#8217;s new status should now be displayed in the table of
invitees and their response statuses.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="CIHHHIEI"></a><a id="to-run-the-rsvp-example-application-using-maven"></a></p>
</div>
</div>
<div class="sect5">
<h6 id="to-run-the-rsvp-example-application-using-maven"><a class="anchor" href="#to-run-the-rsvp-example-application-using-maven"></a>To Run the rsvp Example Application Using Maven</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If the database server is not already running, start it by following the instructions in <a href="#BNADK">Starting and Stopping Apache Derby</a>.</p>
</li>
<li>
<p>Make sure that GlassFish Server has been started (see <a href="#BNADI">Starting and Stopping GlassFish Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/jaxrs/rsvp/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command builds, assembles, and deploys <code>rsvp</code> to GlassFish Server.</p>
</div>
</li>
<li>
<p>Open a web browser window to the following URL:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/rsvp/</span></code></pre>
</div>
</div>
</li>
<li>
<p>In the web browser window, click the Event status link for the Duke&#8217;s Birthday event.</p>
<div class="paragraph">
<p>You&#8217;ll see the current invitees and their responses.</p>
</div>
</li>
<li>
<p>Click the current response of one of the invitees in the Status column of the table, select a new response, and click Update your status.</p>
<div class="paragraph">
<p>The invitee&#8217;s new status should now be displayed in the table of invitees and their response statuses.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GIRCI"></a><a id="real-world-examples"></a></p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="real-world-examples"><a class="anchor" href="#real-world-examples"></a>Real-World Examples</h4>
<div class="paragraph">
<p>Most blog sites use RESTful web services. These sites involve
downloading XML files, in RSS or Atom format, that contain lists of
links to other resources. Other websites and web applications that use
REST-like developer interfaces to data include Twitter and Amazon S3
(Simple Storage Service). With Amazon S3, buckets and objects can be
created, listed, and retrieved using either a REST-style HTTP interface
or a SOAP interface. The examples that ship with Jersey include a
storage service example with a RESTful interface.</p>
</div>
<div class="paragraph">
<p><a id="GILIZ"></a><a id="further-information-about-jax-rs"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="further-information-about-jakarta-rest"><a class="anchor" href="#further-information-about-jakarta-rest"></a>Further Information about Jakarta REST</h3>
<div class="paragraph">
<p>For more information about RESTful web services and Jakarta REST, see</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"Fielding Dissertation: Chapter 5: Representational State Transfer
(REST)":</p>
<div class="paragraph">
<p><code><a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.html" class="bare">http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.html</a></code></p>
</div>
</li>
<li>
<p>RESTful Web Services, by Leonard Richardson and Sam Ruby, available
from O&#8217;Reilly Media at
<code><a href="http://shop.oreilly.com/product/9780596529260.do" class="bare">http://shop.oreilly.com/product/9780596529260.do</a></code></p>
</li>
<li>
<p>Jakarta RESTful Web Services 2.1 specification:</p>
<div class="paragraph">
<p><code><a href="https://jakarta.ee/specifications/restful-ws/2.1/" class="bare">https://jakarta.ee/specifications/restful-ws/2.1/</a></code></p>
</div>
</li>
<li>
<p>Jersey project:</p>
<div class="paragraph">
<p><code><a href="https://eclipse-ee4j.github.io/jersey/" class="bare">https://eclipse-ee4j.github.io/jersey/</a></code></p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="accessing-rest-resources-with-the-jakarta-rest-client-api"><a class="anchor" href="#accessing-rest-resources-with-the-jakarta-rest-client-api"></a>Accessing REST Resources with the Jakarta REST Client API</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="BABEIGIH"></a><a id="accessing-rest-resources-with-the-jax-rs-client-api"></a></p>
</div>
<div class="paragraph">
<p>This chapter describes the Jakarta REST Client API and includes examples of
how to access REST resources using the Java programming language.</p>
</div>
<div class="paragraph">
<p>Jakarta REST provides a client API for accessing REST resources from other
Java applications.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="paragraph">
<p><a id="BABBIHEJ"></a><a id="overview-of-the-client-api"></a></p>
</div>
<div class="sect2">
<h3 id="overview-of-the-client-api"><a class="anchor" href="#overview-of-the-client-api"></a>Overview of the Client API</h3>
<div class="paragraph">
<p>The Jakarta REST Client API provides a high-level API for accessing any REST
resources, not just Jakarta REST services. The Client API is defined in the
<code>javax.ws.rs.client</code> package.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#CHDFCABB">Creating a Basic Client Request Using the Client API</a></p>
</li>
<li>
<p><a href="#CHDHBFHJ">Obtaining the Client Instance</a></p>
</li>
<li>
<p><a href="#CHDDCICC">Setting the Client Target</a></p>
</li>
<li>
<p><a href="#CHDDBFCG">Setting Path Parameters in Targets</a></p>
</li>
<li>
<p><a href="#CHDEFCDB">Invoking the Request</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="CHDFCABB"></a><a id="creating-a-basic-client-request-using-the-client-api"></a></p>
</div>
<div class="sect3">
<h4 id="creating-a-basic-client-request-using-the-client-api"><a class="anchor" href="#creating-a-basic-client-request-using-the-client-api"></a>Creating a Basic Client Request Using the Client API</h4>
<div class="paragraph">
<p>The following steps are needed to access a REST resource using the
Client API.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Obtain an instance of the <code>javax.ws.rs.client.Client</code> interface.</p>
</li>
<li>
<p>Configure the <code>Client</code> instance with a target.</p>
</li>
<li>
<p>Create a request based on the target.</p>
</li>
<li>
<p>Invoke the request.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The Client API is designed to be fluent, with method invocations chained
together to configure and submit a request to a REST resource in only a
few lines of code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Client client = ClientBuilder.newClient();
<span class="predefined-type">String</span> name = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com/webapi/hello</span><span class="delimiter">&quot;</span></span>)
        .request(MediaType.TEXT_PLAIN)
        .get(<span class="predefined-type">String</span>.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the client instance is first created by calling the
<code>javax.ws.rs.client.ClientBuilder.newClient</code> method. Then, the request
is configured and invoked by chaining method calls together in one line
of code. The <code>Client.target</code> method sets the target based on a URI. The
<code>javax.ws.rs.client.WebTarget.request</code> method sets the media type for
the returned entity. The <code>javax.ws.rs.client.Invocation.Builder.get</code>
method invokes the service using an HTTP <code>GET</code> request, setting the type
of the returned entity to <code>String</code>.</p>
</div>
<div class="paragraph">
<p><a id="CHDHBFHJ"></a><a id="obtaining-the-client-instance"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="obtaining-the-client-instance"><a class="anchor" href="#obtaining-the-client-instance"></a>Obtaining the Client Instance</h4>
<div class="paragraph">
<p>The <code>Client</code> interface defines the actions and infrastructure a REST
client requires to consume a RESTful web service. Instances of <code>Client</code>
are obtained by calling the <code>ClientBuilder.newClient</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Client client = ClientBuilder.newClient();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the <code>close</code> method to close <code>Client</code> instances after all the
invocations for the target resource have been performed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Client client = ClientBuilder.newClient();
...
client.close();</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Client</code> instances are heavyweight objects. For performance reasons,
limit the number of <code>Client</code> instances in your application, as the
initialization and destruction of these instances may be expensive in
your runtime environment.</p>
</div>
<div class="paragraph">
<p><a id="CHDDCICC"></a><a id="setting-the-client-target"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="setting-the-client-target"><a class="anchor" href="#setting-the-client-target"></a>Setting the Client Target</h4>
<div class="paragraph">
<p>The target of a client, the REST resource at a particular URI, is
represented by an instance of the <code>javax.ws.rs.client.WebTarget</code>
interface. You obtain a <code>WebTarget</code> instance by calling the
<code>Client.target</code> method and passing in the URI of the target REST
resource.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Client client = ClientBuilder.newClient();
WebTarget myResource = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com/webapi</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>For complex REST resources, it may be beneficial to create several
instances of <code>WebTarget</code>. In the following example, a base target is
used to construct several other targets that represent different
services provided by a REST resource.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Client client = ClientBuilder.newClient();
WebTarget base = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com/webapi</span><span class="delimiter">&quot;</span></span>);
<span class="comment">// WebTarget at http://example.com/webapi/read</span>
WebTarget read = base.path(<span class="string"><span class="delimiter">&quot;</span><span class="content">read</span><span class="delimiter">&quot;</span></span>);
<span class="comment">// WebTarget at http://example.com/webapi/write</span>
WebTarget write = base.path(<span class="string"><span class="delimiter">&quot;</span><span class="content">write</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>WebTarget.path</code> method creates a new <code>WebTarget</code> instance by
appending the current target URI with the path that was passed in.</p>
</div>
<div class="paragraph">
<p><a id="CHDDBFCG"></a><a id="setting-path-parameters-in-targets"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="setting-path-parameters-in-targets"><a class="anchor" href="#setting-path-parameters-in-targets"></a>Setting Path Parameters in Targets</h4>
<div class="paragraph">
<p>Path parameters in client requests can be specified as URI template
parameters, similar to the template parameters used when defining a
resource URI in a Jakarta REST service. Template parameters are specified by
surrounding the template variable with braces (<code>{}</code>). Call the
<code>resolveTemplate</code> method to substitute the <code>{username}</code>, and then call
the <code>queryParam</code> method to add another variable to pass.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">WebTarget myResource = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com/webapi/read</span><span class="delimiter">&quot;</span></span>)
        .path(<span class="string"><span class="delimiter">&quot;</span><span class="content">{userName}</span><span class="delimiter">&quot;</span></span>)
        .resolveTemplate(<span class="string"><span class="delimiter">&quot;</span><span class="content">userName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">janedoe</span><span class="delimiter">&quot;</span></span>)        .queryParam(<span class="string"><span class="delimiter">&quot;</span><span class="content">chapter</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>);<span class="comment">// http://example.com/webapi/read/janedoe?chapter=1Response response = myResource.request(...)        .get();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="CHDEFCDB"></a><a id="invoking-the-request"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="invoking-the-request"><a class="anchor" href="#invoking-the-request"></a>Invoking the Request</h4>
<div class="paragraph">
<p>After setting and applying any configuration options to the target, call
one of the <code>WebTarget.request</code> methods to begin creating the request.
This is usually accomplished by passing to <code>WebTarget.request</code> the
accepted media response type for the request either as a string of the
MIME type or using one of the constants in <code>javax.ws.rs.core.MediaType</code>.
The <code>WebTarget.request</code> method returns an instance of
<code>javax.ws.rs.client.Invocation.Builder</code>, a helper object that provides
methods for preparing the client request.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Client client = ClientBuilder.newClient();
WebTarget myResource = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com/webapi/read</span><span class="delimiter">&quot;</span></span>);
Invocation.Builder builder = myResource.request(MediaType.TEXT_PLAIN);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using a <code>MediaType</code> constant is equivalent to using the string defining
the MIME type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Invocation.Builder builder = myResource.request(<span class="string"><span class="delimiter">&quot;</span><span class="content">text/plain</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>After setting the media type, invoke the request by calling one of the
methods of the <code>Invocation.Builder</code> instance that corresponds to the
type of HTTP request the target REST resource expects. These methods
are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>get()</code></p>
</li>
<li>
<p><code>post()</code></p>
</li>
<li>
<p><code>delete()</code></p>
</li>
<li>
<p><code>put()</code></p>
</li>
<li>
<p><code>head()</code></p>
</li>
<li>
<p><code>options()</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, if the target REST resource is for an HTTP GET request,
call the <code>Invocation.Builder.get</code> method. The return type should
correspond to the entity returned by the target REST resource.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Client client = ClientBuilder.newClient();
WebTarget myResource = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com/webapi/read</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">String</span> response = myResource.request(MediaType.TEXT_PLAIN)
        .get(<span class="predefined-type">String</span>.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the target REST resource is expecting an HTTP POST request, call the
<code>Invocation.Builder.post</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Client client = ClientBuilder.newClient();
StoreOrder order = <span class="keyword">new</span> StoreOrder(...);
WebTarget myResource = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com/webapi/write</span><span class="delimiter">&quot;</span></span>);
TrackingNumber trackingNumber = myResource.request(MediaType.APPLICATION_XML)
                                   .post(<span class="predefined-type">Entity</span>.xml(order), TrackingNumber.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, the return type is a custom class and is
retrieved by setting the type in the
<code>Invocation.Builder.post(Entity&lt;?&gt; entity, Class&lt;T&gt; responseType)</code>
method as a parameter.</p>
</div>
<div class="paragraph">
<p>If the return type is a collection, use
<code>javax.ws.rs.core.GenericType&lt;T&gt;</code> as the response type parameter, where
<code>T</code> is the collection type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">List</span>&lt;StoreOrder&gt; orders = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com/webapi/read</span><span class="delimiter">&quot;</span></span>)
        .path(<span class="string"><span class="delimiter">&quot;</span><span class="content">allOrders</span><span class="delimiter">&quot;</span></span>)
        .request(MediaType.APPLICATION_XML)
        .get(<span class="keyword">new</span> GenericType&lt;<span class="predefined-type">List</span>&lt;StoreOrder&gt;&gt;() {});</code></pre>
</div>
</div>
<div class="paragraph">
<p>This preceding example shows how methods are chained together in the
Client API to simplify how requests are configured and invoked.</p>
</div>
<div class="paragraph">
<p><a id="BABJCIJC"></a><a id="using-the-client-api-in-the-jax-rs-example-applications"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-the-client-api-in-the-jakarta-rest-example-applications"><a class="anchor" href="#using-the-client-api-in-the-jakarta-rest-example-applications"></a>Using the Client API in the Jakarta REST Example Applications</h3>
<div class="paragraph">
<p>The <code>rsvp</code> and <code>customer</code> examples use the Client API to call Jakarta REST
services. This section describes how each example application uses the
Client API.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#BABEDFIG">The Client API in the rsvp Example Application</a></p>
</li>
<li>
<p><a href="#CHDGBGID">The Client API in the customer Example Application</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="BABEDFIG"></a><a id="the-client-api-in-the-rsvp-example-application"></a></p>
</div>
<div class="sect3">
<h4 id="the-client-api-in-the-rsvp-example-application"><a class="anchor" href="#the-client-api-in-the-rsvp-example-application"></a>The Client API in the rsvp Example Application</h4>
<div class="paragraph">
<p>The <code>rsvp</code> application allows users to respond to event invitations
using Jakarta REST resources, as explained in <a href="#the-rsvp-example-application">The rsvp Example Application</a>. The web application uses the Client
API in CDI backing beans to interact with the service resources, and the
Facelets web interface displays the results.</p>
</div>
<div class="paragraph">
<p>The <code>StatusManager</code> CDI backing bean retrieves all the current events in
the system. The client instance used in the backing bean is obtained in
the constructor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> StatusManager() {
    <span class="local-variable">this</span>.client = ClientBuilder.newClient();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>StatusManager.getEvents</code> method returns a collection of all the
current events in the system by calling the resource at
<code><a href="http://localhost:8080/rsvp/webapi/status/all" class="bare">http://localhost:8080/rsvp/webapi/status/all</a></code>, which returns an XML
document with entries for each event. The Client API automatically
unmarshals the XML and creates a <code>List&lt;Event&gt;</code> instance.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">Event</span>&gt; getEvents() {
        <span class="predefined-type">List</span>&lt;<span class="predefined-type">Event</span>&gt; returnedEvents = <span class="predefined-constant">null</span>;
        <span class="keyword">try</span> {
            returnedEvents = client.target(baseUri)
                    .path(<span class="string"><span class="delimiter">&quot;</span><span class="content">all</span><span class="delimiter">&quot;</span></span>)
                    .request(MediaType.APPLICATION_XML)
                    .get(<span class="keyword">new</span> GenericType&lt;<span class="predefined-type">List</span>&lt;<span class="predefined-type">Event</span>&gt;&gt;() {
            });
            <span class="keyword">if</span> (returnedEvents == <span class="predefined-constant">null</span>) {
                logger.log(<span class="predefined-type">Level</span>.SEVERE, <span class="string"><span class="delimiter">&quot;</span><span class="content">Returned events null.</span><span class="delimiter">&quot;</span></span>);
            } <span class="keyword">else</span> {
                logger.log(<span class="predefined-type">Level</span>.INFO, <span class="string"><span class="delimiter">&quot;</span><span class="content">Events have been returned.</span><span class="delimiter">&quot;</span></span>);
            }
        } <span class="keyword">catch</span> (WebApplicationException ex) {
            <span class="keyword">throw</span> <span class="keyword">new</span> WebApplicationException(Response.Status.NOT_FOUND);
        }
        ...
        return returnedEvents;
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>StatusManager.changeStatus</code> method is used to update the attendee&#8217;s
response. It creates an HTTP <code>POST</code> request to the service with the new
response. The body of the request is an XML document.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="directive">public</span> <span class="predefined-type">String</span> changeStatus(ResponseEnum userResponse,
            Person person, <span class="predefined-type">Event</span> event) {
        <span class="predefined-type">String</span> navigation;
        <span class="keyword">try</span> {
            logger.log(<span class="predefined-type">Level</span>.INFO,
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">changing status to {0} for {1} {2} for event ID {3}.</span><span class="delimiter">&quot;</span></span>,
                    <span class="keyword">new</span> <span class="predefined-type">Object</span><span class="type">[]</span>{userResponse,
                        person.getFirstName(),
                        person.getLastName(),
                        event.getId().toString()});
             client.target(baseUri)
                     .path(event.getId().toString())
                     .path(person.getId().toString())
                     .request(MediaType.APPLICATION_XML)
                     .post(<span class="predefined-type">Entity</span>.xml(userResponse.getLabel()));
            navigation = <span class="string"><span class="delimiter">&quot;</span><span class="content">changedStatus</span><span class="delimiter">&quot;</span></span>;
        } <span class="keyword">catch</span> (ResponseProcessingException ex) {
            logger.log(<span class="predefined-type">Level</span>.WARNING, <span class="string"><span class="delimiter">&quot;</span><span class="content">couldn''t change status for {0} {1}</span><span class="delimiter">&quot;</span></span>,
                    <span class="keyword">new</span> <span class="predefined-type">Object</span><span class="type">[]</span>{person.getFirstName(),
                        person.getLastName()});
            logger.log(<span class="predefined-type">Level</span>.WARNING, ex.getMessage());
            navigation = <span class="string"><span class="delimiter">&quot;</span><span class="content">error</span><span class="delimiter">&quot;</span></span>;
        }
        <span class="keyword">return</span> navigation;
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="CHDGBGID"></a><a id="the-client-api-in-the-customer-example-application"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="the-client-api-in-the-customer-example-application"><a class="anchor" href="#the-client-api-in-the-customer-example-application"></a>The Client API in the customer Example Application</h4>
<div class="paragraph">
<p>The <code>customer</code> example application stores customer data in a database
and exposes the resource as XML, as explained in
<a href="#GKOIB">The customer Example
Application</a>. The service resource exposes methods that create
customers and retrieve all the customers. A Facelets web application
acts as a client for the service resource, with a form for creating
customers and displaying the list of customers in a table.</p>
</div>
<div class="paragraph">
<p>The <code>CustomerBean</code> stateless session bean uses the Jakarta REST Client API to
interface with the service resource. The <code>CustomerBean.createCustomer</code>
method takes the <code>Customer</code> entity instance created by the Facelets form
and makes a POST call to the service URI.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">String</span> createCustomer(Customer customer) {
    <span class="keyword">if</span> (customer == <span class="predefined-constant">null</span>) {
        logger.log(<span class="predefined-type">Level</span>.WARNING, <span class="string"><span class="delimiter">&quot;</span><span class="content">customer is null.</span><span class="delimiter">&quot;</span></span>);
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">customerError</span><span class="delimiter">&quot;</span></span>;
    }
    <span class="predefined-type">String</span> navigation;
    Response response =
            client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://localhost:8080/customer/webapi/Customer</span><span class="delimiter">&quot;</span></span>)
            .request(MediaType.APPLICATION_XML)
            .post(<span class="predefined-type">Entity</span>.entity(customer, MediaType.APPLICATION_XML),
                    Response.class);
    <span class="keyword">if</span> (response.getStatus() == Status.CREATED.getStatusCode()) {
        navigation = <span class="string"><span class="delimiter">&quot;</span><span class="content">customerCreated</span><span class="delimiter">&quot;</span></span>;
    } <span class="keyword">else</span> {
        logger.log(<span class="predefined-type">Level</span>.WARNING,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">couldn''t create customer with id {0}. Status returned was {1}</span><span class="delimiter">&quot;</span></span>,
                <span class="keyword">new</span> <span class="predefined-type">Object</span><span class="type">[]</span>{customer.getId(), response.getStatus()});
        FacesContext context = FacesContext.getCurrentInstance();
        context.addMessage(<span class="predefined-constant">null</span>,
                <span class="keyword">new</span> FacesMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">Could not create customer.</span><span class="delimiter">&quot;</span></span>));
        navigation = <span class="string"><span class="delimiter">&quot;</span><span class="content">customerError</span><span class="delimiter">&quot;</span></span>;
    }
    <span class="keyword">return</span> navigation;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The XML request entity is created by calling the
<code>Invocation.Builder.post</code> method, passing in a new <code>Entity</code> instance
from the <code>Customer</code> instance, and specifying the media type as
<code>MediaType.APPLICATION_XML</code>.</p>
</div>
<div class="paragraph">
<p>The <code>CustomerBean.retrieveCustomer</code> method retrieves a <code>Customer</code> entity
instance from the service by appending the customer&#8217;s ID to the service
URI.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">String</span> retrieveCustomer(<span class="predefined-type">String</span> id) {
    <span class="predefined-type">String</span> navigation;
    Customer customer =
            client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://localhost:8080/customer/webapi/Customer</span><span class="delimiter">&quot;</span></span>)
            .path(id)
            .request(MediaType.APPLICATION_XML)
            .get(Customer.class);
    <span class="keyword">if</span> (customer == <span class="predefined-constant">null</span>) {
        navigation = <span class="string"><span class="delimiter">&quot;</span><span class="content">customerError</span><span class="delimiter">&quot;</span></span>;
    } <span class="keyword">else</span> {
        navigation = <span class="string"><span class="delimiter">&quot;</span><span class="content">customerRetrieved</span><span class="delimiter">&quot;</span></span>;
    }
    <span class="keyword">return</span> navigation;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>CustomerBean.retrieveAllCustomers</code> method retrieves a collection of
customers as a <code>List&lt;Customer&gt;</code> instance. This list is then displayed as
a table in the Facelets web application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">List</span>&lt;Customer&gt; retrieveAllCustomers() {
    <span class="predefined-type">List</span>&lt;Customer&gt; customers =
            client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://localhost:8080/customer/webapi/Customer</span><span class="delimiter">&quot;</span></span>)
            .path(<span class="string"><span class="delimiter">&quot;</span><span class="content">all</span><span class="delimiter">&quot;</span></span>)
            .request(MediaType.APPLICATION_XML)
            .get(<span class="keyword">new</span> GenericType&lt;<span class="predefined-type">List</span>&lt;Customer&gt;&gt;() {
            });
    <span class="keyword">return</span> customers;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Because the response type is a collection, the <code>Invocation.Builder.get</code>
method is called by passing in a new instance of
<code>GenericType&lt;List&lt;Customer&gt;&gt;</code>.</p>
</div>
<div class="paragraph">
<p><a id="BABCDDGH"></a><a id="advanced-features-of-the-client-api"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="advanced-features-of-the-client-api"><a class="anchor" href="#advanced-features-of-the-client-api"></a>Advanced Features of the Client API</h3>
<div class="paragraph">
<p>This section describes some of the advanced features of the Jakarta REST
Client API.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#CHDGBBCC">Configuring the Client Request</a></p>
</li>
<li>
<p><a href="#CHDEBIGG">Asynchronous Invocations in the Client API</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="CHDGBBCC"></a><a id="configuring-the-client-request"></a></p>
</div>
<div class="sect3">
<h4 id="configuring-the-client-request"><a class="anchor" href="#configuring-the-client-request"></a>Configuring the Client Request</h4>
<div class="paragraph">
<p>Additional configuration options may be added to the client request
after it is created but before it is invoked.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#CHDHAFBG">Setting Message Headers in the Client Request</a></p>
</li>
<li>
<p><a href="#CHDHFFDJ">Setting Cookies in the Client Request</a></p>
</li>
<li>
<p><a href="#CHDJEFID">Adding Filters to the Client</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="CHDHAFBG"></a><a id="setting-message-headers-in-the-client-request"></a></p>
</div>
<div class="sect4">
<h5 id="setting-message-headers-in-the-client-request"><a class="anchor" href="#setting-message-headers-in-the-client-request"></a>Setting Message Headers in the Client Request</h5>
<div class="paragraph">
<p>You can set HTTP headers on the request by calling the
<code>Invocation.Builder.header</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Client client = ClientBuilder.newClient();
WebTarget myResource = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com/webapi/read</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">String</span> response = myResource.request(MediaType.TEXT_PLAIN)
        .header(<span class="string"><span class="delimiter">&quot;</span><span class="content">myHeader</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">The header value</span><span class="delimiter">&quot;</span></span>)
        .get(<span class="predefined-type">String</span>.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you need to set multiple headers on the request, call the
<code>Invocation.Builder.headers</code> method and pass in a
<code>javax.ws.rs.core.MultivaluedMap</code> instance with the name-value pairs of
the HTTP headers. Calling the <code>headers</code> method replaces all the existing
headers with the headers supplied in the <code>MultivaluedMap</code> instance.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Client client = ClientBuilder.newClient();
WebTarget myResource = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com/webapi/read</span><span class="delimiter">&quot;</span></span>);
MultivaluedMap&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; myHeaders =
    <span class="keyword">new</span> MultivaluedMap&lt;&gt;(<span class="string"><span class="delimiter">&quot;</span><span class="content">myHeader</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">The header value</span><span class="delimiter">&quot;</span></span>);
myHeaders.add(...);
<span class="predefined-type">String</span> response = myResource.request(MediaType.TEXT_PLAIN)
        .headers(myHeaders)
        .get(<span class="predefined-type">String</span>.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>MultivaluedMap</code> interface allows you to specify multiple values for
a given key.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">MultivaluedMap&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; myHeaders =
    <span class="keyword">new</span> MultivaluedMap&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt;();
<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; values = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;();
values.add(...)
myHeaders.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">myHeader</span><span class="delimiter">&quot;</span></span>, values</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="CHDHFFDJ"></a><a id="setting-cookies-in-the-client-request"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="setting-cookies-in-the-client-request"><a class="anchor" href="#setting-cookies-in-the-client-request"></a>Setting Cookies in the Client Request</h5>
<div class="paragraph">
<p>You can add HTTP cookies to the request by calling the
<code>Invocation.Builder.cookie</code> method, which takes a name-value pair as
parameters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Client client = ClientBuilder.newClient();
WebTarget myResource = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com/webapi/read</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">String</span> response = myResource.request(MediaType.TEXT_PLAIN)
        .cookie(<span class="string"><span class="delimiter">&quot;</span><span class="content">myCookie</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">The cookie value</span><span class="delimiter">&quot;</span></span>)
        .get(<span class="predefined-type">String</span>.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>javax.ws.rs.core.Cookie</code> class encapsulates the attributes of an
HTTP cookie, including the name, value, path, domain, and RFC
specification version of the cookie. In the following example, the
<code>Cookie</code> object is configured with a name-value pair, a path, and a
domain.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Client client = ClientBuilder.newClient();
WebTarget myResource = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com/webapi/read</span><span class="delimiter">&quot;</span></span>);
Cookie myCookie = <span class="keyword">new</span> Cookie(<span class="string"><span class="delimiter">&quot;</span><span class="content">myCookie</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">The cookie value</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">/webapi/read</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">example.com</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">String</span> response = myResource.request(MediaType.TEXT_PLAIN)
        .cookie(myCookie)
        .get(<span class="predefined-type">String</span>.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="CHDJEFID"></a><a id="adding-filters-to-the-client"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="adding-filters-to-the-client"><a class="anchor" href="#adding-filters-to-the-client"></a>Adding Filters to the Client</h5>
<div class="paragraph">
<p>You can register custom filters with the client request or the response
received from the target resource. To register filter classes when the
<code>Client</code> instance is created, call the <code>Client.register</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Client client = ClientBuilder.newClient().register(MyLoggingFilter.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, all invocations that use this <code>Client</code>
instance have the <code>MyLoggingFilter</code> filter registered with them.</p>
</div>
<div class="paragraph">
<p>You can also register the filter classes on the target by calling
<code>WebTarget.register</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Client client = ClientBuilder.newClient().register(MyLoggingFilter.class);
WebTarget target = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com/webapi/secure</span><span class="delimiter">&quot;</span></span>)
        .register(MyAuthenticationFilter.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, both the <code>MyLoggingFilter</code> and
<code>MyAuthenticationFilter</code> filters are attached to the invocation.</p>
</div>
<div class="paragraph">
<p>Request and response filter classes implement the
<code>javax.ws.rs.client.ClientRequestFilter</code> and
<code>javax.ws.rs.client.ClientResponseFilter</code> interfaces, respectively. Both
of these interfaces define a single method, <code>filter</code>. All filters must
be annotated with <code>javax.ws.rs.ext.Provider</code>.</p>
</div>
<div class="paragraph">
<p>The following class is a logging filter for both client requests and
client responses.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Provider</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">MyLoggingFilter</span> <span class="directive">implements</span> ClientRequestFilter,
        ClientResponseFilter {
    <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">Logger</span> logger = <span class="predefined-type">Logger</span>.getLogger(...);

    <span class="comment">// implement the ClientRequestFilter.filter method</span>
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> filter(ClientRequestContext requestContext)
            <span class="directive">throws</span> <span class="exception">IOException</span> {
        logger.log(...);
        ...
    }

    <span class="comment">// implement the ClientResponseFilter.filter method</span>
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> filter(ClientRequestContext requestContext,
           ClientResponseContext responseContext) <span class="directive">throws</span> <span class="exception">IOException</span> {
        logger.log(...);
        ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the invocation must be stopped while the filter is active, call the
context object&#8217;s <code>abortWith</code> method, and pass in a
<code>javax.ws.rs.core.Response</code> instance from within the filter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> filter(ClientRequestContext requestContext) <span class="directive">throws</span> <span class="exception">IOException</span> {
    ...
    Response response = <span class="keyword">new</span> Response();
    response.status(<span class="integer">500</span>);
    requestContext.abortWith(response);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="CHDEBIGG"></a><a id="asynchronous-invocations-in-the-client-api"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="asynchronous-invocations-in-the-client-api"><a class="anchor" href="#asynchronous-invocations-in-the-client-api"></a>Asynchronous Invocations in the Client API</h4>
<div class="paragraph">
<p>In networked applications, network issues can affect the perceived
performance of the application, particularly in long-running or
complicated network calls. Asynchronous processing helps prevent
blocking and makes better use of an application&#8217;s resources.</p>
</div>
<div class="paragraph">
<p>In the Jakarta REST Client API, the <code>Invocation.Builder.async</code> method is used
when constructing a client request to indicate that the call to the
service should be performed asynchronously. An asynchronous invocation
returns control to the caller immediately, with a return type of
<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true"><code>java.util.concurrent.Future&lt;T&gt;</code></a>
(part of the Java SE concurrency API) and with the type set to the
return type of the service call. <code>Future&lt;T&gt;</code> objects have methods to
check if the asynchronous call has been completed, to retrieve the final
result, to cancel the invocation, and to check if the invocation has
been cancelled.</p>
</div>
<div class="paragraph">
<p>The following example shows how to invoke an asynchronous request on a
resource.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Client client = ClientBuilder.newClient();
WebTarget myResource = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com/webapi/read</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">Future</span>&lt;<span class="predefined-type">String</span>&gt; response = myResource.request(MediaType.TEXT_PLAIN)
        .async()
        .get(<span class="predefined-type">String</span>.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="sthref140"></a><a id="using-custom-callbacks-in-asynchronous-invocations"></a></p>
</div>
<div class="sect4">
<h5 id="using-custom-callbacks-in-asynchronous-invocations"><a class="anchor" href="#using-custom-callbacks-in-asynchronous-invocations"></a>Using Custom Callbacks in Asynchronous Invocations</h5>
<div class="paragraph">
<p>The <code>InvocationCallback</code> interface defines two methods, <code>completed</code> and
<code>failed</code>, that are called when an asynchronous invocation either
completes successfully or fails, respectively. You may register an
<code>InvocationCallback</code> instance on your request by creating a new instance
when specifying the request method.</p>
</div>
<div class="paragraph">
<p>The following example shows how to register a callback object on an
asynchronous invocation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Client client = ClientBuilder.newClient();
WebTarget myResource = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com/webapi/read</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">Future</span>&lt;Customer&gt; fCustomer = myResource.request(MediaType.TEXT_PLAIN)
        .async()
        .get(<span class="keyword">new</span> InvocationCallback&lt;Customer&gt;() {
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> completed(Customer customer) {
            <span class="comment">// Do something with the customer object</span>
            }
            <span class="annotation">@Override</span>
             <span class="directive">public</span> <span class="type">void</span> failed(<span class="predefined-type">Throwable</span> throwable) {
            <span class="comment">// handle the error</span>
            }
    });</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="sthref141"></a><a id="using-reactive-approach-in-asynchronous-invocations"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="using-reactive-approach-in-asynchronous-invocations"><a class="anchor" href="#using-reactive-approach-in-asynchronous-invocations"></a>Using Reactive Approach in Asynchronous Invocations</h5>
<div class="paragraph">
<p>Using custom callbacks in asynchronous invocations is easy in simple
cases and when there are many independent calls to make. In nested
calls, using custom callbacks becomes very difficult to implement,
debug, and maintain.</p>
</div>
<div class="paragraph">
<p>Jakarta REST defines a new type of invoker called as <code>RxInvoker</code> and a default
implementation of this type is <code>CompletionStageRxInvoker</code>. The new <code>rx</code>
method is used as in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CompletionStage&lt;<span class="predefined-type">String</span>&gt; csf = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">forecast/{destination}</span><span class="delimiter">&quot;</span></span>) resolveTemplate(<span class="string"><span class="delimiter">&quot;</span><span class="content">destination</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">mars</span><span class="delimiter">&quot;</span></span>).request().rx().get(<span class="predefined-type">String</span>.class);
csf.thenAccept(<span class="predefined-type">System</span>.out::println);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example, an asynchronous processing of the interface
<code>CompletionStage&lt;String&gt;</code> is created and waits till it is completed and
the result is displayed. The <code>CompletionStage</code> that is returned can then be used only to retrieve the result as shown in the above example or can be combined with other completion stages to ease and improve the processing of asynchronous tasks.</p>
</div>
<div class="paragraph">
<p><a id="sthref142"></a><a id="using-server-sent-events"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="using-server-sent-events"><a class="anchor" href="#using-server-sent-events"></a>Using Server-Sent Events</h4>
<div class="paragraph">
<p>Server-sent Events (SSE) technology is used to asynchronously push
notifications to the client over standard HTTP or HTTPS protocol.
Clients can subscribe to event notifications that originate on a server.
Server generates events and sends these events back to the clients
that are subscribed to receive the notifications. The one-way
communication channel connection is established by the client. Once the
connection is established, the server sends events to the client
whenever new data is available.</p>
</div>
<div class="paragraph">
<p>The communication channel established by the client lasts till the
client closes the connection and it is also re-used by the server to
send multiple events from the server.</p>
</div>
<div class="paragraph">
<p><a id="sthref143"></a><a id="overview-of-the-sse-api"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="overview-of-the-sse-api"><a class="anchor" href="#overview-of-the-sse-api"></a>Overview of the SSE API</h4>
<div class="paragraph">
<p>The SSE API is defined in the <code>javax.ws.rs.sse</code> package that includes
the interfaces <code>SseEventSink</code>, <code>SseEvent</code>, <code>Sse</code>, and <code>SseEventSource</code>.
To accept connections and send events to one or more clients, inject an
<code>SseEventSink</code> in the resource method that produces the media type
<code>text/event-stream</code>.</p>
</div>
<div class="paragraph">
<p>The following example shows how to accept the SSE connections and to
send events to the clients:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@GET</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">eventStream</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Produces</span>(MediaType.SERVER_SENT_EVENTS)
<span class="directive">public</span> <span class="type">void</span> eventStream(<span class="annotation">@Context</span> SseEventSink eventSink,
<span class="annotation">@Context</span> Sse sse) {
executor.execute(() -&gt; {
<span class="keyword">try</span> (SseEventSink sink = eventSink) {
eventSink.send(sse.newEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">event1</span><span class="delimiter">&quot;</span></span>));
eventSink.send(sse.newEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">event2</span><span class="delimiter">&quot;</span></span>));
eventSink.send(sse.newEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">event3</span><span class="delimiter">&quot;</span></span>));
}
});
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>SseEventsink</code> is injected into the resource method and the
underlying client connection is kept open and used to send events. The
connection persists until the client disconnects from the server. The
method <code>send</code> returns an instance of <code>CompletionStage&lt;T&gt;</code> which
indicates the action of asynchronously sending a message to a client is
enabled.</p>
</div>
<div class="paragraph">
<p>The events that are streamed to the clients can be defined with the
details such as <code>event</code>, <code>data</code>, <code>id</code>, <code>retry</code>, and <code>comment</code>.</p>
</div>
<div class="paragraph">
<p><a id="sthref144"></a><a id="broadcasting-using-sse"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="broadcasting-using-sse"><a class="anchor" href="#broadcasting-using-sse"></a>Broadcasting Using SSE</h4>
<div class="paragraph">
<p>Broadcasting is the action of sending events to multiple clients
simultaneously. Jakarta REST SSE API provides <code>SseBroadcaster</code> to register all
<code>SseEventSink</code> instances and send events to all registered event
outputs. The life-cycle and scope of an <code>SseBroadcaster</code> is fully
controlled by applications and not the Jakarta REST runtime. The following
example show the use of broadcasters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Singleton</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">SseResource</span> {
    <span class="annotation">@Context</span>
    <span class="directive">private</span> Sse sse;

    <span class="directive">private</span> <span class="directive">volatile</span> SseBroadcaster sseBroadcaster;

    <span class="annotation">@PostConstruct</span>
    <span class="directive">public</span> init() {
        <span class="local-variable">this</span>.sseBroadcaster = sse.newBroadcaster();
    }

    <span class="annotation">@GET</span>
    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">register</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@Produces</span>(MediaType.SERVER_SENT_EVENTS)
        <span class="directive">public</span> <span class="type">void</span> register(<span class="annotation">@Context</span> SseEventSink eventSink) {
        eventSink.send(sse.newEvent(<span class="string"><span class="delimiter">&quot;</span><span class="content">welcome!</span><span class="delimiter">&quot;</span></span>));
        sseBroadcaster.register(eventSink);
    }

    <span class="annotation">@POST</span>
    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">broadcast</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@Consumes</span>(MediaType.MULTIPART_FORM_DATA)
    <span class="directive">public</span> <span class="type">void</span> broadcast(<span class="annotation">@FormParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">event</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> event) {
        sseBroadcaster.broadcast(sse.newEvent(event));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@Singleton</code> annotation is defined for the resource class restricting
the creation of multiple instances of the class. The <code>register</code> method
on a broadcaster is used to add a new <code>SseEventSink</code>; the <code>broadcast</code>
method is used to send an SSE event to all registered clients.</p>
</div>
<div class="paragraph">
<p><a id="sthref145"></a><a id="listening-and-receiving-events"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="listening-and-receiving-events"><a class="anchor" href="#listening-and-receiving-events"></a>Listening and Receiving Events</h4>
<div class="paragraph">
<p>Jakarta REST SSE provides the <code>SseEventSource</code> interface for the client to
subscribe to notifications. The client can get asynchronously notified
about incoming events by invoking one of the <code>subscribe</code> methods in
<code>javax.ws.rs.sse.SseEventSource</code>.</p>
</div>
<div class="paragraph">
<p>The following example shows how to use the <code>SseEventSource</code> API to open
an SSE connection and read some of the messages for a period:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">WebTarget target = client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://...</span><span class="delimiter">&quot;</span></span>);
<span class="keyword">try</span> (SseEventSource source = SseEventSource.target(target).build()) {
    source.register(<span class="predefined-type">System</span>.out::println);
    source.open();
    <span class="predefined-type">Thread</span>.sleep(<span class="integer">500</span>); <span class="comment">// Consume events for just 500 ms</span>
    source.close();
} <span class="keyword">catch</span> (<span class="exception">InterruptedException</span> e) {
    <span class="comment">// falls through</span>
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jakarta-rest-advanced-topics-and-an-example"><a class="anchor" href="#jakarta-rest-advanced-topics-and-an-example"></a>Jakarta REST: Advanced Topics and an Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="GJJXE"></a><a id="jax-rs-advanced-topics-and-an-example"></a></p>
</div>
<div class="paragraph">
<p>Jakarta RESTful Web Services (Jakarta REST) is
designed to make it easy to develop applications that use the REST
architecture. This chapter describes advanced features of Jakarta REST. If you
are new to Jakarta REST, see <a href="#GIEPU">Chapter 32, "Building
RESTful Web Services with Jakarta REST"</a> before you proceed with this chapter.</p>
</div>
<div class="paragraph">
<p>Jakarta REST is integrated with Jakarta Contexts and Dependency Injection
(CDI), Jakarta Enterprise Beans technology, and Jakarta Servlet
technology.</p>
</div>
<div class="paragraph">
<p><a id="GKKRB"></a><a id="annotations-for-field-and-bean-properties-of-resource-classes"></a></p>
</div>
<div class="sect2">
<h3 id="annotations-for-field-and-bean-properties-of-resource-classes"><a class="anchor" href="#annotations-for-field-and-bean-properties-of-resource-classes"></a>Annotations for Field and Bean Properties of Resource Classes</h3>
<div class="paragraph">
<p>Jakarta REST annotations for resource classes let you extract specific parts
or values from a Uniform Resource Identifier (URI) or request header.</p>
</div>
<div class="paragraph">
<p>Jakarta REST provides the annotations listed in <a href="#GKOBO">Table 32-1</a>.</p>
</div>
<div class="paragraph">
<p><a id="sthref146"></a><a id="GKOBO"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 32-1 Advanced Jakarta REST Annotations</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 5%;">
<col style="width: 95%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Annotation</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Context</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Injects information into a class field, bean property, or
method parameter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@CookieParam</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extracts information from cookies declared in the
cookie request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@FormParam</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extracts information from a request representation whose
content type is <code>application/x-www-form-urlencoded</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@HeaderParam</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extracts the value of a header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@MatrixParam</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extracts the value of a URI matrix parameter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@PathParam</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extracts the value of a URI template parameter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@QueryParam</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extracts the value of a URI query parameter</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="GKKYA"></a><a id="extracting-path-parameters"></a></p>
</div>
<div class="sect3">
<h4 id="extracting-path-parameters"><a class="anchor" href="#extracting-path-parameters"></a>Extracting Path Parameters</h4>
<div class="paragraph">
<p>URI path templates are URIs with variables embedded within the URI
syntax. The <code>@PathParam</code> annotation lets you use variable URI path
fragments when you call a method.</p>
</div>
<div class="paragraph">
<p>The following code snippet shows how to extract the last name of an
employee when the employee&#8217;s email address is provided:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/employees/{firstname}.{lastname}@{domain}.com</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">EmpResource</span> {

    <span class="annotation">@GET</span>
    <span class="annotation">@Produces</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">text/xml</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getEmployeelastname(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">lastname</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> lastName) {
      ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>@Path</code> annotation defines the URI variables (or
path parameters) <code>{firstname}</code>, <code>{lastname}</code>, and <code>{domain}</code>. The
<code>@PathParam</code> in the method parameter of the request method extracts the
last name from the email address.</p>
</div>
<div class="paragraph">
<p>If your HTTP request is <code>GET</code> <code>/employees/john.doe@example.com</code>, the
value &#8220;doe&#8221; is injected into <code>{lastname}</code>.</p>
</div>
<div class="paragraph">
<p>You can specify several path parameters in one URI.</p>
</div>
<div class="paragraph">
<p>You can declare a regular expression with a URI variable. For example,
if it is required that the last name must consist only of lowercase and
uppercase characters, you can declare the following regular expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/employees/{firstname}.{lastname[a-zA-Z]*}@{domain}.com</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the last name does not match the regular expression, a 404 response
is returned.</p>
</div>
<div class="paragraph">
<p><a id="GKKXJ"></a><a id="extracting-query-parameters"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="extracting-query-parameters"><a class="anchor" href="#extracting-query-parameters"></a>Extracting Query Parameters</h4>
<div class="paragraph">
<p>Use the <code>@QueryParam</code> annotation to extract query parameters from the
query component of the request URI.</p>
</div>
<div class="paragraph">
<p>For instance, to query all employees who have joined within a specific
range of years, use a method signature like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/employees/</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@GET</span>
<span class="directive">public</span> Response getEmployees(
        <span class="annotation">@DefaultValue</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">2003</span><span class="delimiter">&quot;</span></span>) <span class="annotation">@QueryParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">minyear</span><span class="delimiter">&quot;</span></span>) <span class="type">int</span> minyear,
        <span class="annotation">@DefaultValue</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">2013</span><span class="delimiter">&quot;</span></span>) <span class="annotation">@QueryParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">maxyear</span><span class="delimiter">&quot;</span></span>) <span class="type">int</span> maxyear)
    {...}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code snippet defines two query parameters, <code>minyear</code> and <code>maxyear</code>.
The following HTTP request would query for all employees who have joined
between 2003 and 2013:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">GET /employees?maxyear=<span class="integer">2013</span>&amp;minyear=<span class="integer">2003</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@DefaultValue</code> annotation defines a default value, which is to be
used if no values are provided for the query parameters. By default,
Jakarta REST assigns a null value for <code>Object</code> values and zero for primitive
data types. You can use the <code>@DefaultValue</code> annotation to eliminate null
or zero values and define your own default values for a parameter.</p>
</div>
<div class="paragraph">
<p><a id="GKKYC"></a><a id="extracting-form-data"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="extracting-form-data"><a class="anchor" href="#extracting-form-data"></a>Extracting Form Data</h4>
<div class="paragraph">
<p>Use the <code>@FormParam</code> annotation to extract form parameters from HTML
forms. For example, the following form accepts the name, address, and
manager&#8217;s name of an employee:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;FORM</span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://example.com/employees/</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">post</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;p&gt;</span>
    <span class="tag">&lt;fieldset&gt;</span>
      Employee name: <span class="tag">&lt;INPUT</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">empname</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">tabindex</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      Employee address: <span class="tag">&lt;INPUT</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">empaddress</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">tabindex</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      Manager name: <span class="tag">&lt;INPUT</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">managername</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">tabindex</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;/fieldset&gt;</span>
  <span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/FORM&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the following code snippet to extract the manager name from this
HTML form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@POST</span>
<span class="annotation">@Consumes</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/x-www-form-urlencoded</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">void</span> post(<span class="annotation">@FormParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">managername</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> managername) {
    <span class="comment">// Store the value</span>
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To obtain a map of form parameter names to values, use a code snippet
like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@POST</span>
<span class="annotation">@Consumes</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/x-www-form-urlencoded</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">void</span> post(MultivaluedMap&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; formParams) {
    <span class="comment">// Store the message</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GKLCQ"></a><a id="extracting-the-java-type-of-a-request-or-response"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="extracting-the-java-type-of-a-request-or-response"><a class="anchor" href="#extracting-the-java-type-of-a-request-or-response"></a>Extracting the Java Type of a Request or Response</h4>
<div class="paragraph">
<p>The <code>javax.ws.rs.core.Context</code> annotation retrieves the Java types
related to a request or response.</p>
</div>
<div class="paragraph">
<p>The <code>javax.ws.rs.core.UriInfo</code> interface provides information about the
components of a request URI. The following code snippet shows how to
obtain a map of query and path parameter names to values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@GET</span>
<span class="directive">public</span> <span class="predefined-type">String</span> getParams(<span class="annotation">@Context</span> UriInfo ui) {
    MultivaluedMap&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; queryParams = ui.getQueryParameters();
    MultivaluedMap&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; pathParams = ui.getPathParameters();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>javax.ws.rs.core.HttpHeaders</code> interface provides information about
request headers and cookies. The following code snippet shows how to
obtain a map of header and cookie parameter names to values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@GET</span>
<span class="directive">public</span> <span class="predefined-type">String</span> getHeaders(<span class="annotation">@Context</span> HttpHeaders hh) {
    MultivaluedMap&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; headerParams = hh.getRequestHeaders();
    MultivaluedMap&lt;<span class="predefined-type">String</span>, Cookie&gt; pathParams = hh.getCookies();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="BABCJEDF"></a><a id="validating-resource-data-with-bean-validation"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="validating-resource-data-with-bean-validation"><a class="anchor" href="#validating-resource-data-with-bean-validation"></a>Validating Resource Data with Bean Validation</h3>
<div class="paragraph">
<p>Jakarta REST supports Bean Validation to verify Jakarta REST resource classes.
This support consists of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adding constraint annotations to resource method parameters</p>
</li>
<li>
<p>Ensuring entity data is valid when the entity is passed in as a
parameter</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#CIHJAFGI">Using Constraint Annotations on Resource Methods</a></p>
</li>
<li>
<p><a href="#CIHFDCBI">Validating Entity Data</a></p>
</li>
<li>
<p><a href="#CIHCHEFH">Validation Exception Handling and Response Codes</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="CIHJAFGI"></a><a id="using-constraint-annotations-on-resource-methods"></a></p>
</div>
<div class="sect3">
<h4 id="using-constraint-annotations-on-resource-methods"><a class="anchor" href="#using-constraint-annotations-on-resource-methods"></a>Using Constraint Annotations on Resource Methods</h4>
<div class="paragraph">
<p>Bean Validation constraint annotations may be applied to parameters for
a resource. The server will validate the parameters and either pass or
throw a <code>javax.validation.ValidationException</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@POST</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/createUser</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Consumes</span>(MediaType.APPLICATION_FORM_URLENCODED)
<span class="directive">public</span> <span class="type">void</span> createUser(<span class="annotation">@NotNull</span> <span class="annotation">@FormParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> username,
                       <span class="annotation">@NotNull</span> <span class="annotation">@FormParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> firstName,
                       <span class="annotation">@NotNull</span> <span class="annotation">@FormParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">lastName</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> lastName,
                       <span class="annotation">@Email</span> <span class="annotation">@FormParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">email</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> email) {
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, the built-in constraint <code>@NotNull</code> is applied
to the <code>username</code>, <code>firstName</code>, and <code>lastName</code> form fields. Another
built-in constraint <code>@Email</code> validates that the email address supplied
by the <code>email</code> form field is correctly formatted.</p>
</div>
<div class="paragraph">
<p>The constraints may also be applied to fields within a resource class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/createUser</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">CreateUserResource</span> {
  <span class="annotation">@NotNull</span>
  <span class="annotation">@FormParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>)
  <span class="directive">private</span> <span class="predefined-type">String</span> username;

  <span class="annotation">@NotNull</span>
  <span class="annotation">@FormParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span>)
  <span class="directive">private</span> <span class="predefined-type">String</span> firstName;

  <span class="annotation">@NotNull</span>
  <span class="annotation">@FormParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">lastName</span><span class="delimiter">&quot;</span></span>)
  <span class="directive">private</span> <span class="predefined-type">String</span> lastName;

  <span class="annotation">@Email</span>
  <span class="annotation">@FormParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">email</span><span class="delimiter">&quot;</span></span>)
  <span class="directive">private</span> <span class="predefined-type">String</span> email;

  ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, the same constraints that were applied to the
method parameters in the previous example are applied to the class
fields. The behavior is the same in both examples.</p>
</div>
<div class="paragraph">
<p>Constraints may also be applied to a resource class&#8217;s JavaBeans
properties by adding the constraint annotations to the getter method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/createuser</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">CreateUserResource</span> {
  <span class="directive">private</span> <span class="predefined-type">String</span> username;

  <span class="annotation">@FormParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>)
  <span class="directive">public</span> <span class="type">void</span> setUsername(<span class="predefined-type">String</span> username) {
    <span class="local-variable">this</span>.username = username;
  }

  <span class="annotation">@NotNull</span>
  <span class="directive">public</span> <span class="predefined-type">String</span> getUsername() {
    <span class="keyword">return</span> username;
  }
  ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Constraints may also be applied at the resource class level. In the
following example, <code>@PhoneRequired</code> is a user-defined constraint that
ensures that a user enters at least one phone number. That is, either
<code>homePhone</code> or <code>mobilePhone</code> can be null, but not both.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/createUser</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@PhoneRequired</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">CreateUserResource</span> {
  <span class="annotation">@FormParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">homePhone</span><span class="delimiter">&quot;</span></span>)
  <span class="directive">private</span> Phone homePhone;

  <span class="annotation">@FormParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">mobilePhone</span><span class="delimiter">&quot;</span></span>)
  <span class="directive">private</span> Phone mobilePhone;
  ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="CIHFDCBI"></a><a id="validating-entity-data"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="validating-entity-data"><a class="anchor" href="#validating-entity-data"></a>Validating Entity Data</h4>
<div class="paragraph">
<p>Classes that contain validation constraint annotations may be used in
method parameters in a resource class. To validate these entity classes,
use the <code>@Valid</code> annotation on the method parameter. For example, the
following class is a user-defined class containing both standard and
user-defined validation constraints.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@PhoneRequired</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">User</span> {
  <span class="annotation">@NotNull</span>
  <span class="directive">private</span> <span class="predefined-type">String</span> username;

  <span class="directive">private</span> Phone homePhone;

  <span class="directive">private</span> Phone mobilePhone;
  ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This entity class is used as a parameter to a resource method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/createUser</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">CreateUserResource</span> {
  ...
  <span class="annotation">@POST</span>
  <span class="annotation">@Consumers</span>(MediaType.APPLICATION_XML)
  <span class="directive">public</span> <span class="type">void</span> createUser(<span class="annotation">@Valid</span> User user) {
    ...
  }
  ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@Valid</code> annotation ensures that the entity class is validated at
runtime. Additional user-defined constraints can also trigger validation
of an entity.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/createUser</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">CreateUserResource</span> {
  ...
  <span class="annotation">@POST</span>
  <span class="annotation">@Consumers</span>(MediaType.APPLICATION_XML)
  <span class="directive">public</span> <span class="type">void</span> createUser(<span class="annotation">@ActiveUser</span> User user) {
    ...
  }
  ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, the user-defined <code>@ActiveUser</code> constraint is
applied to the <code>User</code> class in addition to the <code>@PhoneRequired</code> and
<code>@NotNull</code> constraints defined within the entity class.</p>
</div>
<div class="paragraph">
<p>If a resource method returns an entity class, validation may be
triggered by applying the <code>@Valid</code> or any other user-defined constraint
annotation to the resource method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/getUser</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">GetUserResource</span> {
  ...
  <span class="annotation">@GET</span>
  <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">{username}</span><span class="delimiter">&quot;</span></span>)
  <span class="annotation">@Produces</span>(MediaType.APPLICATION_XML)
  <span class="annotation">@ActiveUser</span>
  <span class="annotation">@Valid</span>
  <span class="directive">public</span> User getUser(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> username) {
    <span class="comment">// find the User</span>
    <span class="keyword">return</span> user;
  }
  ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As in the previous example, the <code>@ActiveUser</code> constraint is applied to
the returned entity class as well as the <code>@PhoneRequired</code> and <code>@NotNull</code>
constraints defined within the entity class.</p>
</div>
<div class="paragraph">
<p><a id="CIHCHEFH"></a><a id="validation-exception-handling-and-response-codes"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="validation-exception-handling-and-response-codes"><a class="anchor" href="#validation-exception-handling-and-response-codes"></a>Validation Exception Handling and Response Codes</h4>
<div class="paragraph">
<p>If a <code>javax.validation.ValidationException</code> or any subclass of
<code>ValidationException</code> except <code>ConstraintValidationException</code> is thrown,
the Jakarta REST runtime will respond to the client request with a 500
(Internal Server Error) HTTP status code.</p>
</div>
<div class="paragraph">
<p>If a <code>ConstraintValidationException</code> is thrown, the Jakarta REST runtime will
respond to the client with one of the following HTTP status codes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>500</code> (Internal Server Error) if the exception was thrown while
validating a method return type</p>
</li>
<li>
<p><code>400</code> (Bad Request) in all other cases</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GKNAV"></a><a id="subresources-and-runtime-resource-resolution"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="subresources-and-runtime-resource-resolution"><a class="anchor" href="#subresources-and-runtime-resource-resolution"></a>Subresources and Runtime Resource Resolution</h3>
<div class="paragraph">
<p>You can use a resource class to process only a part of the URI request.
A root resource can then implement subresources that can process the
remainder of the URI path.</p>
</div>
<div class="paragraph">
<p>A resource class method that is annotated with <code>@Path</code> is either a
subresource method or a subresource locator.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A subresource method is used to handle requests on a subresource of
the corresponding resource.</p>
</li>
<li>
<p>A subresource locator is used to locate subresources of the
corresponding resource.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GKLAG">Subresource Methods</a></p>
</li>
<li>
<p><a href="#GKRHR">Subresource Locators</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GKLAG"></a><a id="subresource-methods"></a></p>
</div>
<div class="sect3">
<h4 id="subresource-methods"><a class="anchor" href="#subresource-methods"></a>Subresource Methods</h4>
<div class="paragraph">
<p>A subresource method handles an HTTP request directly. The method must
be annotated with a request method designator, such as <code>@GET</code> or
<code>@POST</code>, in addition to <code>@Path</code>. The method is invoked for request URIs
that match a URI template created by concatenating the URI template of
the resource class with the URI template of the method.</p>
</div>
<div class="paragraph">
<p>The following code snippet shows how a subresource method can be used to
extract the last name of an employee when the employee&#8217;s email address
is provided:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/employeeinfo</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">EmployeeInfo</span> {

    <span class="directive">public</span> employeeinfo() {}

    <span class="annotation">@GET</span>
    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/employees/{firstname}.{lastname}@{domain}.com</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@Produces</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">text/xml</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getEmployeeLastName(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">lastname</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> lastName) {
       ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>getEmployeeLastName</code> method returns <code>doe</code> for the following <code>GET</code>
request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">GET /employeeinfo/employees/john.doe<span class="annotation">@example</span>.com</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GKRHR"></a><a id="subresource-locators"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="subresource-locators"><a class="anchor" href="#subresource-locators"></a>Subresource Locators</h4>
<div class="paragraph">
<p>A subresource locator returns an object that will handle an HTTP
request. The method must not be annotated with a request method
designator. You must declare a subresource locator within a subresource
class, and only subresource locators are used for runtime resource
resolution.</p>
</div>
<div class="paragraph">
<p>The following code snippet shows a subresource locator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Root resource class</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/employeeinfo</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">EmployeeInfo</span> {

    <span class="comment">// Subresource locator: obtains the subresource Employee</span>
    <span class="comment">// from the path /employeeinfo/employees/{empid}</span>
    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/employees/{empid}</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> Employee getEmployee(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">empid</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> id) {
        <span class="comment">// Find the Employee based on the id path parameter</span>
        Employee emp = ...;
        ...
        return emp;
    }
}

<span class="comment">// Subresource class</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Employee</span> {

    <span class="comment">// Subresource method: returns the employee's last name</span>
    <span class="annotation">@GET</span>
    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/lastname</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getEmployeeLastName() {
        ...
        return lastName;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this code snippet, the <code>getEmployee</code> method is the subresource
locator that provides the <code>Employee</code> object, which services requests for
<code>lastname</code>.</p>
</div>
<div class="paragraph">
<p>If your HTTP request is <code>GET /employeeinfo/employees/as209/</code>, the
<code>getEmployee</code> method returns an <code>Employee</code> object whose id is <code>as209</code>.
At runtime, Jakarta REST sends a <code>GET /employeeinfo/employees/as209/lastname</code>
request to the <code>getEmployeeLastName</code> method. The <code>getEmployeeLastName</code>
method retrieves and returns the last name of the employee whose id is
<code>as209</code>.</p>
</div>
<div class="paragraph">
<p><a id="GKNCY"></a><a id="integrating-jax-rs-with-ejb-technology-and-cdi"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="integrating-jakarta-rest-with-jakarta-enterprise-beans-technology-and-cdi"><a class="anchor" href="#integrating-jakarta-rest-with-jakarta-enterprise-beans-technology-and-cdi"></a>Integrating Jakarta REST with Jakarta Enterprise Beans Technology and CDI</h3>
<div class="paragraph">
<p>Jakarta REST works with Jakarta Enterprise Beans technology and
Jakarta Contexts and Dependency Injection (CDI).</p>
</div>
<div class="paragraph">
<p>In general, for Jakarta REST to work with enterprise beans, you need to
annotate the class of a bean with <code>@Path</code> to convert it to a root
resource class. You can use the <code>@Path</code> annotation with stateless
session beans and singleton POJO beans.</p>
</div>
<div class="paragraph">
<p>The following code snippet shows a stateless session bean and a
singleton bean that have been converted to Jakarta REST root resource classes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Stateless</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">stateless-bean</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">StatelessResource</span> {...}

<span class="annotation">@Singleton</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">singleton-bean</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SingletonResource</span> {...}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Session beans can also be used for subresources.</p>
</div>
<div class="paragraph">
<p>Jakarta REST and CDI have slightly different component models. By default,
Jakarta REST root resource classes are managed in the request scope, and no
annotations are required for specifying the scope. CDI managed beans
annotated with <code>@RequestScoped</code> or <code>@ApplicationScoped</code> can be converted
to Jakarta REST resource classes.</p>
</div>
<div class="paragraph">
<p>The following code snippet shows a Jakarta REST resource class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/employee/{id}</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Employee</span> {
    <span class="directive">public</span> Employee(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> id) {...}
}

<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">{lastname}</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="directive">final</span> <span class="type">class</span> <span class="class">EmpDetails</span> {...}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following code snippet shows this Jakarta REST resource class converted to
a CDI bean. The beans must be proxyable, so the <code>Employee</code> class
requires a nonprivate constructor with no parameters, and the
<code>EmpDetails</code> class must not be <code>final</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/employee/{id}</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@RequestScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Employee</span> {
    <span class="directive">public</span> Employee() {...}

    <span class="annotation">@Inject</span>
    <span class="directive">public</span> Employee(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> id) {...}
}

<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">{lastname}</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@RequestScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">EmpDetails</span> {...}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GKQDA"></a><a id="conditional-http-requests"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="conditional-http-requests"><a class="anchor" href="#conditional-http-requests"></a>Conditional HTTP Requests</h3>
<div class="paragraph">
<p>Jakarta REST provides support for conditional <code>GET</code> and <code>PUT</code> HTTP requests.
Conditional <code>GET</code> requests help save bandwidth by improving the
efficiency of client processing.</p>
</div>
<div class="paragraph">
<p>A <code>GET</code> request can return a Not Modified (304) response if the
representation has not changed since the previous request. For example,
a website can return 304 responses for all its static images that have
not changed since the previous request.</p>
</div>
<div class="paragraph">
<p>A <code>PUT</code> request can return a Precondition Failed (412) response if the
representation has been modified since the last request. The conditional
<code>PUT</code> can help avoid the lost update problem.</p>
</div>
<div class="paragraph">
<p>Conditional HTTP requests can be used with the <code>Last-Modified</code> and
<code>ETag</code> headers. The <code>Last-Modified</code> header can represent dates with
granularity of one second.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/employee/{joiningdate}</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Employee</span> {

    <span class="predefined-type">Date</span> joiningdate;

    <span class="annotation">@GET</span>
    <span class="annotation">@Produces</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/xml</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> Employee(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">joiningdate</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">Date</span> joiningdate,
                    <span class="annotation">@Context</span> Request req,
                    <span class="annotation">@Context</span> UriInfo ui) {

        <span class="local-variable">this</span>.joiningdate = joiningdate;
        ...
        this.tag = computeEntityTag(ui.getRequestUri());
        <span class="keyword">if</span> (req.getMethod().equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">GET</span><span class="delimiter">&quot;</span></span>)) {
            Response.ResponseBuilder rb = req.evaluatePreconditions(tag);
            <span class="keyword">if</span> (rb != <span class="predefined-constant">null</span>) {
                <span class="keyword">throw</span> <span class="keyword">new</span> WebApplicationException(rb.build());
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this code snippet, the constructor of the <code>Employee</code> class computes
the entity tag from the request URI and calls the
<code>request.evaluatePreconditions</code> method with that tag. If a client
request returns an <code>If-none-match</code> header with a value that has the same
entity tag that was computed, <code>evaluate.Preconditions</code> returns a
pre-filled-out response with a 304 status code and an entity tag set
that may be built and returned.</p>
</div>
<div class="paragraph">
<p><a id="GKQBQ"></a><a id="runtime-content-negotiation"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="runtime-content-negotiation"><a class="anchor" href="#runtime-content-negotiation"></a>Runtime Content Negotiation</h3>
<div class="paragraph">
<p>The <code>@Produces</code> and <code>@Consumes</code> annotations handle static content
negotiation in Jakarta REST. These annotations specify the content preferences
of the server. HTTP headers such as <code>Accept</code>, <code>Content-Type</code>, and
<code>Accept-Language</code> define the content negotiation preferences of the
client.</p>
</div>
<div class="paragraph">
<p>For more details on the HTTP headers for content negotiation, see HTTP
/1.1 - Content Negotiation
(<code><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec12.html" class="bare">http://www.w3.org/Protocols/rfc2616/rfc2616-sec12.html</a></code>).</p>
</div>
<div class="paragraph">
<p>The following code snippet shows the server content preferences:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Produces</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">text/plain</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/employee</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Employee</span> {

    <span class="annotation">@GET</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> getEmployeeAddressText(<span class="predefined-type">String</span> address) {...}

    <span class="annotation">@Produces</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">text/xml</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@GET</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> getEmployeeAddressXml(Address address) {...}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>getEmployeeAddressText</code> method is called for an HTTP request that
looks like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">GET /employee
Accept: text/plain</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will produce the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="integer">500</span> Oracle Parkway, Redwood Shores, CA</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>getEmployeeAddressXml</code> method is called for an HTTP request that
looks like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">GET /employee
Accept: text/xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will produce the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;address street=<span class="string"><span class="delimiter">&quot;</span><span class="content">500 Oracle Parkway, Redwood Shores, CA</span><span class="delimiter">&quot;</span></span> country=<span class="string"><span class="delimiter">&quot;</span><span class="content">USA</span><span class="delimiter">&quot;</span></span>/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>With static content negotiation, you can also define multiple content
and media types for the client and server.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Produces</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">text/plain</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">text/xml</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to supporting static content negotiation, Jakarta REST also
supports runtime content negotiation using the
<code>javax.ws.rs.core.Variant</code> class and <code>Request</code> objects. The <code>Variant</code>
class specifies the resource representation of content negotiation. Each
instance of the <code>Variant</code> class may contain a media type, a language,
and an encoding. The <code>Variant</code> object defines the resource
representation that is supported by the server. The
<code>Variant.VariantListBuilder</code> class is used to build a list of
representation variants.</p>
</div>
<div class="paragraph">
<p>The following code snippet shows how to create a list of resource
representation variants:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">List</span>&lt;Variant&gt; vs = Variant.mediatypes(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/xml</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">application/json</span><span class="delimiter">&quot;</span></span>)
        .languages(<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">fr</span><span class="delimiter">&quot;</span></span>).build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code snippet calls the <code>build</code> method of the <code>VariantListBuilder</code>
class. The <code>VariantListBuilder</code> class is invoked when you call the
<code>mediatypes</code>, <code>languages</code>, or <code>encodings</code> methods. The <code>build</code> method
builds a series of resource representations. The <code>Variant</code> list created
by the <code>build</code> method has all possible combinations of items specified
in the <code>mediatypes</code>, <code>languages</code>, and <code>encodings</code> methods.</p>
</div>
<div class="paragraph">
<p>In this example, the size of the <code>vs</code> object as defined in this code
snippet is 4, and the contents are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">[[<span class="string"><span class="delimiter">&quot;</span><span class="content">application/xml</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span>], [<span class="string"><span class="delimiter">&quot;</span><span class="content">application/json</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span>],
    [<span class="string"><span class="delimiter">&quot;</span><span class="content">application/xml</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">fr</span><span class="delimiter">&quot;</span></span>],[<span class="string"><span class="delimiter">&quot;</span><span class="content">application/json</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">fr</span><span class="delimiter">&quot;</span></span>]]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>javax.ws.rs.core.Request.selectVariant</code> method accepts a list of
<code>Variant</code> objects and chooses the <code>Variant</code> object that matches the HTTP
request. This method compares its list of <code>Variant</code> objects with the
<code>Accept</code>, <code>Accept-Encoding</code>, <code>Accept-Language</code>, and <code>Accept-Charset</code>
headers of the HTTP request.</p>
</div>
<div class="paragraph">
<p>The following code snippet shows how to use the <code>selectVariant</code> method
to select the most acceptable <code>Variant</code> from the values in the client
request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@GET</span>
<span class="directive">public</span> Response get(<span class="annotation">@Context</span> Request r) {
    <span class="predefined-type">List</span>&lt;Variant&gt; vs = ...;
    Variant v = r.selectVariant(vs);
    <span class="keyword">if</span> (v == <span class="predefined-constant">null</span>) {
        <span class="keyword">return</span> Response.notAcceptable(vs).build();
    } <span class="keyword">else</span> {
        <span class="predefined-type">Object</span> rep = selectRepresentation(v);
        <span class="keyword">return</span> Response.ok(rep, v);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>selectVariant</code> method returns the <code>Variant</code> object that matches the
request or null if no matches are found. In this code snippet, if the
method returns null, a <code>Response</code> object for a nonacceptable response is
built. Otherwise, a <code>Response</code> object with an OK status and containing a
representation in the form of an <code>Object</code> entity and a <code>Variant</code> is
returned.</p>
</div>
<div class="paragraph">
<p><a id="GKKNJ"></a><a id="using-jax-rs-with-jaxb"></a></p>
</div>
</div>
<div class="sect2">
<h3 id="using-jakarta-rest-with-jakarta-xml-binding"><a class="anchor" href="#using-jakarta-rest-with-jakarta-xml-binding"></a>Using Jakarta REST with Jakarta XML Binding</h3>
<div class="paragraph">
<p>JAXB is an XML-to-Java binding
technology that simplifies the development of web services by enabling
transformations between schema and Java objects and between XML instance
documents and Java object instances. An XML schema defines the data
elements and structure of an XML document. You can use Jakarta XML Binding APIs and
tools to establish mappings between Java classes and XML schema. Jakarta XML Binding
technology provides the tools that enable you to convert your XML
documents to and from Java objects.</p>
</div>
<div class="paragraph">
<p>By using Jakarta XML Binding, you can manipulate data objects in the following ways.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can start with an XML schema definition (XSD) and use <code>xjc</code>, the
Jakarta XML Binding schema compiler tool, to create a set of Jakarta XML Binding annotated Java
classes that map to the elements and types defined in the XSD schema.</p>
</li>
<li>
<p>You can start with a set of Java classes and use <code>schemagen</code>, the Jakarta XML Binding
schema generator tool, to generate an XML schema.</p>
</li>
<li>
<p>Once a mapping between the XML schema and the Java classes exists, you
can use the Jakarta XML Binding runtime to marshal and unmarshal your XML
documents to and from Java objects and use the resulting Java classes to
assemble a web services application.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>XML is a common media format that RESTful services consume and produce.
To deserialize and serialize XML, you can represent requests and
responses by Jakarta XML Binding annotated objects. Your Jakarta REST application can use the
Jakarta XML Binding objects to manipulate XML data. Jakarta XML Binding objects can be used as request
entity parameters and response entities. The Jakarta REST runtime environment
includes standard <code>MessageBodyReader</code> and <code>MessageBodyWriter</code> provider
interfaces for reading and writing Jakarta XML Binding objects as entities.</p>
</div>
<div class="paragraph">
<p>With Jakarta REST, you enable access to your services by publishing resources.
Resources are just simple Java classes with some additional Jakarta REST
annotations. These annotations express the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The path of the resource (the URL you use to access it)</p>
</li>
<li>
<p>The HTTP method you use to call a certain method (for example, the
<code>GET</code> or <code>POST</code> method)</p>
</li>
<li>
<p>The MIME type with which a method accepts or responds</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As you define the resources for your application, consider the type of
data you want to expose. You may already have a relational database that
contains information you want to expose to users, or you may have static
content that does not reside in a database but does need to be
distributed as resources. Using Jakarta REST, you can distribute content from
multiple sources. RESTful web services can use various types of
input/output formats for request and response. The <code>customer</code> example,
described in <a href="#GKOIB">The customer Example
Application</a>, uses XML.</p>
</div>
<div class="paragraph">
<p>Resources have representations. A resource representation is the content
in the HTTP message that is sent to, or returned from, the resource
using the URI. Each representation a resource supports has a
corresponding media type. For example, if a resource is going to return
content formatted as XML, you can use <code>application/xml</code> as the
associated media type in the HTTP message.Depending on the requirements
of your application, resources can return representations in a preferred
single format or in multiple formats. Jakarta REST provides <code>@Consumes</code> and
<code>@Produces</code> annotations to declare the media types that are acceptable
for a resource method to read and write.</p>
</div>
<div class="paragraph">
<p>Jakarta REST also maps Java types to and from resource representations using
entity providers. A <code>MessageBodyReader</code> entity provider reads a request
entity and deserializes the request entity into a Java type. A
<code>MessageBodyWriter</code> entity provider serializes from a Java type into a
response entity. For example, if a <code>String</code> value is used as the request
entity parameter, the <code>MessageBodyReader</code> entity provider deserializes
the request body into a new <code>String</code>. If a Jakarta XML Binding type is used as the
return type on a resource method, the <code>MessageBodyWriter</code> serializes the
Jakarta XML Binding object into a response body.</p>
</div>
<div class="paragraph">
<p>By default, the Jakarta REST runtime environment attempts to create and use a
default <code>JAXBContext</code> class for Jakarta XML Binding classes. However, if the default
<code>JAXBContext</code> class is not suitable, then you can supply a <code>JAXBContext</code>
class for the application using a Jakarta REST <code>ContextResolver</code> provider
interface.</p>
</div>
<div class="paragraph">
<p>The following sections explain how to use Jakarta XML Binding with Jakarta REST resource
methods.</p>
</div>
<div class="paragraph">
<p><a id="sthref147"></a><a id="using-java-objects-to-model-your-data"></a></p>
</div>
<div class="sect3">
<h4 id="using-java-objects-to-model-your-data"><a class="anchor" href="#using-java-objects-to-model-your-data"></a>Using Java Objects to Model Your Data</h4>
<div class="paragraph">
<p>If you do not have an XML schema definition for the data you want to
expose, you can model your data as Java classes, add Jakarta XML Binding annotations to
these classes, and use Jakarta XML Binding to generate an XML schema for your data. For
example, if the data you want to expose is a collection of products and
each product has an ID, a name, a description, and a price, you can
model it as a Java class as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@XmlRootElement</span>(name=<span class="string"><span class="delimiter">&quot;</span><span class="content">product</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@XmlAccessorType</span>(XmlAccessType.FIELD)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Product</span> {

    <span class="annotation">@XmlElement</span>(required=<span class="predefined-constant">true</span>)
    <span class="directive">protected</span> <span class="type">int</span> id;
    <span class="annotation">@XmlElement</span>(required=<span class="predefined-constant">true</span>)
    <span class="directive">protected</span> <span class="predefined-type">String</span> name;
    <span class="annotation">@XmlElement</span>(required=<span class="predefined-constant">true</span>)
    <span class="directive">protected</span> <span class="predefined-type">String</span> description;
    <span class="annotation">@XmlElement</span>(required=<span class="predefined-constant">true</span>)
    <span class="directive">protected</span> <span class="type">int</span> price;

    <span class="directive">public</span> Product() {}

    <span class="comment">// Getter and setter methods</span>
    <span class="comment">// ...</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the Jakarta XML Binding schema generator on the command line to generate the
corresponding XML schema definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">schemagen Product.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command produces the XML schema as an <code>.xsd</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;</span>
<span class="tag">&lt;xs:schema</span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

    <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">product</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">product</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

    <span class="tag">&lt;xs:complexType</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">product</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;xs:sequence&gt;</span>
        <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:int</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:int</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/xs:sequence&gt;</span>
    <span class="tag">&lt;xs:complexType&gt;</span>
<span class="tag">&lt;/xs:schema&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you have this mapping, you can create <code>Product</code> objects in your
application, return them, and use them as parameters in Jakarta REST resource
methods. The Jakarta REST runtime uses Jakarta XML Binding to convert the XML data from the
request into a <code>Product</code> object and to convert a <code>Product</code> object into
XML data for the response. The following resource class provides a
simple example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/product</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ProductService</span> {
    <span class="annotation">@GET</span>
    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/get</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@Produces</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/xml</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> Product getProduct() {
        Product prod = <span class="keyword">new</span> Product();
        prod.setId(<span class="integer">1</span>);
        prod.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Mattress</span><span class="delimiter">&quot;</span></span>);
        prod.setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">Queen size mattress</span><span class="delimiter">&quot;</span></span>);
        prod.setPrice(<span class="integer">500</span>);
        <span class="keyword">return</span> prod;
    }

    <span class="annotation">@POST</span>
    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/create</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@Consumes</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/xml</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> Response createProduct(Product prod) {
        <span class="comment">// Process or store the product and return a response</span>
        <span class="comment">// ...</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Some IDEs, such as NetBeans IDE, will run the schema generator tool
automatically during the build process if you add Java classes that have
Jakarta XML Binding annotations to your project. For a detailed example, see
<a href="#GKOIB">The customer Example Application</a>. The
<code>customer</code> example contains a more complex relationship between the Java
classes that model the data, which results in a more hierarchical XML
representation.</p>
</div>
<div class="paragraph">
<p><a id="sthref148"></a><a id="starting-from-an-existing-xml-schema-definition"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="starting-from-an-existing-xml-schema-definition"><a class="anchor" href="#starting-from-an-existing-xml-schema-definition"></a>Starting from an Existing XML Schema Definition</h4>
<div class="paragraph">
<p>If you already have an XML schema definition in an <code>.xsd</code> file for the
data you want to expose, use the Jakarta XML Binding schema compiler tool. Consider
this simple example of an <code>.xsd</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;xs:schema</span> <span class="attribute-name">targetNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xml.product</span><span class="delimiter">&quot;</span></span>
           <span class="attribute-name">xmlns:xs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema</span><span class="delimiter">&quot;</span></span>
           <span class="attribute-name">elementFormDefault</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">qualified</span><span class="delimiter">&quot;</span></span>
           <span class="attribute-name">xmlns:myco</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://xml.product</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">product</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myco:Product</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;xs:complexType</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Product</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;xs:sequence&gt;</span>
      <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:int</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:int</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/xs:sequence&gt;</span>
  <span class="tag">&lt;/xs:complexType&gt;</span>
<span class="tag">&lt;/xs:schema&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the schema compiler tool on the command line as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">xjc Product.xsd</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command generates the source code for Java classes that correspond
to the types defined in the <code>.xsd</code> file. The schema compiler tool
generates a Java class for each <code>complexType</code> defined in the <code>.xsd</code>
file. The fields of each generated Java class are the same as the
elements inside the corresponding <code>complexType</code>, and the class contains
getter and setter methods for these fields.</p>
</div>
<div class="paragraph">
<p>In this case, the schema compiler tool generates the classes
<code>product.xml.Product</code> and <code>product.xml.ObjectFactory</code>. The <code>Product</code>
class contains Jakarta XML Binding annotations, and its fields correspond to those in
the <code>.xsd</code> definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@XmlAccessorType</span>(XmlAccessType.FIELD)
<span class="annotation">@XmlType</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">Product</span><span class="delimiter">&quot;</span></span>, propOrder = {
    <span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>
})
<span class="directive">public</span> <span class="type">class</span> <span class="class">Product</span> {
    <span class="directive">protected</span> <span class="type">int</span> id;
    <span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>)
    <span class="directive">protected</span> <span class="predefined-type">String</span> name;
    <span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>)
    <span class="directive">protected</span> <span class="predefined-type">String</span> description;
    <span class="directive">protected</span> <span class="type">int</span> price;

    <span class="comment">// Setter and getter methods</span>
    <span class="comment">// ...</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can create instances of the <code>Product</code> class from your application
(for example, from a database). The generated class
<code>product.xml.ObjectFactory</code> contains a method that allows you to convert
these objects to Jakarta XML Binding elements that can be returned as XML inside Jakarta REST
resource methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@XmlElementDecl</span>(namespace = <span class="string"><span class="delimiter">&quot;</span><span class="content">http://xml.product</span><span class="delimiter">&quot;</span></span>, name = <span class="string"><span class="delimiter">&quot;</span><span class="content">product</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> JAXBElement&lt;Product&gt; createProduct(Product value) {
    <span class="keyword">return</span> <span class="keyword">new</span> JAXBElement&lt;Product&gt;(_Product_QNAME, Product.class, <span class="predefined-constant">null</span>, value);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following code shows how to use the generated classes to return a
Jakarta XML Binding element as XML in a Jakarta REST resource method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/product</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ProductService</span> {
    <span class="annotation">@GET</span>
    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/get</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@Produces</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/xml</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> JAXBElement&lt;Product&gt; getProduct() {
        Product prod = <span class="keyword">new</span> Product();
        prod.setId(<span class="integer">1</span>);
        prod.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Mattress</span><span class="delimiter">&quot;</span></span>);
        prod.setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">Queen size mattress</span><span class="delimiter">&quot;</span></span>);
        prod.setPrice(<span class="integer">500</span>);
        <span class="keyword">return</span> <span class="keyword">new</span> <span class="predefined-type">ObjectFactory</span>().createProduct(prod);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For <code>@POST</code> and <code>@PUT</code> resource methods, you can use a <code>Product</code> object
directly as a parameter. Jakarta REST maps the XML data from the request into
a <code>Product</code> object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/product</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ProductService</span> {
    <span class="annotation">@GET</span>
    <span class="comment">// ...</span>

    <span class="annotation">@POST</span>
    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/create</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@Consumes</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/xml</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> Response createProduct(Product prod) {
        <span class="comment">// Process or store the product and return a response</span>
        <span class="comment">// ...</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="sthref149"></a><a id="using-json-with-jax-rs-and-jaxb"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="using-json-with-jakarta-rest-and-jakarta-xml-binding"><a class="anchor" href="#using-json-with-jakarta-rest-and-jakarta-xml-binding"></a>Using JSON with Jakarta REST and Jakarta XML Binding</h4>
<div class="paragraph">
<p>Jakarta REST can automatically read and write XML using Jakarta XML Binding, but it can also
work with JSON data. JSON is a simple text-based format for data
exchange derived from JavaScript. For the preceding examples, the XML
representation of a product is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;product&gt;</span>
  <span class="tag">&lt;id&gt;</span>1<span class="tag">&lt;/id&gt;</span>
  <span class="tag">&lt;name&gt;</span>Mattress<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;description&gt;</span>Queen size mattress<span class="tag">&lt;/description&gt;</span>
  <span class="tag">&lt;price&gt;</span>500<span class="tag">&lt;/price&gt;</span>
<span class="tag">&lt;/product&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The equivalent JSON representation is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Mattress</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Queen size mattress</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>:<span class="integer">500</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can add the format <code>application/json</code> or
<code>MediaType.APPLICATION_JSON</code> to the <code>@Produces</code> annotation in resource
methods to produce responses with JSON data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@GET</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/get</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Produces</span>({<span class="string"><span class="delimiter">&quot;</span><span class="content">application/xml</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">application/json</span><span class="delimiter">&quot;</span></span>})
<span class="directive">public</span> Product getProduct() { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the default response is XML, but the response is a JSON
object if the client makes a <code>GET</code> request that includes this header:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Accept: application/json</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resource methods can also accept JSON data for Jakarta XML Binding annotated
classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@POST</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/create</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Consumes</span>({<span class="string"><span class="delimiter">&quot;</span><span class="content">application/xml</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">application/json</span><span class="delimiter">&quot;</span></span>})
<span class="directive">public</span> Response createProduct(Product prod) { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The client should include the following header when submitting JSON data
with a <code>POST</code> request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Content-<span class="predefined-type">Type</span>: application/json</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GKOIB"></a><a id="the-customer-example-application"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-customer-example-application"><a class="anchor" href="#the-customer-example-application"></a>The customer Example Application</h3>
<div class="paragraph">
<p>This section describes how to build and run the <code>customer</code> example
application. This application is a RESTful web service that uses Jakarta XML Binding to
perform the create, read, update, delete (CRUD) operations for a
specific entity.</p>
</div>
<div class="paragraph">
<p>The <code>customer</code> sample application is in the
<code><em>tut-install</em>/examples/jaxrs/customer/</code> directory. See
<a href="#GFIUD">Chapter 2, "Using the Tutorial Examples,"</a>
for basic information on building and running sample applications.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GKOFO">Overview of the customer Example Application</a></p>
</li>
<li>
<p><a href="#CIHJFEJI">The Customer and Address Entity Classes</a></p>
</li>
<li>
<p><a href="#GKLGT">The CustomerService Class</a></p>
</li>
<li>
<p><a href="#GKQJQ">Using the Jakarta REST Client in the CustomerBean Classes</a></p>
</li>
<li>
<p><a href="#GKQKV">Running the customer Example</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GKOFO"></a><a id="overview-of-the-customer-example-application"></a></p>
</div>
<div class="sect3">
<h4 id="overview-of-the-customer-example-application"><a class="anchor" href="#overview-of-the-customer-example-application"></a>Overview of the customer Example Application</h4>
<div class="paragraph">
<p>The source files of this application are at
<code><em>tut-install</em>/examples/jaxrs/customer/src/main/java/</code>. The application
has three parts.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>Customer</code> and <code>Address</code> entity classes. These classes model the
data of the application and contain Jakarta XML Binding annotations.</p>
</li>
<li>
<p>The <code>CustomerService</code> resource class. This class contains Jakarta REST
resource methods that perform operations on <code>Customer</code> instances
represented as XML or JSON data using Jakarta XML Binding. See <a href="#GKLGT">The
CustomerService Class</a> for details.</p>
</li>
<li>
<p>The <code>CustomerBean</code> session bean that acts as a backing bean for the
web client. <code>CustomerBean</code> uses the Jakarta REST client API to call the
methods of <code>CustomerService</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>customer</code> example application shows you how to model your data
entities as Java classes with Jakarta XML Binding annotations.</p>
</div>
<div class="paragraph">
<p><a id="CIHJFEJI"></a><a id="the-customer-and-address-entity-classes"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="the-customer-and-address-entity-classes"><a class="anchor" href="#the-customer-and-address-entity-classes"></a>The Customer and Address Entity Classes</h4>
<div class="paragraph">
<p>The following class represents a customer&#8217;s address:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="annotation">@Table</span>(name=<span class="string"><span class="delimiter">&quot;</span><span class="content">CUSTOMER_ADDRESS</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@XmlRootElement</span>(name=<span class="string"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@XmlAccessorType</span>(XmlAccessType.FIELD)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Address</span> {
    <span class="annotation">@Id</span>
    <span class="annotation">@GeneratedValue</span>(strategy = GenerationType.AUTO)
    <span class="directive">private</span> <span class="predefined-type">Long</span> id;

    <span class="annotation">@XmlElement</span>(required=<span class="predefined-constant">true</span>)
    <span class="directive">protected</span> <span class="type">int</span> number;

    <span class="annotation">@XmlElement</span>(required=<span class="predefined-constant">true</span>)
    <span class="directive">protected</span> <span class="predefined-type">String</span> street;

    <span class="annotation">@XmlElement</span>(required=<span class="predefined-constant">true</span>)
    <span class="directive">protected</span> <span class="predefined-type">String</span> city;

    <span class="annotation">@XmlElement</span>(required=<span class="predefined-constant">true</span>)
    <span class="directive">protected</span> <span class="predefined-type">String</span> province;

    <span class="annotation">@XmlElement</span>(required=<span class="predefined-constant">true</span>)
    <span class="directive">protected</span> <span class="predefined-type">String</span> zip;

    <span class="annotation">@XmlElement</span>(required=<span class="predefined-constant">true</span>)
    <span class="directive">protected</span> <span class="predefined-type">String</span> country;

    <span class="directive">public</span> Address() { }

    <span class="comment">// Getter and setter methods</span>
    <span class="comment">// ...</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@XmlRootElement(name="address")</code> annotation maps this class to the
<code>address</code> XML element. The <code>@XmlAccessorType(XmlAccessType.FIELD)</code>
annotation specifies that all the fields of this class are bound to XML
by default. The <code>@XmlElement(required=true)</code> annotation specifies that
an element must be present in the XML representation.</p>
</div>
<div class="paragraph">
<p>The following class represents a customer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="annotation">@Table</span>(name=<span class="string"><span class="delimiter">&quot;</span><span class="content">CUSTOMER_CUSTOMER</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@NamedQuery</span>(
    name=<span class="string"><span class="delimiter">&quot;</span><span class="content">findAllCustomers</span><span class="delimiter">&quot;</span></span>,
    query=<span class="string"><span class="delimiter">&quot;</span><span class="content">SELECT c FROM Customer c </span><span class="delimiter">&quot;</span></span> +
          <span class="string"><span class="delimiter">&quot;</span><span class="content">ORDER BY c.id</span><span class="delimiter">&quot;</span></span>
)
<span class="annotation">@XmlRootElement</span>(name=<span class="string"><span class="delimiter">&quot;</span><span class="content">customer</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@XmlAccessorType</span>(XmlAccessType.FIELD)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Customer</span> {
    <span class="annotation">@Id</span>
    <span class="annotation">@GeneratedValue</span>(strategy = GenerationType.AUTO)
    <span class="annotation">@XmlAttribute</span>(required=<span class="predefined-constant">true</span>)
    <span class="directive">protected</span> <span class="type">int</span> id;

    <span class="annotation">@XmlElement</span>(required=<span class="predefined-constant">true</span>)
    <span class="directive">protected</span> <span class="predefined-type">String</span> firstname;

    <span class="annotation">@XmlElement</span>(required=<span class="predefined-constant">true</span>)
    <span class="directive">protected</span> <span class="predefined-type">String</span> lastname;

    <span class="annotation">@XmlElement</span>(required=<span class="predefined-constant">true</span>)
    <span class="annotation">@OneToOne</span>
    <span class="directive">protected</span> Address address;

    <span class="annotation">@XmlElement</span>(required=<span class="predefined-constant">true</span>)
    <span class="directive">protected</span> <span class="predefined-type">String</span> email;

    <span class="annotation">@XmlElement</span> (required=<span class="predefined-constant">true</span>)
    <span class="directive">protected</span> <span class="predefined-type">String</span> phone;

    <span class="directive">public</span> Customer() {...}

    <span class="comment">// Getter and setter methods</span>
    <span class="comment">// ...</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Customer</code> class contains the same Jakarta XML Binding annotations as the previous
class, except for the <code>@XmlAttribute(required=true)</code> annotation, which
maps a property to an attribute of the XML element representing the
class.</p>
</div>
<div class="paragraph">
<p>The <code>Customer</code> class contains a property whose type is another entity,
the <code>Address</code> class. This mechanism allows you to define in Java code
the hierarchical relationships between entities without having to write
an <code>.xsd</code> file yourself.</p>
</div>
<div class="paragraph">
<p>Jakarta XML Binding generates the following XML schema definition for the two preceding
classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;</span>
<span class="tag">&lt;xs:schema</span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

  <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">customer</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">customer</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

  <span class="tag">&lt;xs:complexType</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;xs:sequence&gt;</span>
      <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:long</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">minOccurs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">0</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:int</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">street</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">city</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">province</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">zip</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/xs:sequence&gt;</span>
  <span class="tag">&lt;/xs:complexType&gt;</span>

  <span class="tag">&lt;xs:complexType</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">customer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;xs:sequence&gt;</span>
      <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">firstname</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">lastname</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xs:element</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">email</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">phone</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/xs:sequence&gt;</span>
    <span class="tag">&lt;xs:attribute</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:int</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">use</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/xs:complexType&gt;</span>
<span class="tag">&lt;/xs:schema&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GKLGT"></a><a id="the-customerservice-class"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="the-customerservice-class"><a class="anchor" href="#the-customerservice-class"></a>The CustomerService Class</h4>
<div class="paragraph">
<p>The <code>CustomerService</code> class has a <code>createCustomer</code> method that creates a
customer resource based on the <code>Customer</code> class and returns a URI for
the new resource.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Stateless</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/Customer</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">CustomerService</span> {
    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">Logger</span> logger =
            <span class="predefined-type">Logger</span>.getLogger(CustomerService.class.getCanonicalName());
    <span class="annotation">@PersistenceContext</span>
    <span class="directive">private</span> EntityManager em;
    <span class="directive">private</span> CriteriaBuilder cb;

    <span class="annotation">@PostConstruct</span>
    <span class="directive">private</span> <span class="type">void</span> init() {
        cb = em.getCriteriaBuilder();
    }
    ...
    <span class="annotation">@POST</span>
    <span class="annotation">@Consumes</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="directive">public</span> Response createCustomer(Customer customer) {

        <span class="keyword">try</span> {
            <span class="type">long</span> customerId = persist(customer);
            <span class="keyword">return</span> Response.created(<span class="predefined-type">URI</span>.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span> + customerId)).build();
        } <span class="keyword">catch</span> (<span class="exception">Exception</span> e) {
            logger.log(<span class="predefined-type">Level</span>.SEVERE,
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">Error creating customer for customerId {0}. {1}</span><span class="delimiter">&quot;</span></span>,
                    <span class="keyword">new</span> <span class="predefined-type">Object</span><span class="type">[]</span>{customer.getId(), e.getMessage()});
            <span class="keyword">throw</span> <span class="keyword">new</span> WebApplicationException(e,
                    Response.Status.INTERNAL_SERVER_ERROR);
        }
    }
    ...
    private <span class="type">long</span> persist(Customer customer) {
        <span class="keyword">try</span> {
            Address address = customer.getAddress();
            em.persist(address);
            em.persist(customer);
        } <span class="keyword">catch</span> (<span class="exception">Exception</span> ex) {
            logger.warning(<span class="string"><span class="delimiter">&quot;</span><span class="content">Something went wrong when persisting the customer</span><span class="delimiter">&quot;</span></span>);
        }
        <span class="keyword">return</span> customer.getId();
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response returned to the client has a URI to the newly created
resource. The return type is an entity body mapped from the property of
the response with the status code specified by the status property of
the response. The <code>WebApplicationException</code> is a <code>RuntimeException</code> that
is used to wrap the appropriate HTTP error status code, such as 404,
406, 415, or 500.</p>
</div>
<div class="paragraph">
<p>The <code>@Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})</code>
and <code>@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})</code>
annotations set the request and response media types to use the
appropriate MIME client. These annotations can be applied to a resource
method, a resource class, or even an entity provider. If you do not use
these annotations, Jakarta REST allows the use of any media type (<code>"<strong>/</strong>"</code>).</p>
</div>
<div class="paragraph">
<p>The following code snippet shows the implementation of the <code>getCustomer</code>
and <code>findbyId</code> methods. The <code>getCustomer</code> method uses the <code>@Produces</code>
annotation and returns a <code>Customer</code> object, which is converted to an XML
or JSON representation depending on the <code>Accept:</code> header specified by
the client.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@GET</span>
    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">{id}</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@Produces</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="directive">public</span> Customer getCustomer(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> customerId) {
        Customer customer = <span class="predefined-constant">null</span>;

        <span class="keyword">try</span> {
            customer = findById(customerId);
        } <span class="keyword">catch</span> (<span class="exception">Exception</span> ex) {
            logger.log(<span class="predefined-type">Level</span>.SEVERE,
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">Error calling findCustomer() for customerId {0}. {1}</span><span class="delimiter">&quot;</span></span>,
                    <span class="keyword">new</span> <span class="predefined-type">Object</span><span class="type">[]</span>{customerId, ex.getMessage()});
        }
        <span class="keyword">return</span> customer;
    }
    ...
    private Customer findById(<span class="predefined-type">String</span> customerId) {
        Customer customer = <span class="predefined-constant">null</span>;
        <span class="keyword">try</span> {
            customer = em.find(Customer.class, customerId);
            <span class="keyword">return</span> customer;
        } <span class="keyword">catch</span> (<span class="exception">Exception</span> ex) {
            logger.log(<span class="predefined-type">Level</span>.WARNING,
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">Couldn't find customer with ID of {0}</span><span class="delimiter">&quot;</span></span>, customerId);
        }
        <span class="keyword">return</span> customer;
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="GKQJQ"></a><a id="using-the-jax-rs-client-in-the-customerbean-classes"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="using-the-jakarta-rest-client-in-the-customerbean-classes"><a class="anchor" href="#using-the-jakarta-rest-client-in-the-customerbean-classes"></a>Using the Jakarta REST Client in the CustomerBean Classes</h4>
<div class="paragraph">
<p>Use the Jakarta REST Client API to write a client for the <code>customer</code> example
application.</p>
</div>
<div class="paragraph">
<p>The <code>CustomerBean</code> enterprise bean class calls the Jakarta REST Client API to
test the <code>CustomerService</code> web service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Named</span>
<span class="annotation">@Stateless</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">CustomerBean</span> {
    <span class="directive">protected</span> Client client;
    <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">Logger</span> logger =
            <span class="predefined-type">Logger</span>.getLogger(CustomerBean.class.getName());

    <span class="annotation">@PostConstruct</span>
    <span class="directive">private</span> <span class="type">void</span> init() {
        client = ClientBuilder.newClient();
    }

    <span class="annotation">@PreDestroy</span>
    <span class="directive">private</span> <span class="type">void</span> clean() {
        client.close();
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> createCustomer(Customer customer) {
        <span class="keyword">if</span> (customer == <span class="predefined-constant">null</span>) {
            logger.log(<span class="predefined-type">Level</span>.WARNING, <span class="string"><span class="delimiter">&quot;</span><span class="content">customer is null.</span><span class="delimiter">&quot;</span></span>);
            <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">customerError</span><span class="delimiter">&quot;</span></span>;
        }
        <span class="predefined-type">String</span> navigation;
        Response response =
                client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://localhost:8080/customer/webapi/Customer</span><span class="delimiter">&quot;</span></span>)
                .request(MediaType.APPLICATION_XML)
                .post(<span class="predefined-type">Entity</span>.entity(customer, MediaType.APPLICATION_XML),
                        Response.class);
        <span class="keyword">if</span> (response.getStatus() == Status.CREATED.getStatusCode()) {
            navigation = <span class="string"><span class="delimiter">&quot;</span><span class="content">customerCreated</span><span class="delimiter">&quot;</span></span>;
        } <span class="keyword">else</span> {
            logger.log(<span class="predefined-type">Level</span>.WARNING, <span class="string"><span class="delimiter">&quot;</span><span class="content">couldn''t create customer with </span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">id {0}. Status returned was {1}</span><span class="delimiter">&quot;</span></span>,
                    <span class="keyword">new</span> <span class="predefined-type">Object</span><span class="type">[]</span>{customer.getId(), response.getStatus()});
            navigation = <span class="string"><span class="delimiter">&quot;</span><span class="content">customerError</span><span class="delimiter">&quot;</span></span>;
        }
        <span class="keyword">return</span> navigation;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> retrieveCustomer(<span class="predefined-type">String</span> id) {
        <span class="predefined-type">String</span> navigation;
        Customer customer =
                client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://localhost:8080/customer/webapi/Customer</span><span class="delimiter">&quot;</span></span>)
                .path(id)
                .request(MediaType.APPLICATION_XML)
                .get(Customer.class);
        <span class="keyword">if</span> (customer == <span class="predefined-constant">null</span>) {
            navigation = <span class="string"><span class="delimiter">&quot;</span><span class="content">customerError</span><span class="delimiter">&quot;</span></span>;
        } <span class="keyword">else</span> {
            navigation = <span class="string"><span class="delimiter">&quot;</span><span class="content">customerRetrieved</span><span class="delimiter">&quot;</span></span>;
        }
        <span class="keyword">return</span> navigation;
    }

    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Customer&gt; retrieveAllCustomers() {
        <span class="predefined-type">List</span>&lt;Customer&gt; customers =
                client.target(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://localhost:8080/customer/webapi/Customer</span><span class="delimiter">&quot;</span></span>)
                .path(<span class="string"><span class="delimiter">&quot;</span><span class="content">all</span><span class="delimiter">&quot;</span></span>)
                .request(MediaType.APPLICATION_XML)
                .get(<span class="keyword">new</span> GenericType&lt;<span class="predefined-type">List</span>&lt;Customer&gt;&gt;() {});
        <span class="keyword">return</span> customers;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This client uses the <code>POST</code> and <code>GET</code> methods.</p>
</div>
<div class="paragraph">
<p>All of these HTTP status codes indicate success: 201 for <code>POST</code>, 200 for
<code>GET</code>, and 204 for <code>DELETE</code>. For details about the meanings of HTTP
status codes, see
<code><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html" class="bare">http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html</a></code>.</p>
</div>
<div class="paragraph">
<p><a id="GKQKV"></a><a id="running-the-customer-example"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="running-the-customer-example"><a class="anchor" href="#running-the-customer-example"></a>Running the customer Example</h4>
<div class="paragraph">
<p>You can use either NetBeans IDE or Maven to build, package, deploy, and
run the <code>customer</code> application.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#GKQLY">To Build, Package, and Deploy the customer Example Using
NetBeans IDE</a></p>
</li>
<li>
<p><a href="#GKQJV">To Build, Package, and Deploy the customer Example Using
Maven</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="GKQLY"></a><a id="to-build-package-and-deploy-the-customer-example-using-netbeans-ide"></a></p>
</div>
<div class="sect4">
<h5 id="to-build-package-and-deploy-the-customer-example-using-netbeans-ide"><a class="anchor" href="#to-build-package-and-deploy-the-customer-example-using-netbeans-ide"></a>To Build, Package, and Deploy the customer Example Using NetBeans IDE</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>From the File menu, choose Open Project.</p>
</li>
<li>
<p>In the Open Project dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/jaxrs</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>customer</code> folder.</p>
</li>
<li>
<p>Click Open Project.</p>
</li>
<li>
<p>In the Projects tab, right-click the <code>customer</code> project and select
Build.</p>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file,
<code>customer.war</code>, located in the <code>target</code> directory. Then, the WAR file is
deployed to GlassFish Server.</p>
</div>
</li>
<li>
<p>Open the web client in a browser at the following URL:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/customer/</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The web client allows you to create and view customers.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="GKQJV"></a><a id="to-build-package-and-deploy-the-customer-example-using-maven"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="to-build-package-and-deploy-the-customer-example-using-maven"><a class="anchor" href="#to-build-package-and-deploy-the-customer-example-using-maven"></a>To Build, Package, and Deploy the customer Example Using Maven</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/jaxrs/customer/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file,
<code>customer.war</code>, located in the <code>target</code> directory. Then, the WAR file is
deployed to GlassFish Server.</p>
</div>
</li>
<li>
<p>Open the web client in a browser at the following URL:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/customer/</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The web client allows you to create and view customers.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-04-26 18:34:55 UTC
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</body>
</html>