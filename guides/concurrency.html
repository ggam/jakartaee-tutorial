<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.2">
<title>Concurrency</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement when using as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Concurrency</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel2">
<li><a href="#jakarta-concurrency">Jakarta Concurrency</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect2">
<h3 id="jakarta-concurrency"><a class="anchor" href="#jakarta-concurrency"></a>Jakarta Concurrency</h3>
<div class="paragraph">
<p><a id="GKJIQ8"></a><a id="concurrency-utilities-for-jakarta-ee"></a></p>
</div>
<div class="paragraph">
<p>This chapter describes Jakarta Concurrency spec.</p>
</div>
<div class="paragraph">
<p><a id="CIHDFGGG"></a><a id="concurrency-basics"></a></p>
</div>
<div class="sect3">
<h4 id="concurrency-basics"><a class="anchor" href="#concurrency-basics"></a>Concurrency Basics</h4>
<div class="paragraph">
<p>Concurrency is the concept of executing two or more tasks at the same
time (in parallel). Tasks may include methods (functions), parts of a
program, or even other programs. With current computer architectures,
support for multiple cores and multiple processors in a single CPU is
very common.</p>
</div>
<div class="paragraph">
<p>The Java Platform has always offered support for concurrent programming,
which was the basis for implementing many of the services offered by
Jakarta EE containers. At Java SE 5, additional high-level API support for
concurrency was provided by the <code>java.util.concurrent</code> package.</p>
</div>
<div class="paragraph">
<p><a id="sthref293"></a><a id="threads-and-processes"></a></p>
</div>
<div class="sect4">
<h5 id="threads-and-processes"><a class="anchor" href="#threads-and-processes"></a>Threads and Processes</h5>
<div class="paragraph">
<p>The two main concurrency concepts are processes and threads.</p>
</div>
<div class="paragraph">
<p>Processes are primarily associated with applications running on the
operating system (OS). A process has specific runtime resources to
interact with the underlying OS and allocate other resources, such as
its own memory, just as the JVM process does. A JVM is in fact a
process.</p>
</div>
<div class="paragraph">
<p>The Java programming language and platform are primarily concerned with
threads.</p>
</div>
<div class="paragraph">
<p>Threads share some features with processes, since both consume resources
from the OS or the execution environment. But threads are easier to
create and consume many fewer resources than a process.</p>
</div>
<div class="paragraph">
<p>Because threads are so lightweight, any modern CPU that has a couple of
cores and a few gigabytes of RAM can handle thousands of threads in a
single JVM process. The precise number of threads will depend on the
combined output of the CPU, OS, and RAM available, as well as on correct
configuration (tuning) of the JVM.</p>
</div>
<div class="paragraph">
<p>Although concurrent programming solves many problems and can improve
performance for most applications, there are a number of situations
where multiple execution lines (threads or processes) can cause major
problems. These situations include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Deadlocks</p>
</li>
<li>
<p>Thread starvation</p>
</li>
<li>
<p>Concurrent accessing of shared resources</p>
</li>
<li>
<p>Situations when the program generates incorrect data</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="CIHFBCFH"></a><a id="main-components-of-the-concurrency-utilities"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="main-components-of-the-concurrency-utilities"><a class="anchor" href="#main-components-of-the-concurrency-utilities"></a>Main Components of the Concurrency Utilities</h4>
<div class="paragraph">
<p>Concurrent resources are managed objects that provide concurrency
capabilities to Jakarta EE applications. In GlassFish Server, you configure
concurrent resources and then make them available for use by application
components such as servlets and enterprise beans. Concurrent resources
are accessed through JNDI lookup or resource injection.</p>
</div>
<div class="paragraph">
<p>The primary components of the concurrency utilities are as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ManagedExecutorService</code>: A managed executor service is used by
applications to execute submitted tasks asynchronously. Tasks are
executed on threads that are started and managed by the container. The
context of the container is propagated to the thread executing the task.</p>
<div class="paragraph">
<p>For example, by using an <code>ManagedExecutorService.submit()</code> call, a task,
such as the GenerateReportTask, could be submitted to execute at a later
time and then, by using the <code>Future</code> object callback, retrieve the
result when it becomes available.</p>
</div>
</li>
<li>
<p><code>ManagedScheduledExecutorService</code>: A managed scheduled executor
service is used by applications to execute submitted tasks
asynchronously at specific times. Tasks are executed on threads that are
started and managed by the container. The context of the container is
propagated to the thread executing the task. The API provides the
scheduling functionality that allows users to set a specific date/time
for the Task execution programmatically in the application.</p>
</li>
<li>
<p><code>ContextService</code>: A context service is used to create dynamic proxy
objects that capture the context of a container and enable applications
to run within that context at a later time or be submitted to a Managed
Executor Service. The context of the container is propagated to the
thread executing the task.</p>
</li>
<li>
<p><code>ManagedThreadFactory</code>: A managed thread factory is used by
applications to create managed threads. The threads are started and
managed by the container. The context of the container is propagated to
the thread executing the task. This object can also be used to provide
custom factories for specific use cases (with custom Threads) and, for
example, set specific/proprietary properties to these objects.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="CIHIDBDG"></a><a id="concurrency-and-transactions"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="concurrency-and-transactions"><a class="anchor" href="#concurrency-and-transactions"></a>Concurrency and Transactions</h4>
<div class="paragraph">
<p>The most basic operations for transactions are commit and rollback, but,
in a distributed environment with concurrent processing, it can be
difficult to guarantee that commit or rollback operations will be
successfully processed, and the transaction can be spread among
different threads, CPU cores, physical machines, and networks.</p>
</div>
<div class="paragraph">
<p>Ensuring that a rollback operation will successfully execute in such a
scenario is crucial. Concurrency Utilities relies on Jakarta
Transactions to implement and support transactions on its
components through <code>javax.transaction.UserTransaction</code>, allowing
application developers to explicitly manage transaction boundaries. More
information is available in the Jakarta Transactions specification.</p>
</div>
<div class="paragraph">
<p>Optionally, context objects can begin, commit, or roll back
transactions, but these objects cannot enlist in parent component
transactions.</p>
</div>
<div class="paragraph">
<p>The following code snippet illustrates a <code>Runnable</code> task that obtains a
<code>UserTransaction</code> and then starts and commits a transaction while
interacting with other transactional components, such as an enterprise
bean and a database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">MyTransactionalTask</span> <span class="directive">implements</span> <span class="predefined-type">Runnable</span> {

   UserTransaction ut = ... <span class="comment">// obtained through JNDI or injection</span>

   public <span class="type">void</span> run() {

       <span class="comment">// Start a transaction</span>
       ut.begin();

       <span class="comment">// Invoke a Service or an EJB</span>
       myEJB.businessMethod();

       <span class="comment">// Update a database entity using an XA JDBC driver</span>
       myEJB.updateCustomer(customer);

       <span class="comment">// Commit the transaction</span>
       ut.commit();

   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="CIHCACAA"></a><a id="concurrency-and-security"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="concurrency-and-security"><a class="anchor" href="#concurrency-and-security"></a>Concurrency and Security</h4>
<div class="paragraph">
<p>Jakarta Concurrency defers most security decisions to the
application server implementation. If, however, the container supports a
security context, that context can be propagated to the thread of
execution. The <code>ContextService</code> can support several runtime behaviors,
and the <code>security</code> attribute, if enabled, will propagate the container
security principal.</p>
</div>
<div class="paragraph">
<p><a id="CIHCGGEG"></a><a id="the-jobs-concurrency-example"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="the-jobs-concurrency-example"><a class="anchor" href="#the-jobs-concurrency-example"></a>The jobs Concurrency Example</h4>
<div class="paragraph">
<p>This section describes a very basic example that shows how to use some
of the basic concurrency features in an enterprise application.
Specifically, this example uses one of the main components of
Jakarta Concurrency, a Managed Executor Service.</p>
</div>
<div class="paragraph">
<p>The example demonstrates a scenario where a RESTful web service, exposed
as a public API, is used to submit generic jobs for execution. These
jobs are processed in the background. Each job prints a "Starting" and a
"Finished" message at the beginning and end of the execution. Also, to
simulate background processing, each job takes 10 seconds to execute.</p>
</div>
<div class="paragraph">
<p>The RESTful service exposes two methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/token</code>: Exposed as a GET method that registers and returns valid API
tokens</p>
</li>
<li>
<p><code>/process</code>: Exposed as a POST method that receives a <code>jobID</code> query
parameter, which is the identifier for the job to be executed, and a
custom HTTP header named <code>X-REST-API-Key,</code> which will be used internally
to validate requests with tokens</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The token is used to differentiate the Quality of Service (QoS) offered
by the API. Users that provide a token in a service request can process
multiple concurrent jobs. However, users that do not provide a token can
process only one job at a time. Since every job takes 10 seconds to
execute, users that provide no token will be able to execute only one
call to the service every 10 seconds. For users that provide a token,
processing will be much faster.</p>
</div>
<div class="paragraph">
<p>This differentiation is made possible by the use of two different
Managed Executor Services, one for each type of request.</p>
</div>
<div class="paragraph">
<p><a id="sthref294"></a><a id="running-the-jobs-example"></a></p>
</div>
<div class="sect4">
<h5 id="running-the-jobs-example"><a class="anchor" href="#running-the-jobs-example"></a>Running the jobs Example</h5>
<div class="paragraph">
<p>After configuring GlassFish Server by adding two Managed Executor
Services, you can use either NetBeans IDE or Maven to build, package,
deploy, and run the <code>jobs</code> example.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#CHDCIBBD">To Configure GlassFish Server for the Basic Concurrency
Example</a></p>
</li>
<li>
<p><a href="#CHDFBAHJ">To Build, Package, and Deploy the jobs Example Using
NetBeans IDE</a></p>
</li>
<li>
<p><a href="#CHDECFFF">To Build, Package, and Deploy the jobs Example Using
Maven</a></p>
</li>
<li>
<p><a href="#CHDFHHAF">To Run the jobs Example and Submit Jobs with Low
Priority</a></p>
</li>
<li>
<p><a href="#CHDHEABJ">To Run the jobs Example and Submit Jobs with High
Priority</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="CHDCIBBD"></a><a id="to-configure-glassfish-server-for-the-basic-concurrency-example"></a></p>
</div>
<div class="sect5">
<h6 id="to-configure-glassfish-server-for-the-basic-concurrency-example"><a class="anchor" href="#to-configure-glassfish-server-for-the-basic-concurrency-example"></a>To Configure GlassFish Server for the Basic Concurrency Example</h6>
<div class="paragraph">
<p>To configure GlassFish Server, follow these steps.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the Administration Console at <code><a href="http://localhost:4848" class="bare">http://localhost:4848</a></code>.</p>
</li>
<li>
<p>Expand the Resources node.</p>
</li>
<li>
<p>Expand the Concurrent Resources node.</p>
</li>
<li>
<p>Click Managed Executor Services.</p>
</li>
<li>
<p>On the Managed Executor Services page, click New to open the New
Managed Executor Services page.</p>
</li>
<li>
<p>In the JNDI Name field, enter <code>MES_High</code> to create the high-priority
Managed Executor Service. Use the following settings (keep the default
values for other settings):</p>
<div class="ulist">
<ul>
<li>
<p>Thread Priority: 10</p>
</li>
<li>
<p>Core Size: 2</p>
</li>
<li>
<p>Maximum Pool Size: 5</p>
</li>
<li>
<p>Task Queue Capacity: 2</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click OK.</p>
</li>
<li>
<p>On the On the Managed Executor Services page, click New again.</p>
</li>
<li>
<p>In the JNDI Name field, enter <code>MES_Low</code> to create the low-priority
Managed Executor Service. Use the following settings (keep the default
values for other settings):</p>
<div class="ulist">
<ul>
<li>
<p>Thread Priority: 1</p>
</li>
<li>
<p>Core Size: 1</p>
</li>
<li>
<p>Maximum Pool Size: 1</p>
</li>
<li>
<p>Task Queue Capacity: 0</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click OK.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="CHDFBAHJ"></a><a id="to-build-package-and-deploy-the-jobs-example-using-netbeans-ide"></a></p>
</div>
</div>
<div class="sect5">
<h6 id="to-build-package-and-deploy-the-jobs-example-using-netbeans-ide"><a class="anchor" href="#to-build-package-and-deploy-the-jobs-example-using-netbeans-ide"></a>To Build, Package, and Deploy the jobs Example Using NetBeans IDE</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>From the File menu, choose Open Project.</p>
</li>
<li>
<p>In the Open Project dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/concurrency</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>jobs</code> folder.</p>
</li>
<li>
<p>Click Open Project.</p>
</li>
<li>
<p>In the Projects tab, right-click the <code>jobs</code> project and select
Build.</p>
<div class="paragraph">
<p>This command builds and deploys the application.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="CHDECFFF"></a><a id="to-build-package-and-deploy-the-jobs-example-using-maven"></a></p>
</div>
</div>
<div class="sect5">
<h6 id="to-build-package-and-deploy-the-jobs-example-using-maven"><a class="anchor" href="#to-build-package-and-deploy-the-jobs-example-using-maven"></a>To Build, Package, and Deploy the jobs Example Using Maven</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/concurrency/jobs</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command to build and deploy the application:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">mvn install</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="CHDFHHAF"></a><a id="to-run-the-jobs-example-and-submit-jobs-with-low-priority"></a></p>
</div>
</div>
<div class="sect5">
<h6 id="to-run-the-jobs-example-and-submit-jobs-with-low-priority"><a class="anchor" href="#to-run-the-jobs-example-and-submit-jobs-with-low-priority"></a>To Run the jobs Example and Submit Jobs with Low Priority</h6>
<div class="paragraph">
<p>To run the example as a user who submits jobs with low priority, follow
these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In a web browser, enter the following URL:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/jobs</span></code></pre>
</div>
</div>
</li>
<li>
<p>In the Jobs Client page, enter the value 1 in the Enter a JobID
field, enter nothing in the Enter a Token field, then click Submit Job.</p>
<div class="paragraph">
<p>The following message should be displayed at the bottom of the page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Job <span class="integer">1</span> successfully submitted</code></pre>
</div>
</div>
<div class="paragraph">
<p>The server log includes the following messages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">INFO:   Invalid or missing token!
INFO:   Task started LOW-<span class="integer">1</span>
INFO:   Job <span class="integer">1</span> successfully submitted
INFO:   Task finished LOW-<span class="integer">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You submitted a job with low priority. This means that you cannot submit
another job for 10 seconds. If you try to do so, the RESTful API will
return a service unavailable (HTTP 503) response and the following
message will be displayed at the bottom of the page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Job <span class="integer">2</span> was NOT submitted</code></pre>
</div>
</div>
<div class="paragraph">
<p>The server log will include the following messages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">INFO:   Invalid or missing token!
INFO:   Job <span class="integer">1</span> successfully submitted
INFO:   Task started LOW-<span class="integer">1</span>
INFO:   Invalid or missing token!
INFO:   Job <span class="integer">2</span> was NOT submitted
INFO:   Task finished LOW-<span class="integer">1</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="CHDHEABJ"></a><a id="to-run-the-jobs-example-and-submit-jobs-with-high-priority"></a></p>
</div>
</div>
<div class="sect5">
<h6 id="to-run-the-jobs-example-and-submit-jobs-with-high-priority"><a class="anchor" href="#to-run-the-jobs-example-and-submit-jobs-with-high-priority"></a>To Run the jobs Example and Submit Jobs with High Priority</h6>
<div class="paragraph">
<p>To run the example as a user who submits jobs with high priority, follow
these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In a web browser, enter the following URL:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/jobs</span></code></pre>
</div>
</div>
</li>
<li>
<p>In the Jobs Client page, enter a value of one to ten digits in the
Enter a JobID field.</p>
</li>
<li>
<p>Click the here link on the line "Get a token here" to get a token.
The page that displays the token will open in a new tab.</p>
</li>
<li>
<p>Copy the token and return to the Jobs Client page.</p>
</li>
<li>
<p>Paste the token in the Enter a Token field, then click Submit Job.</p>
<div class="paragraph">
<p>A message like the following should be displayed at the bottom of the
page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Job <span class="integer">11</span> successfully submitted</code></pre>
</div>
</div>
<div class="paragraph">
<p>The server log includes the following messages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">INFO:   Token accepted. Execution with high priority.
INFO:   Task started HIGH-<span class="integer">11</span>
INFO:   Job <span class="integer">11</span> successfully submitted
INFO:   Task finished HIGH-<span class="integer">11</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You submitted a job with high priority. This means that you can submit
multiple jobs, each with a token, and not face the 10 second per job
restriction that the low priority submitters face. If you submit 3 jobs
with tokens in rapid succession, messages like the following will be
displayed at the bottom of the page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Job <span class="integer">1</span> was submitted
Job <span class="integer">2</span> was submitted
Job <span class="integer">3</span> was submitted</code></pre>
</div>
</div>
<div class="paragraph">
<p>The server log will include the following messages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">INFO:   Token accepted. Execution with high priority.
INFO:   Task started HIGH-<span class="integer">1</span>
INFO:   Job <span class="integer">1</span> successfully submitted
INFO:   Token accepted. Execution with high priority.
INFO:   Task started HIGH-<span class="integer">2</span>
INFO:   Job <span class="integer">2</span> successfully submitted
INFO:   Task finished HIGH-<span class="integer">1</span>
INFO:   Token accepted. Execution with high priority.
INFO:   Task started HIGH-<span class="integer">3</span>
INFO:   Job <span class="integer">3</span> successfully submitted
INFO:   Task finished HIGH-<span class="integer">2</span>
INFO:   Task finished HIGH-<span class="integer">3</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="CIHBFEAE"></a><a id="the-taskcreator-concurrency-example"></a></p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="the-taskcreator-concurrency-example"><a class="anchor" href="#the-taskcreator-concurrency-example"></a>The taskcreator Concurrency Example</h4>
<div class="paragraph">
<p>The <code>taskcreator</code> example demonstrates how to use Jakarta Concurrency
to run tasks immediately, periodically, or after a fixed
delay. This example provides a Jakarta Server Faces interface that enables
users to submit tasks to be executed and displays information messages
for each task. The example uses the Managed Executor Service to run
tasks immediately and the Managed Scheduled Executor Service to run
tasks periodically or after a fixed delay. (See
<a href="#CIHFBCFH">Main Components of the
Concurrency Utilities</a> for information about these services.)</p>
</div>
<div class="paragraph">
<p>The <code>taskcreator</code> example consists of the following components.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A Jakarta Server Faces page (<code>index.xhtml</code>) that contains three elements:
a form to submit tasks, a task execution log, and a form to cancel
periodic tasks. This page submits Ajax requests to create and cancel
tasks. This page also receives WebSocket messages, using JavaScript code
to update the task execution log.</p>
</li>
<li>
<p>A CDI managed bean (<code>TaskCreatorBean</code>) that processes the requests
from the Jakarta Server Faces page. This bean invokes the methods in
<code>TaskEJB</code> to submit new tasks and to cancel periodic tasks.</p>
</li>
<li>
<p>An enterprise bean (<code>TaskEJB</code>) that obtains executor service instances
using resource injection and submits tasks for execution. This bean is
also a JAX-RS web service endpoint. The tasks send information messages
to this endpoint.</p>
</li>
<li>
<p>A WebSocket endpoint (<code>InfoEndpoint</code>) that the enterprise bean uses to
send information messages to the clients.</p>
</li>
<li>
<p>A task class (<code>Task</code>) that implements the <code>Runnable</code> interface. The
<code>run</code> method in this class sends information messages to the web service
endpoint in <code>TaskEJB</code> and sleeps for 1.5 seconds.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#CIHHACFF">Figure 59-1</a> shows the architecture of the <code>taskcreator</code>
example.</p>
</div>
<div id="CIHHACFF" class="paragraph">
<div class="title"><strong>Figure 59-1 Architecture of the taskcreator Example</strong></div>
<p><span class="image"><img src="data:image/png;base64," alt="The figure shows the architecture of the taskcreator example. The Jakarta Server Faces page invokes methods on a CDI-managed bean, which submits task initiation requests to an enterprise bean. The enterprise bean uses a WebSocket endpoint to indicate to clients that an updated task execution log is available."></span></p>
</div>
<div class="paragraph">
<p>The <code>TaskEJB</code> class obtains the default executor service objects from
the application server as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Resource</span>(name=<span class="string"><span class="delimiter">&quot;</span><span class="content">java:comp/DefaultManagedExecutorService</span><span class="delimiter">&quot;</span></span>)
ManagedExecutorService mExecService;

<span class="annotation">@Resource</span>(name=<span class="string"><span class="delimiter">&quot;</span><span class="content">java:comp/DefaultManagedScheduledExecutorService</span><span class="delimiter">&quot;</span></span>)
ManagedScheduledExecutorService sExecService;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>submitTask</code> method in <code>TaskEJB</code> uses these objects to submit tasks
for execution as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> submitTask(Task task, <span class="predefined-type">String</span> type) {
    <span class="comment">/* Use the managed executor objects from the app server */</span>
    <span class="keyword">switch</span> (type) {
        <span class="keyword">case</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">IMMEDIATE</span><span class="delimiter">&quot;</span></span>:
            mExecService.submit(task);
            <span class="keyword">break</span>;
        <span class="keyword">case</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">DELAYED</span><span class="delimiter">&quot;</span></span>:
            sExecService.schedule(task, <span class="integer">3</span>, <span class="predefined-type">TimeUnit</span>.SECONDS);
            <span class="keyword">break</span>;
        <span class="keyword">case</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">PERIODIC</span><span class="delimiter">&quot;</span></span>:
            <span class="predefined-type">ScheduledFuture</span>&lt;?&gt; fut;
            fut = sExecService.scheduleAtFixedRate(task, <span class="integer">0</span>, <span class="integer">8</span>,
                    <span class="predefined-type">TimeUnit</span>.SECONDS);
            periodicTasks.put(task.getName(), fut);
            <span class="keyword">break</span>;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For periodic tasks, <code>TaskEJB</code> keeps a reference to the <code>ScheduledFuture</code>
object, so that the user can cancel the task at any time.</p>
</div>
<div class="paragraph">
<p><a id="sthref296"></a><a id="running-the-taskcreator-example"></a></p>
</div>
<div class="sect4">
<h5 id="running-the-taskcreator-example"><a class="anchor" href="#running-the-taskcreator-example"></a>Running the taskcreator Example</h5>
<div class="paragraph">
<p>This section describes how to build, package, deploy, and run the
<code>taskcreator</code> example using NetBeans IDE or Maven.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#CHDCCJHB">To Build, Package, and Deploy the taskcreator Example
Using NetBeans IDE</a></p>
</li>
<li>
<p><a href="#CHDHJBDD">To Build, Package, and Deploy the taskcreator Example
Using Maven</a></p>
</li>
<li>
<p><a href="#CHDBJGID">To Run the taskcreator Example</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="CHDCCJHB"></a><a id="to-build-package-and-deploy-the-taskcreator-example-using-netbeans-ide"></a></p>
</div>
<div class="sect5">
<h6 id="to-build-package-and-deploy-the-taskcreator-example-using-netbeans-ide"><a class="anchor" href="#to-build-package-and-deploy-the-taskcreator-example-using-netbeans-ide"></a>To Build, Package, and Deploy the taskcreator Example Using NetBeans IDE</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>From the File menu, choose Open Project.</p>
</li>
<li>
<p>In the Open Project dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/concurrency</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>taskcreator</code> folder.</p>
</li>
<li>
<p>Click Open Project.</p>
</li>
<li>
<p>In the Projects tab, right-click the <code>taskcreator</code> project and
select Build.</p>
<div class="paragraph">
<p>This command builds and deploys the application.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="CHDHJBDD"></a><a id="to-build-package-and-deploy-the-taskcreator-example-using-maven"></a></p>
</div>
</div>
<div class="sect5">
<h6 id="to-build-package-and-deploy-the-taskcreator-example-using-maven"><a class="anchor" href="#to-build-package-and-deploy-the-taskcreator-example-using-maven"></a>To Build, Package, and Deploy the taskcreator Example Using Maven</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/concurrency/taskcreator</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command to build and deploy the application:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">mvn install</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="CHDBJGID"></a><a id="to-run-the-taskcreator-example"></a></p>
</div>
</div>
<div class="sect5">
<h6 id="to-run-the-taskcreator-example"><a class="anchor" href="#to-run-the-taskcreator-example"></a>To Run the taskcreator Example</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the following URL in a web browser:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/taskcreator/</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The page contains a form to submit tasks, a task execution log, and a
form to cancel periodic tasks.</p>
</div>
</li>
<li>
<p>Select the Immediate task type, enter a task name, and click the
Submit button. Messages like the following appear in the task execution
log:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="integer">12</span>:<span class="integer">40</span>:<span class="integer">47</span> - IMMEDIATE Task TaskA finished
<span class="integer">12</span>:<span class="integer">40</span>:<span class="integer">45</span> - IMMEDIATE Task TaskA started</code></pre>
</div>
</div>
</li>
<li>
<p>Select the Delayed (3 sec) task type, enter a task name, and click
the Submit button. Messages like the following appear in the task
execution log:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="integer">12</span>:<span class="integer">43</span>:<span class="integer">26</span> - DELAYED Task TaskB finished
<span class="integer">12</span>:<span class="integer">43</span>:<span class="integer">25</span> - DELAYED Task TaskB started
<span class="integer">12</span>:<span class="integer">43</span>:<span class="integer">22</span> - DELAYED Task TaskB submitted</code></pre>
</div>
</div>
</li>
<li>
<p>Select the Periodic (8 sec) task type, enter a task name, and click
the Submit button. Messages like the following appear in the task
execution log:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="integer">12</span>:<span class="integer">45</span>:<span class="integer">25</span> - PERIODIC Task TaskC finished run <span class="error">#</span><span class="integer">2</span>
<span class="integer">12</span>:<span class="integer">45</span>:<span class="integer">23</span> - PERIODIC Task TaskC started run <span class="error">#</span><span class="integer">2</span>
<span class="integer">12</span>:<span class="integer">45</span>:<span class="integer">17</span> - PERIODIC Task TaskC finished run <span class="error">#</span><span class="integer">1</span>
<span class="integer">12</span>:<span class="integer">45</span>:<span class="integer">15</span> - PERIODIC Task TaskC started run <span class="error">#</span><span class="integer">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can add more than one periodic task. To cancel a periodic task,
select it from the form and click Cancel Task.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="CHDBIHAA"></a><a id="further-information-about-the-concurrency-utilities"></a></p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="further-information-about-jakarta-concurrency"><a class="anchor" href="#further-information-about-jakarta-concurrency"></a>Further Information about Jakarta Concurrency</h4>
<div class="paragraph">
<p>For more information about concurrency, see</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Jakarta Concurrency 1.1 specification:</p>
<div class="paragraph">
<p><code><a href="https://jakarta.ee/specifications/concurrency/1.1/" class="bare">https://jakarta.ee/specifications/concurrency/1.1/</a></code></p>
</div>
</li>
<li>
<p>Concurrency Utilities specification:</p>
<div class="paragraph">
<p><code><a href="http://jcp.org/en/jsr/detail?id=166" class="bare">http://jcp.org/en/jsr/detail?id=166</a></code></p>
</div>
</li>
<li>
<p>Concurrency Lesson in The Java Tutorials:</p>
<div class="paragraph">
<p><code><a href="http://docs.oracle.com/javase/tutorial/essential/concurrency/" class="bare">http://docs.oracle.com/javase/tutorial/essential/concurrency/</a></code></p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-04-26 15:37:21 UTC
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</body>
</html>