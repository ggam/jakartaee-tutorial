<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.2">
<title>Resource Adapters</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement when using as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Resource Adapters</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel2">
<li><a href="#resource-adapters-and-contracts">Resource Adapters and Contracts</a></li>
<li><a href="#the-resource-adapter-examples">The Resource Adapter Examples</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect2">
<h3 id="resource-adapters-and-contracts"><a class="anchor" href="#resource-adapters-and-contracts"></a>Resource Adapters and Contracts</h3>
<div class="paragraph">
<p><a id="BNCJH"></a><a id="resource-adapters-and-contracts"></a></p>
</div>
<div class="paragraph">
<p>This chapter examines resource adapters and explains how communications
between Jakarta EE servers and EIS systems are mediated by them.</p>
</div>
<div class="paragraph">
<p><a id="GIPGL"></a><a id="what-is-a-resource-adapter"></a></p>
</div>
<div class="sect3">
<h4 id="what-is-a-resource-adapter"><a class="anchor" href="#what-is-a-resource-adapter"></a>What Is a Resource Adapter?</h4>
<div class="paragraph">
<p>A resource adapter is a Jakarta EE component that implements the Jakarta Connectors API
for a specific EIS. Examples of EISs include
enterprise resource planning, mainframe transaction processing, and
database systems. In a Jakarta EE server, Jakarta Messaging and
Jakarta Mail also act as EISs that you access using resource adapters. As
illustrated in <a href="#GJTZO">Figure 55-1</a>, the resource adapter
facilitates communication between a Jakarta EE application and an EIS.</p>
</div>
<div id="GJTZO" class="paragraph">
<div class="title"><strong>Figure 55-1 Resource Adapters</strong></div>
<p><span class="image"><img src="data:image/png;base64," alt="Resource Adapter Contracts"></span></p>
</div>
<div class="paragraph">
<p>Stored in a Resource Adapter Archive (RAR) file, a resource adapter can
be deployed on any Jakarta EE server, much like a Jakarta EE application. A
RAR file may be contained in an Enterprise Archive (EAR) file, or it may
exist as a separate file.</p>
</div>
<div class="paragraph">
<p>A resource adapter is analogous to a JDBC driver. Both provide a
standard API through which an application can access a resource that is
outside the Jakarta EE server. For a resource adapter, the target system is
an EIS; for a JDBC driver, it is a DBMS. Resource adapters and JDBC
drivers are rarely created by application developers. In most cases,
both types of software are built by vendors that sell tools, servers, or
integration software.</p>
</div>
<div class="paragraph">
<p>The resource adapter mediates communication between the Jakarta EE server
and the EIS by means of contracts. The application contract defines the
API through which a Jakarta EE component, such as an enterprise bean,
accesses the EIS. This API is the only view that the component has of
the EIS. The system contracts link the resource adapter to important
services that are managed by the Jakarta EE server. The resource adapter
itself and its system contracts are transparent to the Jakarta EE
component.</p>
</div>
<div class="paragraph">
<p><a id="GIPGY"></a><a id="management-contracts"></a></p>
</div>
<div class="sect4">
<h5 id="management-contracts"><a class="anchor" href="#management-contracts"></a>Management Contracts</h5>
<div class="paragraph">
<p>Jakarta Connectors defines system contracts that enable
resource adapter lifecycle and thread management.</p>
</div>
<div class="paragraph">
<p><a id="GIPHT"></a><a id="lifecycle-management"></a></p>
</div>
<div class="sect5">
<h6 id="lifecycle-management"><a class="anchor" href="#lifecycle-management"></a>Lifecycle Management</h6>
<div class="paragraph">
<p>Jakarta Connectors specifies a lifecycle management contract
that allows an application server to manage the lifecycle of a resource
adapter. This contract provides a mechanism for the application server
to bootstrap a resource adapter instance during the deployment or
application server startup. This contract also provides a means for the
application server to notify the resource adapter instance when it is
undeployed or when an orderly shutdown of the application server takes
place.</p>
</div>
<div class="paragraph">
<p><a id="GIPIG"></a><a id="work-management-contract"></a></p>
</div>
</div>
<div class="sect5">
<h6 id="work-management-contract"><a class="anchor" href="#work-management-contract"></a>Work Management Contract</h6>
<div class="paragraph">
<p>Jakarta Connectors work management contract ensures that
resource adapters use threads in the proper, recommended manner. This
contract also enables an application server to manage threads for
resource adapters.</p>
</div>
<div class="paragraph">
<p>Resource adapters that improperly use threads can jeopardize the entire
application server environment. For example, a resource adapter might
create too many threads or might not properly release threads it has
created. Poor thread handling inhibits application server shutdown and
impacts the application server&#8217;s performance because creating and
destroying threads are expensive operations.</p>
</div>
<div class="paragraph">
<p>The work management contract establishes a means for the application
server to pool and reuse threads, similar to pooling and reusing
connections. By adhering to this contract, the resource adapter does not
have to manage threads itself. Instead, the resource adapter has the
application server create and provide needed threads. When it is
finished with a given thread, the resource adapter returns the thread to
the application server. The application server manages the thread,
either returning it to a pool for later reuse or destroying it. Handling
threads in this manner results in increased application server
performance and more efficient use of resources.</p>
</div>
<div class="paragraph">
<p>In addition to moving thread management to the application server, the
Connector Architecture provides a flexible model for a resource adapter
that uses threads.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The requesting thread can choose to block (stop its own execution)
until the work thread completes.</p>
</li>
<li>
<p>The requesting thread can block while it waits to get the work thread.
When the application server provides a work thread, the requesting
thread and the work thread execute in parallel.</p>
</li>
<li>
<p>The resource adapter can opt to submit the work for the thread to a
queue. The thread executes the work from the queue at some later point.
The resource adapter continues its own execution from the point it
submitted the work to the queue, no matter when the thread executes it.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With the latter two approaches, the submitting thread and the work
thread may execute simultaneously or independently. For these
approaches, the contract specifies a listener mechanism to notify the
resource adapter that the thread has completed its operation. The
resource adapter can also specify the execution context for the thread,
and the work management contract controls the context in which the
thread executes.</p>
</div>
<div class="paragraph">
<p><a id="GIPMK"></a><a id="generic-work-context-contract"></a></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="generic-work-context-contract"><a class="anchor" href="#generic-work-context-contract"></a>Generic Work Context Contract</h5>
<div class="paragraph">
<p>The work management contract between the application server and a
resource adapter enables a resource adapter to do a task, such as
communicating with the EIS or delivering messages, by delivering <code>Work</code>
instances for execution.</p>
</div>
<div class="paragraph">
<p>A generic work context contract enables a resource adapter to control
the contexts in which the <code>Work</code> instances that it submits are executed
by the application server&#8217;s <code>WorkManager</code>. A generic work context
mechanism also enables an application server to support message inflow
and delivery schemes. It also provides a richer contextual <code>Work</code>
execution environment to the resource adapter while still maintaining
control over concurrent behavior in a managed environment.</p>
</div>
<div class="paragraph">
<p>The generic work context contract standardizes the transaction context
and the security context.</p>
</div>
<div class="paragraph">
<p><a id="GKCKI"></a><a id="outbound-and-inbound-contracts"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="outbound-and-inbound-contracts"><a class="anchor" href="#outbound-and-inbound-contracts"></a>Outbound and Inbound Contracts</h5>
<div class="paragraph">
<p>The Connector Architecture defines the following outbound contracts,
system-level contracts between an application server and an EIS that
enable outbound connectivity to an EIS.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The connection management contract supports connection pooling, a
technique that enhances application performance and scalability.
Connection pooling is transparent to the application, which simply
obtains a connection to the EIS.</p>
</li>
<li>
<p>The transaction management contract extends the connection management
contract and provides support for management of both local and XA
transactions.</p>
<div class="paragraph">
<p>A local transaction is limited in scope to a single EIS system, and the
EIS resource manager itself manages such a transaction. An XA
transaction or global transaction can span multiple resource managers.
This form of transaction requires transaction coordination by an
external transaction manager, typically bundled with an application
server. A transaction manager uses a two-phase commit protocol to manage
a transaction that spans multiple resource managers or EISs, and uses
one-phase commit optimization if only one resource manager is
participating in an XA transaction.</p>
</div>
</li>
<li>
<p>The security management contract provides mechanisms for
authentication, authorization, and secure communication between a Java
EE server and an EIS to protect the information in the EIS.</p>
<div class="paragraph">
<p>A work security map matches EIS identities to the application server
domain&#8217;s identities.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Inbound contracts are system contracts between a Jakarta EE server and an
EIS that enable inbound connectivity from the EIS: pluggability
contracts for message providers and contracts for importing
transactions.</p>
</div>
<div class="paragraph">
<p><a id="GIRDD"></a><a id="metadata-annotations"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="metadata-annotations"><a class="anchor" href="#metadata-annotations"></a>Metadata Annotations</h4>
<div class="paragraph">
<p>Jakarta Connectors provides a set of annotations to minimize
the need for deployment descriptors.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>@Connector</code> annotation can be used by the resource adapter
developer to specify that the JavaBeans component is a resource adapter
JavaBeans component. This annotation is used for providing metadata
about the capabilities of the resource adapter. Optionally, you can
provide a JavaBeans component implementing the <code>ResourceAdapter</code>
interface, as in the following example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Connector</span>(
    displayName = <span class="string"><span class="delimiter">&quot;</span><span class="content">TrafficResourceAdapter</span><span class="delimiter">&quot;</span></span>,
    vendorName = <span class="string"><span class="delimiter">&quot;</span><span class="content">Jakarta EE Tutorial</span><span class="delimiter">&quot;</span></span>,
    version = <span class="string"><span class="delimiter">&quot;</span><span class="content">7.0</span><span class="delimiter">&quot;</span></span>
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">TrafficResourceAdapter</span> <span class="directive">implements</span> ResourceAdapter,
                                               <span class="predefined-type">Serializable</span> {
    ...
}</code></pre>
</div>
</div>
</li>
<li>
<p>The <code>@ConnectionDefinition</code> annotation defines a set of connection
interfaces and classes pertaining to a particular connection type, as in
the following example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ConnectionDefinition</span>(
    connectionFactory = ConnectionFactory.class,
    connectionFactoryImpl = TradeConnectionFactory.class,
    connection = <span class="predefined-type">Connection</span>.class,
    connectionImpl = TradeConnection.class
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">TradeManagedConnectionFactory</span> ... {
    ...
}</code></pre>
</div>
</div>
</li>
<li>
<p>The <code>@AdministeredObject</code> annotation designates a JavaBeans component
as an administered object.</p>
</li>
<li>
<p>The <code>@Activation</code> annotation contains configuration information
pertaining to inbound connectivity from an EIS instance, as in the
following example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Activation</span>(
        messageListeners = { TrafficListener.class }
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">TrafficActivationSpec</span> <span class="directive">implements</span> ActivationSpec,
                                              <span class="predefined-type">Serializable</span> {
    ...
    <span class="annotation">@ConfigProperty</span>()
    <span class="comment">/* port to listen to requests from the EIS */</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> port;
    ...
}</code></pre>
</div>
</div>
</li>
<li>
<p>The <code>@ConfigProperty</code> annotation can be used on JavaBeans components
to provide additional configuration information that may be used by the
deployer and resource adapter provider. The preceding example code shows
several <code>@ConfigProperty</code> annotations.</p>
</li>
<li>
<p>The <code>@ConnectionFactoryDefinition</code> annotation is a resource definition
annotation that is used to define a connector connection factory and
register it in JNDI under the name specified in the mandatory <code>name</code>
annotation element. The mandatory <code>interfaceName</code> annotation element
specifies the fully qualified name of the connection factory interface
class. The <code>transactionSupport</code> annotation element specifies the level
of transaction support the connection factory needs to support. The
<code>minPoolSize</code> and <code>maxPoolSize</code> annotation elements specify the minimum
or maximum number of connections that should be allocated for a
connection pool that backs this connection factory resource. Additional
properties associated with the connection factory being defined can be
specified through the <code>properties</code> element.</p>
<div class="paragraph">
<p>Since repeated annotations are not allowed, the
<code>@ConnectionFactoryDefinitions</code> annotation acts as a container for
multiple connector connection factory definitions. The <code>value</code>
annotation element contains the multiple connector connection factory
definitions.</p>
</div>
</li>
<li>
<p>The <code>@AdministeredObjectDefinition</code> annotation is a resource
definition annotation that is used to define an administered object and
register it in JNDI under the name specified in the mandatory <code>name</code>
annotation element. The mandatory fully qualified name of the
administered object&#8217;s class must be indicated by the <code>className</code>
element. Additional properties that must be configured in the
administered object can be specified through the <code>properties</code> element.</p>
<div class="paragraph">
<p>Since repeated annotations are not allowed, the
<code>@AdministeredObjectDefinitions</code> annotation acts as a container for
multiple administered object definitions. The <code>value</code> annotation element
contains the multiple administered object definitions.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The specification allows a resource adapter to be developed in
mixed-mode form, that is the ability for a resource adapter developer to
use both metadata annotations and deployment descriptors in
applications. An application assembler or deployer may use the
deployment descriptor to override the metadata annotations specified by
the resource adapter developer.</p>
</div>
<div class="paragraph">
<p>The deployment descriptor for a resource adapter, if present, is named
<code>ra.xml</code>. The <code>metadata-complete</code> attribute defines whether the
deployment descriptor for the resource adapter module is complete or
whether the class files available to the module and packaged with the
resource adapter need to be examined for annotations that specify
deployment information.</p>
</div>
<div class="paragraph">
<p>For the complete list of annotations and JavaBeans components provided
in the Jakarta EE platform, see the Jakarta Connectors 1.7
specification.</p>
</div>
<div class="paragraph">
<p><a id="GIPJU"></a><a id="common-client-interface"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="common-client-interface"><a class="anchor" href="#common-client-interface"></a>Common Client Interface</h4>
<div class="paragraph">
<p>This section explains how components use the Jakarta Connectors
Common Client Interface (CCI) API and a resource adapter to access data
from an EIS. The CCI API defines a set of interfaces and classes whose
methods allow a client to perform typical data access operations. The
CCI interfaces and classes are as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ConnectionFactory</code>: Provides an application component with a
<code>Connection</code> instance to an EIS.</p>
</li>
<li>
<p><code>Connection</code>: Represents the connection to the underlying EIS.</p>
</li>
<li>
<p><code>ConnectionSpec</code>: Provides a means for an application component to
pass connection-request-specific properties to the <code>ConnectionFactory</code>
when making a connection request.</p>
</li>
<li>
<p><code>Interaction</code>: Provides a means for an application component to
execute EIS functions, such as database stored procedures.</p>
</li>
<li>
<p><code>InteractionSpec</code>: Holds properties pertaining to an application
component&#8217;s interaction with an EIS.</p>
</li>
<li>
<p><code>Record</code>: The superinterface for the various kinds of record
instances. Record instances can be <code>MappedRecord</code>, <code>IndexedRecord</code>, or
<code>ResultSet</code> instances, all of which inherit from the <code>Record</code> interface.</p>
</li>
<li>
<p><code>RecordFactory</code>: Provides an application component with a <code>Record</code>
instance.</p>
</li>
<li>
<p><code>IndexedRecord</code>: Represents an ordered collection of <code>Record</code>
instances based on the <code>java.util.List</code> interface.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A client or application component that uses the CCI to interact with an
underlying EIS does so in a prescribed manner. The component must
establish a connection to the EIS&#8217;s resource manager, and it does so
using the <code>ConnectionFactory</code>. The <code>Connection</code> object represents the
connection to the EIS and is used for subsequent interactions with the
EIS.</p>
</div>
<div class="paragraph">
<p>The component performs its interactions with the EIS, such as accessing
data from a specific table, using an <code>Interaction</code> object. The
application component defines the Interaction object by using an
<code>InteractionSpec</code> object. When it reads data from the EIS, such as from
database tables, or writes to those tables, the application component
does so by using a particular type of <code>Record</code> instance: a
<code>MappedRecord</code>, an <code>IndexedRecord</code>, or a <code>ResultSet</code> instance.</p>
</div>
<div class="paragraph">
<p>Note, too, that a client application that relies on a CCI resource
adapter is very much like any other Jakarta EE client that uses enterprise
bean methods.</p>
</div>
<div class="paragraph">
<p><a id="CHDJFIGB"></a><a id="using-resource-adapters-with-contexts-and-dependency-injection-for-jakarta-ee-cdi"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="using-resource-adapters-with-jakarta-contexts-and-dependency-injection-cdi"><a class="anchor" href="#using-resource-adapters-with-jakarta-contexts-and-dependency-injection-cdi"></a>Using Resource Adapters with Jakarta Contexts and Dependency Injection (CDI)</h4>
<div class="paragraph">
<p>For details about CDI, see <a href="#GIWHB">Chapter 25,
"Introduction to Jakarta EE Contexts and Dependency Injection"</a> and
<a href="#GJEHI">Chapter 27, "Jakarta Contexts and Dependency Injection: Advanced Topics."</a></p>
</div>
<div class="paragraph">
<p>Do not specify the following classes in the resource adapter as CDI
managed beans (that is, do not inject them), because the behavior of
these classes as CDI managed beans has not been portably defined.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Resource adapter beans: These beans are classes that are annotated
with the <code>javax.resource.spi.Connector</code> annotation or are declared as
corresponding elements in the resource adapter deployment descriptor,
<code>ra.xml</code>.</p>
</li>
<li>
<p>Managed connection factory beans: These beans are classes that are
annotated with the <code>javax.resource.spi.ConnectorDefinition</code> annotation
or the <code>javax.resource.spi.ConnectorDefinitions</code> annotation or are
declared as corresponding elements in <code>ra.xml</code>.</p>
</li>
<li>
<p>Activation specification beans: These beans are classes that are
annotated with the <code>javax.resource.spi.Activation</code> annotation or are
declared as corresponding elements in <code>ra.xml</code>.</p>
</li>
<li>
<p>Administered object beans: These beans are classes that are annotated
with the <code>javax.resource.spi.AdministeredObject</code> annotation or are
declared as corresponding elements in <code>ra.xml</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Other types of classes in the resource adapter can be CDI managed beans
and will behave in a portable manner.</p>
</div>
<div class="paragraph">
<p><a id="BNCJW"></a><a id="further-information-about-resource-adapters"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="further-information-about-resource-adapters"><a class="anchor" href="#further-information-about-resource-adapters"></a>Further Information about Resource Adapters</h4>
<div class="paragraph">
<p>For more information about resource adapters and annotations, see</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Jakarta EE 8 Platform Specification:</p>
<div class="paragraph">
<p><code><a href="https://jakarta.ee/specifications/platform/" class="bare">https://jakarta.ee/specifications/platform/</a></code></p>
</div>
</li>
<li>
<p>Jakarta EE Connector Architecture 1.7 specification:</p>
<div class="paragraph">
<p><code><a href="https://jakarta.ee/specifications/connectors/1.7/" class="bare">https://jakarta.ee/specifications/connectors/1.7/</a></code></p>
</div>
</li>
<li>
<p>Jakarta Enterprise Beans specification:</p>
<div class="paragraph">
<p><code><a href="https://jakarta.ee/specifications/enterprise-beans/3.2/" class="bare">https://jakarta.ee/specifications/enterprise-beans/3.2/</a></code></p>
</div>
</li>
<li>
<p>Jakarta Annotations:</p>
<div class="paragraph">
<p><code><a href="https://jakarta.ee/specifications/annotations/1.3/" class="bare">https://jakarta.ee/specifications/annotations/1.3/</a></code></p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-resource-adapter-examples"><a class="anchor" href="#the-resource-adapter-examples"></a>The Resource Adapter Examples</h3>
<div class="paragraph">
<p><a id="GLODB"></a><a id="the-resource-adapter-examples"></a></p>
</div>
<div class="paragraph">
<p>This chapter describes two examples that demonstrate how to use resource
adapters in Jakarta EE applications and how to implement simple resource
adapters.</p>
</div>
<div class="paragraph">
<p><a id="A1253757"></a><a id="overview-of-the-resource-adapter-examples"></a></p>
</div>
<div class="sect3">
<h4 id="overview-of-the-resource-adapter-examples"><a class="anchor" href="#overview-of-the-resource-adapter-examples"></a>Overview of the Resource Adapter Examples</h4>
<div class="paragraph">
<p>The <code>trading</code> example shows how to use a simple custom client interface
to connect to an EIS from a web application. The resource adapter in
this example implements the outbound contract and the custom client
interface. The <code>traffic</code> example shows how to use a message-driven bean
(MDB) to process traffic information updates from an EIS. The resource
adapter in this example implements the inbound and work management
contracts.</p>
</div>
<div class="paragraph">
<p><a id="CHDFHAID"></a><a id="the-trading-example"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="the-trading-example"><a class="anchor" href="#the-trading-example"></a>The trading Example</h4>
<div class="paragraph">
<p>The <code>trading</code> example demonstrates how to implement and use a simple
outbound resource adapter that submits requests to a legacy EIS using a
TCP socket. The example demonstrates the scenario in
<a href="#CHDHADIG">Figure 56-1</a> and consists of the following modules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>trading-eis</code>: A Java SE program that simulates a legacy EIS</p>
</li>
<li>
<p><code>trading-rar</code>: The outbound resource adapter implementation</p>
</li>
<li>
<p><code>trading-war</code>: A web application that uses the resource adapter</p>
</li>
<li>
<p><code>trading-ear</code>: An enterprise archive that contains the resource
adapter and the web application</p>
</li>
</ul>
</div>
<div id="CHDHADIG" class="paragraph">
<div class="title"><strong>Figure 56-1 The trading Example</strong></div>
<p><span class="image"><img src="data:image/png;base64," alt="This figure shows the trading example components: a deployed WAR and RAR that communicate with the EIS over a TCP socket."></span></p>
</div>
<div class="paragraph">
<p>The <code>trading-eis</code> module is an auxiliary project that resembles a legacy
stock trading execution platform. It contains a Java SE program that
listens for trading requests in plain text on a TCP socket. The program
replies to trading requests with a status value, a confirmation number,
and the dollar amounts for the requested shares and fees. For example, a
request-response pair would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&gt;&gt; BUY <span class="integer">1000</span> ZZZZ MARKET
&lt;&lt; EXECUTED <span class="error">#</span><span class="integer">1234567</span> TOTAL <span class="float">50400.00</span> FEE <span class="float">252.00</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>trading-rar</code> module implements the outbound contract of the Jakarta EE
Connector Architecture to submit requests and obtain responses from the
legacy stock trading execution platform. The <code>trading-rar</code> module
provides and implements a custom client interface for Jakarta EE
applications to use. This interface is simpler than the Common Client
Interface (CCI).</p>
</div>
<div class="paragraph">
<p>The <code>trading-war</code> module is a web application with a Jakarta Server Faces
interface and a managed bean. This application enables clients to submit
trades to the EIS using the resource adapter provided by the
<code>trading-rar</code> module. The <code>trading-war</code> module uses the custom client
interface provided by the resource adapter to obtain connections to the
EIS.</p>
</div>
<div class="paragraph">
<p><a id="CHDFADJD"></a><a id="using-the-outbound-resource-adapter"></a></p>
</div>
<div class="sect4">
<h5 id="using-the-outbound-resource-adapter"><a class="anchor" href="#using-the-outbound-resource-adapter"></a>Using the Outbound Resource Adapter</h5>
<div class="paragraph">
<p>In most cases, Jakarta EE application developers use outbound resource
adapters developed by a third party. Outbound resource adapters either
implement the Common Client Interface (CCI) or provide a custom
interface for applications to interact with the EIS. Outbound resource
adapters provide Jakarta EE applications with the following elements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Connection factories</p>
</li>
<li>
<p>Connection handles</p>
</li>
<li>
<p>Other interfaces and objects specific to the EIS domain</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Jakarta EE applications obtain an instance of the connection factory via
resource injection and then use the factory object to obtain connection
handles to the EIS. The connection handles enable the application to
make requests and obtain information from the EIS.</p>
</div>
<div class="paragraph">
<p>The <code>trading-rar</code> module provides a custom client interface that
consists of the classes listed in <a href="#CHDCHJAC">Table 56-1</a>.</p>
</div>
<div class="paragraph">
<p><a id="sthref242"></a><a id="CHDCHJAC"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 56-1 Classes and Interfaces in the jakarta.tutorial.trading.rar.api
Package</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>API Component</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TradeOrder</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents a trade order for the EIS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TradeResponse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents a response from the EIS to a trade request</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TradeConnection</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Represents a connection handle to the EIS</p>
</div>
<div class="paragraph">
<p>Provides a method for applications to submit trades to the EIS</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TradeConnectionFactory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables applications to obtain connection
handles to the EIS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TradeProcessingException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates that a problem occurred
processing a trade request</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>ResourceAccessBean</code> managed bean in the <code>trading-war</code> module
configures a connection factory for the <code>trading-rar</code> resource adapter
by using the <code>@ConnectionFactoryDefinition</code> annotation as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Named</span>
<span class="annotation">@SessionScoped</span>
<span class="annotation">@ConnectionFactoryDefinition</span>(
    name = <span class="string"><span class="delimiter">&quot;</span><span class="content">java:comp/env/eis/TradeConnectionFactory</span><span class="delimiter">&quot;</span></span>,
    interfaceName = <span class="string"><span class="delimiter">&quot;</span><span class="content">jakarta.tutorial.trading.rar.api.TradeConnectionFactory</span><span class="delimiter">&quot;</span></span>,
    resourceAdapter = <span class="string"><span class="delimiter">&quot;</span><span class="content">#trading-rar</span><span class="delimiter">&quot;</span></span>,
    minPoolSize = <span class="integer">5</span>,
    transactionSupport =
            TransactionSupport.TransactionSupportLevel.NoTransaction
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ResourceAccessBean</span> <span class="directive">implements</span> <span class="predefined-type">Serializable</span> { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>name</code> parameter specifies the JNDI name for the connection factory.
This example registers the connection factory in the <code>java:comp</code> scope.
You can use the <code>ConnectionFactoryDefinition</code> annotation to specify a
different scope, such as <code>java:global</code>, <code>java:app</code>, or <code>java:module</code>.
The <code>AdministeredObjectDefinition</code> annotation also enables you to
register administered connector objects in the JNDI namespace.</p>
</div>
<div class="paragraph">
<p>The <code>interfaceName</code> parameter specifies the interface implemented by the
connection factory included in the resource adapter. In this example,
this is a custom interface.</p>
</div>
<div class="paragraph">
<p>The <code>resourceAdapter</code> parameter specifies the name of the resource
adapter that contains the connection factory implementation. The <code>#</code>
prefix in <code>#trading-rar</code> indicates that <code>trading-rar</code> is an embedded
resource adapter that is bundled in the same EAR as this web
application.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Note</strong>:</p>
</div>
<div class="paragraph">
<p>You can also configure a connection factory for a previously deployed
outbound resource adapter using the administration commands from your
application server. However, this is a vendor-specific procedure.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The managed bean obtains a connection factory object using resource
injection as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">...
public <span class="type">class</span> <span class="class">ResourceAccessBean</span> <span class="directive">implements</span> <span class="predefined-type">Serializable</span> {
    <span class="annotation">@Resource</span>(lookup = <span class="string"><span class="delimiter">&quot;</span><span class="content">java:comp/env/eis/TradeConnectionFactory</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> TradeConnectionFactory connectionFactory;
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The managed bean uses the connection factory to obtain connection
handles as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">TradeConnection connection = connectionFactory.getConnection();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resource adapter returns a connection handle associated with a
physical connection to the EIS. Once a connection handle is available,
the managed bean submits a trade and obtains the response as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">TradeOrder order = <span class="keyword">new</span> TradeOrder();
order.setNShares(<span class="integer">1000</span>);
order.setTicker(TradeOrder.Ticker.YYYY);
order.setOrderType(TradeOrder.OrderType.BUY);
order.setOrderClass(TradeOrder.OrderClass.MARKET);
...
try {
    TradeResponse response = connection.submitOrder(order);
    ...
} <span class="keyword">catch</span> (TradeProcessingException ex) { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="sthref243"></a><a id="implementing-the-outbound-resource-adapter"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="implementing-the-outbound-resource-adapter"><a class="anchor" href="#implementing-the-outbound-resource-adapter"></a>Implementing the Outbound Resource Adapter</h5>
<div class="paragraph">
<p>The <code>trading-rar</code> module implements the outbound contract and a custom
client interface for the simple legacy stock trading platform EIS used
in this example. The architecture of the outbound resource adapter is
shown in <a href="#CHDIGAJE">Figure 56-2</a>.</p>
</div>
<div id="CHDIGAJE" class="paragraph">
<div class="title"><strong>Figure 56-2 Architecture of the trading Example</strong></div>
<p><span class="image"><img src="data:image/png;base64," alt="This figure shows the classes in each of the modules of the trading example."></span></p>
</div>
<div class="paragraph">
<p>The <code>trading-rar</code> module implements the interfaces listed in
<a href="#CHDIBBIC">Table 56-2</a>.</p>
</div>
<div class="paragraph">
<p><a id="sthref245"></a><a id="CHDIBBIC"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 56-2 Interfaces Implemented in the trading-rar Module</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Package</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Interface</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.resource.spi</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ResourceAdapter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the lifecycle methods
of the resource adapter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.resource.spi</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ManagedConnectionFactory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines a connection
factory that the connection manager from the application server uses to
obtain physical connections to the EIS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.resource.spi</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ManagedConnection</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines a physical
connection to the EIS that can be managed by the connection manager</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trading.rar.api</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TradeConnectionFactory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines a connection
factory that applications use to obtain connection handles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trading.rar.api</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TradeConnection</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines a connection handle that
applications use to interact with the EIS</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When the <code>trading-ear</code> archive is deployed and a connection pool
resource is configured as described in <a href="#CHDFADJD">Using the Outbound
Resource Adapter</a>, the application server creates
<code>TradeConnectionFactory</code> objects that applications can obtain using
resource injection. The <code>TradeConnectionFactory</code> implementation
delegates creating connections to the connection manager provided by the
application server.</p>
</div>
<div class="paragraph">
<p>The connection manager uses the <code>ManagedConnectionFactory</code>
implementation to obtain physical connections to the EIS and maintains a
pool of active physical connections. When an application requests a
connection handle, the connection manager associates a connection from
the pool with a new connection handle that the application can use.
Connection pooling improves application performance and simplifies
resource adapter development.</p>
</div>
<div class="paragraph">
<p>For more details, see the code and the comments in the <code>trading-rar</code>
module.</p>
</div>
<div class="paragraph">
<p><a id="sthref246"></a><a id="running-the-trading-example"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="running-the-trading-example"><a class="anchor" href="#running-the-trading-example"></a>Running the trading Example</h5>
<div class="paragraph">
<p>You can use either NetBeans IDE or Maven to build, package, deploy, and
run the <code>trading</code> example.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#BABCHDDC">To Run the trading Example Using NetBeans IDE</a></p>
</li>
<li>
<p><a href="#BABFJAAG">To Run the trading Example Using Maven</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="BABCHDDC"></a><a id="to-run-the-trading-example-using-netbeans-ide"></a></p>
</div>
<div class="sect5">
<h6 id="to-run-the-trading-example-using-netbeans-ide"><a class="anchor" href="#to-run-the-trading-example-using-netbeans-ide"></a>To Run the trading Example Using NetBeans IDE</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>From the File menu, choose Open Project.</p>
</li>
<li>
<p>In the Open Project dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/connectors</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>trading</code> folder.</p>
</li>
<li>
<p>Click Open Project.</p>
</li>
<li>
<p>In the Projects tab, expand the <code>trading</code> node.</p>
</li>
<li>
<p>Right-click the <code>trading-eis</code> module and select Open Project.</p>
</li>
<li>
<p>Right-click the <code>trading-eis</code> project and select Run.</p>
<div class="paragraph">
<p>The messages from the EIS appear in the Output tab:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Trade execution server listening on port <span class="integer">4004</span>.</code></pre>
</div>
</div>
</li>
<li>
<p>Right-click the <code>trading-ear</code> project and select Build.</p>
<div class="paragraph">
<p>This command packages the resource adapter and the web application in an
EAR file and deploys it to GlassFish Server.</p>
</div>
</li>
<li>
<p>Open the following URL in a web browser:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/trading/</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The web interface enables you to connect to the EIS and submit trades.
The server log shows the requests from the web application and the call
sequence that provides connection handles from the resource adapter.</p>
</div>
</li>
<li>
<p>Before undeploying the <code>trading-ear</code> application, close the
<code>trading-eis</code> application from the status bar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="BABFJAAG"></a><a id="to-run-the-trading-example-using-maven"></a></p>
</div>
</div>
<div class="sect5">
<h6 id="to-run-the-trading-example-using-maven"><a class="anchor" href="#to-run-the-trading-example-using-maven"></a>To Run the trading Example Using Maven</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/connectors/trading/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command builds and packages the resource adapter and the web
application into an EAR archive and deploys it to GlassFish Server.</p>
</div>
</li>
<li>
<p>In the same terminal window, go to the <code>trading-eis</code> directory:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">cd trading-eis</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command to run the trade execution platform:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">mvn exec:java</code></pre>
</div>
</div>
<div class="paragraph">
<p>The messages from the EIS appear in the terminal window:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Trade execution server listening on port <span class="integer">4004</span>.</code></pre>
</div>
</div>
</li>
<li>
<p>Open the following URL in a web browser:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/trading/</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The web interface enables you to connect to the EIS and submit trades.
The server log shows the requests from the web application and the call
sequence that provides connection handles from the resource adapter.</p>
</div>
</li>
<li>
<p>Before undeploying the <code>trading-ear</code> application, press Ctrl+C on
the terminal window to close the <code>trading-eis</code> application.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="CHDJEADB"></a><a id="the-traffic-example"></a></p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="the-traffic-example"><a class="anchor" href="#the-traffic-example"></a>The traffic Example</h4>
<div class="paragraph">
<p>The <code>traffic</code> example demonstrates how to implement and use a simple
inbound resource adapter that receives data from a legacy EIS using a
TCP socket.</p>
</div>
<div class="paragraph">
<p>The example is in the tut-install`/examples/connectors/traffic`
directory. See <a href="#GFIUD">Chapter 2, "Using the
Tutorial Examples,"</a> for basic information on building and running
sample applications.</p>
</div>
<div class="paragraph">
<p>The example demonstrates the scenario in <a href="#CHDGFGHB">Figure 56-3</a> and
consists of the following modules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>traffic-eis</code>: A Java SE program that simulates an EIS</p>
</li>
<li>
<p><code>traffic-rar</code>: The inbound resource adapter implementation</p>
</li>
<li>
<p><code>traffic-ejb</code>: A message-driven bean that is the endpoint for incoming
messages</p>
</li>
<li>
<p><code>traffic-war</code>: A web application that displays information from the
message-driven bean</p>
</li>
<li>
<p><code>traffic-ear</code>: An enterprise archive that contains the resource
adapter, the message-driven bean, and the web application</p>
</li>
</ul>
</div>
<div id="CHDGFGHB" class="paragraph">
<div class="title"><strong>Figure 56-3 The traffic Example</strong></div>
<p><span class="image"><img src="data:image/png;base64," alt="This figure shows the components of the traffic example: a WAR communicating with an enterprise bean using a JMS topic, and a RAR communicating with an EIS over a TCP socket."></span></p>
</div>
<div class="paragraph">
<p>The <code>traffic-eis</code> module is an auxiliary project that resembles a legacy
traffic information system. It contains a Java SE program that sends
traffic status updates for several cities to any subscribed client. The
program sends the updates in JSON format over a TCP socket. For example,
a traffic update looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">{<span class="string"><span class="delimiter">&quot;</span><span class="content">report</span><span class="delimiter">&quot;</span></span>:[
    {<span class="string"><span class="delimiter">&quot;</span><span class="content">city</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">City1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">access</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">AccessA</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">status</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">GOOD</span><span class="delimiter">&quot;</span></span>},
    {<span class="string"><span class="delimiter">&quot;</span><span class="content">city</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">City1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">access</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">AccessB</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">status</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">CONGESTED</span><span class="delimiter">&quot;</span></span>},
    ...
    {<span class="string"><span class="delimiter">&quot;</span><span class="content">city</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">City5</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">access</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">AccessE</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">status</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">SLOW</span><span class="delimiter">&quot;</span></span>}
 ]}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>traffic-rar</code> module implements the inbound contract of the Jakarta Connectors specification.
This module subscribes to the traffic
information system using the TCP port indicated by the configuration
provided by the MDB and invokes the methods of the MDB to process
traffic information updates.</p>
</div>
<div class="paragraph">
<p>The <code>traffic-ejb</code> module contains a message-driven bean that activates
the resource adapter with a configuration parameter (the TCP port to
subscribe to the traffic information system). The MDB contains a method
to process the traffic information updates. This method filters the
updates for a particular city and publishes the results to a Java
Message Service (JMS) topic.</p>
</div>
<div class="paragraph">
<p>The <code>traffic-war</code> module contains a message-driven bean that receives
filtered traffic information updates from the Jakarta Messaging topic asynchronously
and sends them to the clients using a WebSocket endpoint.</p>
</div>
<div class="paragraph">
<p><a id="sthref248"></a><a id="using-the-inbound-resource-adapter"></a></p>
</div>
<div class="sect4">
<h5 id="using-the-inbound-resource-adapter"><a class="anchor" href="#using-the-inbound-resource-adapter"></a>Using the Inbound Resource Adapter</h5>
<div class="paragraph">
<p>In most cases, Jakarta EE application developers use inbound resource
adapters developed by a third party. To use an inbound resource adapter,
a Jakarta EE application includes a message-driven bean with the following
characteristics.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The MDB implements the business interface defined by the resource
adapter.</p>
</li>
<li>
<p>The MDB specifies configuration parameters to activate the resource
adapter.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The business interface defined by the resource adapter is not specified
in the Jakarta Connectors specification; it is specific to the EIS.</p>
</div>
<div class="paragraph">
<p>The MDB in this example is defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MessageDriven</span>(
    activationConfig = {
      <span class="annotation">@ActivationConfigProperty</span>(propertyName = <span class="string"><span class="delimiter">&quot;</span><span class="content">port</span><span class="delimiter">&quot;</span></span>,
                                propertyValue = <span class="string"><span class="delimiter">&quot;</span><span class="content">4008</span><span class="delimiter">&quot;</span></span>)
    }
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">TrafficMdb</span> <span class="directive">implements</span> TrafficListener { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>TrafficListener</code> interface is defined in the API package of the
resource adapter. The resource adapter requires the MDB to provide the
<code>port</code> property.</p>
</div>
<div class="paragraph">
<p>When the MDB is deployed, it activates the <code>traffic-rar</code> resource
adapter, which invokes the methods of the MDB to process traffic
information updates. Then the MDB filters the updates for a particular
city and publishes the results to a Jakarta Messaging topic.</p>
</div>
<div class="paragraph">
<p>In this particular example, the <code>TrafficListener</code> interface is empty. In
addition to this interface, the resource adapter provides the
<code>TrafficCommand</code> annotation and uses reflection to discover which
methods in the MDB are decorated with this annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MessageDriven</span>(...)
<span class="directive">public</span> <span class="type">class</span> <span class="class">TrafficMdb</span> <span class="directive">implements</span> TrafficListener {

    <span class="annotation">@TrafficCommand</span>(name=<span class="string"><span class="delimiter">&quot;</span><span class="content">report</span><span class="delimiter">&quot;</span></span>, info=<span class="string"><span class="delimiter">&quot;</span><span class="content">Process report</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="type">void</span> processReport(<span class="predefined-type">String</span> jsonReport) { ... }
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This approach enables you to adapt the MDB to support new features in
the EIS without having to modify the <code>TrafficListener</code> interface or the
resource adapter module.</p>
</div>
<div class="paragraph">
<p><a id="sthref249"></a><a id="implementing-the-inbound-resource-adapter"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="implementing-the-inbound-resource-adapter"><a class="anchor" href="#implementing-the-inbound-resource-adapter"></a>Implementing the Inbound Resource Adapter</h5>
<div class="paragraph">
<p>The <code>traffic-rar</code> module implements the Jakarta Connectors inbound resource adapter
contract for the simple traffic
information system (EIS) used in this example. The architecture of the
inbound resource adapter is shown in <a href="#CHDHADDC">Figure 56-4</a>.</p>
</div>
<div id="CHDHADDC" class="paragraph">
<div class="title"><strong>Figure 56-4 Architecture of the traffic Example</strong></div>
<p><span class="image"><img src="data:image/png;base64," alt="This figure shows the classes in each of the components of the traffic example."></span></p>
</div>
<div class="paragraph">
<p>The <code>traffic-rar</code> module implements the interfaces listed in
<a href="#CHDEDEAF">Table 56-3</a>.</p>
</div>
<div class="paragraph">
<p><a id="sthref251"></a><a id="CHDEDEAF"></a></p>
</div>
<div class="paragraph">
<p><strong>Table 56-3 Interfaces Implemented in the traffic-rar Module</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Package</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Interface</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.resource.spi</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ResourceAdapter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the lifecycle methods
of the resource adapter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.resource.spi</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ActivationSpec</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the configuration
parameters that the MDB provides to activate the inbound resource
adapter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>javax.resource.spi</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Work</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The traffic service subscriber implements
this interface from the work management contract to wait for traffic
updates on a separate thread.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When an MDB activates the inbound resource adapter, the container
invokes the <code>endpointActivation</code> method in the <code>TrafficResourceAdapter</code>
class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Connector</span>(...)
<span class="directive">public</span> <span class="type">class</span> <span class="class">TrafficResourceAdapter</span> <span class="directive">implements</span> ResourceAdapter, <span class="predefined-type">Serializable</span> {
    ...
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> endpointActivation(MessageEndpointFactory endpointFactory,
                                   ActivationSpec spec)
                                   <span class="directive">throws</span> ResourceException {
        <span class="predefined-type">Class</span> endpointClass = endpointFactory.getEndpointClass();
        <span class="comment">/* this method is called from a new thread in the example:
        MessageEndpoint endpoint = endpointFactory.createEndpoint(null); */</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>getEndpointClass</code> method returns the <code>Class</code> type of the MDB
performing the activation, which enables the resource adapter to use
reflection to find methods annotated with <code>@TrafficCommand</code> in the MDB.</p>
</div>
<div class="paragraph">
<p>The <code>createEndpoint</code> method returns an instance of the MDB. The resource
adapter uses this instance to invoke the methods of the MDB when it
receives requests from the EIS.</p>
</div>
<div class="paragraph">
<p>After obtaining the message endpoint instance (MDB), the resource
adapter uses the work management contract to create the traffic service
subscriber thread that receives traffic updates from the EIS. The
resource adapter obtains the <code>WorkManager</code> instance from the bootstrap
context as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">WorkManager workManager;
...
<span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> start(BootstrapContext ctx) ... {
    workManager = ctx.getWorkManager();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resource adapter schedules the traffic service subscriber thread
using the work manager:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tSubscriber = <span class="keyword">new</span> TrafficServiceSubscriber(tSpec, endpoint);
workManager.scheduleWork(tSubscriber);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>TrafficServiceSubscriber</code> class implements the
<code>javax.resource.spi.Work</code> interface from the work management contract.</p>
</div>
<div class="paragraph">
<p>The traffic service subscriber thread uses reflection to invoke the
methods in the MDB:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="predefined-type">String</span> callMdb(MessageEndpoint mdb, <span class="predefined-type">Method</span> command,
                       <span class="predefined-type">String</span>... params) ... {
    <span class="predefined-type">String</span> resp;
    <span class="comment">/* this code contains proper exception handling in the sources */</span>
    mdb.beforeDelivery(command);
    <span class="predefined-type">Object</span> ret = command.invoke(mdb, (<span class="predefined-type">Object</span><span class="type">[]</span>) params);
    resp = (<span class="predefined-type">String</span>) ret;
    mdb.afterDelivery();
    <span class="keyword">return</span> resp;
}

For more details, see the code and the comments in the traffic-rar module.</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="sthref252"></a><a id="running-the-traffic-example"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="running-the-traffic-example"><a class="anchor" href="#running-the-traffic-example"></a>Running the traffic Example</h5>
<div class="paragraph">
<p>You can use either NetBeans IDE or Maven to build, package, deploy, and
run the <code>traffic</code> example.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#BABIJJEH">To Run the traffic Example Using NetBeans IDE</a></p>
</li>
<li>
<p><a href="#BABBBGBA">To Run the traffic Example Using Maven</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="BABIJJEH"></a><a id="to-run-the-traffic-example-using-netbeans-ide"></a></p>
</div>
<div class="sect5">
<h6 id="to-run-the-traffic-example-using-netbeans-ide"><a class="anchor" href="#to-run-the-traffic-example-using-netbeans-ide"></a>To Run the traffic Example Using NetBeans IDE</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>From the File menu, choose Open Project.</p>
</li>
<li>
<p>In the Open Project dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/connectors</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>traffic</code> folder.</p>
</li>
<li>
<p>Click Open Project.</p>
</li>
<li>
<p>In the Projects tab, expand the <code>traffic</code> node.</p>
</li>
<li>
<p>Right-click the <code>traffic-eis</code> module and select Open Project.</p>
</li>
<li>
<p>Right-click the <code>traffic-eis</code> project and select Run.</p>
<div class="paragraph">
<p>The messages from the EIS appear on the Output tab:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Traffic EIS accepting connections on port <span class="integer">4008</span></code></pre>
</div>
</div>
</li>
<li>
<p>In the Projects tab, right-click the <code>traffic</code> project and select
Clean and Build.</p>
<div class="paragraph">
<p>This command builds and packages the resource adapter, the MDB, and the
web application into an EAR archive and deploys it. The server log shows
the call sequence that activates the resource adapter and the filtered
traffic updates for City1.</p>
</div>
</li>
<li>
<p>Open the following URL in a web browser:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/traffic/</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The web interface shows filtered traffic updates for City1 every few
seconds.</p>
</div>
</li>
<li>
<p>After undeploying the <code>traffic-ear</code> application, close the
<code>traffic-eis</code> application from the status bar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="BABBBGBA"></a><a id="to-run-the-traffic-example-using-maven"></a></p>
</div>
</div>
<div class="sect5">
<h6 id="to-run-the-traffic-example-using-maven"><a class="anchor" href="#to-run-the-traffic-example-using-maven"></a>To Run the traffic Example Using Maven</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see
<a href="#BNADI">Starting and Stopping GlassFish
Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/connectors/traffic/traffic-eis/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command in the terminal window:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command builds and packages the traffic EIS.</p>
</div>
</li>
<li>
<p>Enter the following command in the terminal window:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">mvn exec:java</code></pre>
</div>
</div>
<div class="paragraph">
<p>The messages from the EIS appear in the terminal window:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Traffic EIS accepting connections on port <span class="integer">4008</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Leave this terminal window open.</p>
</div>
</li>
<li>
<p>Open a new terminal window and go to:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">tut-install/examples/connectors/traffic/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command builds and packages the resource adapter, the MDB, and the
web application into an EAR archive and deploys it. The server log shows
the call sequence that activates the resource adapter and the filtered
traffic updates for City1.</p>
</div>
</li>
<li>
<p>Open the following URL in a web browser:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">http:<span class="comment">//localhost:8080/traffic/</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The web interface shows the filtered traffic updates for City1 every few
seconds.</p>
</div>
</li>
<li>
<p>After undeploying the <code>traffic-ear</code> application, press Ctrl+C in the
first terminal window to close the <code>traffic-eis</code> application.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-04-26 15:32:37 UTC
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</body>
</html>